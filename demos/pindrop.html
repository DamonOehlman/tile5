<!doctype html>
<html lang="en" class="no-js">
<head>
	<meta charset="utf-8">
	<title>Dropping pins using Tile5</title>
	<script src="../dist/tile5.js"></script>
	<script src="../dist/tile5.osm.js"></script>
	<script src="../dist/tile5.cloudmade.js"></script>
</head>
<body>
	<canvas id="mapCanvas" width="400" height="300"></canvas>
	<script type ="text/javascript">
		var pintype = "multiple";

		map = new T5.Map({
		    container: 'mapCanvas',
		    provider: new T5.Geo.Cloudmade.MapProvider({
			        // demo api key, register for an API key
			        // at http://dev.cloudmade.com/
			        apikey: '7960daaf55f84bfdb166014d0b9f8d41'
		})
	});
		// Set the maps starting position 
		map.gotoPosition(T5.Geo.P.parse("-27.468 153.028"), 6);

		var cid = map.bind("geotap",
			function(absXY, relXY, touchPos, touchBounds) {
				var annotation = new T5.ImageAnnotation({
					// set the image you wish to use for the touch Pin
					imageUrl: "/media/img/pins/pin-158935-1-24.png",
					// set the image as the pin enters
					animatingImageUrl: "/media/img/pins/pin-158935-1-noshadow-24.png",
					imageAnchor: new T5.Vector(8, 24),
					xy: new T5.Geo.GeoVector(touchPos),
					tweenIn: T5.easing('bounce.out'),
					animationSpeed: 1000
				});
				if (pintype == "single"){
					map.annotations.clear();
					map.annotations.add(annotation);
				}
				else if (pintype == "multiple"){
					map.annotations.add(annotation);
				}
				// Outputs the pins location
				console.debug(touchPos.lat, touchPos.lon);
			});

		$("#sample-controls").html(
			'<button id ="clear">Clear pins</button>' +
			'<button id ="single">Drop single pin</button>' +
			'<button id ="multiple">Drop many pins</button>');

		$("#sample-controls #clear").click(function(){
			map.annotations.clear();
		});

		$("#sample-controls #single").click(function(){
			pintype = "single";
		});

		$("#sample-controls #multiple").click(function(){
			pintype = "multiple";
		});
		</script>
</body>
</html>

		