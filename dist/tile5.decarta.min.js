(function(){function H(p,I){if(p&&p.split){var J=p.split(W);if(J.length>1){p=J[0];I=J[1]}}else if(p&&p.lat){I=p.lon;p=p.lat}this.lat=parseFloat(p||0);this.lon=parseFloat(I||0)}function ja(p,I){if(p&&p.splice){for(var J=I,N=new H(Da,ta),T=new H(Ia,Za),oa=p.length;oa--;){var ga=typeof p[oa]=="string"?new H(p[oa]):p[oa];if(ga.lat<N.lat)N.lat=ga.lat;if(ga.lat>T.lat)T.lat=ga.lat;if(ga.lon<N.lon)N.lon=ga.lon;if(ga.lon>T.lon)T.lon=ga.lon}this.min=N;this.max=T;if(typeof J=="undefined"){J=this.size();J=Math.max(J.x,
J.y)*0.3}this.min=new H(N.lat-J,(N.lon-J)%360);this.max=new H(T.lat+J,(T.lon+J)%360)}else{this.min=p;this.max=I}}function ka(p){if(typeof p=="string"){var I=(p.replace(/\d|\.|\s/g,"")||"m").toLowerCase();p=parseFloat(p)*({km:1E3}[I]||1)}this.meters=p||0}var Ja=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],aa=typeof module!="undefined"&&module.exports,ua=Math.PI*2,pa=Math.PI/2,ca=Math.PI/180,va=180/Math.PI,Da=90,Ia=-Da,ta=180,Za=-ta,Pa=Da*ca,qa=-Pa,Qa=
ta*ca,Ra=-Qa,W=/[\,\s]+/;H.prototype={constructor:H,copy:function(){return new H(this.lat,this.lon)},distanceTo:function(p){if(!p||this.empty()||p.empty())return 0;var I=(p.lat-this.lat)*ca/2,J=(p.lon-this.lon)*ca/2;p=Math.sin(I)*Math.sin(I)+Math.cos(this.lat*ca)*Math.cos(p.lat*ca)*Math.sin(J)*Math.sin(J);return 6371*2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p))},equalTo:function(p){return pos&&this.lat===p.lat&&this.lon===p.lon},empty:function(){return this.lat===0&&this.lon===0},inArray:function(p){if(p)for(var I=
p.length;I--;)if(this.equal(p[I]))return true;return false},offset:function(p,I){var J=this.lat*ca,N=J+p/6371;J=this.lon*ca+Math.asin(Math.sin(I/6371)/Math.cos(J));N=(N+pa)%Math.PI-pa;J%=ua;return new H(N*va,J*va)},toBounds:function(p){var I=p.radians(),J=this.lat*ca,N=this.lon*ca;p=J-I;var T=J+I;if(p>qa&&T<Pa){J=Math.asin(Math.sin(I)/Math.cos(J));I=N-J;if(I<Ra)I+=ua;N=N+J;if(N>Qa)N-=ua}else{p=Math.max(p,qa);T=Math.min(T,Pa);I=Za;N=ta}return new ja(new H(p*va,I*va),new H(T*va,N*va))},toString:function(p){return this.lat+
(p||" ")+this.lon},valid:function(){return!(isNaN(this.lat)||isNaN(this.lon))}};ja.prototype={constructor:ja,bestZoomLevel:function(p,I){var J=this.center(),N=Ja[Math.min(Math.round(Math.abs(J.lat)*0.05),Ja.length)],T=this.size();J=Math.ceil(Math.log(Ja[3]*I/T.y)/Math.LN2);N=Math.ceil(Math.log(N*p/T.x)/Math.LN2);return Math.min(isNaN(J)?1E3:J,isNaN(N)?1E3:N)},center:function(){var p=this.size();return new H(this.min.lat+p.y/2,this.min.lon+p.x/2)},expand:function(p){return new ja(new H(this.min.lat-
p,(this.min.lon-p)%360),new H(this.max.lat+p,(this.max.lon+p)%360))},size:function(p){var I={x:0,y:this.max.lat-this.min.lat};I.x=typeof p!="undefined"&&p&&this.min.lon>this.max.lon?360-this.min.lon+this.max.lon:this.max.lon-this.min.lon;return I},toString:function(){return"min: "+this.min+", max: "+this.max},union:function(){for(var p=this.min.copy(),I=this.max.copy(),J=arguments.length;J--;)if(arguments[J]){var N=arguments[J].min,T=arguments[J].max;p.lat=Math.min(p.lat,N.lat);p.lon=Math.min(p.lon,
N.lon);I.lat=Math.max(I.lat,T.lat);I.lon=Math.max(I.lon,T.lon)}return new ja(p,I)}};ka.prototype={add:function(){for(var p=this.meters,I=arguments.length;I--;){var J=typeof arguments[I]=="string"?new ka(arguments[I]):arguments[I];p+=J.meters}return new ka(p)},radians:function(p){if(typeof p!="undefined"){this.meters=p*6371E3;return this}else return this.meters/6371E3},toString:function(){if(this.meters>1E3)return(this.meters/10|0)/100+"km";return this.meters+"m"}};var Sa=this.GeoJS={Pos:H,BBox:ja,
Distance:ka,generalize:function(p,I,J){var N=p.length,T=[],oa=null;J=(J||250)/1E3;for(N=N;N--;)if(N===0)T.unshift(p[N]);else{var ga=!oa||p[N].inArray(I)?J:oa.distanceTo(p[N]);if(p[N]&&ga>=J){T.unshift(p[N]);oa=p[N]}}return T},include:function(p){if(aa){p=p.split(",");for(var I=0;I<p.length;I++){var J=require("./plugins/"+p[I].trim()),N;for(N in J)Sa[N]=J[N]}}return Sa}};if(aa)module.exports=Sa})();
(function(){function H(){var a=arguments[0]||{},d=Array.prototype.slice.call(arguments,1),b=d.length,f,h;for(h=0;h<b;h++)if((f=d[h])!==null)for(var k in f){var e=f[k];if(a!==e)if(e!==undefined)a[k]=e}return a}function ja(a,d){if(typeof console!=="undefined")console[d||"log"](a)}function ka(a){var d=a.match(Za),b=[],f=0,h;for(h=d?d.length:0;h--;){var k=d[h].slice(1);b[k]||(b[k]=RegExp("\\{"+k+"\\}","g"))}f=b.length;return function(){var e=a;for(h=0;h<f;h++){var i=arguments[h];if(typeof i=="undefined")i=
"";e=e.replace(b[h],i)}return e}}function Ja(a,d){var b=$a*Ka(a);return oa-2*qb(d*Ea((1-b)/(1+b),$a/2))}function aa(a,d){if(W(a,Ba)){var b=a.split(rb);this.x=parseFloat(b[0]);this.y=parseFloat(b[1])}else if(a&&a.x){this.x=a.x;this.y=a.y}else{this.x=a||0;this.y=d||0}}function ua(a){this.allowCull=a}function pa(a,d,b,f){this.mercX=b;this.mercY=f;if(W(a,Ba))H(this,Cb.parseXY(a));else a&&a.toBounds?H(this,ab(a.lon,a.lat)):aa.call(this,a,d)}function ca(a,d,b,f){this.x=a||0;this.y=d||0;this.w=b||0;this.h=
f||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function va(a,d){var b=new sb(Math.sqrt(256<<a)|0);d&&d.zoomLevel===a&&d.copyInto(b);b.zoomLevel=a;return b}function Da(a,d,b,f,h,k){this.x=a;this.y=d;this.w=f||256;this.h=f||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=b;this.id=k||a+"_"+d;this.loaded=false;this.image=null}function Ia(a,d){d=H({id:"layer_"+Db++,zindex:0,animated:false,style:null,minXY:null,maxXY:null,visible:true},d);this.visible=d.visible;this.view=a;qa(H(this,d))}function ta(){qa(this)}
var Za=/\{(\d+)(?=\})/g,Pa=function(){var a=1.70158,d=Math.PI/2,b=Math.abs,f=Math.pow,h=Math.sin,k=Math.asin,e=Math.cos,i={linear:function(c,m,j,g){return j*c/g+m},backin:function(c,m,j,g){return j*(c/=g)*c*((a+1)*c-a)+m},backout:function(c,m,j,g){return j*((c=c/g-1)*c*((a+1)*c+a)+1)+m},backinout:function(c,m,j,g){return(c/=g/2)<1?j/2*c*c*(((a*=1.525)+1)*c-a)+m:j/2*((c-=2)*c*(((a*=1.525)+1)*c+a)+2)+m},bouncein:function(c,m,j,g){return j-i.bounceout(g-c,0,j,g)+m},bounceout:function(c,m,j,g){return(c/=
g)<1/2.75?j*7.5625*c*c+m:c<2/2.75?j*(7.5625*(c-=1.5/2.75)*c+0.75)+m:c<2.5/2.75?j*(7.5625*(c-=2.25/2.75)*c+0.9375)+m:j*(7.5625*(c-=2.625/2.75)*c+0.984375)+m},bounceinout:function(c,m,j,g){return c<g/2?i.bouncein(c*2,0,j,g)/2+m:i.bounceout(c*2-g,0,j,g)/2+j/2+m},cubicin:function(c,m,j,g){return j*(c/=g)*c*c+m},cubicout:function(c,m,j,g){return j*((c=c/g-1)*c*c+1)+m},cubicinout:function(c,m,j,g){if((c/=g/2)<1)return j/2*c*c*c+m;return j/2*((c-=2)*c*c+2)+m},elasticin:function(c,m,j,g,o,n){if(c==0)return m;
if((c/=g)==1)return m+j;n||(n=g*0.3);if(!o||o<b(j)){o=j;j=n/4}else j=n/T*k(j/o);return-(o*f(2,10*(c-=1))*h((c*g-j)*T/n))+m},elasticout:function(c,m,j,g,o,n){var u;if(c==0)return m;if((c/=g)==1)return m+j;n||(n=g*0.3);if(!o||o<b(j)){o=j;u=n/4}else u=n/T*k(j/o);return o*f(2,-10*c)*h((c*g-u)*T/n)+j+m},elasticinout:function(c,m,j,g,o,n){var u;if(c==0)return m;if((c/=g/2)==2)return m+j;n||(n=g*0.3*1.5);if(!o||o<b(j)){o=j;u=n/4}else u=n/T*k(j/o);if(c<1)return-0.5*o*f(2,10*(c-=1))*h((c*g-u)*T/n)+m;return o*
f(2,-10*(c-=1))*h((c*g-u)*T/n)*0.5+j+m},quadin:function(c,m,j,g){return j*(c/=g)*c+m},quadout:function(c,m,j,g){return-j*(c/=g)*(c-2)+m},quadinout:function(c,m,j,g){if((c/=g/2)<1)return j/2*c*c+m;return-j/2*(--c*(c-2)-1)+m},sinein:function(c,m,j,g){return-j*e(c/g*d)+j+m},sineout:function(c,m,j,g){return j*h(c/g*d)+m},sineinout:function(c,m,j,g){return-j/2*(e(Math.PI*c/g)-1)+m}};return function(c){c=c.replace(/[\-\_\s\.]/g,"").toLowerCase();return i[c]||i.linear}}(),qa=function(){function a(b,f){var h=
b.hasOwnProperty("obsHandlers")?b.obsHandlers:null;h[f]||(h[f]=[]);return h[f]}var d=0;return function(b){if(!b)return null;if(!(b.hasOwnProperty("obsHandlers")?b.obsHandlers:null))b.obsHandlers={};if(!b.hasOwnProperty("bind")){b.bind=function(f,h){var k="callback"+d++;a(b,f).unshift({fn:h,id:k});return k};b.triggerCustom=function(f,h){var k=a(b,f),e={cancel:false,name:f,source:this},i;for(i in h)e[i]=h[i];if(!k)return null;i=Array.prototype.slice.call(arguments,2);b.eventInterceptor&&b.eventInterceptor(f,
e,i);i.unshift(e);for(var c=k.length;c--&&!e.cancel;)k[c].fn.apply(this,i);return e};b.trigger=function(f){var h=Array.prototype.slice.call(arguments,1);h.splice(0,0,f,null);return b.triggerCustom.apply(this,h)};b.unbind=function(f,h){if(typeof f==="undefined")b.obsHandlers={};else for(var k=a(b,f),e=0;k&&e<k.length;e++)if(k[e].id===h){k.splice(e,1);break}return b}}return b}}(),Qa=function(){function a(d,b,f,h){if(typeof d[h]=="undefined")d[h]=function(k){if(typeof k!="undefined"){b[h]=k;f[h]&&f[h](k);
return d}else return b[h]}}return function(d,b,f){b=b||d;for(var h in b)typeof b[h]!="function"&&a(d,b,f,h);return d}}(),Ra=Array.prototype.indexOf||function(a){for(var d=0;d<this.length;d++)if(this[d]===a)return d;return-1},W=function(){var a={NaN:1,Infinity:1,"-Infinity":1},d=String.prototype.toLowerCase,b=Object.prototype.toString;return function(f,h){h=d.call(h);if(h=="finite")return!a.hasOwnProperty(+f);return h=="null"&&f===null||h==typeof f||h=="object"&&f===Object(f)||h=="array"&&Array.isArray&&
Array.isArray(f)||b.call(f).slice(8,-1).toLowerCase()==h}}(),Sa=function(){function a(k){var e=document.createElement("script"),i=false;e.src=k;e.async=true;e.onload=e.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){i=true;e.onload=e.onreadystatechange=null;e&&e.parentNode&&e.parentNode.removeChild(e)}};h||(h=document.getElementsByTagName("head")[0]);h.appendChild(e)}function d(k,e,i){k+=k.indexOf("?")>=0?"&":"?";var c="json"+ ++f;
window[c]=function(m){e(m);window[c]=null;try{delete window[c]}catch(j){}};a(k+(i?i:"callback")+"="+c);return c}function b(k,e,i){var c=require("request");k=k+(k.indexOf("?")>=0?"&":"?")+(i?i:"callback")+"=cb";c({uri:k},function(m,j,g){if(m)e({error:m});else{m=g.replace(/^.*\(/,"").replace(/\).*$/,"");e(JSON.parse(m))}})}var f=0,h;return typeof window!="undefined"?d:b}();INTERACT=function(){function a(o){return function(n,u){o.addEventListener(n,u,false)}}function d(o){return function(n,u){o.removeEventListener(n,
u,false)}}function b(o){return function(n,u){o.attachEvent("on"+n,u)}}function f(o,n){return{x:o?o:0,y:n?n:0,count:1}}function h(o,n){j.push(H({handler:null,checks:{},type:o},n))}function k(o){var n=0,u=0;if(o.offsetParent){do{n+=o.offsetLeft;u+=o.offsetTop;o=o.offsetParent}while(o)}return{left:n,top:u}}function e(o,n){return{source:o,target:n.target?n.target:n.srcElement}}function i(o,n){for(var u=o.target?o.target:o.srcElement;u&&u!==n;)u=u.parentNode;return u&&u===n}function c(o,n){return{x:o.x-
(n?n.left:0),y:o.y-(n?n.top:0)}}function m(o,n){if(o.preventDefault){o.preventDefault();o.stopPropagation()}else if(typeof o.cancelBubble!="undefined")o.cancelBubble=true;n&&o.stopImmediatePropagation&&o.stopImmediatePropagation()}var j=[],g=function(o,n,u){u=H({binder:null,unbinder:null,observable:null},u);for(var z=u.observable,F=[],S,v,E={bind:function(){return z.bind.apply(null,arguments)},unbind:function(){z.unbind();for(y=0;y<F.length;y++)F[y].unbind();return E}},y=0;y<n.length;y++)F.push(n[y](o,
z,u));z.bind("pointerDown",function(){v=S=0});z.bind("pointerMove",function(l,t,q,r){S+=r.x||0;v+=r.y||0});z.bind("pointerUp",function(l,t,q){Math.abs(S)>20||Math.abs(v)>20||z.triggerCustom("tap",l,t,q)});return E};h("pointer",{handler:function(o,n,u){function z(D){if(D.pageX&&D.pageY)return f(D.pageX,D.pageY);else{var K=document.documentElement,V=document.body;return f(D.clientX+(K&&K.scrollLeft||V&&V.scrollLeft||0)-(K&&K.clientLeft||V&&V.clientLeft||0),D.clientY+(K&&K.scrollTop||V&&V.scrollTop||
0)-(K&&K.clientTop||V&&V.clientTop||0))}}function F(D){if(i(D,o))if(C=y(D)){var K=z(D);o.style.cursor="move";m(D,true);U=K.x;P=K.y;x=f(U,P);n.triggerCustom("pointerDown",e("mouse",D),x,c(x,k(o)))}}function S(D){var K=z(D);B=K.x;L=K.y;if(i(D,o))t(D,C?"pointerMove":"pointerHover")}function v(D){if(C&&y(D)){C=false;if(i(D,o)){o.style.cursor="default";t(D,"pointerUp")}}}function E(D){if(i(D,o)){var K;D=D||window.event;if(D.detail){if(typeof D.axis=="undefined"||D.axis===2)K=-D.detail*q}else{K=D.wheelDeltaY?
D.wheelDeltaY:D.wheelDelta;if(window.opera)K=-K}if(K){var V=f(B,L);n.triggerCustom("zoom",e("mouse",D),V,c(V,k(o)),K/r,"wheel");m(D);D.returnValue=false}}}function y(D){D=D||window.event;return(D.which||D.button)==1}function l(){return false}function t(D,K,V,ba,G){V=typeof V!="undefined"?V:B;ba=typeof ba!="undefined"?ba:L;var Q=V-U,O=ba-P,fa=f(V,ba);n.triggerCustom(K,e("mouse",D),fa,c(fa,k(o)),f(Q,O));if(typeof G=="undefined"||G){U=V;P=ba}}u=H({},u);var q=120,r=q*8,C=false,x,B,L,U,P;u.binder("mousedown",
F);u.binder("mousemove",S);u.binder("mouseup",v);u.binder("dblclick",function(D){if(i(D,o)){var K=z(D);n.triggerCustom("doubleTap",e("mouse",D),K,c(K,k(o)))}});u.binder("selectstart",l);u.binder("dragstart",l);u.binder("mousewheel",E);u.binder("DOMMouseScroll",E);return{unbind:function(){u.unbinder("mousedown",F);u.unbinder("mousemove",S);u.unbinder("mouseup",v);u.unbinder("mousewheel",E);u.unbinder("DOMMouseScroll",E)}}},checks:{touch:false}});h("pointer",{handler:function(o,n,u){function z(G){if(G.count<
2)return 0;var Q=G.x-G.next.x;G=G.y-G.next.y;return~~Math.sqrt(Q*Q+G*G)}function F(G,Q,O){Q=Q?Q:0;O=O?O:0;for(var fa={x:G.x-Q,y:G.y-O,id:G.id,count:G.count},X=fa;G.next;){G=G.next;X=X.next={x:G.x-Q,y:G.y-O,id:G.id}}return fa}function S(G,Q){var O=G[Q?Q:"touches"],fa,X;if(O.length===0)return null;X=fa={x:O[0].pageX,y:O[0].pageY,id:O[0].identifier,count:O.length};for(var Z=1,wa=O.length;Z<wa;Z++)X=X.next={x:O[Z].pageX,y:O[Z].pageY,id:O[Z].identifier};return fa}function v(G){if(i(G,o)){B=k(o);var Q=
S(G,"changedTouches"),O=F(Q,B.left,B.top);if(!U){L=r;n.triggerCustom("pointerDown",e("touch",G),Q,O)}V&&n.triggerCustom("pointerDownMulti",e("touch",G),Q,O);U=S(G);if(U.count>1)D=z(U);ba=1;K=F(U)}}function E(G){if(i(G,o)){m(G);P=S(G);if(L==r)L=Math.abs(U.x-P.x)>t||Math.abs(U.y-P.y)>t?q:r;if(L!=r){L=P.count>1?x:C;if(L==x)if(U.count===1){U=F(P);D=z(U)}else{var Q=z(P);if(Math.abs(D-Q)<l)L=C;else{var O;O=P.x;var fa=P.next.x,X=P.y,Z=P.next.y;O={x:(O<fa?O:fa)+(Math.abs(O-fa)>>1),y:(X<Z?X:Z)+(Math.abs(X-
Z)>>1)};Q=Q/D;fa=Q-ba;n.triggerCustom("zoom",e("touch",G),O,c(O,B),fa,"pinch");ba=Q}}L==C&&n.triggerCustom("pointerMove",e("touch",G),P,F(P,B.left,B.top),f(P.x-K.x,P.y-K.y));V&&n.triggerCustom("pointerMoveMulti",e("touch",G),P,F(P,B.left,B.top))}K=F(P)}}function y(G){if(i(G,o)){var Q=S(G,"changedTouches"),O=F(Q,B.left,B.top);P=S(G);if(!P){n.triggerCustom("pointerUp",e("touch",G),Q,O);U=null}V&&n.triggerCustom("pointerUpMulti",e("touch",G),Q,O)}}u=H({detailed:false,inertia:false},u);var l=20,t=7,q=
0,r=1,C=2,x=3,B,L,U,P,D,K,V=u.detailed,ba=1;u.binder("touchstart",v);u.binder("touchmove",E);u.binder("touchend",y);ja("initialized touch handler");return{unbind:function(){u.unbinder("touchstart",v);u.unbinder("touchmove",E);u.unbinder("touchend",y)}}},checks:{touch:true}});return{register:h,watch:function(o,n,u){n=H({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},n);capabilities=H({touch:"ontouchstart"in window},u);if(!n.observable){ja("creating observable");
n.observable=qa({});globalOpts=n}n.binder=(n.isIE?b:a)(n.bindTarget||document);n.unbinder=(n.isIE?b:d)(n.bindTarget||document);u=n.types;for(var z=capabilities,F=[],S=j.length;S--;){var v=j[S],E=!u||u.indexOf(v.type)>=0,y=true,l;for(l in v.checks){var t=v.checks[l];ja("checking "+l+" capability. require: "+t+", capability = "+z[l]);y=y&&t===z[l]}if(E&&y)F[F.length]=v.handler}return new g(o,F,n)}}}();var p=this.T5=qa({}),I=function(){var a={};return{create:function(d,b){if(a[d][b])return a[d][b].apply(null,
Array.prototype.slice.call(arguments,2));throw N(d,b);},get:function(d,b){return a[d]?a[d][b]:null},register:function(d,b,f){a[d]||(a[d]={});a[d][b]&&ja(J(d,b),"warn");a[d][b]=f}}}(),J=ka("Registration of {0}: {1} will override existing definition"),N=ka("Could not create {0} of type: {1}");ka("Could not create drawable of type: {0}");var T=Math.PI*2,oa=Math.PI/2,ga=Math.PI/180,bb=180/Math.PI,$a=0.08181919084262157,xa=Math.abs,cb=Math.round,tb=Math.min,db=Math.max,Ea=Math.pow,Eb=Math.sqrt,kb=Math.log,
Ka=Math.sin,eb=Math.cos,qb=Math.atan,Fa="undefined",Ba="string",Ca="number",ra=I.register,La=I.create,Fb=I.get,Gb=0,Db=0,rb=/[\,\s]+/,Ma=function(){function a(e){h++;e=Y?window.mozAnimationStartTime||e||(new Date).getTime():(new Date).getTime();for(var i=f.length;i--;){var c=f[i];h%c.every===0&&c.cb(e)}k&&animFrame(a)}var d=1E3/60,b=["r","webkitR","mozR","oR","msR"],f=[],h=0,k=Y&&function(){for(var e=0;e<b.length;e++)window.animFrame=window.animFrame||window[b[e]+"equestAnimationFrame"];return animFrame}();
k?animFrame(a):setInterval(a,1E3/60);return{attach:function(e,i){f[f.length]={cb:e,every:i?cb(i/d):1}},detach:function(e){for(var i=f.length;i--;)if(f[i].cb===e){f.splice(i,1);break}}}}(),Cb=function(){var a=/^xy\((.*)\).*$/i;return{parseXY:function(d){if(!a.test(d)){d=d.split(rb);return ab(d[1],d[0])}}}}(),Y=typeof window!="undefined"?function(){function a(h){for(var k=0;k<h.length;k++){var e=h[k];if(typeof document.body.style[e]!="undefined")return e}}var d={"-webkit-user-select":"none",position:"absolute"},
b,f;b=a(["-webkit-transform","MozTransform"]);css3DTransformProp=a(["WebkitPerspective","MozPerspective"]);f=a(["-webkit-transform-origin","MozTransformOrigin"]);return{transforms:W(b,Ba),create:function(h,k,e){h=document.createElement(h);var i=[];e=e||{};h.className=k||"";for(var c in e)i[i.length]=c+": "+e[c];h.style.cssText=i.join(";");return h},move:function(h,k,e,i,c){if(b){h.style[b]="translate("+k+"px, "+e+"px) "+(i||[]).join(" ");if(c&&f)h.style[f]=c.x+"px "+c.y+"px"}else{h.style.left=k+"px";
h.style.top=e+"px"}},styles:function(h){return H({},d,h)}}}():null,ub=function(){function a(){for(var h=f.length,k=h;k--;)try{f[k](h)}catch(e){ja(e.toString(),"error")}}var d=20,b=50,f=[];return{process:function(h,k,e,i){function c(g){g=(m||b)/g;if(j<h.length){var o=h.slice(j,j+g);g=o.length;var n=m?0:(new Date).getTime();k(o,g);if(!m)m=(o=((new Date).getTime()-n)/g)?d/o|0:h.length;j+=g}else{for(g=f.length;g--;)if(f[g]===c){f.splice(g,1);break}f.length===0&&Ma.detach(a);e&&e()}}var m,j=0;if(Y&&h.length>
(i||0))f.push(c)===1&&Ma.attach(a);else{k(h,h.length);e&&e()}}}}(),ab=ab||function(a,d){var b=parseFloat(d)*ga;b=Ka(b);var f=$a*b;b=kb((1+b)/(1-b)*Ea((1-f)/(1+f),$a))/2;return new pa(0,0,parseFloat(a)*ga,b)},lb=lb||function(a,d){for(var b=Ea(Math.E,-d),f=oa-2*qb(b),h=Ja(f,b),k=0;k<12&&xa(f-h)>1.0E-7;){f=h;h=Ja(f,b);k++}return new GeoJS.Pos(h*bb,a%360*bb)};aa.prototype={constructor:aa,add:function(){for(var a=this.x,d=this.y,b=arguments.length;b--;){a+=arguments[b].x;d+=arguments[b].y}return this.copy(a,
d)},copy:function(a,d){var b=H({},this);b.x=a||b.x;b.y=d||b.y;return b},equals:function(a){return this.x===a.x&&this.y===a.y},offset:function(a,d){return this.copy(this.x+a,this.y+d)},relative:function(a){a=a.viewport();return this.copy(this.x-a.x-a.padding.x,this.y-a.y-a.padding.y)},rotate:function(a,d){d=d||new aa(0,0);var b=this.x-d.x,f=this.y-d.y;return new aa(d.x+eb(a)*b+-Ka(a)*f,d.y+Ka(a)*b+eb(a)*f)},scale:function(a,d){d=d||new aa(0,0);return new aa(d.x+(this.x-d.x)*a,d.y+(this.y-d.y)*a)},
sync:function(){return this},toString:function(){return this.x+", "+this.y}};ua.prototype=H([],{cull:function(a){if(this.allowCull){var d=a.x,b=a.y,f=a.x+a.w;a=a.y+a.h;for(var h=Infinity,k=0,e,i=this.length;i--;)if(e=this[i].x>=d&&this[i].x<=f&&this[i].y>=b&&this[i].y<=a){h=i<h?i:h;k=i>k?i:k}return this.slice(db(h-1,0),tb(k+1,this.length))}return this},simplify:function(a){a=a||3;for(var d=new ua(this.allowCull),b=null,f=this.length;f--;){var h=this[f];if(include=!b||f===0||xa(h.x-b.x)+xa(h.y-b.y)>
a){d.unshift(h);b=h}}return d}});pa.prototype=H(new aa,{constructor:pa,pos:function(){return lb(this.mercX,this.mercY)},sync:function(a,d){var b;if(!(b=a.rpp)){b=a.zoom();b=T/(256<<b)}b=b;if(d){this.mercX=this.x*b-Math.PI;this.mercY=Math.PI-this.y*b}else{this.x=cb(((this.mercX||0)+Math.PI)/b);this.y=cb((Math.PI-(this.mercY||0))/b)}return this}});ca.prototype={constructor:ca,buffer:function(a,d){return new ca(this.x-a,this.y-(d||a),this.w+a*2,this.h+(d||a)*2)},center:function(){return new aa(this.x+
(this.w>>1),this.y+(this.h>>1))}};Hits=function(){return{diffHits:function(a,d){var b=[],f={},h;for(h=d.length;h--;)f[d[h].target.id]=true;for(h=a.length;h--;)f[a[h].target.id]||(b[b.length]=a[h]);return b},init:function(a,d,b,f,h){return{type:a,x:h.x,y:h.y,gridX:f.x|0,gridY:f.y|0,elements:[],absXY:d,relXY:b}},initHit:function(a,d,b){return{type:a,target:d,drag:b}},triggerEvent:function(a,d,b,f){d.triggerCustom(a.type+(b?b:"Hit"),{hitType:a.type},f?f:a.elements,a.absXY,a.relXY,new pa(a.gridX,a.gridY))}}}();
var sb=function(a){function d(k,e){var i=b[k],c;i||(i=b[k]=[]);(c=i[e])||(c=i[e]=[]);return c}a=a||128;var b=[],f={},h=0;return{copyInto:function(k){for(var e in f){var i=f[e];k.insert(i.bounds||i,i,e)}},insert:function(k,e,i){var c=k.x/a|0,m=k.y/a|0,j=(k.x+k.w)/a|0;k=(k.y+k.h)/a|0;i=i||e.id||"obj_"+h++;f[i]=e;for(e=c;e<=j;e++)for(c=m;c<=k;c++)d(e,c).push(i)},remove:function(k,e,i){i=i||e.id;if(f[i]){var c=k.x/a|0;e=k.y/a|0;var m=(k.x+k.w)/a|0;k=(k.y+k.h)/a|0;delete f[i];for(c=c;c<=m;c++)for(var j=
e;j<=k;j++){var g=d(c,j),o=Ra.call(g,i);o>=0&&g.splice(o,1)}}},search:function(k){var e=k.y/a|0,i=(k.x+k.w)/a|0,c=(k.y+k.h)/a|0,m=[],j=[];for(k=k.x/a|0;k<=i;k++)for(var g=e;g<=c;g++)m=m.concat(d(k,g));m.sort();for(e=m.length;e--;){i=m[e];if(c=f[i])j[j.length]=c;for(;e>0&&m[e-1]==i;)e--}return j}}},fb=function(){var a={},d=0;(new Date).getTime();var b={},f=[];Ma.attach(function(h){h=h||(new Date).getTime();for(var k=0;k<f.length;){var e=f[k],i=b[e],c=b[e].image&&b[e].image.complete&&b[e].image.width>
0,m=h-i.start;m=c||m>=3E4;if(c){c=i.callbacks;a[e]=i.image;for(var j=0;j<c.length;j++)c[j](i.image,true)}if(m){f.splice(k,1);delete b[e]}else k++}},250);return function(h,k){var e=h&&k?a[h]:null;if(e&&e&&e.complete&&e.width>0)k(e);else if(e=b[h])e.callbacks.push(k);else{e=new Image;e.id="_ldimg"+ ++d;b[h]={start:(new Date).getTime(),image:e,callbacks:[k]};e.src=h;f[f.length]=h}}}();Da.prototype={constructor:Da,load:function(a){var d=this;fb(this.url,function(b){d.loaded=true;d.image=b;a&&a()})}};
var Hb=function(){return qa({fastpan:true,applyStyle:function(){},applyTransform:function(a,d,b){return{restore:null,x:d,y:b}},getDimensions:function(){return{width:0,height:0}},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,reset:function(){}})};ra("renderer","canvas",function(a,d,b,f,h){function k(){function l(r,C){this.save();this.setTransform(1,0,0,1,0,0);var x=this.isPointInPath_old(r,C);this.restore();return x}var t=CanvasRenderingContext2D.prototype,
q=document.createElement("canvas").getContext("2d");q.translate(50,0);q.moveTo(125,50);q.arc(100,50,25,0,360,false);if(!q.isPointInPath(150,50)){t.isPointInPath_old=t.isPointInPath;t.isPointInPath=l}}function e(l,t,q){var r,C;u[t]=function(x){for(r=E.length;r--;)if(C=q[E[r]])x[y[r]]=C}}function i(l,t,q){return{draw:q||v,viewport:l,hit:t&&g.isPointInPath(t.x,t.y),vpX:o,vpY:n,context:g}}f=H({},f);var c,m,j,g,o=0,n=0,u={},z=null,F={},S=function(){},v=function(){this.fill&&g.fill();this.stroke&&g.stroke()},
E=["fill","stroke","lineWidth","opacity"],y=["fillStyle","strokeStyle","lineWidth","globalAlpha"];Y&&k();if(d){c=d.offsetWidth;m=d.offsetHeight;j=Y?Y.create("canvas",null,{position:"absolute","z-index":1}):new Canvas;j.width=c;j.height=m;a.attachFrame(j,true);g=null}b=H(h,{applyStyle:function(l){var t=u[l],q=g&&g.canvas?g.canvas.id:"default",r;F[q]||(F[q]=[]);r=F[q].pop()||"reset";if(t){F[q].push(l);t(g);return r}},applyTransform:function(l){if(l.translateX!==0||l.translateY!==0||l.scaling!==1||l.rotation!==
0){g.save();z={undo:function(){g.restore();z=null},x:l.xy.x,y:l.xy.y};g.translate(l.xy.x-o+l.translateX,l.xy.y-n+l.translateY);l.rotation!==0&&g.rotate(l.rotation);l.scaling!==1&&g.scale(l.scaling,l.scaling)}return z},drawTiles:function(l,t,q){for(var r=t.length;r--;){l=t[r];if(!l.loaded&&q)l.load(a.invalidate);else l.image&&g.drawImage(l.image,l.x-o,l.y-n)}},prepare:function(l,t){var q,r=false;if(g)g.restore();else if(j)g=j.getContext("2d");for(q=l.length;q--;)r=r||l[q].clip;o=t.x;n=t.y;if(g){r||
g.clearRect(0,0,c,m);g.save();g.globalCompositeOperation="source-over"}return g},prepArc:function(l,t,q){g.beginPath();g.arc(l.xy.x-(z?z.x:o),l.xy.y-(z?z.y:n),l.size>>1,l.startAngle,l.endAngle,false);return i(t,q)},prepImage:function(l,t,q,r){var C=(r.x||l.xy.x)-(z?z.x:o),x=(r.y||l.xy.y)-(z?z.y:n),B=r.image||l.image;if(B){g.beginPath();g.rect(C,x,r.width||B.width,r.height||B.height);return i(t,q,function(){g.drawImage(B,C,x,r.width||B.width,r.height||B.height)})}},prepMarker:function(l,t,q){var r=
l.xy.x-(z?z.x:o),C=l.xy.y-(z?z.y:n),x=l.size,B=undefined;g.beginPath();switch(l.markerType.toLowerCase()){case "image":B=S;g.rect(r-(x>>1),C-(x>>1),x,x);if(l.reset&&l.image){l.image=null;l.reset=false}l.image?g.drawImage(l.image,r-(x>>1),C-(x>>1),x,x):fb(l.imageUrl,function(L){l.image=L;g.drawImage(l.image,r-(x>>1),C-(x>>1),x,x)});break;default:g.moveTo(r,C);g.lineTo(r-(x>>1),C-x);g.lineTo(r+(x>>1),C-x);g.lineTo(r,C)}return i(t,q,B)},prepPoly:function(l,t,q,r){var C=true;l=r.points||l.points().cull(t);
r=z?z.x:o;var x=z?z.y:n;g.beginPath();for(var B=l.length;B--;){var L=l[B].x-r,U=l[B].y-x;if(C){g.moveTo(L,U);C=false}else g.lineTo(L,U)}return i(t,q)},getContext:function(){return g}});(function(){vb.each(function(l,t){e(null,l,t)});p.bind("styleDefined",e)})();b.bind("detach",function(){d.removeChild(j)});b.bind("resize",function(){});return b});ra("renderer","dom",function(a,d,b,f,h){function k(j){var g=j.image=new Image;c[j.id]=j;g.src=j.url;g.onload=function(){if(m[j.id])i.appendChild(this);else j.image=
null};g.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";return g}function e(j,g,o){var n=[],u;for(u in j){var z=j[u];if(o?z[o]:
!g[u]){if(z.image&&z.image.parentNode){i.removeChild(z.image);z.image=null}n[n.length]=u}}for(g=n.length;g--;)delete j[n[g]]}var i=null,c={},m={};i=Y.create("div","",Y.styles({width:d.offsetWidth+"px",height:d.offsetHeight+"px"}));d.childNodes.length>0?d.insertBefore(i,d.childNodes[0]):d.appendChild(i);a.attachFrame(i);b=H(h,{drawTiles:function(j,g,o){for(var n,u=j.x,z=j.y,F=g.length;F--;){j=g[F];if(j.url){(n=j.image||(o?k(j):null))&&Y.move(n,j.x-u,j.y-z);m[j.id]=j}}}});b.bind("predraw",function(){e(c,
m);m={}});b.bind("detach",function(){d.removeChild(i)});a.bind("reset",function(){for(e(c,m={});i.childNodes.length>0;)i.removeChild(i.childNodes[0])});return b});var vb=function(){function a(b,f){if(W(b,Ba)){p.trigger("styleDefined",b,d[b]=f);return b}else{var h=[],k;for(k in b)h[h.length]=a(k,b[k]);return h}}var d={};a({reset:{fill:"#ffffff",opacity:1},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});
return{resetStyle:"reset",each:function(b){for(var f in d)b(f,d[f])},get:function(b){return d[b]},define:a}}(),Bb=function(a,d){function b(s,w,A,M){s=r?db(da+Ea(2,M)-1,0.125):M>0?2:0.5;l(s,false,true)}function f(s,w){var A=ea&&ea.projectXY?ea.projectXY(s,w):null;if(!A){A=v();var M=1/da;A=new R.XY(A?A.x+(s+A.padding.x)*M:s,A?A.y+(w+A.padding.y)*M:w)}return A.sync(R,true)}function h(s,w,A){s=f(A.x,A.y);R.trigger("doubleTap",w,A,s);d.scalable&&l(2,{easing:"sine.inout",duration:700},true,s)}function k(s,
w,A){K=null;G=true;F("down",w,A)}function e(s,w,A){F("hover",w,A)}function i(s,w,A,M){n(w,A,false);if(!K){Q+=M.x;O+=M.y}}function c(s,w,A){n(w,A,true);G=false}function m(){clearTimeout(wb);wb=setTimeout(function(){if(D)if(D.offsetWidth!==Ta*2||D.offsetHeight!==Ua*2){var s=S();z(a);S(s.x,s.y)}},250)}function j(s,w,A){F("tap",w,A);R.trigger("tap",w,A,f(A.x,A.y,true))}function g(){ma&&ma.unbind();if(Y&&ea){ma=INTERACT.watch(ea.interactTarget||D);if(d.scalable){ma.bind("zoom",b);ma.bind("doubleTap",h)}ma.bind("pointerDown",
k);ma.bind("pointerMove",i);ma.bind("pointerUp",c);d.captureHover&&ma.bind("pointerHover",e);ma.bind("tap",j)}}function o(s){if(ea){ea.trigger("detach");ea=null}var w=R,A=U,M=D,$=d;s=s.split("/");for(var ha=new Hb(w,A,M,$),ya=0;ya<s.length;ya++)ha=La("renderer",s[ya],w,A,M,$,ha);ea=ha;ba=Y&&ea.fastpan&&Y.transforms;r=Y&&Y.transforms&&d.useTransforms;g();R.trigger("reset");y()}function n(s,w,A){if(K){s=f(w.x,w.y);K.drag.call(K.target,K,s.x,s.y,A)&&ia++;if(A)K=null}}function u(s){for(var w=L;w--;)if(B[w].id===
s)return w;return L}function z(s){if(Y){D=document.getElementById(s);D.appendChild(P=Y.create("div","",Y.styles({overflow:"hidden",width:D.offsetWidth+"px",height:D.offsetHeight+"px"})));s=d.padding;if(s===q){s=D.offsetWidth;var w=D.offsetHeight,A=Eb(s*s+w*w);na=new aa(A-s>>1,A-w>>1)}else na=new aa(s,s);gb=P.offsetWidth+na.x*2;hb=P.offsetHeight+na.y*2;mb=gb/2;nb=hb/2;Ta=D.offsetWidth/2;Ua=D.offsetHeight/2;Va=new aa(mb,nb);P.appendChild(U=Y.create("div","",Y.styles({width:gb+"px",height:hb+"px","z-index":2,
margin:-na.y+"px 0 0 "+-na.x+"px"})));o(d.renderer);s=d.controls;for(w=0;w<x.length;w++)x[w].trigger("detach");x=[];for(w=0;w<s.length;w++)x[x.length]=La("control",s[w],R,P,D,d[s[w]])}else o("canvas")}function F(s,w,A){var M=(new aa(A.x-Ta+mb,A.y-Ua+nb)).rotate(-sa*ga,Va).scale(1/da,Va);la=Hits.init(s,w,A,f(A.x,A.y,true),M);V=false;for(s=L;s--;)if(B[s].visible)V=V||(B[s].hitGuess?B[s].hitGuess(la.gridX,la.gridY,R):false);V&&ia++}function S(s,w,A){if(typeof s!="undefined"&&(W(s,Ba)||W(s,"object"))){w=
new R.XY(s);w.sync(R);s=w.x;w=w.y}if(W(s,Ca)){t(s-Ta-na.x,w-Ua-na.y,A);return R}else return t().offset(Ta+na.x|0,Ua+na.y|0).sync(R,true)}function v(){var s=new ca(X,Z,gb,hb);s.scaleFactor=da;s.padding=na?na.copy():new aa;return s}function E(s,w,A){if(W(s,Ba)&&W(w,Fa))for(w=0;w<L;w++){if(B[w].id===s)return B[w]}else if(W(s,Ba)){w=La("layer",w,R,A);A=u(s);A!==L&&R.trigger("layerRemove",B[A]);w.added=(new Date).getTime();w.id=s;B[A]=w;B.sort(function(M,$){return $.zindex-M.zindex||$.added-M.added});
L=B.length;R.trigger("resync");y();R.trigger("layerChange",R,w);ia++;return w}else return[].concat(B)}function y(){var s=v();if(s){if(Na||Oa)if(s){var w=ib?X+(s.w>>1):X,A=jb?Z+(s.h>>1):Z,M=s.w,$=s.h;if(Na&&Na>M)if(w+M>Na)X=ib?X:Na-M;else if(w<0)X=ib?X:0;if(Oa&&Oa>$)if(A+$>Oa)Z=jb?Z:Oa-$;else if(A<0)Z=jb?Z:0}xb=X;yb=Z;R.trigger("refresh",R,s);ia++}}function l(s,w,A,M){if(W(s,Ca)){var $=A?s:da*s;if(!r){w=undefined;s=cb(kb($)/Math.LN2);$=Ea(2,s)}if(M){s=R.center();R.pan(M.x-s.x,M.y-s.y,w)}if(w)Wa=za.tween([da],
[$],w,function(){da=$;Wa=null;ia++});else{da=$;ia++}return R}else return da}function t(s,w,A){if(W(s,Ca)){if(A)Aa=za.tween([X,Z],[s,w],A,function(){X=s|0;Z=w|0;wa=Ga=0;Aa=null;ia++});else{X=s|0;Z=w|0;ia++}return R}else return(new R.XY(X,Z)).sync(R,true)}d=H({captureHover:true,controls:[],drawOnScale:true,padding:128,inertia:true,refreshDistance:128,pannable:true,scalable:true,renderer:"canvas",useTransforms:true},d);var q="auto",r=true,C=false,x=[],B=[],L=0,U=null,P=null,D,K=null,V=false,ba,G=false,
Q=0,O=0,fa=d.refreshDistance,X=0,Z=0,wa=0,Ga=0,xb=0,yb=0,Na=null,Oa=null,ib=false,jb=false,Aa=null,na,la=null,Xa=null,ea,wb=0,Va=new aa,sa=0,Ya=null,da=1,Wa=null,ob=1,ma=null,pb={index:0,draw:false},ia=0,gb,hb,mb,nb,Ta,Ua,R={XY:aa,id:d.id,panSpeed:0,attachFrame:function(s,w){w&&U.appendChild(s)},center:S,detach:function(){ea&&ea.trigger("detach");ma&&ma.unbind();if(P){D.removeChild(P);U=P=null}},frozen:function(s){if(W(s,Fa))return C;else{C=s;return R}},layer:E,invalidate:function(){ia++},pan:function(s,
w,A){t(X+s,Z+w,A)},refresh:y,rotate:function(s,w,A){if(W(s,Ca)){var M=A?s:sa+s;if(w)Ya=za.tween([sa],[M],w,function(){sa=M%360;Ya=null;ia++});else{sa=M%360;ia++}return R}else return sa},scale:l,setMaxOffset:function(s,w,A,M){Na=s;Oa=w;ib=A;jb=M},offset:t,viewport:v};qa(R);R.bind("resize",m);R.bind("layerRemove",function(s,w){var A=Ra(B,w.id);if(A>=0&&A<L){B.splice(A,1);ia++}L=B.length});Qa(R,d,{container:z,captureHover:g,scalable:g,pannable:g,renderer:o});E("markers","draw",{zindex:20});z(a);if(Y&&
!W(window.attachEvent,Fa))window.attachEvent("onresize",m);else Y&&window.addEventListener("resize",m,false);Ma.attach(function(s){var w=[],A,M,$;if(!C){R.panSpeed=panSpeed=xa(Q)+xa(O);(A=da!==ob)&&R.trigger("scale");if(panSpeed>0||A||Aa||Wa||Ya){ia++;if(Aa&&panSpeed>0){Aa(true);Aa=null}}if(!G&&panSpeed<=0&&(xa(X-xb)>=fa||xa(Z-yb)>=fa))y();pb.index++;pb.draw=ia||panSpeed||0;if(ea&&pb.draw){if(Wa)da=Wa()[0];if(Ya)sa=Ya()[0];wa+=Q;Ga+=O;if(Q||O)R.trigger("pan");if(r){if(da!==1)w[w.length]="scale("+
da+")";if(sa!==0)w[w.length]="rotate("+sa+"deg)"}A=V||!ba||!G&&!Aa&&(d.drawOnScale||da===1)&&panSpeed<=2;if(Aa){M=Aa();wa=X-M[0]|0;Ga=Z-M[1]|0}if(A){M=-sa*ga;A=eb(M)*wa+-Ka(M)*Ga;M=Ka(M)*wa+eb(M)*Ga;X=X-A/da|0;Z=Z-M/da|0;$=v();ea.trigger("predraw",$);if(ea.prepare(B,$,s,la)){M=Ga=A=wa=ia=0;for(ii=L;ii--;){var ha=B[ii];if(ha.visible){var ya=ha.style?ea.applyStyle(ha.style,true):null;ha.draw(ea,$,R,s,la);ya&&ea.applyStyle(ya)}}ea.trigger("render",$);R.trigger("drawComplete",$,s);Y.move(U,A,M,w,Va)}}else Y.move(U,
wa,Ga,w,Va);if(G||!d.inertia)O=Q=0;else if(Q!=0||O!=0){Q*=0.8;O*=0.8;if(xa(Q)<0.5)Q=0;if(xa(O)<0.5)O=0}if(la){s=true;w=la?la.elements:[];if(Xa&&Xa.type==="hover"){diffElements=Hits.diffHits(Xa.elements,w);if(diffElements.length>0)Hits.triggerEvent(Xa,R,"Out",diffElements);else s=false}if(w.length>0){M=la.gridX;$=la.gridY;for(A=w.length;G&&A--;){ha=w[A];ya=M;var zb=$,Ab=ha&&ha.drag&&(!ha.canDrag||ha.canDrag(ha,ya,zb));if(Ab){K=ha;K.startX=ya;K.startY=zb}if(Ab)break}s&&Hits.triggerEvent(la,R)}Xa=w.length>
0?H({},la):null;la=null}if(ob!==da){R.trigger("scaleChanged",da);ob=da}}}});return R},za=function(){return{tween:function(a,d,b,f,h){function k(u){var z=u-n;u=n+o<=u;for(var F=e;F--;)i[F]=m(z,a[F],j[F],o);h&&h.invalidate();if(u||g){Ma.detach(k);for(F=0;F<c.length;F++)c[F]&&c[F](i,z,g)}}b=H({easing:"sine.out",duration:1E3,complete:null},b);var e=a.length,i=[].concat(a),c=[f,b.complete],m=Pa(b.easing),j=[],g=false,o=b.duration,n=(new Date).getTime();for(b=e;b--;)j[b]=d[b]-a[b];Ma.attach(k);return function(u){g=
u;return i}},tweenDrawable:function(a,d,b,f,h){var k=za.tween([b],[f],h,function(){a[d]=f;for(var i=a.tweens.length;i--;)if(a.tweens[i]===e){a.tweens.splice(i,1);break}},a.view),e=function(){a[d]=k()[0]};return e}}}(),Ha=function(a,d,b){b=H({style:null,xy:null,size:20,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape",zindex:0},b);H(this,b);if(W(this.xy,Ba))this.xy=new a.XY(this.xy);this.id="drawable_"+Gb++;this.bounds=null;this.view=a;this.layer=d;this.tweens=[];
this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&qa(this)};Ha.prototype={constructor:Ha,applyTweens:function(){for(var a=this.tweens.length;a--;)this.tweens[a]()},drag:null,draw:null,getProps:null,resync:function(){if(this.xy){this.xy.sync(this.view);if(this.size){var a=this.size>>1;this.updateBounds(new ca(this.xy.x-a,this.xy.y-a,this.size,this.size))}}},rotate:function(a,d,b){if(W(a,Ca)){a=(b?a:this.rotation*bb+a)*ga;if(d)this.tweens.push(za.tweenDrawable(this,
"rotation",this.rotation,a,d));else{this.rotation=a;this.view.invalidate()}return this}else return this.rotation*bb},scale:function(a,d,b){if(W(a,Ca)){a=b?a:this.scaling*a;if(d)this.tweens.push(za.tweenDrawable(this,"scaling",this.scaling,a,d));else{this.scaling=a;this.view.invalidate()}return this}else return this.scaling},translate:function(a,d,b,f){if(W(a,Ca)){a=f?a:this.translateX+a;d=f?d:this.translateY+d;if(b){this.tweens.push(za.tweenDrawable(this,"translateX",this.translateX,a,b));this.tweens.push(za.tweenDrawable(this,
"translateY",this.translateY,d,b))}else{this.translateX=a;this.translateY=d;this.view.invalidate()}return this}else return new aa(this.translateX,this.translateY)},updateBounds:function(a,d){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);this.bounds=a;if(d)this.xy=this.bounds.center()}};ra("drawable","marker",function(a,d,b){b=H({fill:true,stroke:false,markerType:"simple",hoverStyle:"highlight",typeName:"Marker"},b);return new Ha(a,d,b)});ra("drawable",
"poly",function(a,d,b){function f(){var j,g,o,n,u,z,F;c=b.simplify?i.simplify():i;for(j=c.length;j--;){g=c[j].x;o=c[j].y;z=W(z,Fa)||g<z?g:z;F=W(F,Fa)||o<F?o:F;n=W(n,Fa)||g>n?g:n;u=W(u,Fa)||o>u?o:u}m.updateBounds(new ca(z,F,n-z,u-F),true);a.invalidate()}function h(j){if(W(j,"array")){i=new ua(b.allowCull);ub.process(j,function(g,o){for(var n=0;n<o;n++)i.push(new a.XY(g[n]))},k,e);return m}else return c}function k(){i.length&&ub.process(i,function(j,g){for(var o=g;o--;)j[o].sync(a)},f,e)}b=H({allowCull:false,
simplify:false,fill:true,points:[],typeName:"Poly"},b);var e=500,i=new ua(b.allowCull),c=[],m=H(new Ha(a,d,b),{points:h,resync:k});h(b.points);return m});ra("drawable","line",function(a,d,b){b.fill=false;b.allowCull=true;return La("drawable","poly",a,d,b)});ra("drawable","image",function(a,d,b){function f(){if(c&&c.width>0){if(!this.centerOffset)this.centerOffset=new aa(-c.width>>1,-c.height>>1);this.updateBounds(new ca(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,c.width,c.height),
false)}}function h(j){if(this.imageUrl=j){var g=this;fb(this.imageUrl,function(o,n){c=o;if(n){var u=m.layer?m.layer.view:null;u&&u.invalidate()}f.apply(g)})}}b=H({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var k=Ha.prototype.resync,e=0,i=0,c=b.image,m=H(new Ha(a,d,b),{changeImage:h,getProps:function(){this.bounds||f(this,c);return{image:c,x:this.xy.x+e,y:this.xy.y+i}},resync:function(j){k.call(this,j);f.call(this)}});c||h.call(this,this.imageUrl);if(this.centerOffset){e=this.centerOffset.x;
i=this.centerOffset.y}});ra("drawable","arc",function(a,d,b){b=H({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);return new Ha(a,d,b)});Ia.prototype={constructor:Ia,clip:null,cycle:function(){},draw:function(){},hitGuess:null,remove:function(){this.view.trigger("layerRemove",this)}};ra("layer","tile",function(a,d){d=H({generator:"osm",imageLoadArgs:{}},d);var b=La("generator",d.generator,d).run,f=null,h=[],k=H(new Ia(a,d),{draw:function(e,i,c){e.drawTiles&&e.drawTiles(i,f.search(i.buffer(128)),
c.panSpeed<2)}});a.bind("resync",function(){var e=a&&a.zoom?a.zoom():0;h[e]||(h[e]=va(e));f=h[e]});a.bind("refresh",function(e,i,c){f&&b(i,c,f,function(){i.invalidate()})});return k});ra("layer","draw",function(a,d){function b(i,c,m,j){var g=this.dragOffset;if(!g)g=this.dragOffset=new a.XY(i.startX-this.xy.x,i.startY-this.xy.y);this.xy.x=c-g.x;this.xy.y=m-g.y;if(j){delete this.dragOffset;a.invalidate();this.xy.sync(a,true);this.trigger("dragDrop")}return true}function f(i,c,m,j){j&&k.remove(j,c);
k.insert(m,c)}d=H({zindex:10},d);var h=[],k,e=H(new Ia(a,d),{itemCount:0,clear:function(){k=new sb;h=[];e.trigger("cleared");e.itemCount=0;a.invalidate()},create:function(i,c,m){c=La("drawable",i,a,e,c);if(m)h.unshift(c);else h[h.length]=c;c.resync();k&&c.bounds&&k.insert(c.bounds,c);c.bind("move",f);e.itemCount=h.length;e.trigger(i+"Added",c);return c},draw:function(i,c,m,j,g){m={};j=k&&c?k.search(c):[];for(var o=j.length;o--;){var n=j[o],u=n.style||e.style,z,F,S=n.getProps?n.getProps(i):m;z=i["prep"+
n.typeName];n.tweens.length>0&&n.applyTweens();F=i.applyTransform(n);if(S=z?z.call(i,n,c,g,S):null){if(g&&S.hit){g.elements.push(Hits.initHit(n.type,n,n.draggable?b:null));z=g.type+"Style";u=n[z]||e[z]||u}u=u?i.applyStyle(u,true):null;(z=n.draw||S.draw)&&z.call(n,S);u&&i.applyStyle(u)}F&&F.undo&&F.undo()}},find:function(){return[].concat(h)},hitGuess:function(i,c){return k&&k.search({x:i-10,y:c-10,w:20,h:20}).length>0}});a.bind("resync",function(){k=va(a.zoom(),k);for(var i=h.length;i--;)h[i].resync()});
return e});ta.prototype={constructor:ta};ra("control","zoombar",function(a,d,b,f){function h(q,r){var C=E[q]=Y.create("div","t5-zoombar-button",{position:"absolute",background:k(q),"z-index":51,width:f.width+"px",height:f.buttonHeight+"px","margin-top":(r||0)+"px"});y.appendChild(C)}function k(q,r){return"url("+f.images+") 0 -"+(g+n*3+(q||0)*m*3+(r||0)*m)+"px"}function e(q){return"url("+f.images+") 0 -"+(g+(q||0)*n)+"px"}function i(q,r){var C;if(q===o){o.style.background=e(r);C="thumb"}else for(var x=
0;x<E.length;x++)if(q===E[x]){C="button"+x;E[x].style.background=k(x,r);break}return C}function c(q){if(q!==S){S=q;F=z-S/v*(z-u)|0;Y.move(o,0,F-u);clearTimeout(l);l=setTimeout(function(){a.zoom(S)},500)}}f=H({width:24,height:200,images:"img/zoom.png",align:"right",marginTop:10,spacing:10,thumbHeight:16,buttonHeight:16},f);var m=f.buttonHeight,j,g=f.height,o,n=f.thumbHeight,u=f.spacing+m-(n>>1),z=f.height-m-(n>>1),F=u,S=-1;d=a.minZoom();var v=a.maxZoom()-d+1,E=[],y,l=0,t={button0:function(){a.zoom(a.zoom()+
1)},button1:function(){a.zoom(a.zoom()-1)}};y=Y.create("div","t5-zoombar",{position:"absolute",background:"url("+f.images+")","z-index":50,overflow:"hidden",width:f.width+"px",height:f.height+"px",margin:function(){var q=f.spacing,r=ka("{0}px 0 0 {1}px");if(f.align==="right")q=b.offsetWidth-f.width-f.spacing;return r(f.marginTop,q)}()});b.childNodes[0]?b.insertBefore(y,b.childNodes[0]):b.appendChild(y);y.appendChild(o=Y.create("div","t5-zoombar-thumb",{position:"absolute",background:e(),"z-index":51,
width:f.width+"px",height:f.thumbHeight+"px",margin:"10px 0 0 0",top:F-u+"px"}));h(0);h(1,f.height-f.buttonHeight);j=INTERACT.watch(y,{bindTarget:y});j.bind("pointerMove",function(q,r,C){F=Math.min(Math.max(u,C.y-(n>>1)),z);c(v-(F-u)/z*v|0)});j.bind("pointerDown",function(q){i(q.target,2)});j.bind("pointerUp",function(q){i(q.target,0)});j.bind("tap",function(q){(q=t[i(q.target,2)])&&q()});d=new ta(a);d.bind("detach",function(){j.unbind();b.removeChild(y)});a.bind("zoom",function(q,r){c(r)});c(a.zoom());
return d});H(p,{ex:H,log:ja,observable:qa,configurable:Qa,formatter:ka,wordExists:function(a,d){for(var b=a.split(/\s|\,/).length;b--;)if(a.toLowerCase()==d.toLowerCase())return true;return false},is:W,indexOf:Ra,fn:function(a){return Fb("fn",a)},project:ab,unproject:lb,getImage:fb,userMessage:function(a,d,b){p.trigger("userMessage",a,d,b)},Registry:I,Style:vb,DOM:Y,Rect:ca,XY:aa,Line:ua,Hits:Hits,Control:ta,Tile:Da,Tweener:za,View:Bb,Map:function(a,d){function b(m,j){var g=c.viewport();if(m){g=db(m.bestZoomLevel(g.w,
g.h),j||0);return f(g).center(m.center())}else return new GeoJS.BBox((new pa(g.x,g.y2)).sync(c,true).pos(),(new pa(g.x2,g.y)).sync(c,true).pos())}function f(m,j,g){if(W(m,Ca)){m=db(d.minZoom,tb(d.maxZoom,m|0));if(m!==e){var o=c.viewport(),n=c.offset(),u=o.w/2;o=o.h/2;var z=Ea(2,m-e),F=u/z|0,S=o/z|0;e=m;c.offset(((j||n.x+u)-F)*z,((g||n.y+o)-S)*z);c.trigger("zoom",m);c.trigger("reset");k=c.rpp=T/(256<<e);c.setMaxOffset(T/k|0,T/k|0,true,false);c.scale(1,false,true);c.trigger("resync");c.refresh()}return c}else return e}
d=H({controls:["zoombar"],minZoom:1,maxZoom:18,renderer:"canvas/dom",zoom:1,zoombar:{}},d);var h=new pa,k,e=d.zoom||d.zoomLevel,i=0,c=H(new Bb(a,d),{XY:pa,bounds:b,zoom:f});k=c.rpp=T/(256<<e);c.bind("refresh",function(){var m=c.viewport();if(h.x!=m.x||h.y!=m.y){c.trigger("boundsChange",b());h.x=m.x;h.y=m.y}});c.bind("scaleChanged",function(m,j){var g=kb(j)/Math.LN2|0;if(g!==0){j=Ea(2,g);clearTimeout(i);i=setTimeout(function(){f(e+g)},500)}});return c}});if(typeof module!="undefined"&&module.exports)module.exports=
p;p.Decarta=function(){function a(v){return o(e.clientName,e.clientPassword,e.sessionID,e.configuration,e.release,v)}function d(v,E){return n(v.maxResponses,v.version,v.requestID,v.methodName,E)}function b(v,E){e.server||p.log("No server configured for deCarta - we are going to have issues","warn");return u(e.server,v.requestID,escape(E))}function f(v,E,y){ja("making request: "+a(d(v,v.getRequestBody())));Sa(b(v,a(d(v,v.getRequestBody()))),function(l){console.log(l.response);var t=l.response.XLS.Response;
if(t.numberOfResponses>0&&t[v.methodName+"Response"]){l=[];if(v.parseResponse)l=v.parseResponse(t[v.methodName+"Response"]);E&&E.apply(null,l)}else y&&y("Server returned no responses",l.response)})}function h(v,E){var y=new z({json:v.StreetAddress}),l=[];if(v.Place){if(!v.Place.length)v.Place=[v.Place];for(var t=v.Place.length;t--;)l[l.length]=v.Place[t].content}return{building:y.building,street:y.street,regions:l,countryCode:v.countryCode||"",postalCode:v.PostalCode||"",pos:E}}function k(v){if(!v)return"";
v=v.toUpperCase();if(!m){var E=[],y;for(y in j)E.push(y);m=RegExp("(\\s)("+E.join("|")+")(\\s|$)","i")}m.lastIndex=-1;if(E=m.exec(v))v=v.replace(m,"$1"+j[E[2]]);return v}var e={sessionID:(new Date).getTime(),server:"",clientName:"",clientPassword:"",configuration:"",maxResponses:25,release:"4.4.2sp03",tileFormat:"PNG",fixedGrid:true,useCache:true,tileHosts:[],requestTimeout:3E4,geocoding:{countryCode:"US",language:"EN"}};TL=function(){function v(y,l){this.days=y||0;this.seconds=l||0}v.prototype={add:function(){for(var y=
new v(this.days,this.seconds),l=arguments.length;l--;){y.days+=arguments[l].days;y.seconds+=arguments[l].seconds}return y},toString:function(){var y,l,t,q="";if(this.days)q=this.days+" days ";if(this.seconds){t=this.seconds;if(t>=3600){y=~~(t/3600);t-=y*3600}if(t>=60){l=Math.round(t/60);t-=l*60}if(y)q=q+y+(y>1?" hrs ":" hr ")+(l?(l>10?l:"0"+l)+" min ":"");else if(l)q=q+l+" min";else if(t>0)q=q+(t>10?t:"0"+t)+" sec"}return q}};var E=function(){var y=/^P(\d+Y)?(\d+M)?(\d+D)?$/,l=/^(\d+H)?(\d+M)?(\d+S)?$/,
t={8601:function(q){q=q.split("T");var r=null;r=null;var C=0,x=0;y.lastIndex=-1;r=y.exec(q[0]);C+=r[3]?parseInt(r[3].slice(0,-1),10):0;l.lastIndex=-1;r=l.exec(q[1]);x+=r[1]?parseInt(r[1].slice(0,-1),10)*3600:0;x+=r[2]?parseInt(r[2].slice(0,-1),10)*60:0;x+=r[3]?parseInt(r[3].slice(0,-1),10):0;return new v(C,x)}};return function(q,r){var C=t[r];if(!C)throw"No parser found for the duration format: "+r;return C(q)}}();return{Duration:v,parse:E}}();var i=/^(\d+).*$/,c=/(\d+)\s?\-\s?(\d+)/,m=null,j={RD:"ROAD",
ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},g=1,o=ka("<xls:XLS version='1' xls:lang='en' xmlns:xls='http://www.opengis.net/xls' rel='{4}' xmlns:gml='http://www.opengis.net/gml'><xls:RequestHeader clientName='{0}' clientPassword='{1}' sessionID='{2}' configuration='{3}' />{5}</xls:XLS>"),n=ka("<xls:Request maximumResponses='{0}' version='{1}' requestID='{2}' methodName='{3}Request'>{4}</xls:Request>"),u=ka("{0}/JSON?reqID={1}&chunkNo=1&numChunks=1&data={2}&responseFormat=JSON"),
z=function(v){v=p.ex({json:{}},v);var E="",y="";if(v.json.Street)E=v.json.Street.content?v.json.Street.content:v.json.Street;E=E&&E.replace?E.replace(/\/\d+$/,""):"";if(v.json.Building)if(v.json.Building.number)y=v.json.Building.number;return{building:y,street:E,calcMatchPercentage:function(l){var t=0,q=k(l),r=k(E);if(v.json.Building){a:{var C=v.json.Building.number.toString();i.lastIndex=-1;if(i.test(l)){l=l.replace(i,"$1");C=C.split(",");for(var x=0;x<C.length;x++){c.lastIndex=-1;if(c.test(C[x])){var B=
c.exec(C[x]);if(l>=parseInt(B[1],10)&&l<=parseInt(B[2],10)){l=true;break a}}else if(l==C[x]){l=true;break a}}}l=false}if(l)t+=0.2}if(q&&r&&p.wordExists(q,r))t+=0.8;return t},toString:function(){if(E)return(y?y+" ":"")+E;return""}}},F=function(){return{methodName:"",maxResponses:25,version:"1.0",requestID:g++,getRequestBody:function(){return""},parseResponse:function(v){return[v]}}},S=function(){return p.ex(new F,{methodName:"RUOK",parseResponse:function(v){return[{aliasCount:v.maxHostAliases,host:v.hostName}]}})};
p.Registry.register("generator","decarta",function(v){function E(t,q,r,C){if(t=t.zoom?t.zoom():0){var x=2<<t-1,B=x>>1,L=v.tileSize,U=(q.w/L|0)+1,P=(q.h/L|0)+1,D=(q.x/L|0)-B;q=x-(q.y/L|0)-B-P;var K=r.search({x:(B+D)*L,y:(B+q*-1-P)*L,w:U*L,h:P*L});x={};var V=l.hosts,ba;for(ba=K.length;ba--;)x[K[ba].id]=true;for(K=0;K<=U;K++)for(ba=0;ba<=P;ba++){var G=D+K,Q=q+ba-1,O=G+"_"+Q;if(!x[O]){G=new p.Tile((B+D+K)*L,(B+q*-1-ba)*L,V[K%V.length]+"/openls/image-cache/TILE?LLMIN=0.0,0.0&LLMAX="+y[t]+"&CACHEABLE=true&DS=navteq-world&WIDTH=256&HEIGHT=256&CLIENTNAME="+
l.clientName+"&SESSIONID="+l.sessionID+"&FORMAT=PNG&CONFIG="+l.configuration+"&N="+Q+"&E="+G,L,L,O);r.insert(G,G)}}C&&C()}}v=p.ex({tileSize:256},v);var y=["89.787438015348100000,360.00000000000000000","85.084059050110410000,180.00000000000000000","66.653475896509040000,90.00000000000000000","41.170427238429790000,45.000000000000000000","22.076741328793200000,22.500000000000000000","11.251819676168665000,11.250000000000000000","5.653589942659626000,5.625000000000000000","2.830287664051185000,2.812500000000000000",
"1.415581451872543800,1.406250000000000000","0.707845460801532700,0.703125000000000000","0.353929573271679340,0.351562500000000000","0.176965641673330230,0.175781250000000000","0.088482927761462040,0.087890625000000000","0.044241477246363230,0.043945312500000000","0.022120740293895182,0.021972656250000000","0.011060370355776452,0.010986328125000000","0.005530185203987857,0.005493164062500000","0.002765092605263539,0.002746582031250000","0.001382546303032519,0.001373291015625000","0.000691272945568983,0.000686645507812500",
"0.000345636472797214,0.000343322753906250"],l=e.tileConfig;p.userMessage("ack","decarta","&copy; deCarta, Inc. Map and Imagery Data &copy; NAVTEQ or Tele Atlas or DigitalGlobe");return{run:function(t,q,r,C){if(l)E(t,q,r,C);else{var x=e.clientName.replace(/.*?\:/,"");p.Decarta.getTileConfig(x,function(B){l=B;E(t,q,r,C)})}},setTileConfig:function(t){l=t}}});p.Registry.register("service","geocoder",function(){var v=p.formatter('<xls:GeocodeRequest><xls:Address countryCode="{0}" language="{1}">{2}</xls:Address></xls:GeocodeRequest>'),
E=p.formatter('<xls:StreetAddress><xls:Building number="{0}" /><xls:Street>{1}</xls:Street></xls:StreetAddress>'),y=function(t,q){q=p.ex({countryCode:e.geocoding.countryCode,language:e.geocoding.language},q);var r=new F;return p.ex({},r,{methodName:"Geocode",getRequestBody:function(){var C=E(t.number,t.street);C+='<xls:Place type="Municipality">'+t.regions.join(" ")+"</xls:Place>";return v(q.countryCode,q.language,C)},parseResponse:function(C){var x=C.GeocodeResponseList;C=[];var B=x?x.numberOfGeocodedAddresses:
0,L=[];if(B>1)L=x.GeocodedAddress;else if(B==1)L=[x.GeocodedAddress];for(x=0;L&&x<L.length;x++){B=L[x];var U=null,P=null;if(B&&B.GeocodeMatchCode&&B.GeocodeMatchCode.matchType!=="NO_MATCH"){if(B&&B.Point)P=new GeoJS.Pos(B.Point.pos);if(B&&B.Address)U=h(B.Address,P)}(B=U)&&C.push(B)}return[C]}})},l=function(t){t=p.ex({position:null,geocodePreference:"StreetAddress"},t);return p.ex(new F,{methodName:"ReverseGeocode",getRequestBody:function(){return"<xls:ReverseGeocodeRequest><xls:Position><gml:Point><gml:pos>"+
t.position.toString()+"</gml:pos></gml:Point></xls:Position><xls:ReverseGeocodePreference>"+t.geocodePreference+"</xls:ReverseGeocodePreference></xls:ReverseGeocodeRequest>"},parseResponse:function(q){var r=null;if(q&&q.Point)r=new GeoJS.Pos(match.Point.pos);if(q&&q.ReverseGeocodedLocation&&q.ReverseGeocodedLocation.Address)return[h(q.ReverseGeocodedLocation.Address,r)];return[]}})};typeof ADDR==="undefined"&&p.log("Sidelab addressing module not found, geocoder will not function","warn");return{forward:function(t,
q){f(new y(t),function(r){q(t,r)})},reverse:function(t,q){var r=new l({position:t});f(r,function(C){q&&q(C)})}}});p.Registry.register("service","routing",function(){var v=function(E,y){y=p.ex({provideRouteHandle:false,distanceUnit:"KM",routeQueryType:"RMAN",preference:"Fastest",routeInstructions:true,routeGeometry:true},y);var l=new F,t=p.formatter('<xls:DetermineRouteRequest provideRouteHandle="{0}" distanceUnit="{1}" routeQueryType="{2}">'),q=p.formatter("<xls:{0}><xls:Position><gml:Point><gml:pos>{1}</gml:pos></gml:Point></xls:Position></xls:{0}>");
return p.ex({},l,{methodName:"DetermineRoute",getRequestBody:function(){if(E.length<2)throw Error("Cannot send RouteRequest, less than 2 waypoints specified");var r=t(y.provideRouteHandle,y.distanceUnit,y.routeQueryType);r+="<xls:RoutePlan>";r+="<xls:RoutePreference>"+y.preference+"</xls:RoutePreference>";r+="<xls:WayPointList>";for(var C=0;C<E.length;C++)r+=q(C===0?"StartPoint":C===E.length-1?"EndPoint":"ViaPoint",E[C].toString());r+="</xls:WayPointList>";r+="</xls:RoutePlan>";if(y.routeInstructions)r+=
'<xls:RouteInstructionsRequest rules="maneuver-rules" providePoint="true" />';if(y.routeGeometry)r+="<xls:RouteGeometryRequest />";r+="</xls:DetermineRouteRequest>";return r},parseResponse:function(r){var C=r.RouteGeometry.LineString.pos,x=r.RouteInstructionsList;r=[];x=x&&x.RouteInstruction?x.RouteInstruction:[];for(var B=0;B<x.length;B++){var L=x[B].distance;r.push({text:x[B].Instruction,latlng:x[B].Point,distance:L.value+(L.uom||"M").toUpperCase(),time:TL.parse(x[B].duration,"8601")})}return[C,
r]}})};return{calculate:function(E,y,l,t){t=p.ex({preference:"Fastest"},t);E=new v(E,t);f(E,y,l)}}});return{applyConfig:function(v){p.ex(e,v)},getTileConfig:function(v,E){f(new S,function(y){var l=e.clientName.replace(/\:.*/,":"+(v||""));hosts=[];if(y.aliasCount)for(var t=0;t<y.aliasCount;t++)hosts[t]="http://"+y.host.replace("^(.*?).(.*)$","\u0001-0"+(t+1)+".\u0002");else hosts=["http://"+y.host];E({hosts:hosts,clientName:l,sessionID:e.sessionID,configuration:e.configuration})})},setTileConfig:function(v){e.tileConfig=
v},compareFns:function(){return{streetDetails:function(v,E){return E.calcMatchPercentage(v)},location:function(v,E){return E.calcMatchPercentage(v)}}}()}}()})();
