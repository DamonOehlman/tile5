(function(jb){function M(){var a=arguments[0]||{},c=Array.prototype.slice.call(arguments,1),b=c.length,e,j;for(j=0;j<b;j++)if((e=c[j])!==null)for(var g in e){var h=e[g];if(a!==h)if(h!==undefined)a[g]=h}return a}function Z(a,c){if(typeof console!=="undefined")console[c||"debug"](a)}function oa(a){var c=a.match(zb),b=[],e=0,j;for(j=c?c.length:0;j--;){var g=c[j].slice(1);b[g]||(b[g]=RegExp("\\{"+g+"\\}","g"))}e=b.length;return function(){var h=a;for(j=0;j<e;j++){var k=arguments[j];if(typeof k=="undefined")k=
"";h=h.replace(b[j],k)}return h}}function kb(a,c){var b=Ka*xa(a);return La-2*lb(c*ya((1-b)/(1+b),Ka/2))}function fa(a,c){if(R(a,pa)){var b=a.split(Va);this.x=parseFloat(b[0]);this.y=parseFloat(b[1])}else{this.x=a||0;this.y=c||0}}function qa(a,c,b,e){this.mercX=b;this.mercY=e;if(R(a,pa))a=mb.parseXY(a);a&&a.toPixels?M(this,a.toPixels()):fa.call(this,a,c)}function ra(a,c,b,e){this.x=a||0;this.y=c||0;this.w=b||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function nb(a,c){if(!a)return null;
c=c||Ab;for(var b=[],e=null,j=a.length;j--;){var g=a[j];if(include=!e||j===0||ga(g.x-e.x)+ga(g.y-e.y)>c){b.unshift(g);e=g}}return b}function ob(a,c){var b=new pb(Math.sqrt(256<<a)|0);c&&c.zoomLevel===a&&c.copyInto(b);b.zoomLevel=a;return b}function Wa(a,c,b,e,j,g){this.x=a;this.y=c;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=b;this.id=g||a+"_"+c;this.loaded=false;this.image=null}function Ma(a,c){c=M({id:"layer_"+Bb++,zindex:0,animated:false,style:null,minXY:null,
maxXY:null},c);this.visible=true;this.view=a;ia(M(this,c))}function Na(){ia(this)}function ja(a,c){if(a&&a.split){var b=a.split(Va);if(b.length>1){a=b[0];c=b[1]}}else if(a&&a.lat){c=a.lon;a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(c||0)}function Oa(a,c){if(R(a,qb)){for(var b=c,e=new ja(rb,sb),j=new ja(Cb,Db),g=a.length;g--;){var h=a[g];if(h.lat<e.lat)e.lat=h.lat;if(h.lat>j.lat)j.lat=h.lat;if(h.lon<e.lon)e.lon=h.lon;if(h.lon>j.lon)j.lon=h.lon}this.min=e;this.max=j;if(R(b,sa)){b=this.size();
b=Xa(b.x,b.y)*0.3}this.expand(b)}else{this.min=a;this.max=c}}var Ya={};(function(a){var c=[],b=0,e=false,j=a.register=function(g,h){c.push({section:g,run:h})};a.init=function(g){function h(){if(b<c.length){var f=c[b++];k[f.section]||(k[f.section]={});f.run(k[f.section],h)}else{for(f in k)a[f]=k[f];e=true;g&&g(a)}}var k={};if(e&&g)g(a);else{b=0;h()}};j("canvas",function(g,h){function k(){var l,m=f.getContext("2d");m.save();try{m.translate(50,50);m.beginPath();m.rect(0,0,20,20);l=m.isPointInPath(10,
10)}finally{m.restore()}return l}var f=document.createElement("canvas"),i=typeof FlashCanvas!="undefined",d=typeof G_vmlCanvasManager!="undefnined";f.width=200;f.height=200;g.pipTransformed=i||d?false:k();h()})})(Ya);var zb=/\{(\d+)(?=\})/g,Eb=function(){var a=1.70158,c=Math.PI/2,b=Math.abs,e=Math.pow,j=Math.sin,g=Math.asin,h=Math.cos,k={linear:function(f,i,d,l){return d*f/l+i},backin:function(f,i,d,l){return d*(f/=l)*f*((a+1)*f-a)+i},backout:function(f,i,d,l){return d*((f=f/l-1)*f*((a+1)*f+a)+1)+
i},backinout:function(f,i,d,l){return(f/=l/2)<1?d/2*f*f*(((a*=1.525)+1)*f-a)+i:d/2*((f-=2)*f*(((a*=1.525)+1)*f+a)+2)+i},bouncein:function(f,i,d,l){return d-k.bounceout(l-f,0,d,l)+i},bounceout:function(f,i,d,l){return(f/=l)<1/2.75?d*7.5625*f*f+i:f<2/2.75?d*(7.5625*(f-=1.5/2.75)*f+0.75)+i:f<2.5/2.75?d*(7.5625*(f-=2.25/2.75)*f+0.9375)+i:d*(7.5625*(f-=2.625/2.75)*f+0.984375)+i},bounceinout:function(f,i,d,l){return f<l/2?k.bouncein(f*2,0,d,l)/2+i:k.bounceout(f*2-l,0,d,l)/2+d/2+i},cubicin:function(f,i,
d,l){return d*(f/=l)*f*f+i},cubicout:function(f,i,d,l){return d*((f=f/l-1)*f*f+1)+i},cubicinout:function(f,i,d,l){if((f/=l/2)<1)return d/2*f*f*f+i;return d/2*((f-=2)*f*f+2)+i},elasticin:function(f,i,d,l,m,o){if(f==0)return i;if((f/=l)==1)return i+d;o||(o=l*0.3);if(!m||m<b(d)){m=d;d=o/4}else d=o/ca*g(d/m);return-(m*e(2,10*(f-=1))*j((f*l-d)*ca/o))+i},elasticout:function(f,i,d,l,m,o){var p;if(f==0)return i;if((f/=l)==1)return i+d;o||(o=l*0.3);if(!m||m<b(d)){m=d;p=o/4}else p=o/ca*g(d/m);return m*e(2,
-10*f)*j((f*l-p)*ca/o)+d+i},elasticinout:function(f,i,d,l,m,o){var p;if(f==0)return i;if((f/=l/2)==2)return i+d;o||(o=l*0.3*1.5);if(!m||m<b(d)){m=d;p=o/4}else p=o/ca*g(d/m);if(f<1)return-0.5*m*e(2,10*(f-=1))*j((f*l-p)*ca/o)+i;return m*e(2,-10*(f-=1))*j((f*l-p)*ca/o)*0.5+d+i},quadin:function(f,i,d,l){return d*(f/=l)*f+i},quadout:function(f,i,d,l){return-d*(f/=l)*(f-2)+i},quadinout:function(f,i,d,l){if((f/=l/2)<1)return d/2*f*f+i;return-d/2*(--f*(f-2)-1)+i},sinein:function(f,i,d,l){return-d*h(f/l*c)+
d+i},sineout:function(f,i,d,l){return d*j(f/l*c)+i},sineinout:function(f,i,d,l){return-d/2*(h(Math.PI*f/l)-1)+i}};return function(f){f=f.replace(/[\-\_\s\.]/g,"").toLowerCase();return k[f]||k.linear}}(),ia=function(){function a(b,e){var j=b.hasOwnProperty("obsHandlers")?b.obsHandlers:null;j[e]||(j[e]=[]);return j[e]}var c=0;return function(b){if(!b)return null;if(!(b.hasOwnProperty("obsHandlers")?b.obsHandlers:null))b.obsHandlers={};if(!b.hasOwnProperty("bind")){b.bind=function(e,j){var g="callback"+
c++;a(b,e).unshift({fn:j,id:g});return g};b.triggerCustom=function(e,j){var g=a(b,e),h={cancel:false,name:e,source:this},k;for(k in j)h[k]=j[k];if(!g)return null;k=Array.prototype.slice.call(arguments,2);b.eventInterceptor&&b.eventInterceptor(e,h,k);k.unshift(h);for(var f=g.length;f--&&!h.cancel;)g[f].fn.apply(this,k);return h};b.trigger=function(e){var j=Array.prototype.slice.call(arguments,1);j.splice(0,0,e,null);return b.triggerCustom.apply(this,j)};b.unbind=function(e,j){if(typeof e==="undefined")b.obsHandlers=
{};else for(var g=a(b,e),h=0;g&&h<g.length;h++)if(g[h].id===j){g.splice(h,1);break}return b}}return b}}(),tb=function(){function a(c,b,e,j){if(typeof c[j]=="undefined")c[j]=function(g){if(typeof g!="undefined"){b[j]=g;e[j]&&e[j](g);return c}else return b[j]}}return function(c,b,e){for(var j in b)a(c,b,e,j)}}(),Za=Array.prototype.indexOf||function(a){for(var c=0;c<this.length;c++)if(this[c]===a)return c;return-1},R=function(){return function(a,c){c=Fb.call(c);if(c=="finite")return!Gb[Hb](+a);return c==
"null"&&a===null||c==typeof a||c=="object"&&a===Object(a)||c=="array"&&Array.isArray&&Array.isArray(a)||Ib.call(a).slice(8,-1).toLowerCase()==c}}(),Jb=function(){function a(j){var g=document.createElement("script"),h=false;g.src=j;g.async=true;g.onload=g.onreadystatechange=function(){if(!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){h=true;g.onload=g.onreadystatechange=null;g&&g.parentNode&&g.parentNode.removeChild(g)}};b||(b=document.getElementsByTagName("head")[0]);
b.appendChild(g)}var c=0,b,e=this;return function(j,g,h){j+=j.indexOf("?")>=0?"&":"?";var k="json"+ ++c;e[k]=function(f){g(f);e[k]=null;try{delete e[k]}catch(i){}};a(j+(h?h:"callback")+"="+k);return k}}();INTERACT=function(){function a(m){return function(o,p){m.addEventListener(o,p,false)}}function c(m){return function(o,p){m.removeEventListener(o,p,false)}}function b(m){return function(o,p){m.attachEvent("on"+o,p)}}function e(m,o){return{x:m?m:0,y:o?o:0,count:1}}function j(m,o){d.push(M({handler:null,
checks:{},type:m},o))}function g(m){var o=0,p=0;if(m.offsetParent){do{o+=m.offsetLeft;p+=m.offsetTop;m=m.offsetParent}while(m)}return{left:o,top:p}}function h(m,o){return{source:m,target:o.target?o.target:o.srcElement}}function k(m,o){for(var p=m.target?m.target:m.srcElement;p&&p!==o;)p=p.parentNode;return p&&p===o}function f(m,o){return{x:m.x-(o?o.left:0),y:m.y-(o?o.top:0)}}function i(m,o){if(m.preventDefault){m.preventDefault();m.stopPropagation()}else if(typeof m.cancelBubble!="undefined")m.cancelBubble=
true;o&&m.stopImmediatePropagation&&m.stopImmediatePropagation()}var d=[],l=function(m,o,p){p=M({binder:null,unbinder:null,observable:null},p);for(var n=p.observable,t=[],r,u,D={bind:function(){return n.bind.apply(null,arguments)},unbind:function(){n.unbind();for(B=0;B<t.length;B++)t[B].unbind();return D}},B=0;B<o.length;B++)t.push(o[B](m,n,p));n.bind("pointerDown",function(){u=r=0});n.bind("pointerMove",function(q,z,s,w){r+=w.x||0;u+=w.y||0});n.bind("pointerUp",function(q,z,s){Math.abs(r)>20||Math.abs(u)>
20||n.triggerCustom("tap",q,z,s)});return D};j("pointer",{handler:function(m,o,p){function n(y){if(y.pageX&&y.pageY)return e(y.pageX,y.pageY);else{var L=document.documentElement,P=document.body;return e(y.clientX+(L&&L.scrollLeft||P&&P.scrollLeft||0)-(L&&L.clientLeft||P&&P.clientLeft||0),y.clientY+(L&&L.scrollTop||P&&P.scrollTop||0)-(L&&L.clientTop||P&&P.clientTop||0))}}function t(y){if(k(y,m))if(w=B(y)){var L=n(y);m.style.cursor="move";i(y,true);K=L.x;Q=L.y;E=e(K,Q);o.triggerCustom("pointerDown",
h("mouse",y),E,f(E,g(m)))}}function r(y){var L=n(y);C=L.x;F=L.y;if(k(y,m))q(y,w?"pointerMove":"pointerHover")}function u(y){if(w&&B(y)){w=false;if(k(y,m)){m.style.cursor="default";q(y,"pointerUp")}}}function D(y){if(k(y,m)){var L;y=y||window.event;if(y.detail)L=y.axis===2?-y.detail*z:0;else{L=y.wheelDeltaY?y.wheelDeltaY:y.wheelDelta;if(window.opera)L=-L}if(L!==0){var P=e(C,F);o.triggerCustom("zoom",h("mouse",y),P,f(P,g(m)),L/s,"wheel");i(y);y.returnValue=false}}}function B(y){y=y||window.event;return(y.which||
y.button)==1}function q(y,L,P,S,W){P=typeof P!="undefined"?P:C;S=typeof S!="undefined"?S:F;var I=P-K,J=S-Q,H=e(P,S);o.triggerCustom(L,h("mouse",y),H,f(H,g(m)),e(I,J));if(typeof W=="undefined"||W){K=P;Q=S}}p=M({},p);var z=120,s=z*8,w=false,E,C,F,K,Q;p.binder("mousedown",t);p.binder("mousemove",r);p.binder("mouseup",u);p.binder("dblclick",function(y){Z("captured double click");if(k(y,m)){var L=n(y);o.triggerCustom("doubleTap",h("mouse",y),L,f(L,g(m)))}});p.binder("mousewheel",D);p.binder("DOMMouseScroll",
D);return{unbind:function(){p.unbinder("mousedown",t);p.unbinder("mousemove",r);p.unbinder("mouseup",u);p.unbinder("mousewheel",D);p.unbinder("DOMMouseScroll",D)}}},checks:{touch:false}});j("pointer",{handler:function(m,o,p){function n(I){if(I.count<2)return 0;var J=I.x-I.next.x;I=I.y-I.next.y;return~~Math.sqrt(J*J+I*I)}function t(I,J,H){J=J?J:0;H=H?H:0;for(var X={x:I.x-J,y:I.y-H,id:I.id,count:I.count},Y=X;I.next;){I=I.next;Y=Y.next={x:I.x-J,y:I.y-H,id:I.id}}return X}function r(I,J){var H=I[J?J:"touches"],
X,Y;if(H.length===0)return null;Y=X={x:H[0].pageX,y:H[0].pageY,id:H[0].identifier,count:H.length};for(var da=1,Pa=H.length;da<Pa;da++)Y=Y.next={x:H[da].pageX,y:H[da].pageY,id:H[da].identifier};return X}function u(I){if(k(I,m)){F=g(m);var J=r(I,"changedTouches"),H=t(J,F.left,F.top);if(!Q){K=w;o.triggerCustom("pointerDown",h("touch",I),J,H)}S&&o.triggerCustom("pointerDownMulti",h("touch",I),J,H);Q=r(I);if(Q.count>1)L=n(Q);W=1;P=t(Q)}}function D(I){if(k(I,m)){i(I);y=r(I);if(K==w)K=Math.abs(Q.x-y.x)>
z||Math.abs(Q.y-y.y)>z?s:w;if(K!=w){K=y.count>1?C:E;if(K==C)if(Q.count===1){Q=t(y);L=n(Q)}else{var J=n(y);if(Math.abs(L-J)<q)K=E;else{var H;H=y.x;var X=y.next.x,Y=y.y,da=y.next.y;H={x:(H<X?H:X)+(Math.abs(H-X)>>1),y:(Y<da?Y:da)+(Math.abs(Y-da)>>1)};J=J/L;X=J-W;o.triggerCustom("zoom",h("touch",I),H,f(H,F),X,"pinch");W=J}}K==E&&o.triggerCustom("pointerMove",h("touch",I),y,t(y,F.left,F.top),e(y.x-P.x,y.y-P.y));S&&o.triggerCustom("pointerMoveMulti",h("touch",I),y,t(y,F.left,F.top))}P=t(y)}}function B(I){if(k(I,
m)){var J=r(I,"changedTouches"),H=t(J,F.left,F.top);y=r(I);if(!y){o.triggerCustom("pointerUp",h("touch",I),J,H);Q=null}S&&o.triggerCustom("pointerUpMulti",h("touch",I),J,H)}}p=M({detailed:false,inertia:false},p);var q=20,z=7,s=0,w=1,E=2,C=3,F,K,Q,y,L,P,S=p.detailed,W=1;p.binder("touchstart",u);p.binder("touchmove",D);p.binder("touchend",B);Z("initialized touch handler");return{unbind:function(){p.unbinder("touchstart",u);p.unbinder("touchmove",D);p.unbinder("touchend",B)}}},checks:{touch:true}});
return{register:j,watch:function(m,o,p){o=M({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},o);capabilities=M({touch:"ontouchstart"in window},p);if(!o.observable){Z("creating observable");o.observable=ia({});globalOpts=o}o.binder=(o.isIE?b:a)(o.bindTarget||document);o.unbinder=(o.isIE?b:c)(o.bindTarget||document);p=o.types;for(var n=capabilities,t=[],r=d.length;r--;){var u=d[r],D=!p||p.indexOf(u.type)>=0,B=true,q;for(q in u.checks){var z=u.checks[q];Z("checking "+
q+" capability. require: "+z+", capability = "+n[q]);B=B&&z===n[q]}if(D&&B)t[t.length]=u.handler}return new l(m,t,o)}}}();var Qa=function(){var a={};return{create:function(c,b){if(a[c][b])return a[c][b].apply(null,Array.prototype.slice.call(arguments,2))},get:function(c,b){return a[c]?a[c][b]:null},register:function(c,b,e){a[c]||(a[c]={});a[c][b]&&Z(Kb(c,b),"warn");a[c][b]=e}}}(),Kb=oa("Registration of {0}: {1} will override existing definition"),Lb=oa("Could not create drawable of type: {0}"),$a=
[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],ca=Math.PI*2,La=Math.PI/2,Ab=3,ka=Math.PI/180,Ba=180/Math.PI,rb=90,Cb=-rb,sb=180,Db=-sb,Ka=0.08181919084262157,ga=Math.abs,ub=Math.ceil,Ga=Math.round,ab=Math.min,Xa=Math.max,ya=Math.pow,vb=Math.sqrt,za=Math.log,xa=Math.sin,Mb=Math.asin,bb=Math.cos,lb=Math.atan,Nb=Math.atan2,Hb="hasOwnProperty",Gb={NaN:1,Infinity:1,"-Infinity":1},Fb=String.prototype.toLowerCase,Ib=Object.prototype.toString,sa="undefined",pa=
"string",ta="number",qb="array",$=Qa.register,ua=Qa.create,Ob=Qa.get,Pb=0,Bb=0,Va=/[\,\s]+/,Ca=function(){function a(h){j++;h=h||(new Date).getTime();for(var k=e.length;k--;){var f=e[k];j%f.every===0&&f.cb(h)}g&&animFrame(a)}var c=1E3/60,b=["r","webkitR","mozR","oR","msR"],e=[],j=0,g=function(){for(var h=0;h<b.length;h++)window.animFrame=window.animFrame||window[b[h]+"equestAnimationFrame"];window.animFrame&&Z("Using request animation frame");return animFrame}();g?animFrame(a):setInterval(a,1E3/60);
return{attach:function(h,k){e[e.length]={cb:h,every:k?Ga(k/c):1}},detach:function(h){for(var k=e.length;k--;)if(e[k].cb===h){e.splice(k,1);break}}}}(),mb=function(){var a=/^xy\((.*)\).*$/i;return{parseXY:function(c){if(!a.test(c)){c=c.split(Va);return Ra(c[1],c[0])}}}}(),V=function(){function a(e){for(var j=0;j<e.length;j++){var g=e[j];if(typeof document.body.style[g]!="undefined")return g}}var c={"-webkit-user-select":"none",position:"absolute"},b;b=a(["-webkit-transform","MozTransform"]);css3DTransformProp=
a(["WebkitPerspective","MozPerspective"]);return{transforms:R(b,pa),create:function(e,j,g){e=document.createElement(e);var h=[];g=g||{};e.className=j||"";for(var k in g)h[h.length]=k+": "+g[k];e.style.cssText=h.join(";");return e},move:function(e,j,g,h){if(b)e.style[b]="translate("+j+"px, "+g+"px) "+(h||[]).join(" ");else{e.style.left=j+"px";e.style.top=g+"px"}},styles:function(e){return M({},c,e)}}}(),wb=function(){function a(){for(var j=e.length,g=j;g--;)try{e[g](j)}catch(h){Z(h.toString(),"error")}}
var c=20,b=50,e=[];return{process:function(j,g,h){function k(d){d=(f||b)/d;if(i<j.length){var l=j.slice(i,i+d);d=l.length;var m=f?0:(new Date).getTime();g(l,d);if(!f){f=(l=((new Date).getTime()-m)/d)?c/l|0:j.length;Z("calculated that we can process "+f+" items per cycle")}i+=d}else{for(d=e.length;d--;)if(e[d]===k){e.splice(d,1);break}e.length===0&&Ca.detach(a);h&&h()}}var f,i=0;e.push(k)===1&&Ca.attach(a)}}}(),Ra=Ra||function(a,c){var b=parseFloat(c)*ka;b=xa(b);var e=Ka*b;b=za((1+b)/(1-b)*ya((1-e)/
(1+e),Ka))/2;return new qa(0,0,parseFloat(a)*ka,b)},cb=cb||function(a,c){for(var b=ya(Math.E,-c),e=La-2*lb(b),j=kb(e,b),g=0;g<12&&ga(e-j)>1.0E-7;){e=j;j=kb(e,b);g++}return new ja(j*Ba,a%360*Ba)};fa.prototype={constructor:fa,add:function(){for(var a=this.x,c=this.y,b=arguments.length;b--;){a+=arguments[b].x;c+=arguments[b].y}return this.copy(a,c)},copy:function(a,c){var b=M({},this);b.x=a||b.x;b.y=c||b.y;return b},equals:function(a){return this.x===a.x&&this.y===a.y},offset:function(a,c){return this.copy(this.x+
a,this.y+c)},sync:function(){return this},toString:function(){return this.x+", "+this.y}};qa.prototype=M(new fa,{constructor:qa,pos:function(){return cb(this.mercX,this.mercY)},sync:function(a,c){var b;if(!(b=a.rpp)){b=a.zoom();b=ca/(256<<b)}b=b;if(c){this.mercX=this.x*b-Math.PI;this.mercY=Math.PI-this.y*b}else if(this.mercX||this.mercY){this.x=Ga((this.mercX+Math.PI)/b);this.y=Ga((Math.PI-this.mercY)/b)}return this}});ra.prototype={constructor:ra,buffer:function(a,c){return new ra(this.x-a,this.y-
(c||a),this.w+a*2,this.h+(c||a)*2)},center:function(){return new fa(this.x+(this.w>>1),this.y+(this.h>>1))}};$("fn","simplify",nb);Hits=function(){return{diffHits:function(a,c){var b=[],e={},j;for(j=c.length;j--;)e[c[j].target.id]=true;for(j=a.length;j--;)e[a[j].target.id]||(b[b.length]=a[j]);return b},init:function(a,c,b,e){return{type:a,x:e.x|0,y:e.y|0,elements:[],absXY:c,relXY:b}},initHit:function(a,c,b){return{type:a,target:c,drag:b}},triggerEvent:function(a,c,b,e){c.triggerCustom(a.type+(b?b:
"Hit"),{hitType:a.type},e?e:a.elements,a.absXY,a.relXY,new qa(a.x,a.y))}}}();var pb=function(a){function c(g,h){var k=b[g],f;k||(k=b[g]=[]);(f=k[h])||(f=k[h]=[]);return f}a=a||128;var b=[],e={},j=0;return{copyInto:function(g){for(var h in e){var k=e[h];g.insert(k.bounds||k,k,h)}},insert:function(g,h,k){var f=g.x/a|0,i=g.y/a|0,d=(g.x+g.w)/a|0;g=(g.y+g.h)/a|0;k=k||h.id||"obj_"+j++;e[k]=h;for(h=f;h<=d;h++)for(f=i;f<=g;f++)c(h,f).push(k)},remove:function(g,h,k){k=k||h.id;if(e[k]){var f=g.x/a|0;h=g.y/
a|0;var i=(g.x+g.w)/a|0;g=(g.y+g.h)/a|0;delete e[k];for(f=f;f<=i;f++)for(var d=h;d<=g;d++){var l=c(f,d),m=Za.call(l,k);m>=0&&l.splice(m,1)}}},search:function(g){var h=g.y/a|0,k=(g.x+g.w)/a|0,f=(g.y+g.h)/a|0,i=[],d=[];for(g=g.x/a|0;g<=k;g++)for(var l=h;l<=f;l++)i=i.concat(c(g,l));i.sort();for(h=i.length;h--;){k=i[h];if(f=e[k])d[d.length]=f;for(;h>0&&i[h-1]==k;)h--}return d}}},Sa=function(){var a={},c=0;(new Date).getTime();var b={},e=[];Ca.attach(function(j){j=j||(new Date).getTime();for(var g=0;g<
e.length;){var h=e[g],k=b[h],f=b[h].image&&b[h].image.complete&&b[h].image.width>0,i=j-k.start;i=f||i>=3E4;if(f){f=k.callbacks;a[h]=k.image;for(var d=0;d<f.length;d++)f[d](k.image,true)}if(i){e.splice(g,1);delete b[h]}else g++}},5E3);return function(j,g){var h=j&&g?a[j]:null;if(h&&h&&h.complete&&h.width>0)g(h);else if(h=b[j])h.callbacks.push(g);else{h=new Image;h.id="_ldimg"+ ++c;b[j]={start:(new Date).getTime(),image:h,callbacks:[g]};h.src=j;e[e.length]=j}}}();Wa.prototype={constructor:Wa,load:function(a){var c=
this;Sa(this.url,function(b){c.loaded=true;c.image=b;a&&a()})}};var Qb=function(){return ia({fastpan:true,applyStyle:function(){},applyTransform:function(a,c,b){return{restore:null,x:c,y:b}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,reset:function(){}})};$("renderer","canvas",function(a,c,b,e,j){function g(q,z,s){var w,E;o[z]=function(C){for(w=D.length;w--;)if(E=s[D[w]])C[B[w]]=
E}}function h(q,z,s){var w=false;if(z)w=d.isPointInPath(n?z.x-l:z.relXY.x,n?z.y-m:z.relXY.y);return{draw:s||u,viewport:q,hit:w,vpX:l,vpY:m,context:d}}e=M({},e);var k,f,i,d,l=0,m=0,o={},p=null,n=Ya.canvas.pipTransformed,t={},r=function(){},u=function(){this.fill&&d.fill();this.stroke&&d.stroke()},D=["fill","stroke","lineWidth","opacity"],B=["fillStyle","strokeStyle","lineWidth","globalAlpha"];if(c){k=c.offsetWidth;f=c.offsetHeight;i=V.create("canvas",null,{position:"absolute","z-index":1});i.width=
k;i.height=f;a.attachFrame(i,true);d=null}b=M(j,{applyStyle:function(q){var z=o[q],s=d&&d.canvas?d.canvas.id:"default",w;t[s]||(t[s]=[]);w=t[s].pop()||"basic";if(z){t[s].push(q);z(d);return w}},applyTransform:function(q){if(q.translateX!==0||q.translateY!==0||q.scaling!==1||q.rotation!==0){d.save();p={undo:function(){d.restore();p=null},x:q.xy.x,y:q.xy.y};d.translate(q.xy.x-l+q.translateX,q.xy.y-m+q.translateY);q.rotation!==0&&d.rotate(q.rotation);q.scaling!==1&&d.scale(q.scaling,q.scaling)}return p},
drawTiles:function(q,z,s){for(var w=z.length;w--;){q=z[w];if(!q.loaded&&s)q.load(a.invalidate);else q.image&&d.drawImage(q.image,q.x-l,q.y-m)}},prepare:function(q,z){var s,w=false,E=z.scaled||z;if(d)d.restore();else d=i.getContext("2d");for(s=q.length;s--;)w=w||q[s].clip;l=E.x;m=E.y;if(d){w||d.clearRect(0,0,k,f);d.save()}d.globalCompositeOperation="source-over";return d},prepArc:function(q,z,s){d.beginPath();d.arc(q.xy.x-(p?p.x:l),q.xy.y-(p?p.y:m),q.size>>1,q.startAngle,q.endAngle,false);return h(z,
s)},prepImage:function(q,z,s,w){var E=(w.x||q.xy.x)-(p?p.x:l),C=(w.y||q.xy.y)-(p?p.y:m),F=w.image||q.image;if(F){d.beginPath();d.rect(E,C,w.width||F.width,w.height||F.height);return h(z,s,function(){d.drawImage(F,E,C,w.width||F.width,w.height||F.height)})}},prepMarker:function(q,z,s){var w=q.xy.x-(p?p.x:l),E=q.xy.y-(p?p.y:m),C=q.size,F=undefined;d.beginPath();switch(q.markerStyle.toLowerCase()){case "image":F=r;d.rect(w-(C>>1),E-(C>>1),C,C);if(q.reset&&q.image){q.image=null;q.reset=false}q.image?
d.drawImage(q.image,w-(C>>1),E-(C>>1),C,C):Sa(q.imageUrl,function(K){q.image=K;d.drawImage(q.image,w-(C>>1),E-(C>>1),C,C)});break;default:d.moveTo(w,E);d.lineTo(w-(C>>1),E-C);d.lineTo(w+(C>>1),E-C);d.lineTo(w,E)}return h(z,s,F)},prepPoly:function(q,z,s,w){var E=true;q=w.points||q.points;w=p?p.x:l;var C=p?p.y:m;d.beginPath();for(var F=q.length;F--;){var K=q[F].x-w,Q=q[F].y-C;if(E){d.moveTo(K,Q);E=false}else d.lineTo(K,Q)}return h(z,s)},getContext:function(){return d}});(function(){for(var q in G.styles)g(null,
q,G.styles[q]);xb.bind("defined",g)})();b.bind("detach",function(){c.removeChild(i)});return b});$("renderer","dom",function(a,c,b,e,j){function g(d){var l=d.image=new Image;f[d.id]=d;l.src=d.url;l.onload=function(){if(i[d.id])k.appendChild(this);else d.image=null};l.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";
return l}function h(d,l,m){var o=[],p;for(p in d){var n=d[p];if(m?n[m]:!l[p]){if(n.image&&n.image.parentNode){k.removeChild(n.image);n.image=null}o[o.length]=p}}for(l=o.length;l--;)delete d[o[l]]}var k=null,f={},i={};k=V.create("div","",V.styles({width:c.offsetWidth+"px",height:c.offsetHeight+"px"}));c.childNodes.length>0?c.insertBefore(k,c.childNodes[0]):c.appendChild(k);a.attachFrame(k);a=M(j,{drawTiles:function(d,l,m){for(var o,p=d.x,n=d.y,t=l.length;t--;){d=l[t];if(d.url){(o=d.image||(m?g(d):
null))&&V.move(o,d.x-p,d.y-n);i[d.id]=d}}}});a.bind("predraw",function(){h(f,i);i={}});a.bind("detach",function(){c.removeChild(k)});a.bind("reset",function(){for(h(f,i={});k.childNodes.length>0;)k.removeChild(k.childNodes[0])});return a});var xb=function(){function a(e,j){if(R(e,pa)){b.trigger("defined",e,c[e]=j);return e}else{var g=[],h;for(h in e)g[g.length]=a(h,e[h]);return g}}var c={},b=ia({get:function(e){return c[e]},define:a});a({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,
stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});return b}();$("view","view",function(a){function c(v,x,A,N){D(Xa(U+ya(2,N)-1,0.125),false,true)}function b(v,x){var A=renderer&&renderer.projectXY?renderer.projectXY(v,x):null;if(!A){A=O.getViewport();var N=1/U;A=new O.XY(A?A.x+v*N:v,A?A.y+x*N:x)}return A.sync(O,true)}function e(v,x,A){B("doubleTap",x,A,b(A.x,A.y));a.scalable&&D(2,{easing:"quad.out",duration:300},true)}function j(v,x,A){K=null;P=true;n("down",
x,A)}function g(v,x,A){n("hover",x,A)}function h(v,x,A,N){m(x,A,false);if(!K){S=N.x;W=N.y}}function k(v,x,A){m(x,A,true);P=false}function f(){clearTimeout(yb);yb=setTimeout(function(){renderer.checkSize()},250)}function i(v,x,A){n("tap",x,A);O.trigger("tap",x,A,b(A.x,A.y,true))}function d(v){var x=O,A=O,N=E,T=F,ha=a;v=(v||a.renderer).split("/");for(var la=new Qb(A,N,T,ha),Da=0;Da<v.length;Da++)la=ua("renderer",v[Da],A,N,T,ha,la);renderer=x.renderer=la;L=a.fastpan&&renderer.fastpan&&V.transforms;l()}
function l(){ea&&ea.unbind();if(renderer){ea=INTERACT.watch(renderer.interactTarget||F);if(a.scalable){ea.bind("zoom",c);ea.bind("doubleTap",e)}ea.bind("pointerDown",j);ea.bind("pointerMove",h);ea.bind("pointerUp",k);a.captureHover&&ea.bind("pointerHover",g);ea.bind("tap",i)}}function m(v,x,A){if(K){v=b(x.x,x.y);K.drag.call(K.target,K,v.x,v.y,A)&&aa++;if(A)K=null}}function o(v){for(var x=w;x--;)if(s[x].id===v)return x;return w}function p(v){F=document.getElementById(v);F.appendChild(C=V.create("div",
"",V.styles({overflow:"hidden",width:F.offsetWidth+"px",height:F.offsetHeight+"px"})));db=C.offsetWidth+ma*2;eb=C.offsetHeight+ma*2;fb=F.offsetWidth/2;gb=F.offsetHeight/2;C.appendChild(E=V.create("div","",V.styles({width:db+"px",height:eb+"px","z-index":2,margin:-ma+"px 0 0 "+-ma+"px"})));d()}function n(v,x,A){ba=Hits.init(v,x,A,b(A.x,A.y,true));for(v=w;v--;)y=y||(s[v].hitGuess?s[v].hitGuess(ba.x,ba.y,O):false);y&&aa++}function t(){var v=new ra(J,H,db,eb);v.scaleFactor=U;return v}function r(v,x,A){if(R(v,
pa)&&R(x,sa))for(x=0;x<w;x++){if(s[x].id===v)return s[x]}else if(R(v,pa)){x=ua("layer",x,O,A);x.added=(new Date).getTime();x.id=v;s[o(v)]=x;s.sort(function(N,T){return T.zindex-N.zindex||T.added-N.added});w=s.length;O.trigger("resync");u();O.trigger("layerChange",O,x);aa++;return x}else return[].concat(s)}function u(){var v=t();if(v){if(Ea||Fa)if(v){var x=Ta?J+(v.w>>1):J,A=Ua?H+(v.h>>1):H,N=v.w,T=v.h;if(Ea&&Ea>N)if(x+N>Ea)J=Ta?J:Ea-N;else if(x<0)J=Ta?J:0;if(Fa&&Fa>T)if(A+T>Fa)H=Ua?H:Fa-T;else if(A<
0)H=Ua?H:0}da=J;Pa=H;O.trigger("refresh",O,v);aa++}}function D(v,x,A){if(R(v,ta)){var N=A?v:U*v;if(!Rb){x=null;v=Ga(za(N)/Math.LN2);N=ya(2,v)}if(x)Ha=na.tween([U],[N],x,function(){U=N;Ha=null;aa++});else{U=N;aa++}return O}else return U}function B(){for(var v=O.trigger.apply(null,arguments).cancel,x=s.length;x--;)v=s[x].trigger.apply(null,arguments).cancel||v;return!v}function q(v,x,A){if(R(v,ta)){if(A)va=na.tween([J,H],[v,x],A,function(){va=null});else{J=v|0;H=x|0}return O}else return(new O.XY(J,
H)).sync(O,true)}a=M({container:"",captureHover:true,controls:[],drawOnScale:true,fastpan:true,padding:0,inertia:true,refreshDistance:256,pannable:true,scalable:true,renderer:"canvas"},a);var z=[],s=[],w=0,E=null,C=null,F,K=null,Q=!R(window.attachEvent,sa),y=false,L,P=false,S=0,W=0,I=a.refreshDistance,J=0,H=0,X=0,Y=0,da=0,Pa=0,Ea=null,Fa=null,Ta=false,Ua=false,va=null,ma=a.padding,ba=null,Ia=null,yb=0,wa=0,Ja=null,U=1,Ha=null,hb=1,ea=null,ib={index:0,draw:false},Rb=true,aa=0,db,eb,fb,gb,O={XY:fa,
id:a.id,padding:ma,panSpeed:0,attachFrame:function(v,x){x&&E.appendChild(v)},center:function(v,x,A){if(R(v,pa)){x=mb.parseXY(v).sync(O);v=x.x;x=x.y}if(R(v,ta)){q(v-fb-ma,x-gb-ma,A);return O}else return q().offset(fb+ma|0,gb+ma|0).sync(O,true)},detach:function(){renderer&&renderer.trigger("detach");ea&&ea.unbind();if(C){F.removeChild(C);E=C=null}},layer:r,invalidate:function(){aa++},pan:function(v,x,A){q(J+v,H+x,A)},refresh:u,rotate:function(v,x,A){if(R(v,ta)){var N=A?v:wa+v;if(x)Ja=na.tween([wa],
[N],x,function(){wa=N%360;Ja=null;aa++});else{wa=N%360;aa++}return O}else return wa},scale:D,triggerAll:B,setMaxOffset:function(v,x,A,N){Ea=v;Fa=x;Ta=A;Ua=N},getViewport:t,offset:q};ia(O);O.bind("resize",function(){renderer.checkSize()});O.bind("layerRemove",function(v,x){var A=Za(s,x.id);if(A>=0&&A<w){s.splice(A,1);aa++}w=s.length});tb(O,a,{container:p,captureHover:l,scalable:l,pannable:l,renderer:function(v){if(renderer){renderer.trigger("detach");renderer=null}d(v);aa++}});Ya.init(function(){r("markers",
"draw",{zindex:20});p(a.container);Q?window.attachEvent("onresize",f):window.addEventListener("resize",f,false)});Ca.attach(function(v){var x=[],A,N,T;self.panSpeed=panSpeed=ga(S)+ga(W);A=U!==hb;if(panSpeed>0||A||va||Ha||Ja){aa++;if(va&&panSpeed>0){va(true);va=null}}if(panSpeed<2&&(ga(J-da)>=I||ga(H-Pa)>=I))u();ib.index++;ib.draw=aa||panSpeed||0;if(renderer&&ib.draw){if(Ha)U=Ha()[0];if(Ja)wa=Ja()[0];X+=S;Y+=W;if(S||W)O.trigger("pan");if(V.transforms){if(U!==1)x[x.length]="scale("+U+")";if(wa!==0)x[x.length]=
"rotate("+wa+"deg)"}if(A=!L||(a.drawOnScale||U===1)&&panSpeed<5){if(va){A=va();J=A[0]|0;H=A[1]|0}else{J=J-X/U|0;H=H-Y/U|0}T=t();renderer.trigger("predraw",T);if(renderer.prepare(s,T,v,ba)){N=Y=A=X=aa=0;for(ii=w;ii--;){var ha=s[ii];if(ha.visible){var la=ha.style?renderer.applyStyle(ha.style,true):null;ha.draw(renderer,T,O,v,ba);la&&renderer.applyStyle(la)}}renderer.trigger("render",T);O.trigger("drawComplete",T,v);V.move(E,A,N,x)}}else V.move(E,X,Y,x);if(P||!a.inertia)W=S=0;else if(S!=0||W!=0){S*=
0.8;W*=0.8;if(ga(S)<0.5)S=0;if(ga(W)<0.5)W=0}if(ba){v=ba?ba.elements:[];if(Ia&&Ia.type==="hover"){x=Hits.diffHits(Ia.elements,v);x.length>0&&Hits.triggerEvent(Ia,O,"Out",x)}if(v.length>0){A=ba.x;N=ba.y;for(x=v.length;x--;){T=v[x];ha=A;la=N;var Da=T&&T.drag&&(!T.canDrag||T.canDrag(T,ha,la));if(Da){K=T;K.startX=ha;K.startY=la}if(Da)break}Hits.triggerEvent(ba,O)}Ia=v.length>0?M({},ba):null;ba=null}if(hb!==U){O.trigger("scaleChanged",U);hb=U}}});(function(v){z=[];for(var x=0;x<v.length;x++)z[z.length]=
ua("control",v[x],O,C,F,a[v[x]])})(a.controls);return O});$("view","map",function(a){function c(f){var i=k.getViewport();return f?b(f.bestZoomLevel(i)).center(f.center()):new Oa((new qa(i.x,i.y2)).sync(k,true).pos(),(new qa(i.x2,i.y)).sync(k,true).pos())}function b(f,i,d){if(R(f,ta)){f=Xa(a.minZoom,ab(a.maxZoom,f|0));if(f!==g){var l=k.getViewport(),m=k.offset(),o=l.w/2;l=l.h/2;var p=ya(2,f-g),n=o/p|0,t=l/p|0;g=f;k.offset(((i||m.x+o)-n)*p,((d||m.y+l)-t)*p);refreshY=refreshX=0;k.trigger("zoom",f);j=
k.rpp=ca/(256<<g);k.setMaxOffset(ca/j|0,ca/j|0,true,false);k.scale(1,false,true);k.trigger("resync");k.renderer.trigger("reset");k.refresh()}return k}else return g}a=M({container:"",captureHover:true,controls:["zoombar"],drawOnScale:true,padding:50,inertia:true,refreshDistance:256,pannable:true,scalable:true,minZoom:1,maxZoom:18,renderer:"canvas/dom",zoom:1,zoombar:{}},a);var e=new qa,j,g=a.zoom||a.zoomLevel,h=0,k=M(ua("view","view",a),{XY:qa,bounds:c,zoom:b});k.bind("refresh",function(){var f=k.getViewport();
if(e.x!=f.x||e.y!=f.y){k.trigger("boundsChange",c());e.x=f.x;e.y=f.y}});k.bind("scaleChanged",function(f,i){var d=za(i)/Math.LN2|0;if(d!==0){i=ya(2,d);clearTimeout(h);h=setTimeout(function(){b(g+d)},500)}});return k});var na=function(){return{tween:function(a,c,b,e){function j(m){var o=m-l;m=l+d<=m;for(var p=g;p--;)h[p]=k(o,a[p],f[p],d);if(m||i){Ca.detach(j);e&&e(h,o,i)}}b=M({easing:"sine.out",duration:1E3,callback:e},b);var g=a.length,h=[].concat(a),k=Eb(b.easing),f=[],i=false,d=b.duration,l=(new Date).getTime();
for(b=g;b--;)f[b]=c[b]-a[b];Ca.attach(j);return function(m){i=m;return h}},tweenDrawable:function(a,c,b,e,j){var g=na.tween([b],[e],j,function(){a[c]=e;for(var k=a.tweens.length;k--;)if(a.tweens[k]===h){a.tweens.splice(k,1);break}},a.view),h=function(){a[c]=g()[0]};return h}}}(),Aa=function(a,c,b){b=M({style:null,xy:null,size:20,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);M(this,b);if(R(this.xy,pa))this.xy=new a.XY(this.xy);this.id="drawable_"+Pb++;this.bounds=
null;this.view=a;this.layer=c;this.tweens=[];this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&ia(this)};Aa.prototype={constructor:Aa,applyTweens:function(){for(var a=this.tweens.length;a--;)this.tweens[a]()},drag:null,draw:null,getProps:null,resync:function(){if(this.xy){this.xy.sync(this.view);if(this.size){var a=this.size>>1;this.updateBounds(new ra(this.xy.x-a,this.xy.y-a,this.size,this.size))}}},rotate:function(a,c,b){if(R(a,ta)){a=(b?a:this.rotation*
Ba+a)*ka;if(c)this.tweens.push(na.tweenDrawable(this,"rotation",this.rotation,a,c));else{this.rotation=a;this.view.invalidate()}return this}else return this.rotation*Ba},scale:function(a,c,b){if(R(a,ta)){a=b?a:this.scaling*a;if(c)this.tweens.push(na.tweenDrawable(this,"scaling",this.scaling,a,c));else{this.scaling=a;this.view.invalidate()}return this}else return this.scaling},translate:function(a,c,b,e){if(R(a,ta)){a=e?a:this.translateX+a;c=e?c:this.translateY+c;if(b){this.tweens.push(na.tweenDrawable(this,
"translateX",this.translateX,a,b));this.tweens.push(na.tweenDrawable(this,"translateY",this.translateY,c,b))}else{this.translateX=a;this.translateY=c;this.view.invalidate()}return this}else return new fa(this.translateX,this.translateY)},updateBounds:function(a,c){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);this.bounds=a;if(c)this.xy=this.bounds.center()}};$("drawable","marker",function(a,c,b){b=M({fill:true,stroke:false,markerStyle:"simple",
hoverStyle:"highlight",typeName:"Marker"},b);return new Aa(a,c,b)});$("drawable","poly",function(a,c,b){function e(){var f,i,d,l,m,o,p,n;n=k.points=b.simplify?nb(h):h;for(f=n.length;f--;){i=n[f].x;d=n[f].y;o=R(o,sa)||i<o?i:o;p=R(p,sa)||d<p?d:p;l=R(l,sa)||i>l?i:l;m=R(m,sa)||d>m?d:m}k.updateBounds(new ra(o,p,l-o,m-p),true)}function j(f){if(R(f,qb)){h=[];wb.process(f,function(i,d){for(var l=0;l<d;l++)h[h.length]=new a.XY(i[l])},g)}}function g(){h.length&&wb.process(h,function(f,i){for(var d=i;d--;)f[d].sync(a)},
e)}b=M({simplify:false,fill:true,points:[],typeName:"Poly"},b);var h=[],k=M(new Aa(a,c,b),{points:[],getPoints:function(){return[].concat(h)},resync:g});tb(k,b,{points:j});j(b.points);return k});$("drawable","line",function(a,c,b){b.fill=false;return ua("drawable","poly",a,c,b)});$("drawable","image",function(a,c,b){function e(){if(f&&f.width>0){if(!this.centerOffset)this.centerOffset=new fa(-f.width>>1,-f.height>>1);this.updateBounds(new ra(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,
f.width,f.height),false)}}function j(d){if(this.imageUrl=d){var l=this;Sa(this.imageUrl,function(m,o){f=m;if(o){var p=i.layer?i.layer.view:null;p&&p.invalidate()}e.apply(l)})}}b=M({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var g=Aa.prototype.resync,h=0,k=0,f=b.image,i=M(new Aa(a,c,b),{changeImage:j,getProps:function(){this.bounds||e(this,f);return{image:f,x:this.xy.x+h,y:this.xy.y+k}},resync:function(d){g.call(this,d);e.call(this)}});f||j.call(this,this.imageUrl);if(this.centerOffset){h=
this.centerOffset.x;k=this.centerOffset.y}});$("drawable","arc",function(a,c,b){b=M({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);return new Aa(a,c,b)});Ma.prototype={constructor:Ma,clip:null,cycle:function(){},draw:function(){},hitGuess:null,remove:function(){this.view.trigger("layerRemove",this)}};$("layer","tile",function(a,c){c=M({generator:"osm",imageLoadArgs:{}},c);var b=ua("generator",c.generator,c).run,e=null,j=[],g=M(new Ma(a,c),{draw:function(h,k,f){h.drawTiles&&h.drawTiles(k,e.search(k.buffer(128)),
f.panSpeed<2)}});a.bind("resync",function(){var h=a&&a.zoom?a.zoom():0;j[h]||(j[h]=ob(h));e=j[h]});a.bind("refresh",function(h,k,f){e&&b(k,f,e,function(){k.invalidate()})});return g});$("layer","draw",function(a,c){function b(i,d,l,m){var o=this.dragOffset;if(!o)o=this.dragOffset=new a.XY(i.startX-this.xy.x,i.startY-this.xy.y);this.xy.x=d-o.x;this.xy.y=l-o.y;if(m){delete this.dragOffset;a.invalidate();this.xy.sync(a,true);this.trigger("dragDrop")}return true}function e(i){clearTimeout(k);k=setTimeout(function(){g.sort(function(d,
l){if(l.xy&&d.xy){var m=l.xy.y-d.xy.y;return m!=0?m:l.xy.x-d.xy.x}});i&&i.invalidate()},50)}function j(i,d,l,m){m&&h.remove(m,d);h.insert(l,d)}c=M({zindex:10},c);var g=[],h,k=0,f=M(new Ma(a,c),{itemCount:0,clear:function(){h=new pb;g=[];f.trigger("cleared");f.itemCount=0},create:function(i,d,l){d=ua("drawable",i,a,f,d);if(!d)throw Lb(i);if(l)g.unshift(d);else g[g.length]=d;d.resync();h&&d.bounds&&h.insert(d.bounds,d);e(a);d.bind("move",j);f.itemCount=g.length;f.trigger(i+"Added",d);return d},draw:function(i,
d,l,m,o){l={};m=h&&d?h.search(d):[];for(var p=m.length;p--;){var n=m[p],t=n.style||f.style,r,u,D=n.getProps?n.getProps(i):l;r=i["prep"+n.typeName];n.tweens.length>0&&n.applyTweens();u=i.applyTransform(n);if(D=r?r.call(i,n,d,o,D):null){if(o&&D.hit){o.elements.push(Hits.initHit(n.type,n,n.draggable?b:null));r=o.type+"Style";t=n[r]||f[r]||t}t=t?i.applyStyle(t,true):null;(r=n.draw||D.draw)&&r.call(n,D);t&&i.applyStyle(t)}u&&u.undo&&u.undo()}},find:function(){return[].concat(g)},hitGuess:function(i,d){return h&&
h.search({x:i-10,y:d-10,w:20,h:20}).length>0}});a.bind("resync",function(){h=ob(a.zoom(),h);for(var i=g.length;i--;)g[i].resync()});return f});Na.prototype={constructor:Na};$("control","zoombar",function(a,c,b,e){function j(s,w){var E=D[s]=V.create("div","t5-zoombar-button",{position:"absolute",background:g(s),"z-index":51,width:e.width+"px",height:e.buttonHeight+"px","margin-top":(w||0)+"px"});B.appendChild(E)}function g(s,w){return"url("+e.images+") 0 -"+(l+o*3+(s||0)*i*3+(w||0)*i)+"px"}function h(s){return"url("+
e.images+") 0 -"+(l+(s||0)*o)+"px"}function k(s,w){var E;if(s===m){m.style.background=h(w);E="thumb"}else for(var C=0;C<D.length;C++)if(s===D[C]){E="button"+C;D[C].style.background=g(C,w);break}return E}function f(s){if(s!==r){r=s;t=n-r/u*(n-p)|0;V.move(m,0,t-p);clearTimeout(q);q=setTimeout(function(){a.zoom(r)},500)}}e=M({width:24,height:200,images:"img/zoom.png",align:"right",marginTop:10,spacing:10,thumbHeight:16,buttonHeight:16},e);var i=e.buttonHeight,d,l=e.height,m,o=e.thumbHeight,p=e.spacing+
i-(o>>1),n=e.height-i-(o>>1),t=p,r=-1;c=a.minZoom();var u=a.maxZoom()-c+1,D=[],B,q=0,z={button0:function(){a.zoom(a.zoom()+1)},button1:function(){a.zoom(a.zoom()-1)}};B=V.create("div","t5-zoombar",{position:"absolute",background:"url("+e.images+")","z-index":50,overflow:"hidden",width:e.width+"px",height:e.height+"px",margin:function(){var s=e.spacing,w=oa("{0}px 0 0 {1}px");if(e.align==="right")s=b.offsetWidth-e.width-e.spacing;return w(e.marginTop,s)}()});b.childNodes[0]?b.insertBefore(B,b.childNodes[0]):
b.appendChild(B);B.appendChild(m=V.create("div","t5-zoombar-thumb",{position:"absolute",background:h(),"z-index":51,width:e.width+"px",height:e.thumbHeight+"px",margin:"10px 0 0 0",top:t-p+"px"}));j(0);j(1,e.height-e.buttonHeight);d=INTERACT.watch(B,{bindTarget:B});d.bind("pointerMove",function(s,w,E){t=Math.min(Math.max(p,E.y-(o>>1)),n);f(u-(t-p)/n*u|0)});d.bind("pointerDown",function(s){k(s.target,2)});d.bind("pointerUp",function(s){k(s.target,0)});d.bind("tap",function(s){(s=z[k(s.target,2)])&&
s()});c=new Na(a);c.bind("detach",function(){d.unbind();b.removeChild(B)});a.bind("zoom",function(s,w){f(w)});f(a.zoom());return c});ja.prototype={constructor:ja,distanceTo:function(){if(!targetPos||this.empty()||targetPos.empty())return 0;var a=(targetPos.lat-this.lat)*ka>>1,c=(targetPos.lon-this.lon)*ka>>1;a=xa(a)*xa(a)+bb(this.lat*ka)*bb(targetPos.lat*ka)*xa(c)*xa(c);return 6371*2*Nb(vb(a),vb(1-a))},equalTo:function(a){return pos&&this.lat===a.lat&&this.lon===a.lon},empty:function(){return this.lat===
0&&this.lon===0},inArray:function(a){for(var c=a.length;c--;)if(this.equal(a[c]))return true;return false},offset:function(a,c){var b=this.lat*ka,e=this.lon*ka,j=b+a/6371;b=Mb(xa(c/6371)/bb(b));e=e+b;j=(j+La)%Math.PI-La;e%=ca;return new ja(j*Ba,e*Ba)},toPixels:function(){return Ra(this.lon,this.lat)},toString:function(a){return this.lat+(a||" ")+this.lon}};(function(){$("fn","generalize",function(a,c,b){var e=a.length,j=[],g=null;b=(b||250)/1E3;for(e=e;e--;)if(e===0)j.unshift(a[e]);else{var h=!g||
a[e].inArray(c)?b:g.distanceTo(a[e]);if(a[e]&&h>=b){j.unshift(a[e]);g=a[e]}}return j})})();Oa.prototype={constructor:Oa,bestZoomLevel:function(a){var c=this.center();c=ab(Ga(ga(c.lat)*0.05),$a.length);var b=$a[c],e=this.size();c=ub(za($a[3]*a.h/e.y)/za(2));a=ub(za(b*a.w/e.x)/za(2));return ab(isNaN(c)?1E3:c,isNaN(a)?1E3:a)},center:function(){var a=this.size();return new ja(this.min.lat+(a.y>>1),this.min.lon+(a.x>>1))},expand:function(a){this.min.lat-=a;this.max.lat+=a;this.min.lon-=a%360;this.max.lon+=
a%360},size:function(a){var c=new fa(0,this.max.lat-this.min.lat);c.x=(a||R(a,sa))&&this.min.lon>this.max.lon?360-this.min.lon+this.max.lon:this.max.lon-this.min.lon;return c},toString:function(){return"min: "+this.min+", max: "+this.max}};var G={ex:M,log:Z,observable:ia,formatter:oa,wordExists:function(a,c){for(var b=a.split(/\s|\,/).length;b--;)if(a.toLowerCase()==c.toLowerCase())return true;return false},is:R,indexOf:Za,fn:function(a){return Ob("fn",a)},project:Ra,unproject:cb,userMessage:function(a,
c,b){G.trigger("userMessage",a,c,b)},Registry:Qa,Style:xb,DOM:V,Rect:ra,XY:fa,Hits:Hits,Control:Na,Tile:Wa,Tweener:na,getImage:Sa,Pos:ja,BBox:Oa};ia(G);G.RouteTools=function(){function a(i){if(g.test(i))return"-slight";return""}function c(i,d){d.geometry&&i.layer("route","draw").create("line",{points:d.geometry,style:"waypoints",simplify:true})}function b(i){for(var d="unknown",l=e||k,m=0;m<l.length;m++){l[m].regex.lastIndex=-1;var o=l[m].regex.exec(i);if(o){d=l[m].customCheck?l[m].customCheck(i,
o):l[m].turnType;break}}return d}var e=undefined,j=G.fn("generalize"),g=/bear/i,h=/right/i,k=function(){var i=[];i.push({regex:/continue/i,turnType:"continue"});i.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(d,l){return"turn-left"+a(l[1])}});i.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(d,l){return"turn-right"+a(l[1])}});i.push({regex:/enter\s(roundabout|rotary)/i,turnType:"roundabout"});i.push({regex:/take.*?ramp/i,turnType:"ramp"});i.push({regex:/take.*?exit/i,
turnType:"ramp-exit"});i.push({regex:/make(.*?)u\-turn/i,customCheck:function(d,l){return"uturn"+(h.test(l[1])?"-right":"-left")}});i.push({regex:/proceed/i,turnType:"start"});i.push({regex:/arrive/i,turnType:"arrive"});i.push({regex:/fell\sthrough/i,turnType:"merge"});return i}(),f={calculate:function(i){i=M({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},i);var d=G.Registry.create("service","routing");d&&d.calculate(i,function(l){if(i.generalize)l.geometry=
j(l.geometry,l.getInstructionPositions());if(i.map){c(i.map,l);i.autoFit&&i.map.bounds(l.boundingBox)}i.success&&i.success(l)})},createMapOverlay:c,parseTurnType:b,Instruction:function(i){var d=i=M({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},i),l=i.description;l=l.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");d.description=l;if(!i.turnType)i.turnType=b(i.description);return i},RouteData:function(i){i=M({geometry:[],instructions:[],boundingBox:null},i);if(!i.boundingBox)i.boundingBox=
new G.BBox(i.geometry);return M({getInstructionPositions:function(){for(var d=[],l=0;l<i.instructions.length;l++)i.instructions[l].position&&d.push(i.instructions[l].position);return d}},i)}};G.observable(f);return f}();COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var a=arguments[0]||{},c,b=1,e=arguments.length;b<e;b++)if((c=arguments[b])!==null)for(var j in c){var g=c[j];if(a!==g)if(g!==undefined)a[j]=g}return a};(function(){var a=/^P(\d+Y)?(\d+M)?(\d+D)?$/,c=/^(\d+H)?(\d+M)?(\d+S)?$/,
b={8601:function(j){j=j.split("T");var g=null;g=null;var h=0,k=0;a.lastIndex=-1;g=a.exec(j[0]);h+=g[3]?parseInt(g[3].slice(0,-1),10):0;c.lastIndex=-1;g=c.exec(j[1]);k+=g[1]?parseInt(g[1].slice(0,-1),10)*3600:0;k+=g[2]?parseInt(g[2].slice(0,-1),10)*60:0;k+=g[3]?parseInt(g[3].slice(0,-1),10):0;return new e(h,k)}},e=COG.Duration=function(j,g){return{days:j?j:0,seconds:g?g:0}};COG.addDuration=function(){for(var j=new e,g=arguments.length;g--;){j.days+=arguments[g].days;j.seconds+=arguments[g].seconds}if(j.seconds>=
86400){j.days+=~~(j.seconds/86400);j.seconds%=86400}return j};COG.formatDuration=function(j){var g,h,k="";if(j.days)k=j.days+" days ";if(j.seconds){j=j.seconds;if(j>=3600){g=~~(j/3600);j-=g*3600}if(j>=60){h=Math.round(j/60);j-=h*60}if(g)k=k+g+(g>1?" hrs ":" hr ")+(h?(h>10?h:"0"+h)+" min ":"");else if(h)k=k+h+" min";else if(j>0)k=k+(j>10?j:"0"+j)+" sec"}return k};COG.parseDuration=function(j,g){var h=g?b[g]:null;if(h)return h(j);COG.Log.warn("Could not find duration parser for specified format: "+
g);return new e}})();G.Decarta=function(){function a(n){return f(g.clientName,g.clientPassword,g.sessionID,g.configuration,g.release,n)}function c(n,t){return i(n.maxResponses,n.version,n.requestID,n.methodName,t)}function b(n,t){g.server||Z("No server configured for deCarta - we are going to have issues","warn");return d(g.server,n.requestID,escape(t))}function e(n,t){Jb(b(n,a(c(n,n.getRequestBody()))),function(r){var u=r.response.XLS.Response;if(u.numberOfResponses>0&&u[n.methodName+"Response"]){r=
null;if(n.parseResponse)r=n.parseResponse(u[n.methodName+"Response"]);t&&t(r)}else Z("no responses from server: "+r.response,"error")})}function j(n,t){var r=new m({json:n.StreetAddress}),u=new l({countryCode:n.countryCode});u.parse(n.Place);return new G.Geo.Address({streetDetails:r,location:u,country:n.countryCode?n.countryCode:"",postalCode:n.PostalCode?n.PostalCode:"",pos:t})}var g={sessionID:(new Date).getTime(),server:"",clientName:"",clientPassword:"",configuration:"",maxResponses:25,release:"4.4.2sp03",
tileFormat:"PNG",fixedGrid:true,useCache:true,tileHosts:[],requestTimeout:3E4,geocoding:{countryCode:"US",language:"EN"}},h={DEFAULT:function(n){for(var t=["landmark","municipalitySubdivision","municipality","countrySubdivision"],r="",u=0;u<t.length;u++)if(n[t[u]])r+=n[t[u]]+" ";return r}},k=1,f=oa("<xls:XLS version='1' xls:lang='en' xmlns:xls='http://www.opengis.net/xls' rel='{4}' xmlns:gml='http://www.opengis.net/gml'><xls:RequestHeader clientName='{0}' clientPassword='{1}' sessionID='{2}' configuration='{3}' />{5}</xls:XLS>"),
i=oa("<xls:Request maximumResponses='{0}' version='{1}' requestID='{2}' methodName='{3}Request'>{4}</xls:Request>"),d=oa("{0}/JSON?reqID={1}&chunkNo=1&numChunks=1&data={2}&responseFormat=JSON"),l=function(n){n=G.ex({landmark:"",municipality:"",municipalitySubdivision:"",countrySubdivision:"",countryCode:""},n);var t=G.ex({calcMatchPercentage:function(r){var u=0;if(n.landmark&&n.landmarkSubType){if(G.wordExists(r,n.landmarkSubType)){u+=0.4;u+=G.wordExists(r,n.landmark)?0.6:0}}else{u+=G.wordExists(r,
n.municipalitySubdivision)?0.8:0;if(u===0&&n.municipality)u+=G.wordExists(r,n.municipality)?0.7:0}if(n.countrySubdivision)u+=G.wordExists(r,n.countrySubdivision)?0.2:0;return u},getCountryCode:function(){if(n.countryCode)return n.countryCode.toUpperCase();return""},parse:function(r){for(var u=0;r&&u<r.length;u++){var D=r[u].type?r[u].type.slice(0,1).toLowerCase()+r[u].type.slice(1):"";if(typeof n[D]!=="undefined"){n[D]=r[u].content;if(r[u].subType)n[D+"SubType"]=r[u].subType}}G.ex(t,n)},toString:function(){var r=
h[t.getCountryCode()];if(!r)r=h.DEFAULT;return r(n)}},n);return t},m=function(n){n=G.ex({json:{}},n);var t="",r="";if(n.json.Street)t=n.json.Street.content?n.json.Street.content:n.json.Street;t=t&&t.replace?t.replace(/\/\d+$/,""):"";if(n.json.Building)if(n.json.Building.number)r=n.json.Building.number;return{building:r,street:t,calcMatchPercentage:function(u){var D=0,B=G.Geo.A.normalize(u),q=G.Geo.A.normalize(t);if(n.json.Building)if(G.Geo.A.buildingMatch(u,n.json.Building.number.toString()))D+=0.2;
if(B&&q&&G.wordExists(B,q))D+=0.8;return D},toString:function(){if(t)return(r?r+" ":"")+t;return""}}},o=function(){return{methodName:"",maxResponses:25,version:"1.0",requestID:k++,getRequestBody:function(){return""},parseResponse:function(n){return n}}},p=function(){return G.ex(new o,{methodName:"RUOK",parseResponse:function(n){return{aliasCount:n.maxHostAliases,host:n.hostName}}})};G.Registry.register("generator","decarta",function(n){function t(D,B,q,z){if(D=D.zoom?D.zoom():0){var s=2<<D-1,w=s>>
1,E=n.tileSize,C=(B.w/E|0)+1,F=(B.h/E|0)+1,K=(B.x/E|0)-w;B=s-(B.y/E|0)-w-F;var Q=q.search({x:(w+K)*E,y:(w+B*-1-F)*E,w:C*E,h:F*E});s={};var y;for(y=Q.length;y--;)s[Q[y].id]=true;for(Q=0;Q<=C;Q++)for(y=0;y<=F;y++){var L=K+Q,P=B+y-1,S=L+"_"+P;if(!s[S]){L=new G.Tile((w+K+Q)*E,(w+B*-1-y)*E,u[Q%u.length]+"/openls/image-cache/TILE?LLMIN=0.0,0.0&LLMAX="+r[D]+"&CACHEABLE=true&DS=navteq-world&WIDTH=256&HEIGHT=256&CLIENTNAME="+g.clientName+"&SESSIONID="+g.sessionID+"&FORMAT=PNG&CONFIG="+g.configuration+"&N="+
P+"&E="+L,E,E,S);q.insert(L,L)}}z&&z()}}n=G.ex({tileSize:256},n);var r=["89.787438015348100000,360.00000000000000000","85.084059050110410000,180.00000000000000000","66.653475896509040000,90.00000000000000000","41.170427238429790000,45.000000000000000000","22.076741328793200000,22.500000000000000000","11.251819676168665000,11.250000000000000000","5.653589942659626000,5.625000000000000000","2.830287664051185000,2.812500000000000000","1.415581451872543800,1.406250000000000000","0.707845460801532700,0.703125000000000000",
"0.353929573271679340,0.351562500000000000","0.176965641673330230,0.175781250000000000","0.088482927761462040,0.087890625000000000","0.044241477246363230,0.043945312500000000","0.022120740293895182,0.021972656250000000","0.011060370355776452,0.010986328125000000","0.005530185203987857,0.005493164062500000","0.002765092605263539,0.002746582031250000","0.001382546303032519,0.001373291015625000","0.000691272945568983,0.000686645507812500","0.000345636472797214,0.000343322753906250"],u=null;G.userMessage("ack",
"decarta","&copy; deCarta, Inc. Map and Imagery Data &copy; NAVTEQ or Tele Atlas or DigitalGlobe");return{run:function(D,B,q,z){u?t(D,B,q,z):e(new p,function(s){u=[];if(s.aliasCount)for(var w=0;w<s.aliasCount;w++)u[w]="http://"+s.host.replace("^(.*?).(.*)$","\u0001-0"+(w+1)+".\u0002");else u=["http://"+s.host];t(D,B,q,z)})}}});G.Registry.register("service","geocoder",function(){var n=function(r){function u(q){var z=[],s=q?q.numberOfGeocodedAddresses:0,w=[];if(s>1)w=q.GeocodedAddress;else if(s==1)w=
[q.GeocodedAddress];try{for(q=0;w&&q<w.length;q++){var E,C=w[q],F=s=null;if(C&&C.GeocodeMatchCode&&C.GeocodeMatchCode.matchType!=="NO_MATCH"){if(C&&C.Point)F=new G.Pos(C.Point.pos);if(C&&C.Address)s=j(C.Address,F)}(E=s)&&z.push(E)}}catch(K){Z(K,"error")}return z}r=G.ex({addresses:[],parserReport:false,parseOnly:false,returnSpatialKeys:false},r);var D=oa('<xls:GeocodeRequest parserReport="{0}" parseOnly="{1}" returnSpatialKeys="{2}">'),B=new o;return G.ex({},B,{methodName:"Geocode",getRequestBody:function(){for(var q=
D(r.parserReport,r.parseOnly,r.returnSpatialKeys),z=0;z<r.addresses.length;z++)q+=r.addresses[z].getXML();return q+"</xls:GeocodeRequest>"},parseResponse:function(q){if(r.addresses.length===1)return[u(q.GeocodeResponseList)];else{for(var z=[],s=0;s<r.addresses.length;s++)z.push(u(q.GeocodeResponseList[s]));return z}}})},t=function(r){r=G.ex({position:null,geocodePreference:"StreetAddress"},r);return G.ex(new o,{methodName:"ReverseGeocode",getRequestBody:function(){return"<xls:ReverseGeocodeRequest><xls:Position><gml:Point><gml:pos>"+
r.position.toString()+"</gml:pos></gml:Point></xls:Position><xls:ReverseGeocodePreference>"+r.geocodePreference+"</xls:ReverseGeocodePreference></xls:ReverseGeocodeRequest>"},parseResponse:function(u){var D=null;if(u&&u.Point)D=new G.Pos(match.Point.pos);if(u&&u.ReverseGeocodedLocation&&u.ReverseGeocodedLocation.Address)return j(u.ReverseGeocodedLocation.Address,D);return null}})};return{forward:function(r){r=G.ex({addresses:[],complete:null},r);var u,D=[];if(r.addresses&&!G.is(r.addresses,"array"))r.addresses=
[r.addresses];for(u=0;u<r.addresses.length;u++)G.is(r.addresses[u],"object")?Z("attempting to geocode a simple object - not implemented","warn"):D.push(new types.Address({freeform:r.addresses[u]}));if(D.length>0){D=new n({addresses:D});e(D,function(B){if(r.complete)for(u=0;u<B.length;u++)r.complete(r.addresses[u],B[u])})}},reverse:function(r){r=G.ex({position:null,complete:null},r);if(!r.position)throw Error("Cannot reverse geocode without a position");var u=new t(r);e(u,function(D){r.complete&&r.complete(D)})}}});
G.Registry.register("service","routing",function(){var n=function(t){t=G.ex({waypoints:[],provideRouteHandle:false,distanceUnit:"KM",routeQueryType:"RMAN",routePreference:"Fastest",routeInstructions:true,routeGeometry:true},t);var r=new o,u=G.formatter('<xls:DetermineRouteRequest provideRouteHandle="{0}" distanceUnit="{1}" routeQueryType="{2}">'),D=G.formatter("<xls:{0}><xls:Position><gml:Point><gml:pos>{1}</gml:pos></gml:Point></xls:Position></xls:{0}>");return G.ex({},r,{methodName:"DetermineRoute",
getRequestBody:function(){if(t.waypoints.length<2)throw Error("Cannot send RouteRequest, less than 2 waypoints specified");var B=u(t.provideRouteHandle,t.distanceUnit,t.routeQueryType);B+="<xls:RoutePlan>";B+="<xls:RoutePreference>"+t.routePreference+"</xls:RoutePreference>";B+="<xls:WayPointList>";for(var q=0;q<t.waypoints.length;q++)B+=D(q===0?"StartPoint":q===t.waypoints.length-1?"EndPoint":"ViaPoint",t.waypoints[q].toString());B+="</xls:WayPointList>";B+="</xls:RoutePlan>";if(t.routeInstructions)B+=
'<xls:RouteInstructionsRequest rules="maneuver-rules" providePoint="true" />';if(t.routeGeometry)B+="<xls:RouteGeometryRequest />";B+="</xls:DetermineRouteRequest>";return B},parseResponse:function(B){var q=G.RouteTools.RouteData,z=B.RouteGeometry.LineString.pos,s=z.length,w=Array(s);for(s=s;s--;)w[s]=new ja(z[s]);z=B.RouteInstructionsList;B=[];z=z&&z.RouteInstruction?z.RouteInstruction:[];s=0;for(var E=new COG.Duration,C=0;C<z.length;C++){var F;F=z[C].distance;var K={M:1,KM:1E3}[F.uom?F.uom.toUpperCase():
"M"];F=F.value&&K?F.value*K:0;K=COG.parseDuration(z[C].duration,"8601");s+=F;E=COG.addDuration(E,K);B.push(new G.RouteTools.Instruction({position:new G.Pos(z[C].Point),description:z[C].Instruction,distance:F,distanceTotal:s,time:K,timeTotal:E}))}return new q({geometry:w,instructions:B})}})};return{calculate:function(t,r){t=G.ex({waypoints:[]},t);if(typeof G.RouteTools!=="undefined"){var u=new n(t);e(u,function(D){r&&r(D)})}else Z("Could not generate route, T5.RouteTools plugin not found","warn")}}});
return{applyConfig:function(n){G.ex(g,n)},compareFns:function(){return{streetDetails:function(n,t){return t.calcMatchPercentage(n)},location:function(n,t){return t.calcMatchPercentage(n)}}}()}}();jb.T5=G;jb.Tile5=function(a,c){c=M({container:a,type:"map",renderer:"canvas",starpos:null,zoom:1,fastpan:false,drawOnScale:true,zoombar:{}},c);return ua("view",c.type,c)}})(window);
