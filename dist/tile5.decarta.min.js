(function(jb){function L(){var a=arguments[0]||{},c=Array.prototype.slice.call(arguments,1),b=c.length,g,j;for(j=0;j<b;j++)if((g=c[j])!==null)for(var f in g){var h=g[f];if(a!==h)if(h!==undefined)a[f]=h}return a}function Z(a,c){if(typeof console!=="undefined")console[c||"debug"](a)}function oa(a){var c=a.match(zb),b=[],g=0,j;for(j=c?c.length:0;j--;){var f=c[j].slice(1);b[f]||(b[f]=RegExp("\\{"+f+"\\}","g"))}g=b.length;return function(){var h=a;for(j=0;j<g;j++){var k=arguments[j];if(typeof k=="undefined")k=
"";h=h.replace(b[j],k)}return h}}function kb(a,c){var b=Ka*xa(a);return La-2*lb(c*ya((1-b)/(1+b),Ka/2))}function fa(a,c){if(R(a,pa)){var b=a.split(Va);this.x=parseFloat(b[0]);this.y=parseFloat(b[1])}else{this.x=a||0;this.y=c||0}}function qa(a,c,b,g){this.mercX=b;this.mercY=g;if(R(a,pa))L(this,mb.parseXY(a));else a&&a.toPixels?L(this,a.toPixels()):fa.call(this,a,c)}function ra(a,c,b,g){this.x=a||0;this.y=c||0;this.w=b||0;this.h=g||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function nb(a,c){if(!a)return null;
c=c||Ab;for(var b=[],g=null,j=a.length;j--;){var f=a[j];if(include=!g||j===0||ga(f.x-g.x)+ga(f.y-g.y)>c){b.unshift(f);g=f}}return b}function ob(a,c){var b=new pb(Math.sqrt(256<<a)|0);c&&c.zoomLevel===a&&c.copyInto(b);b.zoomLevel=a;return b}function Wa(a,c,b,g,j,f){this.x=a;this.y=c;this.w=g||256;this.h=g||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=b;this.id=f||a+"_"+c;this.loaded=false;this.image=null}function Ma(a,c){c=L({id:"layer_"+Bb++,zindex:0,animated:false,style:null,minXY:null,
maxXY:null},c);this.visible=true;this.view=a;ia(L(this,c))}function Na(){ia(this)}function ja(a,c){if(a&&a.split){var b=a.split(Va);if(b.length>1){a=b[0];c=b[1]}}else if(a&&a.lat){c=a.lon;a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(c||0)}function Oa(a,c){if(R(a,qb)){for(var b=c,g=new ja(rb,sb),j=new ja(Cb,Db),f=a.length;f--;){var h=a[f];if(h.lat<g.lat)g.lat=h.lat;if(h.lat>j.lat)j.lat=h.lat;if(h.lon<g.lon)g.lon=h.lon;if(h.lon>j.lon)j.lon=h.lon}this.min=g;this.max=j;if(R(b,sa)){b=this.size();
b=Xa(b.x,b.y)*0.3}this.expand(b)}else{this.min=a;this.max=c}}var Ya={};(function(a){var c=[],b=0,g=false,j=a.register=function(f,h){c.push({section:f,run:h})};a.init=function(f){function h(){if(b<c.length){var e=c[b++];k[e.section]||(k[e.section]={});e.run(k[e.section],h)}else{for(e in k)a[e]=k[e];g=true;f&&f(a)}}var k={};if(g&&f)f(a);else{b=0;h()}};j("canvas",function(f,h){function k(){var l,m=e.getContext("2d");m.save();try{m.translate(50,50);m.beginPath();m.rect(0,0,20,20);l=m.isPointInPath(10,
10)}finally{m.restore()}return l}var e=document.createElement("canvas"),i=typeof FlashCanvas!="undefined",d=typeof G_vmlCanvasManager!="undefnined";e.width=200;e.height=200;f.pipTransformed=i||d?false:k();h()})})(Ya);var zb=/\{(\d+)(?=\})/g,Eb=function(){var a=1.70158,c=Math.PI/2,b=Math.abs,g=Math.pow,j=Math.sin,f=Math.asin,h=Math.cos,k={linear:function(e,i,d,l){return d*e/l+i},backin:function(e,i,d,l){return d*(e/=l)*e*((a+1)*e-a)+i},backout:function(e,i,d,l){return d*((e=e/l-1)*e*((a+1)*e+a)+1)+
i},backinout:function(e,i,d,l){return(e/=l/2)<1?d/2*e*e*(((a*=1.525)+1)*e-a)+i:d/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+i},bouncein:function(e,i,d,l){return d-k.bounceout(l-e,0,d,l)+i},bounceout:function(e,i,d,l){return(e/=l)<1/2.75?d*7.5625*e*e+i:e<2/2.75?d*(7.5625*(e-=1.5/2.75)*e+0.75)+i:e<2.5/2.75?d*(7.5625*(e-=2.25/2.75)*e+0.9375)+i:d*(7.5625*(e-=2.625/2.75)*e+0.984375)+i},bounceinout:function(e,i,d,l){return e<l/2?k.bouncein(e*2,0,d,l)/2+i:k.bounceout(e*2-l,0,d,l)/2+d/2+i},cubicin:function(e,i,
d,l){return d*(e/=l)*e*e+i},cubicout:function(e,i,d,l){return d*((e=e/l-1)*e*e+1)+i},cubicinout:function(e,i,d,l){if((e/=l/2)<1)return d/2*e*e*e+i;return d/2*((e-=2)*e*e+2)+i},elasticin:function(e,i,d,l,m,o){if(e==0)return i;if((e/=l)==1)return i+d;o||(o=l*0.3);if(!m||m<b(d)){m=d;d=o/4}else d=o/ca*f(d/m);return-(m*g(2,10*(e-=1))*j((e*l-d)*ca/o))+i},elasticout:function(e,i,d,l,m,o){var p;if(e==0)return i;if((e/=l)==1)return i+d;o||(o=l*0.3);if(!m||m<b(d)){m=d;p=o/4}else p=o/ca*f(d/m);return m*g(2,
-10*e)*j((e*l-p)*ca/o)+d+i},elasticinout:function(e,i,d,l,m,o){var p;if(e==0)return i;if((e/=l/2)==2)return i+d;o||(o=l*0.3*1.5);if(!m||m<b(d)){m=d;p=o/4}else p=o/ca*f(d/m);if(e<1)return-0.5*m*g(2,10*(e-=1))*j((e*l-p)*ca/o)+i;return m*g(2,-10*(e-=1))*j((e*l-p)*ca/o)*0.5+d+i},quadin:function(e,i,d,l){return d*(e/=l)*e+i},quadout:function(e,i,d,l){return-d*(e/=l)*(e-2)+i},quadinout:function(e,i,d,l){if((e/=l/2)<1)return d/2*e*e+i;return-d/2*(--e*(e-2)-1)+i},sinein:function(e,i,d,l){return-d*h(e/l*c)+
d+i},sineout:function(e,i,d,l){return d*j(e/l*c)+i},sineinout:function(e,i,d,l){return-d/2*(h(Math.PI*e/l)-1)+i}};return function(e){e=e.replace(/[\-\_\s\.]/g,"").toLowerCase();return k[e]||k.linear}}(),ia=function(){function a(b,g){var j=b.hasOwnProperty("obsHandlers")?b.obsHandlers:null;j[g]||(j[g]=[]);return j[g]}var c=0;return function(b){if(!b)return null;if(!(b.hasOwnProperty("obsHandlers")?b.obsHandlers:null))b.obsHandlers={};if(!b.hasOwnProperty("bind")){b.bind=function(g,j){var f="callback"+
c++;a(b,g).unshift({fn:j,id:f});return f};b.triggerCustom=function(g,j){var f=a(b,g),h={cancel:false,name:g,source:this},k;for(k in j)h[k]=j[k];if(!f)return null;k=Array.prototype.slice.call(arguments,2);b.eventInterceptor&&b.eventInterceptor(g,h,k);k.unshift(h);for(var e=f.length;e--&&!h.cancel;)f[e].fn.apply(this,k);return h};b.trigger=function(g){var j=Array.prototype.slice.call(arguments,1);j.splice(0,0,g,null);return b.triggerCustom.apply(this,j)};b.unbind=function(g,j){if(typeof g==="undefined")b.obsHandlers=
{};else for(var f=a(b,g),h=0;f&&h<f.length;h++)if(f[h].id===j){f.splice(h,1);break}return b}}return b}}(),tb=function(){function a(c,b,g,j){if(typeof c[j]=="undefined")c[j]=function(f){if(typeof f!="undefined"){b[j]=f;g[j]&&g[j](f);return c}else return b[j]}}return function(c,b,g){for(var j in b)a(c,b,g,j)}}(),Za=Array.prototype.indexOf||function(a){for(var c=0;c<this.length;c++)if(this[c]===a)return c;return-1},R=function(){return function(a,c){c=Fb.call(c);if(c=="finite")return!Gb[Hb](+a);return c==
"null"&&a===null||c==typeof a||c=="object"&&a===Object(a)||c=="array"&&Array.isArray&&Array.isArray(a)||Ib.call(a).slice(8,-1).toLowerCase()==c}}(),Jb=function(){function a(j){var f=document.createElement("script"),h=false;f.src=j;f.async=true;f.onload=f.onreadystatechange=function(){if(!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){h=true;f.onload=f.onreadystatechange=null;f&&f.parentNode&&f.parentNode.removeChild(f)}};b||(b=document.getElementsByTagName("head")[0]);
b.appendChild(f)}var c=0,b,g=this;return function(j,f,h){j+=j.indexOf("?")>=0?"&":"?";var k="json"+ ++c;g[k]=function(e){f(e);g[k]=null;try{delete g[k]}catch(i){}};a(j+(h?h:"callback")+"="+k);return k}}();INTERACT=function(){function a(m){return function(o,p){m.addEventListener(o,p,false)}}function c(m){return function(o,p){m.removeEventListener(o,p,false)}}function b(m){return function(o,p){m.attachEvent("on"+o,p)}}function g(m,o){return{x:m?m:0,y:o?o:0,count:1}}function j(m,o){d.push(L({handler:null,
checks:{},type:m},o))}function f(m){var o=0,p=0;if(m.offsetParent){do{o+=m.offsetLeft;p+=m.offsetTop;m=m.offsetParent}while(m)}return{left:o,top:p}}function h(m,o){return{source:m,target:o.target?o.target:o.srcElement}}function k(m,o){for(var p=m.target?m.target:m.srcElement;p&&p!==o;)p=p.parentNode;return p&&p===o}function e(m,o){return{x:m.x-(o?o.left:0),y:m.y-(o?o.top:0)}}function i(m,o){if(m.preventDefault){m.preventDefault();m.stopPropagation()}else if(typeof m.cancelBubble!="undefined")m.cancelBubble=
true;o&&m.stopImmediatePropagation&&m.stopImmediatePropagation()}var d=[],l=function(m,o,p){p=L({binder:null,unbinder:null,observable:null},p);for(var n=p.observable,s=[],r,u,D={bind:function(){return n.bind.apply(null,arguments)},unbind:function(){n.unbind();for(B=0;B<s.length;B++)s[B].unbind();return D}},B=0;B<o.length;B++)s.push(o[B](m,n,p));n.bind("pointerDown",function(){u=r=0});n.bind("pointerMove",function(q,z,t,w){r+=w.x||0;u+=w.y||0});n.bind("pointerUp",function(q,z,t){Math.abs(r)>20||Math.abs(u)>
20||n.triggerCustom("tap",q,z,t)});return D};j("pointer",{handler:function(m,o,p){function n(y){if(y.pageX&&y.pageY)return g(y.pageX,y.pageY);else{var M=document.documentElement,P=document.body;return g(y.clientX+(M&&M.scrollLeft||P&&P.scrollLeft||0)-(M&&M.clientLeft||P&&P.clientLeft||0),y.clientY+(M&&M.scrollTop||P&&P.scrollTop||0)-(M&&M.clientTop||P&&P.clientTop||0))}}function s(y){if(k(y,m))if(w=B(y)){var M=n(y);m.style.cursor="move";i(y,true);K=M.x;Q=M.y;E=g(K,Q);o.triggerCustom("pointerDown",
h("mouse",y),E,e(E,f(m)))}}function r(y){var M=n(y);C=M.x;F=M.y;if(k(y,m))q(y,w?"pointerMove":"pointerHover")}function u(y){if(w&&B(y)){w=false;if(k(y,m)){m.style.cursor="default";q(y,"pointerUp")}}}function D(y){if(k(y,m)){var M;y=y||window.event;if(y.detail)M=y.axis===2?-y.detail*z:0;else{M=y.wheelDeltaY?y.wheelDeltaY:y.wheelDelta;if(window.opera)M=-M}if(M!==0){var P=g(C,F);o.triggerCustom("zoom",h("mouse",y),P,e(P,f(m)),M/t,"wheel");i(y);y.returnValue=false}}}function B(y){y=y||window.event;return(y.which||
y.button)==1}function q(y,M,P,S,W){P=typeof P!="undefined"?P:C;S=typeof S!="undefined"?S:F;var I=P-K,J=S-Q,H=g(P,S);o.triggerCustom(M,h("mouse",y),H,e(H,f(m)),g(I,J));if(typeof W=="undefined"||W){K=P;Q=S}}p=L({},p);var z=120,t=z*8,w=false,E,C,F,K,Q;p.binder("mousedown",s);p.binder("mousemove",r);p.binder("mouseup",u);p.binder("dblclick",function(y){Z("captured double click");if(k(y,m)){var M=n(y);o.triggerCustom("doubleTap",h("mouse",y),M,e(M,f(m)))}});p.binder("mousewheel",D);p.binder("DOMMouseScroll",
D);return{unbind:function(){p.unbinder("mousedown",s);p.unbinder("mousemove",r);p.unbinder("mouseup",u);p.unbinder("mousewheel",D);p.unbinder("DOMMouseScroll",D)}}},checks:{touch:false}});j("pointer",{handler:function(m,o,p){function n(I){if(I.count<2)return 0;var J=I.x-I.next.x;I=I.y-I.next.y;return~~Math.sqrt(J*J+I*I)}function s(I,J,H){J=J?J:0;H=H?H:0;for(var X={x:I.x-J,y:I.y-H,id:I.id,count:I.count},Y=X;I.next;){I=I.next;Y=Y.next={x:I.x-J,y:I.y-H,id:I.id}}return X}function r(I,J){var H=I[J?J:"touches"],
X,Y;if(H.length===0)return null;Y=X={x:H[0].pageX,y:H[0].pageY,id:H[0].identifier,count:H.length};for(var da=1,Pa=H.length;da<Pa;da++)Y=Y.next={x:H[da].pageX,y:H[da].pageY,id:H[da].identifier};return X}function u(I){if(k(I,m)){F=f(m);var J=r(I,"changedTouches"),H=s(J,F.left,F.top);if(!Q){K=w;o.triggerCustom("pointerDown",h("touch",I),J,H)}S&&o.triggerCustom("pointerDownMulti",h("touch",I),J,H);Q=r(I);if(Q.count>1)M=n(Q);W=1;P=s(Q)}}function D(I){if(k(I,m)){i(I);y=r(I);if(K==w)K=Math.abs(Q.x-y.x)>
z||Math.abs(Q.y-y.y)>z?t:w;if(K!=w){K=y.count>1?C:E;if(K==C)if(Q.count===1){Q=s(y);M=n(Q)}else{var J=n(y);if(Math.abs(M-J)<q)K=E;else{var H;H=y.x;var X=y.next.x,Y=y.y,da=y.next.y;H={x:(H<X?H:X)+(Math.abs(H-X)>>1),y:(Y<da?Y:da)+(Math.abs(Y-da)>>1)};J=J/M;X=J-W;o.triggerCustom("zoom",h("touch",I),H,e(H,F),X,"pinch");W=J}}K==E&&o.triggerCustom("pointerMove",h("touch",I),y,s(y,F.left,F.top),g(y.x-P.x,y.y-P.y));S&&o.triggerCustom("pointerMoveMulti",h("touch",I),y,s(y,F.left,F.top))}P=s(y)}}function B(I){if(k(I,
m)){var J=r(I,"changedTouches"),H=s(J,F.left,F.top);y=r(I);if(!y){o.triggerCustom("pointerUp",h("touch",I),J,H);Q=null}S&&o.triggerCustom("pointerUpMulti",h("touch",I),J,H)}}p=L({detailed:false,inertia:false},p);var q=20,z=7,t=0,w=1,E=2,C=3,F,K,Q,y,M,P,S=p.detailed,W=1;p.binder("touchstart",u);p.binder("touchmove",D);p.binder("touchend",B);Z("initialized touch handler");return{unbind:function(){p.unbinder("touchstart",u);p.unbinder("touchmove",D);p.unbinder("touchend",B)}}},checks:{touch:true}});
return{register:j,watch:function(m,o,p){o=L({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},o);capabilities=L({touch:"ontouchstart"in window},p);if(!o.observable){Z("creating observable");o.observable=ia({});globalOpts=o}o.binder=(o.isIE?b:a)(o.bindTarget||document);o.unbinder=(o.isIE?b:c)(o.bindTarget||document);p=o.types;for(var n=capabilities,s=[],r=d.length;r--;){var u=d[r],D=!p||p.indexOf(u.type)>=0,B=true,q;for(q in u.checks){var z=u.checks[q];Z("checking "+
q+" capability. require: "+z+", capability = "+n[q]);B=B&&z===n[q]}if(D&&B)s[s.length]=u.handler}return new l(m,s,o)}}}();var Qa=function(){var a={};return{create:function(c,b){if(a[c][b])return a[c][b].apply(null,Array.prototype.slice.call(arguments,2))},get:function(c,b){return a[c]?a[c][b]:null},register:function(c,b,g){a[c]||(a[c]={});a[c][b]&&Z(Kb(c,b),"warn");a[c][b]=g}}}(),Kb=oa("Registration of {0}: {1} will override existing definition"),Lb=oa("Could not create drawable of type: {0}"),$a=
[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],ca=Math.PI*2,La=Math.PI/2,Ab=3,ka=Math.PI/180,Ba=180/Math.PI,rb=90,Cb=-rb,sb=180,Db=-sb,Ka=0.08181919084262157,ga=Math.abs,ub=Math.ceil,Ga=Math.round,ab=Math.min,Xa=Math.max,ya=Math.pow,vb=Math.sqrt,za=Math.log,xa=Math.sin,Mb=Math.asin,bb=Math.cos,lb=Math.atan,Nb=Math.atan2,Hb="hasOwnProperty",Gb={NaN:1,Infinity:1,"-Infinity":1},Fb=String.prototype.toLowerCase,Ib=Object.prototype.toString,sa="undefined",pa=
"string",ta="number",qb="array",$=Qa.register,ua=Qa.create,Ob=Qa.get,Pb=0,Bb=0,Va=/[\,\s]+/,Ca=function(){function a(h){j++;h=h||(new Date).getTime();for(var k=g.length;k--;){var e=g[k];j%e.every===0&&e.cb(h)}f&&animFrame(a)}var c=1E3/60,b=["r","webkitR","mozR","oR","msR"],g=[],j=0,f=function(){for(var h=0;h<b.length;h++)window.animFrame=window.animFrame||window[b[h]+"equestAnimationFrame"];window.animFrame&&Z("Using request animation frame");return animFrame}();f?animFrame(a):setInterval(a,1E3/60);
return{attach:function(h,k){g[g.length]={cb:h,every:k?Ga(k/c):1}},detach:function(h){for(var k=g.length;k--;)if(g[k].cb===h){g.splice(k,1);break}}}}(),mb=function(){var a=/^xy\((.*)\).*$/i;return{parseXY:function(c){if(!a.test(c)){c=c.split(Va);return Ra(c[1],c[0])}}}}(),V=function(){function a(g){for(var j=0;j<g.length;j++){var f=g[j];if(typeof document.body.style[f]!="undefined")return f}}var c={"-webkit-user-select":"none",position:"absolute"},b;b=a(["-webkit-transform","MozTransform"]);css3DTransformProp=
a(["WebkitPerspective","MozPerspective"]);return{transforms:R(b,pa),create:function(g,j,f){g=document.createElement(g);var h=[];f=f||{};g.className=j||"";for(var k in f)h[h.length]=k+": "+f[k];g.style.cssText=h.join(";");return g},move:function(g,j,f,h){if(b)g.style[b]="translate("+j+"px, "+f+"px) "+(h||[]).join(" ");else{g.style.left=j+"px";g.style.top=f+"px"}},styles:function(g){return L({},c,g)}}}(),wb=function(){function a(){for(var j=g.length,f=j;f--;)try{g[f](j)}catch(h){Z(h.toString(),"error")}}
var c=20,b=50,g=[];return{process:function(j,f,h){function k(d){d=(e||b)/d;if(i<j.length){var l=j.slice(i,i+d);d=l.length;var m=e?0:(new Date).getTime();f(l,d);if(!e){e=(l=((new Date).getTime()-m)/d)?c/l|0:j.length;Z("calculated that we can process "+e+" items per cycle")}i+=d}else{for(d=g.length;d--;)if(g[d]===k){g.splice(d,1);break}g.length===0&&Ca.detach(a);h&&h()}}var e,i=0;g.push(k)===1&&Ca.attach(a)}}}(),Ra=Ra||function(a,c){var b=parseFloat(c)*ka;b=xa(b);var g=Ka*b;b=za((1+b)/(1-b)*ya((1-g)/
(1+g),Ka))/2;return new qa(0,0,parseFloat(a)*ka,b)},cb=cb||function(a,c){for(var b=ya(Math.E,-c),g=La-2*lb(b),j=kb(g,b),f=0;f<12&&ga(g-j)>1.0E-7;){g=j;j=kb(g,b);f++}return new ja(j*Ba,a%360*Ba)};fa.prototype={constructor:fa,add:function(){for(var a=this.x,c=this.y,b=arguments.length;b--;){a+=arguments[b].x;c+=arguments[b].y}return this.copy(a,c)},copy:function(a,c){var b=L({},this);b.x=a||b.x;b.y=c||b.y;return b},equals:function(a){return this.x===a.x&&this.y===a.y},offset:function(a,c){return this.copy(this.x+
a,this.y+c)},sync:function(){return this},toString:function(){return this.x+", "+this.y}};qa.prototype=L(new fa,{constructor:qa,pos:function(){return cb(this.mercX,this.mercY)},sync:function(a,c){var b;if(!(b=a.rpp)){b=a.zoom();b=ca/(256<<b)}b=b;if(c){this.mercX=this.x*b-Math.PI;this.mercY=Math.PI-this.y*b}else if(this.mercX||this.mercY){this.x=Ga((this.mercX+Math.PI)/b);this.y=Ga((Math.PI-this.mercY)/b)}return this}});ra.prototype={constructor:ra,buffer:function(a,c){return new ra(this.x-a,this.y-
(c||a),this.w+a*2,this.h+(c||a)*2)},center:function(){return new fa(this.x+(this.w>>1),this.y+(this.h>>1))}};$("fn","simplify",nb);Hits=function(){return{diffHits:function(a,c){var b=[],g={},j;for(j=c.length;j--;)g[c[j].target.id]=true;for(j=a.length;j--;)g[a[j].target.id]||(b[b.length]=a[j]);return b},init:function(a,c,b,g){return{type:a,x:g.x|0,y:g.y|0,elements:[],absXY:c,relXY:b}},initHit:function(a,c,b){return{type:a,target:c,drag:b}},triggerEvent:function(a,c,b,g){c.triggerCustom(a.type+(b?b:
"Hit"),{hitType:a.type},g?g:a.elements,a.absXY,a.relXY,new qa(a.x,a.y))}}}();var pb=function(a){function c(f,h){var k=b[f],e;k||(k=b[f]=[]);(e=k[h])||(e=k[h]=[]);return e}a=a||128;var b=[],g={},j=0;return{copyInto:function(f){for(var h in g){var k=g[h];f.insert(k.bounds||k,k,h)}},insert:function(f,h,k){var e=f.x/a|0,i=f.y/a|0,d=(f.x+f.w)/a|0;f=(f.y+f.h)/a|0;k=k||h.id||"obj_"+j++;g[k]=h;for(h=e;h<=d;h++)for(e=i;e<=f;e++)c(h,e).push(k)},remove:function(f,h,k){k=k||h.id;if(g[k]){var e=f.x/a|0;h=f.y/
a|0;var i=(f.x+f.w)/a|0;f=(f.y+f.h)/a|0;delete g[k];for(e=e;e<=i;e++)for(var d=h;d<=f;d++){var l=c(e,d),m=Za.call(l,k);m>=0&&l.splice(m,1)}}},search:function(f){var h=f.y/a|0,k=(f.x+f.w)/a|0,e=(f.y+f.h)/a|0,i=[],d=[];for(f=f.x/a|0;f<=k;f++)for(var l=h;l<=e;l++)i=i.concat(c(f,l));i.sort();for(h=i.length;h--;){k=i[h];if(e=g[k])d[d.length]=e;for(;h>0&&i[h-1]==k;)h--}return d}}},Sa=function(){var a={},c=0;(new Date).getTime();var b={},g=[];Ca.attach(function(j){j=j||(new Date).getTime();for(var f=0;f<
g.length;){var h=g[f],k=b[h],e=b[h].image&&b[h].image.complete&&b[h].image.width>0,i=j-k.start;i=e||i>=3E4;if(e){e=k.callbacks;a[h]=k.image;for(var d=0;d<e.length;d++)e[d](k.image,true)}if(i){g.splice(f,1);delete b[h]}else f++}},250);return function(j,f){var h=j&&f?a[j]:null;if(h&&h&&h.complete&&h.width>0)f(h);else if(h=b[j])h.callbacks.push(f);else{h=new Image;h.id="_ldimg"+ ++c;b[j]={start:(new Date).getTime(),image:h,callbacks:[f]};h.src=j;g[g.length]=j}}}();Wa.prototype={constructor:Wa,load:function(a){var c=
this;Sa(this.url,function(b){c.loaded=true;c.image=b;a&&a()})}};var Qb=function(){return ia({fastpan:true,applyStyle:function(){},applyTransform:function(a,c,b){return{restore:null,x:c,y:b}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,reset:function(){}})};$("renderer","canvas",function(a,c,b,g,j){function f(q,z,t){var w,E;o[z]=function(C){for(w=D.length;w--;)if(E=t[D[w]])C[B[w]]=
E}}function h(q,z,t){var w=false;if(z)w=d.isPointInPath(n?z.x-l:z.relXY.x,n?z.y-m:z.relXY.y);return{draw:t||u,viewport:q,hit:w,vpX:l,vpY:m,context:d}}g=L({},g);var k,e,i,d,l=0,m=0,o={},p=null,n=Ya.canvas.pipTransformed,s={},r=function(){},u=function(){this.fill&&d.fill();this.stroke&&d.stroke()},D=["fill","stroke","lineWidth","opacity"],B=["fillStyle","strokeStyle","lineWidth","globalAlpha"];if(c){k=c.offsetWidth;e=c.offsetHeight;i=V.create("canvas",null,{position:"absolute","z-index":1});i.width=
k;i.height=e;a.attachFrame(i,true);d=null}b=L(j,{applyStyle:function(q){var z=o[q],t=d&&d.canvas?d.canvas.id:"default",w;s[t]||(s[t]=[]);w=s[t].pop()||"basic";if(z){s[t].push(q);z(d);return w}},applyTransform:function(q){if(q.translateX!==0||q.translateY!==0||q.scaling!==1||q.rotation!==0){d.save();p={undo:function(){d.restore();p=null},x:q.xy.x,y:q.xy.y};d.translate(q.xy.x-l+q.translateX,q.xy.y-m+q.translateY);q.rotation!==0&&d.rotate(q.rotation);q.scaling!==1&&d.scale(q.scaling,q.scaling)}return p},
drawTiles:function(q,z,t){for(var w=z.length;w--;){q=z[w];if(!q.loaded&&t)q.load(a.invalidate);else q.image&&d.drawImage(q.image,q.x-l,q.y-m)}},prepare:function(q,z){var t,w=false,E=z.scaled||z;if(d)d.restore();else d=i.getContext("2d");for(t=q.length;t--;)w=w||q[t].clip;l=E.x;m=E.y;if(d){w||d.clearRect(0,0,k,e);d.save()}d.globalCompositeOperation="source-over";return d},prepArc:function(q,z,t){d.beginPath();d.arc(q.xy.x-(p?p.x:l),q.xy.y-(p?p.y:m),q.size>>1,q.startAngle,q.endAngle,false);return h(z,
t)},prepImage:function(q,z,t,w){var E=(w.x||q.xy.x)-(p?p.x:l),C=(w.y||q.xy.y)-(p?p.y:m),F=w.image||q.image;if(F){d.beginPath();d.rect(E,C,w.width||F.width,w.height||F.height);return h(z,t,function(){d.drawImage(F,E,C,w.width||F.width,w.height||F.height)})}},prepMarker:function(q,z,t){var w=q.xy.x-(p?p.x:l),E=q.xy.y-(p?p.y:m),C=q.size,F=undefined;d.beginPath();switch(q.markerStyle.toLowerCase()){case "image":F=r;d.rect(w-(C>>1),E-(C>>1),C,C);if(q.reset&&q.image){q.image=null;q.reset=false}q.image?
d.drawImage(q.image,w-(C>>1),E-(C>>1),C,C):Sa(q.imageUrl,function(K){q.image=K;d.drawImage(q.image,w-(C>>1),E-(C>>1),C,C)});break;default:d.moveTo(w,E);d.lineTo(w-(C>>1),E-C);d.lineTo(w+(C>>1),E-C);d.lineTo(w,E)}return h(z,t,F)},prepPoly:function(q,z,t,w){var E=true;q=w.points||q.points;w=p?p.x:l;var C=p?p.y:m;d.beginPath();for(var F=q.length;F--;){var K=q[F].x-w,Q=q[F].y-C;if(E){d.moveTo(K,Q);E=false}else d.lineTo(K,Q)}return h(z,t)},getContext:function(){return d}});(function(){for(var q in G.styles)f(null,
q,G.styles[q]);xb.bind("defined",f)})();b.bind("detach",function(){c.removeChild(i)});return b});$("renderer","dom",function(a,c,b,g,j){function f(d){var l=d.image=new Image;e[d.id]=d;l.src=d.url;l.onload=function(){if(i[d.id])k.appendChild(this);else d.image=null};l.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";
return l}function h(d,l,m){var o=[],p;for(p in d){var n=d[p];if(m?n[m]:!l[p]){if(n.image&&n.image.parentNode){k.removeChild(n.image);n.image=null}o[o.length]=p}}for(l=o.length;l--;)delete d[o[l]]}var k=null,e={},i={};k=V.create("div","",V.styles({width:c.offsetWidth+"px",height:c.offsetHeight+"px"}));c.childNodes.length>0?c.insertBefore(k,c.childNodes[0]):c.appendChild(k);a.attachFrame(k);a=L(j,{drawTiles:function(d,l,m){for(var o,p=d.x,n=d.y,s=l.length;s--;){d=l[s];if(d.url){(o=d.image||(m?f(d):
null))&&V.move(o,d.x-p,d.y-n);i[d.id]=d}}}});a.bind("predraw",function(){h(e,i);i={}});a.bind("detach",function(){c.removeChild(k)});a.bind("reset",function(){for(h(e,i={});k.childNodes.length>0;)k.removeChild(k.childNodes[0])});return a});var xb=function(){function a(g,j){if(R(g,pa)){b.trigger("defined",g,c[g]=j);return g}else{var f=[],h;for(h in g)f[f.length]=a(h,g[h]);return f}}var c={},b=ia({get:function(g){return c[g]},define:a});a({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,
stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});return b}();$("view","view",function(a){function c(v,x,A,N){D(Xa(U+ya(2,N)-1,0.125),false,true)}function b(v,x){var A=renderer&&renderer.projectXY?renderer.projectXY(v,x):null;if(!A){A=O.getViewport();var N=1/U;A=new O.XY(A?A.x+v*N:v,A?A.y+x*N:x)}return A.sync(O,true)}function g(v,x,A){B("doubleTap",x,A,b(A.x,A.y));a.scalable&&D(2,{easing:"quad.out",duration:300},true)}function j(v,x,A){K=null;P=true;n("down",
x,A)}function f(v,x,A){n("hover",x,A)}function h(v,x,A,N){m(x,A,false);if(!K){S=N.x;W=N.y}}function k(v,x,A){m(x,A,true);P=false}function e(){clearTimeout(yb);yb=setTimeout(function(){renderer.checkSize()},250)}function i(v,x,A){n("tap",x,A);O.trigger("tap",x,A,b(A.x,A.y,true))}function d(v){var x=O,A=O,N=E,T=F,ha=a;v=(v||a.renderer).split("/");for(var la=new Qb(A,N,T,ha),Da=0;Da<v.length;Da++)la=ua("renderer",v[Da],A,N,T,ha,la);renderer=x.renderer=la;M=a.fastpan&&renderer.fastpan&&V.transforms;l()}
function l(){ea&&ea.unbind();if(renderer){ea=INTERACT.watch(renderer.interactTarget||F);if(a.scalable){ea.bind("zoom",c);ea.bind("doubleTap",g)}ea.bind("pointerDown",j);ea.bind("pointerMove",h);ea.bind("pointerUp",k);a.captureHover&&ea.bind("pointerHover",f);ea.bind("tap",i)}}function m(v,x,A){if(K){v=b(x.x,x.y);K.drag.call(K.target,K,v.x,v.y,A)&&aa++;if(A)K=null}}function o(v){for(var x=w;x--;)if(t[x].id===v)return x;return w}function p(v){F=document.getElementById(v);F.appendChild(C=V.create("div",
"",V.styles({overflow:"hidden",width:F.offsetWidth+"px",height:F.offsetHeight+"px"})));db=C.offsetWidth+ma*2;eb=C.offsetHeight+ma*2;fb=F.offsetWidth/2;gb=F.offsetHeight/2;C.appendChild(E=V.create("div","",V.styles({width:db+"px",height:eb+"px","z-index":2,margin:-ma+"px 0 0 "+-ma+"px"})));d()}function n(v,x,A){ba=Hits.init(v,x,A,b(A.x,A.y,true));for(v=w;v--;)y=y||(t[v].hitGuess?t[v].hitGuess(ba.x,ba.y,O):false);y&&aa++}function s(){var v=new ra(J,H,db,eb);v.scaleFactor=U;return v}function r(v,x,A){if(R(v,
pa)&&R(x,sa))for(x=0;x<w;x++){if(t[x].id===v)return t[x]}else if(R(v,pa)){x=ua("layer",x,O,A);x.added=(new Date).getTime();x.id=v;t[o(v)]=x;t.sort(function(N,T){return T.zindex-N.zindex||T.added-N.added});w=t.length;O.trigger("resync");u();O.trigger("layerChange",O,x);aa++;return x}else return[].concat(t)}function u(){var v=s();if(v){if(Ea||Fa)if(v){var x=Ta?J+(v.w>>1):J,A=Ua?H+(v.h>>1):H,N=v.w,T=v.h;if(Ea&&Ea>N)if(x+N>Ea)J=Ta?J:Ea-N;else if(x<0)J=Ta?J:0;if(Fa&&Fa>T)if(A+T>Fa)H=Ua?H:Fa-T;else if(A<
0)H=Ua?H:0}da=J;Pa=H;O.trigger("refresh",O,v);aa++}}function D(v,x,A){if(R(v,ta)){var N=A?v:U*v;if(!Rb){x=null;v=Ga(za(N)/Math.LN2);N=ya(2,v)}if(x)Ha=na.tween([U],[N],x,function(){U=N;Ha=null;aa++});else{U=N;aa++}return O}else return U}function B(){for(var v=O.trigger.apply(null,arguments).cancel,x=t.length;x--;)v=t[x].trigger.apply(null,arguments).cancel||v;return!v}function q(v,x,A){if(R(v,ta)){if(A)va=na.tween([J,H],[v,x],A,function(){va=null});else{J=v|0;H=x|0}return O}else return(new O.XY(J,
H)).sync(O,true)}a=L({container:"",captureHover:true,controls:[],drawOnScale:true,fastpan:true,padding:0,inertia:true,refreshDistance:256,pannable:true,scalable:true,renderer:"canvas"},a);var z=[],t=[],w=0,E=null,C=null,F,K=null,Q=!R(window.attachEvent,sa),y=false,M,P=false,S=0,W=0,I=a.refreshDistance,J=0,H=0,X=0,Y=0,da=0,Pa=0,Ea=null,Fa=null,Ta=false,Ua=false,va=null,ma=a.padding,ba=null,Ia=null,yb=0,wa=0,Ja=null,U=1,Ha=null,hb=1,ea=null,ib={index:0,draw:false},Rb=true,aa=0,db,eb,fb,gb,O={XY:fa,
id:a.id,padding:ma,panSpeed:0,attachFrame:function(v,x){x&&E.appendChild(v)},center:function(v,x,A){if(R(v,pa)){x=mb.parseXY(v).sync(O);v=x.x;x=x.y}if(R(v,ta)){q(v-fb-ma,x-gb-ma,A);return O}else return q().offset(fb+ma|0,gb+ma|0).sync(O,true)},detach:function(){renderer&&renderer.trigger("detach");ea&&ea.unbind();if(C){F.removeChild(C);E=C=null}},layer:r,invalidate:function(){aa++},pan:function(v,x,A){q(J+v,H+x,A)},refresh:u,rotate:function(v,x,A){if(R(v,ta)){var N=A?v:wa+v;if(x)Ja=na.tween([wa],
[N],x,function(){wa=N%360;Ja=null;aa++});else{wa=N%360;aa++}return O}else return wa},scale:D,triggerAll:B,setMaxOffset:function(v,x,A,N){Ea=v;Fa=x;Ta=A;Ua=N},getViewport:s,offset:q};ia(O);O.bind("resize",function(){renderer.checkSize()});O.bind("layerRemove",function(v,x){var A=Za(t,x.id);if(A>=0&&A<w){t.splice(A,1);aa++}w=t.length});tb(O,a,{container:p,captureHover:l,scalable:l,pannable:l,renderer:function(v){if(renderer){renderer.trigger("detach");renderer=null}d(v);aa++}});Ya.init(function(){r("markers",
"draw",{zindex:20});p(a.container);Q?window.attachEvent("onresize",e):window.addEventListener("resize",e,false)});Ca.attach(function(v){var x=[],A,N,T;self.panSpeed=panSpeed=ga(S)+ga(W);A=U!==hb;if(panSpeed>0||A||va||Ha||Ja){aa++;if(va&&panSpeed>0){va(true);va=null}}if(panSpeed<2&&(ga(J-da)>=I||ga(H-Pa)>=I))u();ib.index++;ib.draw=aa||panSpeed||0;if(renderer&&ib.draw){if(Ha)U=Ha()[0];if(Ja)wa=Ja()[0];X+=S;Y+=W;if(S||W)O.trigger("pan");if(V.transforms){if(U!==1)x[x.length]="scale("+U+")";if(wa!==0)x[x.length]=
"rotate("+wa+"deg)"}if(A=!M||(a.drawOnScale||U===1)&&panSpeed<5){if(va){A=va();J=A[0]|0;H=A[1]|0}else{J=J-X/U|0;H=H-Y/U|0}T=s();renderer.trigger("predraw",T);if(renderer.prepare(t,T,v,ba)){N=Y=A=X=aa=0;for(ii=w;ii--;){var ha=t[ii];if(ha.visible){var la=ha.style?renderer.applyStyle(ha.style,true):null;ha.draw(renderer,T,O,v,ba);la&&renderer.applyStyle(la)}}renderer.trigger("render",T);O.trigger("drawComplete",T,v);V.move(E,A,N,x)}}else V.move(E,X,Y,x);if(P||!a.inertia)W=S=0;else if(S!=0||W!=0){S*=
0.8;W*=0.8;if(ga(S)<0.5)S=0;if(ga(W)<0.5)W=0}if(ba){v=ba?ba.elements:[];if(Ia&&Ia.type==="hover"){x=Hits.diffHits(Ia.elements,v);x.length>0&&Hits.triggerEvent(Ia,O,"Out",x)}if(v.length>0){A=ba.x;N=ba.y;for(x=v.length;x--;){T=v[x];ha=A;la=N;var Da=T&&T.drag&&(!T.canDrag||T.canDrag(T,ha,la));if(Da){K=T;K.startX=ha;K.startY=la}if(Da)break}Hits.triggerEvent(ba,O)}Ia=v.length>0?L({},ba):null;ba=null}if(hb!==U){O.trigger("scaleChanged",U);hb=U}}});(function(v){z=[];for(var x=0;x<v.length;x++)z[z.length]=
ua("control",v[x],O,C,F,a[v[x]])})(a.controls);return O});$("view","map",function(a){function c(e){var i=k.getViewport();return e?b(e.bestZoomLevel(i)).center(e.center()):new Oa((new qa(i.x,i.y2)).sync(k,true).pos(),(new qa(i.x2,i.y)).sync(k,true).pos())}function b(e,i,d){if(R(e,ta)){e=Xa(a.minZoom,ab(a.maxZoom,e|0));if(e!==f){var l=k.getViewport(),m=k.offset(),o=l.w/2;l=l.h/2;var p=ya(2,e-f),n=o/p|0,s=l/p|0;f=e;k.offset(((i||m.x+o)-n)*p,((d||m.y+l)-s)*p);refreshY=refreshX=0;k.trigger("zoom",e);j=
k.rpp=ca/(256<<f);k.setMaxOffset(ca/j|0,ca/j|0,true,false);k.scale(1,false,true);k.trigger("resync");k.renderer.trigger("reset");k.refresh()}return k}else return f}a=L({container:"",captureHover:true,controls:["zoombar"],drawOnScale:true,padding:50,inertia:true,refreshDistance:256,pannable:true,scalable:true,minZoom:1,maxZoom:18,renderer:"canvas/dom",zoom:1,zoombar:{}},a);var g=new qa,j,f=a.zoom||a.zoomLevel,h=0,k=L(ua("view","view",a),{XY:qa,bounds:c,zoom:b});k.bind("refresh",function(){var e=k.getViewport();
if(g.x!=e.x||g.y!=e.y){k.trigger("boundsChange",c());g.x=e.x;g.y=e.y}});k.bind("scaleChanged",function(e,i){var d=za(i)/Math.LN2|0;if(d!==0){i=ya(2,d);clearTimeout(h);h=setTimeout(function(){b(f+d)},500)}});return k});var na=function(){return{tween:function(a,c,b,g,j){function f(p){var n=p-o;p=o+m<=p;for(var s=h;s--;){k[s]=i(n,a[s],d[s],m);j&&j.invalidate()}if(p||l){Ca.detach(f);for(s=0;s<e.length;s++)e[s]&&e[s](k,n,l)}}b=L({easing:"sine.out",duration:1E3,complete:null},b);var h=a.length,k=[].concat(a),
e=[g,b.complete],i=Eb(b.easing),d=[],l=false,m=b.duration,o=(new Date).getTime();for(b=h;b--;)d[b]=c[b]-a[b];Ca.attach(f);return function(p){l=p;return k}},tweenDrawable:function(a,c,b,g,j){var f=na.tween([b],[g],j,function(){a[c]=g;for(var k=a.tweens.length;k--;)if(a.tweens[k]===h){a.tweens.splice(k,1);break}},a.view),h=function(){a[c]=f()[0]};return h}}}(),Aa=function(a,c,b){b=L({style:null,xy:null,size:20,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);
L(this,b);if(R(this.xy,pa))this.xy=new a.XY(this.xy);this.id="drawable_"+Pb++;this.bounds=null;this.view=a;this.layer=c;this.tweens=[];this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&ia(this)};Aa.prototype={constructor:Aa,applyTweens:function(){for(var a=this.tweens.length;a--;)this.tweens[a]()},drag:null,draw:null,getProps:null,resync:function(){if(this.xy){this.xy.sync(this.view);if(this.size){var a=this.size>>1;this.updateBounds(new ra(this.xy.x-
a,this.xy.y-a,this.size,this.size))}}},rotate:function(a,c,b){if(R(a,ta)){a=(b?a:this.rotation*Ba+a)*ka;if(c)this.tweens.push(na.tweenDrawable(this,"rotation",this.rotation,a,c));else{this.rotation=a;this.view.invalidate()}return this}else return this.rotation*Ba},scale:function(a,c,b){if(R(a,ta)){a=b?a:this.scaling*a;if(c)this.tweens.push(na.tweenDrawable(this,"scaling",this.scaling,a,c));else{this.scaling=a;this.view.invalidate()}return this}else return this.scaling},translate:function(a,c,b,g){if(R(a,
ta)){a=g?a:this.translateX+a;c=g?c:this.translateY+c;if(b){this.tweens.push(na.tweenDrawable(this,"translateX",this.translateX,a,b));this.tweens.push(na.tweenDrawable(this,"translateY",this.translateY,c,b))}else{this.translateX=a;this.translateY=c;this.view.invalidate()}return this}else return new fa(this.translateX,this.translateY)},updateBounds:function(a,c){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);this.bounds=a;if(c)this.xy=this.bounds.center()}};
$("drawable","marker",function(a,c,b){b=L({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},b);return new Aa(a,c,b)});$("drawable","poly",function(a,c,b){function g(){var e,i,d,l,m,o,p,n;n=k.points=b.simplify?nb(h):h;for(e=n.length;e--;){i=n[e].x;d=n[e].y;o=R(o,sa)||i<o?i:o;p=R(p,sa)||d<p?d:p;l=R(l,sa)||i>l?i:l;m=R(m,sa)||d>m?d:m}k.updateBounds(new ra(o,p,l-o,m-p),true)}function j(e){if(R(e,qb)){h=[];wb.process(e,function(i,d){for(var l=0;l<d;l++)h[h.length]=new a.XY(i[l])},
f)}}function f(){h.length&&wb.process(h,function(e,i){for(var d=i;d--;)e[d].sync(a)},g)}b=L({simplify:false,fill:true,points:[],typeName:"Poly"},b);var h=[],k=L(new Aa(a,c,b),{points:[],getPoints:function(){return[].concat(h)},resync:f});tb(k,b,{points:j});j(b.points);return k});$("drawable","line",function(a,c,b){b.fill=false;return ua("drawable","poly",a,c,b)});$("drawable","image",function(a,c,b){function g(){if(e&&e.width>0){if(!this.centerOffset)this.centerOffset=new fa(-e.width>>1,-e.height>>
1);this.updateBounds(new ra(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,e.width,e.height),false)}}function j(d){if(this.imageUrl=d){var l=this;Sa(this.imageUrl,function(m,o){e=m;if(o){var p=i.layer?i.layer.view:null;p&&p.invalidate()}g.apply(l)})}}b=L({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var f=Aa.prototype.resync,h=0,k=0,e=b.image,i=L(new Aa(a,c,b),{changeImage:j,getProps:function(){this.bounds||g(this,e);return{image:e,x:this.xy.x+h,y:this.xy.y+k}},resync:function(d){f.call(this,
d);g.call(this)}});e||j.call(this,this.imageUrl);if(this.centerOffset){h=this.centerOffset.x;k=this.centerOffset.y}});$("drawable","arc",function(a,c,b){b=L({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);return new Aa(a,c,b)});Ma.prototype={constructor:Ma,clip:null,cycle:function(){},draw:function(){},hitGuess:null,remove:function(){this.view.trigger("layerRemove",this)}};$("layer","tile",function(a,c){c=L({generator:"osm",imageLoadArgs:{}},c);var b=ua("generator",c.generator,c).run,g=null,j=
[],f=L(new Ma(a,c),{draw:function(h,k,e){h.drawTiles&&h.drawTiles(k,g.search(k.buffer(128)),e.panSpeed<2)}});a.bind("resync",function(){var h=a&&a.zoom?a.zoom():0;j[h]||(j[h]=ob(h));g=j[h]});a.bind("refresh",function(h,k,e){g&&b(k,e,g,function(){k.invalidate()})});return f});$("layer","draw",function(a,c){function b(i,d,l,m){var o=this.dragOffset;if(!o)o=this.dragOffset=new a.XY(i.startX-this.xy.x,i.startY-this.xy.y);this.xy.x=d-o.x;this.xy.y=l-o.y;if(m){delete this.dragOffset;a.invalidate();this.xy.sync(a,
true);this.trigger("dragDrop")}return true}function g(i){clearTimeout(k);k=setTimeout(function(){f.sort(function(d,l){if(l.xy&&d.xy){var m=l.xy.y-d.xy.y;return m!=0?m:l.xy.x-d.xy.x}});i&&i.invalidate()},50)}function j(i,d,l,m){m&&h.remove(m,d);h.insert(l,d)}c=L({zindex:10},c);var f=[],h,k=0,e=L(new Ma(a,c),{itemCount:0,clear:function(){h=new pb;f=[];e.trigger("cleared");e.itemCount=0},create:function(i,d,l){d=ua("drawable",i,a,e,d);if(!d)throw Lb(i);if(l)f.unshift(d);else f[f.length]=d;d.resync();
h&&d.bounds&&h.insert(d.bounds,d);g(a);d.bind("move",j);e.itemCount=f.length;e.trigger(i+"Added",d);return d},draw:function(i,d,l,m,o){l={};m=h&&d?h.search(d):[];for(var p=m.length;p--;){var n=m[p],s=n.style||e.style,r,u,D=n.getProps?n.getProps(i):l;r=i["prep"+n.typeName];n.tweens.length>0&&n.applyTweens();u=i.applyTransform(n);if(D=r?r.call(i,n,d,o,D):null){if(o&&D.hit){o.elements.push(Hits.initHit(n.type,n,n.draggable?b:null));r=o.type+"Style";s=n[r]||e[r]||s}s=s?i.applyStyle(s,true):null;(r=n.draw||
D.draw)&&r.call(n,D);s&&i.applyStyle(s)}u&&u.undo&&u.undo()}},find:function(){return[].concat(f)},hitGuess:function(i,d){return h&&h.search({x:i-10,y:d-10,w:20,h:20}).length>0}});a.bind("resync",function(){h=ob(a.zoom(),h);for(var i=f.length;i--;)f[i].resync()});return e});Na.prototype={constructor:Na};$("control","zoombar",function(a,c,b,g){function j(t,w){var E=D[t]=V.create("div","t5-zoombar-button",{position:"absolute",background:f(t),"z-index":51,width:g.width+"px",height:g.buttonHeight+"px",
"margin-top":(w||0)+"px"});B.appendChild(E)}function f(t,w){return"url("+g.images+") 0 -"+(l+o*3+(t||0)*i*3+(w||0)*i)+"px"}function h(t){return"url("+g.images+") 0 -"+(l+(t||0)*o)+"px"}function k(t,w){var E;if(t===m){m.style.background=h(w);E="thumb"}else for(var C=0;C<D.length;C++)if(t===D[C]){E="button"+C;D[C].style.background=f(C,w);break}return E}function e(t){if(t!==r){r=t;s=n-r/u*(n-p)|0;V.move(m,0,s-p);clearTimeout(q);q=setTimeout(function(){a.zoom(r)},500)}}g=L({width:24,height:200,images:"img/zoom.png",
align:"right",marginTop:10,spacing:10,thumbHeight:16,buttonHeight:16},g);var i=g.buttonHeight,d,l=g.height,m,o=g.thumbHeight,p=g.spacing+i-(o>>1),n=g.height-i-(o>>1),s=p,r=-1;c=a.minZoom();var u=a.maxZoom()-c+1,D=[],B,q=0,z={button0:function(){a.zoom(a.zoom()+1)},button1:function(){a.zoom(a.zoom()-1)}};B=V.create("div","t5-zoombar",{position:"absolute",background:"url("+g.images+")","z-index":50,overflow:"hidden",width:g.width+"px",height:g.height+"px",margin:function(){var t=g.spacing,w=oa("{0}px 0 0 {1}px");
if(g.align==="right")t=b.offsetWidth-g.width-g.spacing;return w(g.marginTop,t)}()});b.childNodes[0]?b.insertBefore(B,b.childNodes[0]):b.appendChild(B);B.appendChild(m=V.create("div","t5-zoombar-thumb",{position:"absolute",background:h(),"z-index":51,width:g.width+"px",height:g.thumbHeight+"px",margin:"10px 0 0 0",top:s-p+"px"}));j(0);j(1,g.height-g.buttonHeight);d=INTERACT.watch(B,{bindTarget:B});d.bind("pointerMove",function(t,w,E){s=Math.min(Math.max(p,E.y-(o>>1)),n);e(u-(s-p)/n*u|0)});d.bind("pointerDown",
function(t){k(t.target,2)});d.bind("pointerUp",function(t){k(t.target,0)});d.bind("tap",function(t){(t=z[k(t.target,2)])&&t()});c=new Na(a);c.bind("detach",function(){d.unbind();b.removeChild(B)});a.bind("zoom",function(t,w){e(w)});e(a.zoom());return c});ja.prototype={constructor:ja,distanceTo:function(){if(!targetPos||this.empty()||targetPos.empty())return 0;var a=(targetPos.lat-this.lat)*ka>>1,c=(targetPos.lon-this.lon)*ka>>1;a=xa(a)*xa(a)+bb(this.lat*ka)*bb(targetPos.lat*ka)*xa(c)*xa(c);return 6371*
2*Nb(vb(a),vb(1-a))},equalTo:function(a){return pos&&this.lat===a.lat&&this.lon===a.lon},empty:function(){return this.lat===0&&this.lon===0},inArray:function(a){for(var c=a.length;c--;)if(this.equal(a[c]))return true;return false},offset:function(a,c){var b=this.lat*ka,g=this.lon*ka,j=b+a/6371;b=Mb(xa(c/6371)/bb(b));g=g+b;j=(j+La)%Math.PI-La;g%=ca;return new ja(j*Ba,g*Ba)},toPixels:function(){return Ra(this.lon,this.lat)},toString:function(a){return this.lat+(a||" ")+this.lon}};(function(){$("fn",
"generalize",function(a,c,b){var g=a.length,j=[],f=null;b=(b||250)/1E3;for(g=g;g--;)if(g===0)j.unshift(a[g]);else{var h=!f||a[g].inArray(c)?b:f.distanceTo(a[g]);if(a[g]&&h>=b){j.unshift(a[g]);f=a[g]}}return j})})();Oa.prototype={constructor:Oa,bestZoomLevel:function(a){var c=this.center();c=ab(Ga(ga(c.lat)*0.05),$a.length);var b=$a[c],g=this.size();c=ub(za($a[3]*a.h/g.y)/za(2));a=ub(za(b*a.w/g.x)/za(2));return ab(isNaN(c)?1E3:c,isNaN(a)?1E3:a)},center:function(){var a=this.size();return new ja(this.min.lat+
(a.y>>1),this.min.lon+(a.x>>1))},expand:function(a){this.min.lat-=a;this.max.lat+=a;this.min.lon-=a%360;this.max.lon+=a%360},size:function(a){var c=new fa(0,this.max.lat-this.min.lat);c.x=(a||R(a,sa))&&this.min.lon>this.max.lon?360-this.min.lon+this.max.lon:this.max.lon-this.min.lon;return c},toString:function(){return"min: "+this.min+", max: "+this.max}};var G={ex:L,log:Z,observable:ia,formatter:oa,wordExists:function(a,c){for(var b=a.split(/\s|\,/).length;b--;)if(a.toLowerCase()==c.toLowerCase())return true;
return false},is:R,indexOf:Za,fn:function(a){return Ob("fn",a)},project:Ra,unproject:cb,userMessage:function(a,c,b){G.trigger("userMessage",a,c,b)},Registry:Qa,Style:xb,DOM:V,Rect:ra,XY:fa,Hits:Hits,Control:Na,Tile:Wa,Tweener:na,getImage:Sa,Pos:ja,BBox:Oa};ia(G);G.RouteTools=function(){function a(i){if(f.test(i))return"-slight";return""}function c(i,d){d.geometry&&i.layer("route","draw").create("line",{points:d.geometry,style:"waypoints",simplify:true})}function b(i){for(var d="unknown",l=g||k,m=
0;m<l.length;m++){l[m].regex.lastIndex=-1;var o=l[m].regex.exec(i);if(o){d=l[m].customCheck?l[m].customCheck(i,o):l[m].turnType;break}}return d}var g=undefined,j=G.fn("generalize"),f=/bear/i,h=/right/i,k=function(){var i=[];i.push({regex:/continue/i,turnType:"continue"});i.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(d,l){return"turn-left"+a(l[1])}});i.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(d,l){return"turn-right"+a(l[1])}});i.push({regex:/enter\s(roundabout|rotary)/i,
turnType:"roundabout"});i.push({regex:/take.*?ramp/i,turnType:"ramp"});i.push({regex:/take.*?exit/i,turnType:"ramp-exit"});i.push({regex:/make(.*?)u\-turn/i,customCheck:function(d,l){return"uturn"+(h.test(l[1])?"-right":"-left")}});i.push({regex:/proceed/i,turnType:"start"});i.push({regex:/arrive/i,turnType:"arrive"});i.push({regex:/fell\sthrough/i,turnType:"merge"});return i}(),e={calculate:function(i){i=L({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},
i);var d=G.Registry.create("service","routing");d&&d.calculate(i,function(l){if(i.generalize)l.geometry=j(l.geometry,l.getInstructionPositions());if(i.map){c(i.map,l);i.autoFit&&i.map.bounds(l.boundingBox)}i.success&&i.success(l)})},createMapOverlay:c,parseTurnType:b,Instruction:function(i){var d=i=L({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},i),l=i.description;l=l.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");d.description=l;if(!i.turnType)i.turnType=b(i.description);
return i},RouteData:function(i){i=L({geometry:[],instructions:[],boundingBox:null},i);if(!i.boundingBox)i.boundingBox=new G.BBox(i.geometry);return L({getInstructionPositions:function(){for(var d=[],l=0;l<i.instructions.length;l++)i.instructions[l].position&&d.push(i.instructions[l].position);return d}},i)}};G.observable(e);return e}();COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var a=arguments[0]||{},c,b=1,g=arguments.length;b<g;b++)if((c=arguments[b])!==null)for(var j in c){var f=
c[j];if(a!==f)if(f!==undefined)a[j]=f}return a};(function(){var a=/^P(\d+Y)?(\d+M)?(\d+D)?$/,c=/^(\d+H)?(\d+M)?(\d+S)?$/,b={8601:function(j){j=j.split("T");var f=null;f=null;var h=0,k=0;a.lastIndex=-1;f=a.exec(j[0]);h+=f[3]?parseInt(f[3].slice(0,-1),10):0;c.lastIndex=-1;f=c.exec(j[1]);k+=f[1]?parseInt(f[1].slice(0,-1),10)*3600:0;k+=f[2]?parseInt(f[2].slice(0,-1),10)*60:0;k+=f[3]?parseInt(f[3].slice(0,-1),10):0;return new g(h,k)}},g=COG.Duration=function(j,f){return{days:j?j:0,seconds:f?f:0}};COG.addDuration=
function(){for(var j=new g,f=arguments.length;f--;){j.days+=arguments[f].days;j.seconds+=arguments[f].seconds}if(j.seconds>=86400){j.days+=~~(j.seconds/86400);j.seconds%=86400}return j};COG.formatDuration=function(j){var f,h,k="";if(j.days)k=j.days+" days ";if(j.seconds){j=j.seconds;if(j>=3600){f=~~(j/3600);j-=f*3600}if(j>=60){h=Math.round(j/60);j-=h*60}if(f)k=k+f+(f>1?" hrs ":" hr ")+(h?(h>10?h:"0"+h)+" min ":"");else if(h)k=k+h+" min";else if(j>0)k=k+(j>10?j:"0"+j)+" sec"}return k};COG.parseDuration=
function(j,f){var h=f?b[f]:null;if(h)return h(j);COG.Log.warn("Could not find duration parser for specified format: "+f);return new g}})();G.Decarta=function(){function a(n){return e(f.clientName,f.clientPassword,f.sessionID,f.configuration,f.release,n)}function c(n,s){return i(n.maxResponses,n.version,n.requestID,n.methodName,s)}function b(n,s){f.server||Z("No server configured for deCarta - we are going to have issues","warn");return d(f.server,n.requestID,escape(s))}function g(n,s){Jb(b(n,a(c(n,
n.getRequestBody()))),function(r){var u=r.response.XLS.Response;if(u.numberOfResponses>0&&u[n.methodName+"Response"]){r=null;if(n.parseResponse)r=n.parseResponse(u[n.methodName+"Response"]);s&&s(r)}else Z("no responses from server: "+r.response,"error")})}function j(n,s){var r=new m({json:n.StreetAddress}),u=new l({countryCode:n.countryCode});u.parse(n.Place);return new G.Geo.Address({streetDetails:r,location:u,country:n.countryCode?n.countryCode:"",postalCode:n.PostalCode?n.PostalCode:"",pos:s})}
var f={sessionID:(new Date).getTime(),server:"",clientName:"",clientPassword:"",configuration:"",maxResponses:25,release:"4.4.2sp03",tileFormat:"PNG",fixedGrid:true,useCache:true,tileHosts:[],requestTimeout:3E4,geocoding:{countryCode:"US",language:"EN"}},h={DEFAULT:function(n){for(var s=["landmark","municipalitySubdivision","municipality","countrySubdivision"],r="",u=0;u<s.length;u++)if(n[s[u]])r+=n[s[u]]+" ";return r}},k=1,e=oa("<xls:XLS version='1' xls:lang='en' xmlns:xls='http://www.opengis.net/xls' rel='{4}' xmlns:gml='http://www.opengis.net/gml'><xls:RequestHeader clientName='{0}' clientPassword='{1}' sessionID='{2}' configuration='{3}' />{5}</xls:XLS>"),
i=oa("<xls:Request maximumResponses='{0}' version='{1}' requestID='{2}' methodName='{3}Request'>{4}</xls:Request>"),d=oa("{0}/JSON?reqID={1}&chunkNo=1&numChunks=1&data={2}&responseFormat=JSON"),l=function(n){n=G.ex({landmark:"",municipality:"",municipalitySubdivision:"",countrySubdivision:"",countryCode:""},n);var s=G.ex({calcMatchPercentage:function(r){var u=0;if(n.landmark&&n.landmarkSubType){if(G.wordExists(r,n.landmarkSubType)){u+=0.4;u+=G.wordExists(r,n.landmark)?0.6:0}}else{u+=G.wordExists(r,
n.municipalitySubdivision)?0.8:0;if(u===0&&n.municipality)u+=G.wordExists(r,n.municipality)?0.7:0}if(n.countrySubdivision)u+=G.wordExists(r,n.countrySubdivision)?0.2:0;return u},getCountryCode:function(){if(n.countryCode)return n.countryCode.toUpperCase();return""},parse:function(r){for(var u=0;r&&u<r.length;u++){var D=r[u].type?r[u].type.slice(0,1).toLowerCase()+r[u].type.slice(1):"";if(typeof n[D]!=="undefined"){n[D]=r[u].content;if(r[u].subType)n[D+"SubType"]=r[u].subType}}G.ex(s,n)},toString:function(){var r=
h[s.getCountryCode()];if(!r)r=h.DEFAULT;return r(n)}},n);return s},m=function(n){n=G.ex({json:{}},n);var s="",r="";if(n.json.Street)s=n.json.Street.content?n.json.Street.content:n.json.Street;s=s&&s.replace?s.replace(/\/\d+$/,""):"";if(n.json.Building)if(n.json.Building.number)r=n.json.Building.number;return{building:r,street:s,calcMatchPercentage:function(u){var D=0,B=G.Geo.A.normalize(u),q=G.Geo.A.normalize(s);if(n.json.Building)if(G.Geo.A.buildingMatch(u,n.json.Building.number.toString()))D+=0.2;
if(B&&q&&G.wordExists(B,q))D+=0.8;return D},toString:function(){if(s)return(r?r+" ":"")+s;return""}}},o=function(){return{methodName:"",maxResponses:25,version:"1.0",requestID:k++,getRequestBody:function(){return""},parseResponse:function(n){return n}}},p=function(){return G.ex(new o,{methodName:"RUOK",parseResponse:function(n){return{aliasCount:n.maxHostAliases,host:n.hostName}}})};G.Registry.register("generator","decarta",function(n){function s(D,B,q,z){if(D=D.zoom?D.zoom():0){var t=2<<D-1,w=t>>
1,E=n.tileSize,C=(B.w/E|0)+1,F=(B.h/E|0)+1,K=(B.x/E|0)-w;B=t-(B.y/E|0)-w-F;var Q=q.search({x:(w+K)*E,y:(w+B*-1-F)*E,w:C*E,h:F*E});t={};var y;for(y=Q.length;y--;)t[Q[y].id]=true;for(Q=0;Q<=C;Q++)for(y=0;y<=F;y++){var M=K+Q,P=B+y-1,S=M+"_"+P;if(!t[S]){M=new G.Tile((w+K+Q)*E,(w+B*-1-y)*E,u[Q%u.length]+"/openls/image-cache/TILE?LLMIN=0.0,0.0&LLMAX="+r[D]+"&CACHEABLE=true&DS=navteq-world&WIDTH=256&HEIGHT=256&CLIENTNAME="+f.clientName+"&SESSIONID="+f.sessionID+"&FORMAT=PNG&CONFIG="+f.configuration+"&N="+
P+"&E="+M,E,E,S);q.insert(M,M)}}z&&z()}}n=G.ex({tileSize:256},n);var r=["89.787438015348100000,360.00000000000000000","85.084059050110410000,180.00000000000000000","66.653475896509040000,90.00000000000000000","41.170427238429790000,45.000000000000000000","22.076741328793200000,22.500000000000000000","11.251819676168665000,11.250000000000000000","5.653589942659626000,5.625000000000000000","2.830287664051185000,2.812500000000000000","1.415581451872543800,1.406250000000000000","0.707845460801532700,0.703125000000000000",
"0.353929573271679340,0.351562500000000000","0.176965641673330230,0.175781250000000000","0.088482927761462040,0.087890625000000000","0.044241477246363230,0.043945312500000000","0.022120740293895182,0.021972656250000000","0.011060370355776452,0.010986328125000000","0.005530185203987857,0.005493164062500000","0.002765092605263539,0.002746582031250000","0.001382546303032519,0.001373291015625000","0.000691272945568983,0.000686645507812500","0.000345636472797214,0.000343322753906250"],u=null;G.userMessage("ack",
"decarta","&copy; deCarta, Inc. Map and Imagery Data &copy; NAVTEQ or Tele Atlas or DigitalGlobe");return{run:function(D,B,q,z){u?s(D,B,q,z):g(new p,function(t){u=[];if(t.aliasCount)for(var w=0;w<t.aliasCount;w++)u[w]="http://"+t.host.replace("^(.*?).(.*)$","\u0001-0"+(w+1)+".\u0002");else u=["http://"+t.host];s(D,B,q,z)})}}});G.Registry.register("service","geocoder",function(){var n=function(r){function u(q){var z=[],t=q?q.numberOfGeocodedAddresses:0,w=[];if(t>1)w=q.GeocodedAddress;else if(t==1)w=
[q.GeocodedAddress];try{for(q=0;w&&q<w.length;q++){var E,C=w[q],F=t=null;if(C&&C.GeocodeMatchCode&&C.GeocodeMatchCode.matchType!=="NO_MATCH"){if(C&&C.Point)F=new G.Pos(C.Point.pos);if(C&&C.Address)t=j(C.Address,F)}(E=t)&&z.push(E)}}catch(K){Z(K,"error")}return z}r=G.ex({addresses:[],parserReport:false,parseOnly:false,returnSpatialKeys:false},r);var D=oa('<xls:GeocodeRequest parserReport="{0}" parseOnly="{1}" returnSpatialKeys="{2}">'),B=new o;return G.ex({},B,{methodName:"Geocode",getRequestBody:function(){for(var q=
D(r.parserReport,r.parseOnly,r.returnSpatialKeys),z=0;z<r.addresses.length;z++)q+=r.addresses[z].getXML();return q+"</xls:GeocodeRequest>"},parseResponse:function(q){if(r.addresses.length===1)return[u(q.GeocodeResponseList)];else{for(var z=[],t=0;t<r.addresses.length;t++)z.push(u(q.GeocodeResponseList[t]));return z}}})},s=function(r){r=G.ex({position:null,geocodePreference:"StreetAddress"},r);return G.ex(new o,{methodName:"ReverseGeocode",getRequestBody:function(){return"<xls:ReverseGeocodeRequest><xls:Position><gml:Point><gml:pos>"+
r.position.toString()+"</gml:pos></gml:Point></xls:Position><xls:ReverseGeocodePreference>"+r.geocodePreference+"</xls:ReverseGeocodePreference></xls:ReverseGeocodeRequest>"},parseResponse:function(u){var D=null;if(u&&u.Point)D=new G.Pos(match.Point.pos);if(u&&u.ReverseGeocodedLocation&&u.ReverseGeocodedLocation.Address)return j(u.ReverseGeocodedLocation.Address,D);return null}})};return{forward:function(r){r=G.ex({addresses:[],complete:null},r);var u,D=[];if(r.addresses&&!G.is(r.addresses,"array"))r.addresses=
[r.addresses];for(u=0;u<r.addresses.length;u++)G.is(r.addresses[u],"object")?Z("attempting to geocode a simple object - not implemented","warn"):D.push(new types.Address({freeform:r.addresses[u]}));if(D.length>0){D=new n({addresses:D});g(D,function(B){if(r.complete)for(u=0;u<B.length;u++)r.complete(r.addresses[u],B[u])})}},reverse:function(r){r=G.ex({position:null,complete:null},r);if(!r.position)throw Error("Cannot reverse geocode without a position");var u=new s(r);g(u,function(D){r.complete&&r.complete(D)})}}});
G.Registry.register("service","routing",function(){var n=function(s){s=G.ex({waypoints:[],provideRouteHandle:false,distanceUnit:"KM",routeQueryType:"RMAN",routePreference:"Fastest",routeInstructions:true,routeGeometry:true},s);var r=new o,u=G.formatter('<xls:DetermineRouteRequest provideRouteHandle="{0}" distanceUnit="{1}" routeQueryType="{2}">'),D=G.formatter("<xls:{0}><xls:Position><gml:Point><gml:pos>{1}</gml:pos></gml:Point></xls:Position></xls:{0}>");return G.ex({},r,{methodName:"DetermineRoute",
getRequestBody:function(){if(s.waypoints.length<2)throw Error("Cannot send RouteRequest, less than 2 waypoints specified");var B=u(s.provideRouteHandle,s.distanceUnit,s.routeQueryType);B+="<xls:RoutePlan>";B+="<xls:RoutePreference>"+s.routePreference+"</xls:RoutePreference>";B+="<xls:WayPointList>";for(var q=0;q<s.waypoints.length;q++)B+=D(q===0?"StartPoint":q===s.waypoints.length-1?"EndPoint":"ViaPoint",s.waypoints[q].toString());B+="</xls:WayPointList>";B+="</xls:RoutePlan>";if(s.routeInstructions)B+=
'<xls:RouteInstructionsRequest rules="maneuver-rules" providePoint="true" />';if(s.routeGeometry)B+="<xls:RouteGeometryRequest />";B+="</xls:DetermineRouteRequest>";return B},parseResponse:function(B){var q=G.RouteTools.RouteData,z=B.RouteGeometry.LineString.pos,t=z.length,w=Array(t);for(t=t;t--;)w[t]=new ja(z[t]);z=B.RouteInstructionsList;B=[];z=z&&z.RouteInstruction?z.RouteInstruction:[];t=0;for(var E=new COG.Duration,C=0;C<z.length;C++){var F;F=z[C].distance;var K={M:1,KM:1E3}[F.uom?F.uom.toUpperCase():
"M"];F=F.value&&K?F.value*K:0;K=COG.parseDuration(z[C].duration,"8601");t+=F;E=COG.addDuration(E,K);B.push(new G.RouteTools.Instruction({position:new G.Pos(z[C].Point),description:z[C].Instruction,distance:F,distanceTotal:t,time:K,timeTotal:E}))}return new q({geometry:w,instructions:B})}})};return{calculate:function(s,r){s=G.ex({waypoints:[]},s);if(typeof G.RouteTools!=="undefined"){var u=new n(s);g(u,function(D){r&&r(D)})}else Z("Could not generate route, T5.RouteTools plugin not found","warn")}}});
return{applyConfig:function(n){G.ex(f,n)},compareFns:function(){return{streetDetails:function(n,s){return s.calcMatchPercentage(n)},location:function(n,s){return s.calcMatchPercentage(n)}}}()}}();jb.T5=G;jb.Tile5=function(a,c){c=L({container:a,type:"map",renderer:"canvas",starpos:null,zoom:1,fastpan:false,drawOnScale:true,zoombar:{}},c);return ua("view",c.type,c)}})(window);
