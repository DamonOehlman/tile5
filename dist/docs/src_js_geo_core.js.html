{% extends 'apidoc.html' %}

{% block title %}Tile5 API Documentation{% endblock %}

{% block api %}
<h1><a name="T5.Geo">T5.Geo</a></h1>

<p><em>module</em></p>

<p>The Geo module contains classes and functionality to support geospatial 
operations and calculations that are required when drawing maps, routes, etc.</p>

<h2>Functions</h2>

<h3>getEngine(requiredCapability)</h3>

<p>Returns the engine that provides the required functionality.  If preferred engines are supplied
as additional arguments, then those are looked for first</p>

<h3>rankGeocodeResponses(requestAddress, responseAddress, engine)</h3>

<p>To be completed</p>

<h3>distanceToString(distance)</h3>

<p>This function simply formats a distance value (in meters) into a human readable string.</p>

<h4>TODO</h4>

<ul>
<li>Add internationalization and other formatting support to this function</li>
</ul>

<h3>dist2rad(distance)</h3>

<p>To be completed</p>

<h3>lat2pix(lat)</h3>

<p>To be completed</p>

<h3>lon2pix(lon)</h3>

<p>To be completed</p>

<h3>pix2lon(mercX)</h3>

<p>To be completed</p>

<h3>pix2lat(mercY)</h3>

<p>To be completed</p>

<h3>normalizeLon(lon)</h3>

<p>To be completed</p>

<h1><a name="T5.Geo.Position">T5.Geo.Position</a></h1>

<p>The position class is simply a data-storage class that is used to store 
a latitude and longitude pair.  While this class used to contain methods 
to support manipulation on these objects, these have been moved to the 
Geo.P submodule for performance optimization reasons.</p>

<h2>Properties</h2>

<ul>
<li><p>lat
The latitude of the position</p></li>
<li><p>lon
The longitude of the position</p></li>
</ul>

<h2>Usage</h2>

<p>Creating a new position object can be done by either specifically creating 
a new Position object, by specifying the lat and lon as arguments:</p>

<pre>
var pos = new <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a>(-27.468, 153.028);
</pre>

<p>Alternative, the <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a> submodule can be used to parse a 
latitude / longitude pair from a string value</p>

<pre>
var pos = <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a>.parse("-27.468 153.028");
</pre>

<p>The parse function supports both space-separated, and comma-separated syntaxes.    </p>

<h1><a name="T5.Geo.BoundingBox">T5.Geo.BoundingBox</a></h1>

<p>The BoundingBox class is used to store the min and max Geo.Position 
that represents a bounding box.  For support functions for manipulating 
a bounding box, see the Geo.B submodule.</p>

<h2>Properties</h2>

<ul>
<li><p>min
The <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> object representing the minimum of the bounding box. <br />
The minimum position of the bounding box is the south-western (or 
bottom-left) corner of the bounding box.</p></li>
<li><p>max
The <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> object representing the maximum position of the bounding 
box.  The maximum position is the north-eastern (or top-right) corner of 
the bounding box.</p></li>
</ul>

<h2>Usage</h2>

<p>Creating a new Geo.BoundingBox is done by specifying either 
a Geo.Position objects or parsable strings to the constructor:</p>

<p>Created position objects example:</p>

<pre>
var minPos = <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a>.parse("-27.587 152.876"),
maxPos = <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a>.parse("-27.468 153.028"),
bounds = new <a href="src_js_geo_core.js.html#T5.Geo.BoundingBox">T5.Geo.BoundingBox</a>(minPos, maxPos);
</pre>

<p>Creating from latlon string pairs example (constructor arguments 
automatically passed through the <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a>.parse function):</p>

<pre>
var bounds = new <a href="src_js_geo_core.js.html#T5.Geo.BoundingBox">T5.Geo.BoundingBox</a>("-27.587 152.876", "-27.468 153.028");
</pre>

<h1><a name="T5.Geo.Address">T5.Geo.Address</a></h1>

<p>To be completed</p>

<h1><a name="T5.Geo.P">T5.Geo.P</a></h1>

<p>The Geo.P submodule is used to perform operations on Geo.Position objects rather 
than have those operations bundled with the object.</p>

<h2>Functions</h2>

<h3>calcDistance(pos1, pos2)</h3>

<p>Calculate the distance between two <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> objects, pos1 and pos2.  The 
distance returned is measured in kilometers.</p>

<h3>copy(src)</h3>

<p>Create a copy of the specified <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> object.</p>

<h3>empty(pos)</h3>

<p>Returns true if the <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> object is empty, false if not.</p>

<h3>equal(pos1, pos2)</h3>

<p>Compares to <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> objects and returns true if they 
have the same latitude and longitude values</p>

<h3>inArray(pos, testArray)</h3>

<p>Checks to see whether the specified <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> is contained within 
the array of position objects passed in the testArray.</p>

<h3>inBounds(pos, bounds)</h3>

<p>Returns true if the specified Geo.Position object is within the 
<a href="src_js_geo_core.js.html#T5.Geo.BoundingBox">T5.Geo.BoundingBox</a> specified by the bounds argument.</p>

<h3>offset(pos, latOffset, lonOffset)</h3>

<p>Return a new <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> which is the original <code>pos</code> offset by
the specified <code>latOffset</code> and <code>lonOffset</code> (which are specified in 
km distance)</p>

<h3>parse(object)</h3>

<p>This function is used to take a latitude and longitude String 
pair (either space or comma delimited) and return a new <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> 
value.  The function is also tolerant of being passed an existing 
<a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a> object as the object argument, and in these cases 
returns a copy of the position.</p>

<h3>parseArray(sourceData)</h3>

<p>Just like parse, but with lots of em'</p>

<h3>fromMercatorPixels(x, y, radsPerPixel)</h3>

<p>This function is used to take x and y mercator pixels values, 
and using the value passed in the radsPerPixel value convert 
that to a Geo.Position object.</p>

<h3>toMercatorPixels(pos, radsPerPixel)</h3>

<p>Basically, the reverse of the fromMercatorPixels function - 
pass it a Geo.Position object and get a Vector object back 
with x and y mercator pixel values back.</p>

<h3>generalize(sourceData, requiredPositions, minDist)</h3>

<p>To be completed</p>

<h3>vectorize(positions, options)</h3>

<p>The vectorize function is used to take an array of positions specified in the 
<code>positions</code> argument and convert these into <a href="src_js_geo_core.js.html#T5.Geo.GeoVector">T5.Geo.GeoVector</a> objects. By default
the vectorize function will process these asyncronously and will return a 
COG Worker that will be taking care of chunking up and processing the request
in an efficient way.  It is, however, possible to specify that the conversion should
happen synchronously and in this case the array of vectors is returned rather
than a worker instance.</p>

<h4>Example Usage (Asyncronous)</h4>

<pre><code> // default options are used (async + 500 conversions per cycle)
 var worker = <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a>.vectorize(positions);

 // bind to the complete event for the worker
 worker.bind('complete', function(vectors) {
     // DO SOMETHING WITH YOUR VECTORS HERE
 });
</code></pre>

<h4>Example Usage (Synchronous)</h4>

<pre><code> var vectors = <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a>.vectorize(positions, {
     async: false
 });
</code></pre>

<h3>toString(pos)</h3>

<p>Return a string representation of the Geo.Position object</p>

<h1><a name="T5.Geo.B">T5.Geo.B</a></h1>

<p>A collection of utilities that are primarily designed to help with working 
with Geo.BoundingBox objects.  The functions are implemented here rather 
than with the actual object itself to ensure that the object remains lightweight.</p>

<h2>Functions</h2>

<h3>calcSize(min, max, normalize)</h3>

<p>The calcSize function is used to determine the size of a Geo.BoundingBox given 
a minimum position (relates to the bottom-left / south-western corner) and 
maximum position (top-right / north-eastern corner) of the bounding box. <br />
The 3rd parameter specifies whether the size calculations should normalize the 
calculation in cases where the bounding box crosses the 360 degree boundary.</p>

<h3>createBoundsFromCenter(centerPos, distance)</h3>

<p>This function is very useful for creating a Geo.BoundingBox given a 
center position and a radial distance (specified in KM) from the center 
position.  Basically, imagine a circle is drawn around the center 
position with a radius of distance from the center position, and then 
a box is drawn to surround that circle.  Adapted from the <a class="external" href="http://janmatuschek.de/LatitudeLongitudeBoundingCoordinates">functions written 
in Java by Jan Philip Matuschek</a></p>

<h3>expand(bounds, amount)</h3>

<p>A simple function that is used to expand a Geo.BoundingBox 
by the specified amount (in degrees).</p>

<h3>forPositions(positions, padding)</h3>

<p>This function is very useful when you need to create a 
Geo.BoundingBox to contain an array of <a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a>. <br />
The optional second parameter allows you to specify an amount of 
padding (in degrees) to apply to the bounding box that is created.</p>

<h3>getCenter(bounds)</h3>

<p>Returns a Geo.Position for the center position of the bounding box.</p>

<h3>getGeohash(bounds)</h3>

<p>To be completed</p>

<h3>getZoomLevel(bounds, displaySize)</h3>

<p>This function is used to return the zoom level (seems consistent across 
mapping providers at this stage) that is required to properly display 
the specified <a href="src_js_geo_core.js.html#T5.Geo.BoundingBox">T5.Geo.BoundingBox</a> given the screen dimensions (specified as 
a Dimensions object) of the map display. Adapted from 
<a class="external" href="http://groups.google.com/group/google-maps-js-api-v3/browse_thread/thread/43958790eafe037f/66e889029c555bee">this code</a></p>

<h3>isEmpty(bounds)</h3>

<p>Returns true if the specified <a href="src_js_geo_core.js.html#T5.Geo.BoundingBox">T5.Geo.BoundingBox</a> is empty.</p>

<h3>toString(bounds)</h3>

<p>Returns a string representation of a Geo.BoundingBox</p>

<h1><a name="T5.Geo.A">T5.Geo.A</a></h1>

<p>A collection of utilities for working with Geo.Address objects</p>

<h2>Functions</h2>

<h3>buildingMatch(freeForm, numberRange, name)</h3>

<h3>normalize(addressText)</h3>

<p>Used to take an address that could be in a variety of formats
and normalize as many details as possible.  Text is uppercased, road types are replaced, etc.</p>

<h3>toString(address)</h3>

<p>Returns a string representation of the <a href="src_js_geo_core.js.html#T5.Geo.Address">T5.Geo.Address</a> object</p>

<h1><a name="T5.Geo.XY">T5.Geo.XY</a></h1>

<p>The GeoXY class is used to convert a position (<a href="src_js_geo_core.js.html#T5.Geo.Position">T5.Geo.Position</a>) into a
<a href="src_js_core.js.html#T5.Vector">T5.Vector</a> that can be used to draw on the various <a href="src_js_graphics_viewlayer.js.html#T5.ViewLayer">T5.ViewLayer</a> implementations.
This class provides the necessary mechanism that allows the view layers to 
assume operation using a simple vector (containing an x and y) with no need
geospatial awareness built in.  </p>

<p>Layers are aware that particular events may 
require vector resynchronization which is facilitated by the <code>syncVectors</code> 
method of the <a href="src_js_geo_ui.js.html#T5.Geo.UI.GeoTileGrid">T5.Geo.UI.GeoTileGrid</a> (the <a href="src_js_tiling_tilegrid.js.html#T5.TileGrid">T5.TileGrid</a> has a placeholder 
implementation).</p>

<h2>Usage</h2>

<pre>
var position = <a href="src_js_geo_core.js.html#T5.Geo.P">T5.Geo.P</a>.parse("-27.468 153.028"),
vector = new <a href="src_js_geo_core.js.html#T5.Geo.GeoVector">T5.Geo.GeoVector</a>(position);
</pre>

<h2>Methods</h2>

<h3>setRadsPerPixel(radsPerPixel, offsetX, offsetY)</h3>

<h3>updatePos(pos)</h3>

<p>Update the position of the <a href="src_js_geo_core.js.html#T5.Geo.GeoVector">T5.Geo.GeoVector</a></p>

<h1><a name="T5.Geo.Engine">T5.Geo.Engine</a></h1>

<p>TODO</p>

<h1><a name="T5.Geo.GeoSearchResult">T5.Geo.GeoSearchResult</a></h1>

<p>TODO</p>

<h1><a name="T5.Geo.GeoSearchAgent">T5.Geo.GeoSearchAgent</a></h1>

<p>TODO</p>

<h1><a name="T5.Geo.GeocodingAgent">T5.Geo.GeocodingAgent</a></h1>

<p>TODO</p>

<h1><a name="T5.Geo.GeoVector">T5.Geo.GeoVector</a></h1>

<p><strong>deprecated</strong></p>

<p>please use the <a href="src_js_geo_core.js.html#T5.Geo">T5.Geo</a>.GeoXY instead</p>

{% endblock %}
