COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var F=arguments[0]||{},X,t=1,q=arguments.length;t<q;t++)if((X=arguments[t])!==null)for(var k in X){var l=X[k];if(F!==l)if(l!==undefined)F[k]=l}return F};
(function(){var F=Object.prototype.hasOwnProperty,X=0,t={};t.toID=function(q){return q.replace(/\s/g,"-")};t.objId=function(q){return(q?q:"obj")+X++};t.isFunction=function(q){return toString.call(q)==="[object Function]"};t.isArray=function(q){return toString.call(q)==="[object Array]"};t.isPlainObject=function(q){if(!q||toString.call(q)!=="[object Object]"||q.nodeType||q.setInterval)return false;if(q.constructor&&!F.call(q,"constructor")&&!F.call(q.constructor.prototype,"isPrototypeOf"))return false;
var k;for(k in q);return k===undefined||F.call(q,k)};t.isEmptyObject=function(q){for(var k in q)return false;return true};t.isXmlDocument=function(q){return toString.call(q)==="[object Document]"};t.contains=function(q,k){var l=q,p=arguments,z=1;if(k&&module.isArray(k)){p=k;z=0}for(z=z;z<p;z++)l=l&&typeof foo[p[z]]!=="undefined";return l};t.formatStr=function(q){if(arguments.length<=1)return q;for(var k=arguments.length-2,l=0;l<=k;l++)q=q.replace(RegExp("\\{"+l+"\\}","gi"),arguments[l+1]);return q};
t.wordExists=function(q,k){var l="";if(k.toString)k=k.toString();for(var p=0;p<k.length;p++)l+=!/\w/.test(k[p])?"\\"+k[p]:k[p];return RegExp("(^|\\s|\\,)"+l+"(\\,|\\s|$)","i").test(q)};COG.extend(COG,t)})();
(function(){function F(l){return typeof console!=="undefined"?function(){console[l](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var X=window.console&&window.console.markTimeline,t=F("error"),q=F("info"),k=function(){return X?function(l,p){console.markTimeline(l+(p?": "+((new Date).getTime()-p)+"ms":""))}:function(){}}();COG.extend(COG,{trace:k,debug:F("debug"),info:q,warn:F("warn"),error:t,exception:function(l){if(t)for(var p in l)q("ERROR DETAIL: "+p+
": "+l[p])}})})();
(function(){function F(t,q){var k=t.hasOwnProperty("obsHandlers")?t.obsHandlers:null;k[q]||(k[q]=[]);return k[q]}var X=0;COG.observable=function(t){if(!t)return null;if(!(t.hasOwnProperty("obsHandlers")?t.obsHandlers:null))t.obsHandlers={};if(!t.hasOwnProperty("bind")){t.bind=function(q,k){var l="callback"+X++;F(t,q).unshift({fn:k,id:l});return l};t.triggerCustom=function(q,k){var l=F(t,q),p={cancel:false,name:q,source:this},z;k&&COG.extend(p,k);if(!l)return null;z=Array.prototype.slice.call(arguments,2);
t.eventInterceptor&&t.eventInterceptor(q,p,z);z.unshift(p);for(var L=l.length;L--&&!p.cancel;)l[L].fn.apply(this,z);return p};t.trigger=function(q){var k=Array.prototype.slice.call(arguments,1);k.splice(0,0,q,null);return t.triggerCustom.apply(this,k)};t.unbind=function(q,k){if(typeof q==="undefined")t.obsHandlers={};else for(var l=F(t,q),p=0;l&&p<l.length;p++)if(l[p].id===k){l.splice(p,1);break}return t}}return t}})();
(function(){function F(k,l){k[l]||(k[l]=function(p){return k.configure(l,p)})}function X(k){k.gtConfId="configurable"+q++;k.gtConfig={};k.gtConfigFns=[];return k.gtConfig}var t={},q=0;COG.paramTweaker=function(k,l,p){return function(z,L){if(typeof L!=="undefined"){if(z in k)k[z]=L;p&&z in p&&p[z](z,L)}else return l&&z in l?l[z](z):k[z]}};COG.configurable=function(k,l,p,z){if(k){k.gtConfId||X(k);var L=k.gtConfId,oa=k.gtConfig,n=k.gtConfigFns;t[L]=k;n.push(p);for(p=l.length;p--;){oa[l[p]]=true;z&&F(k,
l[p])}if(!k.configure)k.configure=function(E,w){if(oa[E]){for(var m=n.length;m--;){var s=n[m](E,w);if(typeof s!=="undefined")return s}return t[L]}return null}}}})();
(function(){function F(k){var l=document.createElement("script"),p=false;l.src=k;l.async=true;l.onload=l.onreadystatechange=function(){if(!p&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){p=true;l.onload=l.onreadystatechange=null;l&&l.parentNode&&l.parentNode.removeChild(l)}};t||(t=document.getElementsByTagName("head")[0]);t.appendChild(l)}var X=0,t,q=this;COG.jsonp=function(k,l,p){k+=k.indexOf("?")>=0?"&":"?";var z="json"+ ++X;q[z]=function(L){l(L);q[z]=null;try{delete q[z]}catch(oa){}};
F(k+(p?p:"callback")+"="+z);return z}})();
(function(){var F=1.70158,X=Math.PI/2,t=Math.PI*2,q=1E3/60|0,k=Math.abs,l=Math.pow,p=Math.sin,z=Math.asin,L=Math.cos,oa={linear:function(n,E,w,m){return w*n/m+E},backin:function(n,E,w,m){return w*(n/=m)*n*((F+1)*n-F)+E},backout:function(n,E,w,m){return w*((n=n/m-1)*n*((F+1)*n+F)+1)+E},backinout:function(n,E,w,m){return(n/=m/2)<1?w/2*n*n*(((F*=1.525)+1)*n-F)+E:w/2*((n-=2)*n*(((F*=1.525)+1)*n+F)+2)+E},bouncein:function(n,E,w,m){return w-oa.bounceout(m-n,0,w,m)+E},bounceout:function(n,E,w,m){return(n/=
m)<1/2.75?w*7.5625*n*n+E:n<2/2.75?w*(7.5625*(n-=1.5/2.75)*n+0.75)+E:n<2.5/2.75?w*(7.5625*(n-=2.25/2.75)*n+0.9375)+E:w*(7.5625*(n-=2.625/2.75)*n+0.984375)+E},bounceinout:function(n,E,w,m){return n<m/2?oa.bouncein(n*2,0,w,m)/2+E:oa.bounceout(n*2-m,0,w,m)/2+w/2+E},cubicin:function(n,E,w,m){return w*(n/=m)*n*n+E},cubicout:function(n,E,w,m){return w*((n=n/m-1)*n*n+1)+E},cubicinout:function(n,E,w,m){if((n/=m/2)<1)return w/2*n*n*n+E;return w/2*((n-=2)*n*n+2)+E},elasticin:function(n,E,w,m,s,v){if(n==0)return E;
if((n/=m)==1)return E+w;v||(v=m*0.3);if(!s||s<k(w)){s=w;w=v/4}else w=v/t*z(w/s);return-(s*l(2,10*(n-=1))*p((n*m-w)*t/v))+E},elasticout:function(n,E,w,m,s,v){var V;if(n==0)return E;if((n/=m)==1)return E+w;v||(v=m*0.3);if(!s||s<k(w)){s=w;V=v/4}else V=v/t*z(w/s);return s*l(2,-10*n)*p((n*m-V)*t/v)+w+E},elasticinout:function(n,E,w,m,s,v){var V;if(n==0)return E;if((n/=m/2)==2)return E+w;v||(v=m*0.3*1.5);if(!s||s<k(w)){s=w;V=v/4}else V=v/t*z(w/s);if(n<1)return-0.5*s*l(2,10*(n-=1))*p((n*m-V)*t/v)+E;return s*
l(2,-10*(n-=1))*p((n*m-V)*t/v)*0.5+w+E},quadin:function(n,E,w,m){return w*(n/=m)*n+E},quadout:function(n,E,w,m){return-w*(n/=m)*(n-2)+E},quadinout:function(n,E,w,m){if((n/=m/2)<1)return w/2*n*n+E;return-w/2*(--n*(n-2)-1)+E},sinein:function(n,E,w,m){return-w*L(n/m*X)+w+E},sineout:function(n,E,w,m){return w*p(n/m*X)+E},sineinout:function(n,E,w,m){return-w/2*(L(Math.PI*n/m)-1)+E}};COG.tweenValue=function(n,E,w,m,s){function v(da){da=da?da:(new Date).getTime();if(aa+q<da){var W=da-V,ra=w(W,n,ka,m),sa=
V+m<=da;da=!sa;if(s){W=s(ra,sa,W);da=typeof W!="undefined"?W&&da:da}da&&animFrame(v)}}var V=(new Date).getTime(),aa=0,ka=E-n;animFrame(v);return{}};COG.easing=function(n){return oa[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(n,E){oa[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]=E}})();
(function(){var F=/^P(\d+Y)?(\d+M)?(\d+D)?$/,X=/^(\d+H)?(\d+M)?(\d+S)?$/,t={8601:function(k){k=k.split("T");var l=null;l=null;var p=0,z=0;F.lastIndex=-1;l=F.exec(k[0]);p+=l[3]?parseInt(l[3].slice(0,-1),10):0;X.lastIndex=-1;l=X.exec(k[1]);z+=l[1]?parseInt(l[1].slice(0,-1),10)*3600:0;z+=l[2]?parseInt(l[2].slice(0,-1),10)*60:0;z+=l[3]?parseInt(l[3].slice(0,-1),10):0;return new q(p,z)}},q=COG.Duration=function(k,l){return{days:k?k:0,seconds:l?l:0}};COG.addDuration=function(){for(var k=new q,l=arguments.length;l--;){k.days+=
arguments[l].days;k.seconds+=arguments[l].seconds}if(k.seconds>=86400){k.days+=~~(k.seconds/86400);k.seconds%=86400}return k};COG.formatDuration=function(k){var l,p,z="";if(k.days)z=k.days+" days ";if(k.seconds){k=k.seconds;if(k>=3600){l=~~(k/3600);k-=l*3600}if(k>=60){p=Math.round(k/60);k-=p*60}if(l)z=z+l+(l>1?" hrs ":" hr ")+(p?(p>10?p:"0"+p)+" min ":"");else if(p)z=z+p+" min";else if(k>0)z=z+(k>10?k:"0"+k)+" sec"}return z};COG.parseDuration=function(k,l){var p=l?t[l]:null;if(p)return p(k);COG.Log.warn("Could not find duration parser for specified format: "+
l);return new q}})();COG.ObjectStore=function(){var F={},X={},t="obj_"+(new Date).getTime(),q=0,k=Object.prototype.hasOwnProperty;return{add:function(l,p){var z;p=p?p:"default";if(l&&l.constructor)if(!k.call(l,"id"))l.id=t+ ++q;z=X[p]?X[p]:X[p]=[];F[l.id]=z.length;z[l.length]=l}}};var CANI={};
(function(F){var X=[],t=0,q=false,k=F.register=function(l,p){X.push({section:l,run:p})};F.init=function(l){function p(){if(t<X.length){var L=X[t++];z[L.section]||(z[L.section]={});L.run(z[L.section],p)}else{for(L in z)F[L]=z[L];q=true;l&&l(F)}}var z={};if(q&&l)l(F);else{t=0;p()}};k("canvas",function(l,p){function z(){var E,w=L.getContext("2d");w.save();try{w.translate(50,50);w.beginPath();w.rect(0,0,20,20);E=w.isPointInPath(10,10)}finally{w.restore()}return E}var L=document.createElement("canvas"),
oa=typeof FlashCanvas!="undefined",n=typeof G_vmlCanvasManager!="undefnined";L.width=200;L.height=200;l.pipTransformed=oa||n?false:z();p()})})(CANI);
INTERACT=function(){function F(m){return function(s,v,V){(V?V:m?document.body:document).addEventListener(s,v,false)}}function X(m){return function(s,v,V){(V?V:m?document.body:document).removeEventListener(s,v,false)}}function t(m,s,v){(v?v:document).attachEvent("on"+m,s)}function q(m,s,v){(v?v:document).detachEvent("on"+m,s)}function k(m,s){return{x:m?m:0,y:s?s:0,count:1}}function l(m,s){E.push(COG.extend({handler:null,checks:{},type:m},s))}function p(m){var s=0,v=0;if(m.offsetParent){do{s+=m.offsetLeft;
v+=m.offsetTop;m=m.offsetParent}while(m)}return{left:s,top:v}}function z(m,s){return{source:m,target:s.target?s.target:s.srcElement}}function L(m,s){for(var v=m.target?m.target:m.srcElement;v&&v!==s&&v.nodeName&&v.nodeName.toUpperCase()!="CANVAS";)v=v.parentNode;return v&&v===s}function oa(m,s){return{x:m.x-(s?s.left:0),y:m.y-(s?s.top:0)}}function n(m){if(m.preventDefault){m.preventDefault();m.stopPropagation()}else m.cancelBubble&&m.cancelBubble()}var E=[],w=function(m,s,v){function V(ba,ia,ea,N){var O=
0,ma=0,x=0;COG.tweenValue(0,ba,ea,N,function(I){x=O;O=I});COG.tweenValue(0,ia,ea,N,function(I){aa.trigger("pan",O-x,I-ma);ma=I})}v=COG.extend({binder:null,unbinder:null,observable:null},v);for(var aa=v.observable,ka=null,da=[],W=[],ra,sa,wa={bind:function(){return aa.bind.apply(null,arguments)},pannable:function(ba){ka=COG.extend({inertia:true},ba);return wa},unbind:function(){aa.unbind();for(var ba=0;ba<da.length;ba++)da[ba].unbind();return wa}},Ea=0;Ea<s.length;Ea++)da.push(s[Ea](m,aa,v));aa.bind("pointerDown",
function(){W=[];sa=ra=0});aa.bind("pointerMove",function(ba,ia,ea,N){if(ka){W[W.length]={ticks:(new Date).getTime(),x:N.x,y:N.y};aa.trigger("pan",N.x,N.y)}ra+=N.x?N.x:0;sa+=N.y?N.y:0});aa.bind("pointerUp",function(ba,ia,ea){if(Math.abs(ra)>20||Math.abs(sa)>20){if(ka){ea=W.length;var N,O;ia=0;for(O=W.length;--O>1&&ia<50;)ia+=W[O].ticks-W[O-1].ticks;if(ea-O>1){ba=W[ea-1].x-W[O].x;N=W[ea-1].y-W[O].y;O=Math.sqrt(ba*ba+N*N)|0;if(O>15){ba=W[ea-1].x-W[0].x;N=W[ea-1].y-W[0].y;O=Math.sqrt(ba*ba+N*N)|0;ea=
Math.asin(N/O);ia=O*500/ia|0;ia=ia>300?300:ia;V(Math.cos(ba>0?ea:Math.PI-ea)*ia,Math.sin(ea)*ia,COG.easing("sine.out"),500)}}}}else aa.trigger("tap",ia,ea)});return wa};l("pointer",{handler:function(m,s,v){function V(x){if(x.pageX&&x.pageY)return k(x.pageX,x.pageY);else{var I=document.documentElement,Y=document.body;return k(x.clientX+(I&&I.scrollLeft||Y&&Y.scrollLeft||0)-(I&&I.clientLeft||Y&&Y.clientLeft||0),x.clientY+(I&&I.scrollTop||Y&&Y.scrollTop||0)-(I&&I.clientTop||Y&&Y.clientTop||0))}}function aa(x){if(L(x,
m))if(ba=ra(x)){var I=V(x);m.style.cursor="move";n(x);O=I.x;ma=I.y;ia=k(O,ma);s.triggerCustom("pointerDown",z("mouse",x),ia,oa(ia,p(m)))}}function ka(x){var I=V(x);ea=I.x;N=I.y;if(L(x,m))sa(x,ba?"pointerMove":"pointerHover")}function da(x){if(ba&&ra(x)){ba=false;if(L(x,m)){m.style.cursor="default";sa(x,"pointerUp")}}}function W(x){if(L(x,m)){var I;x=x||window.event;if(x.detail)I=x.axis===2?-x.detail*wa:0;else{I=x.wheelDeltaY?x.wheelDeltaY:x.wheelDelta;if(window.opera)I=-I}if(I!==0){var Y=k(ea,N);
s.triggerCustom("zoom",z("mouse",x),Y,oa(Y,p(m)),I/Ea,"wheel");n(x);x.returnValue=false}}}function ra(x){x=x||window.event;return(x.which||x.button)==1}function sa(x,I,Y,xa,ya){Y=typeof Y!="undefined"?Y:ea;xa=typeof xa!="undefined"?xa:N;var J=Y-O,P=xa-ma,S=k(Y,xa);s.triggerCustom(I,z("mouse",x),S,oa(S,p(m)),k(J,P));if(typeof ya=="undefined"||ya){O=Y;ma=xa}}v=COG.extend({},v);var wa=120,Ea=wa*8,ba=false,ia,ea,N,O,ma;v.binder("mousedown",aa,false);v.binder("mousemove",ka,false);v.binder("mouseup",da,
false);v.binder("dblclick",function(x){COG.info("captured double click");if(L(x,m)){var I=V(x);s.triggerCustom("doubleTap",z("mouse",x),I,oa(I,p(m)))}},false);v.binder("mousewheel",W,document);v.binder("DOMMouseScroll",W,document);return{unbind:function(){v.unbinder("mousedown",aa,false);v.unbinder("mousemove",ka,false);v.unbinder("mouseup",da,false);v.unbinder("mousewheel",W,document);v.unbinder("DOMMouseScroll",W,document)}}},checks:{touch:false}});l("pointer",{handler:function(m,s,v){function V(J){if(J.count<
2)return 0;var P=J.x-J.next.x;J=J.y-J.next.y;return~~Math.sqrt(P*P+J*J)}function aa(J,P,S){P=P?P:0;S=S?S:0;for(var ua={x:J.x-P,y:J.y-S,id:J.id,count:J.count},Aa=ua;J.next;){J=J.next;Aa=Aa.next={x:J.x-P,y:J.y-S,id:J.id}}return ua}function ka(J,P){var S=J[P?P:"touches"],ua,Aa;if(S.length===0)return null;Aa=ua={x:S[0].pageX,y:S[0].pageY,id:S[0].identifier,count:S.length};for(var Ga=1,Za=S.length;Ga<Za;Ga++)Aa=Aa.next={x:S[Ga].pageX,y:S[Ga].pageY,id:S[Ga].identifier};return ua}function da(J){if(L(J,m)){N=
p(m);var P=ka(J,"changedTouches"),S=aa(P,N.left,N.top);if(!ma){O=ba;s.triggerCustom("pointerDown",z("touch",J),P,S)}xa&&s.triggerCustom("pointerDownMulti",z("touch",J),P,S);ma=ka(J);if(ma.count>1)I=V(ma);ya=1;Y=aa(ma)}}function W(J){if(L(J,m)){J.preventDefault();x=ka(J);if(O==ba)O=Math.abs(ma.x-x.x)>wa||Math.abs(ma.y-x.y)>wa?Ea:ba;if(O!=ba){O=x.count>1?ea:ia;if(O==ea)if(ma.count===1){ma=aa(x);I=V(ma)}else{var P=V(x);if(Math.abs(I-P)<sa)O=ia;else{var S;S=x.x;var ua=x.next.x,Aa=x.y,Ga=x.next.y,Za=Aa<
Ga?Aa:Ga;S={x:(S<ua?S:ua)+(Math.abs(S-ua)>>1),y:Za+(Math.abs(Aa-Ga)>>1)};P=P/I;ua=P-ya;s.triggerCustom("zoom",z("touch",J),S,oa(S,N),ua,"pinch");ya=P}}O==ia&&s.triggerCustom("pointerMove",z("touch",J),x,aa(x,N.left,N.top),k(x.x-Y.x,x.y-Y.y));xa&&s.triggerCustom("pointerMoveMulti",z("touch",J),x,aa(x,N.left,N.top))}Y=aa(x)}}function ra(J){if(L(J,m)){var P=ka(J,"changedTouches"),S=aa(P,N.left,N.top);x=ka(J);if(!x){s.triggerCustom("pointerUp",z("touch",J),P,S);ma=null}xa&&s.triggerCustom("pointerUpMulti",
z("touch",J),P,S)}}v=COG.extend({detailed:false,inertia:false},v);var sa=20,wa=7,Ea=0,ba=1,ia=2,ea=3,N,O,ma,x,I,Y,xa=v.detailed,ya=1;v.binder("touchstart",da,false);v.binder("touchmove",W,false);v.binder("touchend",ra,false);COG.info("initialized touch handler");return{unbind:function(){v.unbinder("touchstart",da,false);v.unbinder("touchmove",W,false);v.unbinder("touchend",ra,false)}}},checks:{touch:true}});return{register:l,watch:function(m,s,v){s=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!=
"undefined",types:null},s);capabilities=COG.extend({touch:"ontouchstart"in window},v);if(!s.observable){COG.info("creating observable");s.observable=COG.observable({});globalOpts=s}s.binder=s.isIE?t:F(s.bindToBody);s.unbinder=s.isIE?q:X(s.bindToBody);v=s.types;for(var V=capabilities,aa=[],ka=E.length;ka--;){var da=E[ka],W=!v||v.indexOf(da.type)>=0,ra=true;for(var sa in da.checks){var wa=da.checks[sa];COG.info("checking "+sa+" capability. require: "+wa+", capability = "+V[sa]);ra=ra&&wa===V[sa]}if(W&&
ra)aa[aa.length]=da.handler}return new w(m,aa,s)}}}();var T5={};
(function(F){function X(){return(new Date).getTime()}function t(b,d){d=Sb.call(d);if(d=="finite")return!Tb[Za](+b);return d=="null"&&b===null||d==typeof b||d=="object"&&b===Object(b)||d=="array"&&Array.isArray&&Array.isArray(b)||Ub.call(b).slice(8,-1).toLowerCase()==d}function q(b,d){this.x=b||0;this.y=d||0}function k(b,d,f,e){this.x=b||0;this.y=d||0;this.w=f||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function l(b){b=b||(new Date).getTime();for(var d=0;d<Ua.length;){var f=Ua[d],e=
Qa[f],a=Qa[f].image&&(db||Qa[f].image.complete&&Qa[f].image.width>0),c=b-e.start;c=a||c>=Vb;if(a){a=e.callbacks;wb[f]=e.image;for(var g=0;g<a.length;g++)a[g](e.image,true)}if(c){Ua.splice(d,1);delete Qa[f]}else d++}Ua.length>0&&animFrame(l)}function p(b,d){var f=b&&d?wb[b]:null;if(f&&f&&(db||f.complete&&f.width>0))d(f);else{if(f=Qa[b])f.callbacks.push(d);else{f=new Image;f.id="_ldimg"+ ++Wb;Qa[b]={start:(new Date).getTime(),image:f,callbacks:[d]};f.src=b;Ua[Ua.length]=b}animFrame(l)}}function z(b,
d,f,e,a,c){this.x=b;this.y=d;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+d;this.loaded=false;this.image=null}function L(){for(var b=0,d=arguments.length;d--;){var f=Xb[arguments[d].toUpperCase()];if(f)b|=f}return b}function oa(b){b=b?b:(new Date).getTime();if(b-xb>Yb){for(var d=$a.splice(0),f=d.length;f--;)d[f](b);xb=b}$a.length&&animFrame(oa)}function n(b){var d=$a.length==0;$a[$a.length]=b;d&&animFrame(oa)}function E(b,d,f,e,a){a=COG.extend({easing:"sine.out",
duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),g=b[d],h=d=="translate",j=a.autoInvalidate,i=f.length&&e.length&&f.length==e.length?f.length:0,r=Array(i),G=Array(i),Z=COG.easing(a.easing),C=a.duration,D=a.progress,A=function(H){var K=H-c;H=c+C<=H;for(var ca=b.layer?b.layer.view:null,la,y=i;y--;){la=Z(K,f[y],r[y],C);G[y]=h?la|0:la}g.apply(b,G);j&&ca&&ca.invalidate();if(D){K=[].concat(H?e:G);K.unshift(H);D.apply(b,K)}if(H){b.animations--;g.apply(b,e);a.complete&&
a.complete.apply(b,e)}else n(A)};if(g&&g.apply&&i>0){C=C?C:DEFAULT_DURATION;for(d=i;d--;)r[d]=e[d]-f[d];b.animations++;n(A)}}function w(b){b=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},b);Fa.call(this,b)}function m(b,d){d=COG.extend({simplify:false,typeName:"Poly"},d);var f=d.simplify;Fa.call(this,d);COG.extend(this,{resync:function(e){var a,c,g,h,j,i;e.syncXY(b);i=this.points=Ra.floor(f?Ra.simplify(b):b);for(var r=i.length;r--;){e=i[r].x;a=i[r].y;
h=t(h,va)||e<h?e:h;j=t(j,va)||a<j?a:j;c=t(c,va)||e>c?e:c;g=t(g,va)||a>g?a:g}this.updateBounds(new k(h,j,c-h,g-j),true)}});this.haveData=b&&b.length>=2}function s(b,d){d.fill=false;m.call(this,b,d)}function v(b){function d(){if(h&&h.width>0){if(!this.centerOffset)this.centerOffset=new q(-h.width>>1,-h.height>>1);this.updateBounds(new k(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,h.width,h.height),false)}}function f(i){if(this.imageUrl=i){var r=this;p(this.imageUrl,function(G,Z){h=G;
if(Z){var C=j.layer?j.layer.view:null;C&&C.invalidate()}d.apply(r)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var e=null,a=Fa.prototype.resync,c=0,g=0,h=b.image;Fa.call(this,b);var j=COG.extend(this,{changeImage:f,drag:function(i,r,G,Z){e||(e=new q(i.startX-this.xy.x,i.startY-this.xy.y));this.xy.x=r-e.x;this.xy.y=G-e.y;if(Z){e=null;if(this.layer)if(i=this.layer.view){i.syncXY([this.xy],true);i.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||
d(this,h);return{image:h,x:this.xy.x+c,y:this.xy.y+g}},resync:function(i){a.call(this,i);d.call(this)}});h||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;g=this.centerOffset.y}}function V(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Ra.invert(b.imageAnchor);v.call(this,b)}function aa(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);Fa.call(this,b)}function ka(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:L("ACTIVE",
"ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;this.visible=true;COG.observable(COG.extend(this,b))}function da(b){for(var d=null,f=1;!d&&f<arguments.length;f++)d=sa(b,arguments[f]);d=d?d:sa(b);if(!d)throw Error("Unable to find GEO engine with "+b+" capability");return d}function W(b){b=parseFloat(b)*Ia;b=P(b);var d=eb*b;return ya((1+b)/(1-b)*Y((1-d)/(1+d),eb))/2}function ra(b){return ea/(256<<b)}function sa(b,d){var f=null;for(var e in Sa)if(d){if(e==d&&Sa[e][b]){f=
Sa[e];break}}else if(Sa[e][b]){f=Sa[e];break}return f}function wa(b,d){var f=eb*P(b);return N-2*Aa(d*Y((1-f)/(1+f),eb/2))}function Ea(b,d,f,e){d=ba(d);b.add(e(d,f));return d.length}function ba(b){var d=b?b.length:0,f=Array(d);for(d=d;d--;)f[d]=ha.init(b[d][1],b[d][0]);return ha.vectorize(f,yb)}COG.observable(F);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var ia=Array.prototype.indexOf||function(b){for(var d=0;d<this.length;d++)if(this[d]===b)return d;return-1},ea=Math.PI*2,N=Math.PI/2,O=Math.abs,ma=Math.ceil,x=Math.min,I=Math.max,Y=Math.pow,xa=Math.sqrt,ya=Math.log,J=Math.round,P=Math.sin,S=Math.asin,ua=Math.cos,Aa=Math.atan,Ga=Math.atan2,Za="hasOwnProperty",Tb={NaN:1,Infinity:1,"-Infinity":1},Sb=String.prototype.toLowerCase,Ub=Object.prototype.toString,va="undefined",zb="number",
Zb=typeof G_vmlCanvasManager!=va,db=typeof FlashCanvas!=va,$b=T5.newCanvas=function(b,d){var f=document.createElement("canvas");f.width=b?b:0;f.height=d?d:0;if(db){document.body.appendChild(f);FlashCanvas.initElement(f)}Zb&&G_vmlCanvasManager.initElement(f);return f},Ab=function(){var b={};return{init:function(d,f){var e=b[d];if(!e)throw Error("Unable to locate requested generator: "+d);return new e(f)},register:function(d,f){b[d]=f}}}();q.prototype={constructor:q};k.prototype={constructor:k};var Ra=
function(){function b(e,a){return f(e.x-a.x,e.y-a.y)}function d(e,a){a=a||e.length;if(a<=1)return null;for(var c=Array(a-1),g=Array(a-1),h=0,j,i=0;i<a-1;i++){j=b(e[i],e[i+1]);c[i]=xa(j.x*j.x+j.y*j.y);g[i]=h+=c[i]}return{edges:c,accrued:g,tota:h}}function f(e,a){return new q(e,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var e=0,a=0,c=arguments.length;c--;){e+=arguments[c].x;a+=arguments[c].y}return f(e,a)},absSize:function(e){return I(O(e.x),O(e.y))},copy:function(e){return e?
f(e.x,e.y):null},diff:b,distance:function(e,a){return d(e,a).total},edges:d,equals:function(e,a){return e.x===a.x&&e.y===a.y},extendBy:function(e,a,c){var g=ua(a)*c|0;a=P(a)*c|0;return f(e.x-g,e.y-a)},floor:function(e){for(var a=Array(e.length),c=e.length;c--;)a[c]=f(~~e[c].x,~~e[c].y);return a},getRect:function(e){for(var a,c,g,h,j=e.length;j--;){var i=e[j];a=t(a,va)||i.x<a?i.x:a;c=t(c,va)||i.y<c?i.y:c;g=t(g,va)||i.x>g?i.x:g;h=t(h,va)||i.y>h?i.y:h}return new k(a,c,g-a,h-c)},init:f,invert:function(e){return f(-e.x,
-e.y)},min:function(e,a){return f(e.x<a.x?e.x:a.x,e.y<a.y?e.y:a.y)},max:function(e,a){return f(e.x>a.x?e.x:a.x,e.y>a.y?e.y:a.y)},offset:function(e,a,c){return f(e.x+a,e.y+(c||a))},scale:function(e,a){return f(e.x/a|0,e.y/a|0)},simplify:function(e,a){if(!e)return null;a=a?a:Ra.VECTOR_SIMPLIFICATION;for(var c=[],g=null,h=e.length;h--;){var j=e[h];if(include=!g||h===0||O(j.x-g.x)+O(j.y-g.y)>a){c.unshift(j);g=j}}return c},theta:function(e,a,c){c=S((e.y-a.y)/c);return e.x>a.x?c:Math.PI-c},toString:function(e){return e?
e.x+", "+e.y:""}}}(),ib=function(){return{dotProduct:function(b,d){return b.x*d.x+b.y*d.y}}}(),Va=function(){function b(f){return d(f.x,f.y,f.x2,f.y2)}function d(f,e,a,c){return new k(f,e,(a||f)-f,(c||e)-e)}return{buffer:function(f,e,a){return Va.init(f.x-e,f.y-(a||e),f.x+e,f.y+(a||e))},center:function(f){return new q(f.x+(f.w>>1),f.y+(f.h>>1))},copy:b,diagonalSize:function(f){return xa(f.w*f.w+f.h*f.h)},fromCenter:function(f,e,a,c){a=a>>1;c=c>>1;return d(f-a,e-c,f+a,e+c)},init:d,intersect:function(f,
e){var a=I(f.x,e.x),c=I(f.y,e.y),g=x(f.x2,e.x2),h=x(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,e){if(f.w===0||f.h===0)return b(e);else if(e.w===0||e.h===0)return b(f);else{var a=x(f.x,e.x),c=x(f.y,e.y),g=I(f.x2,e.x2),h=I(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,d){var f=[],e={},a;for(a=d.length;a--;)e[d[a].target.id]=true;for(a=b.length;a--;)e[b[a].target.id]||
(f[f.length]=b[a]);return f},init:function(b,d,f,e){return{type:b,x:e.x|0,y:e.y|0,elements:[],absXY:d,relXY:f}},initHit:function(b,d,f){return{type:b,target:d,drag:f}},triggerEvent:function(b,d,f,e){d.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},e?e:b.elements,b.absXY,b.relXY,new q(b.x,b.y))}}}();var jb=function(b){function d(a,c){var g=f[a],h;g||(g=f[a]=[]);(h=g[c])||(h=g[c]=[]);return h}b=b||128;var f=[],e={};return{insert:function(a,c,g){var h=a.x/b|0,j=a.y/b|0,i=(a.x+a.w)/b|0;a=(a.y+a.h)/
b|0;g=g||c.id||COG.objId("spatial");e[g]=c;for(c=h;c<=i;c++)for(h=j;h<=a;h++)d(c,h).push(g)},remove:function(a,c,g){var h=a.x/b|0,j=a.y/b|0,i=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;delete e[g];for(c=h;c<=i;c++)for(h=j;h<=a;h++){var r=d(c,h),G=ia.call(r,g);G>=0&&r.splice(G,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,h=(a.y+a.h)/b|0,j=[],i=[];for(a=a.x/b|0;a<=g;a++)for(var r=c;r<=h;r++)j=j.concat(d(a,r));j.sort();for(c=j.length;c--;){g=j[c];if(h=e[g])i[i.length]=h;for(;c>0&&j[c-1]==g;)c--}return i}}},
Vb=3E4,wb={},Wb=0;(new Date).getTime();var Qa={},Ua=[];z.prototype={constructor:z,load:function(b){var d=this;p(this.url,function(f){d.loaded=true;d.image=f;b&&b()})}};var ac=function(){return{applyStyle:function(){},applyTransform:function(b,d,f){return{restore:null,x:d,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new q},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},
reset:function(){}}},Bb={},Wa=F.registerRenderer=function(b,d){Bb[b]=d},bc=F.attachRenderer=function(b,d,f,e){b=b.split("/");for(var a=new ac(d,f,e),c=0;c<b.length;c++){var g=Bb[b[c]];if(g)a=new g(d,f,e,a)}return a};Wa("canvas",function(b,d,f,e){function a(y,Q,T){var fa,U;Z[Q]=function(na){for(fa=ca.length;fa--;)if(U=T[ca[fa]])na[la[fa]]=U}}function c(y,Q,T,fa){var U=false;if(Q)U=i.isPointInPath(D?Q.x-r:Q.relXY.x,D?Q.y-G:Q.relXY.y);return{draw:fa||K,viewport:y,state:T,hit:U,vpX:r,vpY:G,context:i}}
f=COG.extend({},f);var g,h,j,i,r=0,G=0,Z={},C=null,D=CANI.canvas.pipTransformed,A={},H=function(){},K=function(){this.fill&&i.fill();this.stroke&&i.stroke()},ca=["fill","stroke","lineWidth","opacity"],la=["fillStyle","strokeStyle","lineWidth","globalAlpha"];(function(){if(d){var y=d.tagName=="CANVAS",Q=y?d.parentNode:d;g=b.width=Q.offsetWidth;h=b.height=Q.offsetHeight;if(y){j=d;j.width=g;j.height=h;db&&FlashCanvas.initElement(j)}else{j=$b(g,h);j.style.cssText="position: absolute; z-index: 1;";d.appendChild(j)}i=
null}})();f=COG.extend(e,{interactTarget:j,applyStyle:function(y){var Q=Z[y],T=i&&i.canvas?i.canvas.id:"default",fa;A[T]||(A[T]=[]);fa=A[T].pop()||"basic";if(Q){A[T].push(y);Q(i);return fa}},applyTransform:function(y){if(y.translateX!==0||y.translateY!==0||y.scaling!==1||y.rotation!==0){i.save();C={undo:function(){i.restore();C=null},x:y.xy.x,y:y.xy.y};i.translate(y.xy.x-r+y.translateX,y.xy.y-G+y.translateY);y.rotation!==0&&i.rotate(y.rotation);y.scaling!==1&&i.scale(y.scaling,y.scaling)}return C},
drawTiles:function(y,Q){for(var T,fa,U=r-256,na=G-256,M=y.x2,ja=y.y2,Ha=Q.length;Ha--;){T=Q[Ha];if(fa=T.x>=U&&T.x<=M&&T.y>=na&&T.y<=ja)T.loaded?i.drawImage(T.image,T.x-r,T.y-G):T.load(b.invalidate)}},hitTest:function(y,Q,T){return i.isPointInPath(Q,T)},prepare:function(y,Q){var T,fa=false,U=Q.scaled||Q,na=Q.scaleFactor;if(i)i.restore();else i=j.getContext("2d");for(T=y.length;T--;)fa=fa||y[T].clip;r=U.x;G=U.y;if(i){fa||i.clearRect(0,0,g,h);i.save();i.scale(na,na)}i.globalCompositeOperation="source-over";
return i},prepArc:function(y,Q,T,fa){i.beginPath();i.arc(y.xy.x-(C?C.x:r),y.xy.y-(C?C.y:G),y.size>>1,y.startAngle,y.endAngle,false);return c(Q,T,fa)},prepImage:function(y,Q,T,fa,U){var na=(U.x||y.xy.x)-(C?C.x:r),M=(U.y||y.xy.y)-(C?C.y:G),ja=U.image||y.image;if(ja){i.beginPath();i.rect(na,M,U.width||ja.width,U.height||ja.height);return c(Q,T,fa,function(){i.drawImage(ja,na,M,U.width||ja.width,U.height||ja.height)})}},prepMarker:function(y,Q,T,fa){var U=y.xy.x-(C?C.x:r),na=y.xy.y-(C?C.y:G),M=y.size,
ja=undefined;i.beginPath();switch(y.markerStyle.toLowerCase()){case "image":ja=H;i.rect(U-(M>>1),na-(M>>1),M,M);y.image?i.drawImage(y.image,U-(M>>1),na-(M>>1),M,M):p(y.imageUrl,function(Ha){y.image=Ha;i.drawImage(y.image,U-(M>>1),na-(M>>1),M,M)});break;default:i.moveTo(U,na);i.lineTo(U-(M>>1),na-M);i.lineTo(U+(M>>1),na-M);i.lineTo(U,na);break}return c(Q,T,fa,ja)},prepPoly:function(y,Q,T,fa,U){var na=true;y=U.points||y.points;U=C?C.x:r;var M=C?C.y:G;i.beginPath();for(var ja=y.length;ja--;){var Ha=
y[ja].x-U,Ba=y[ja].y-M;if(na){i.moveTo(Ha,Ba);na=false}else i.lineTo(Ha,Ba)}return c(Q,T,fa)},getContext:function(){return i},getDimensions:function(){return{width:g,height:h}},getOffset:function(){return new q(r,G)}});(function(){for(var y in T5.styles)a(null,y,T5.styles[y]);T5.bind("styleDefined",a)})();return f});var kb=F.styles={},cc=F.defineStyle=function(b,d){kb[b]=d;F.trigger("styleDefined",b,kb[b]);return b},Cb=F.defineStyles=function(b){for(var d in b)cc(d,b[d])};F.getStyle=function(b){return kb[b]};
F.loadStyles=function(b){COG.jsonp(b,function(d){Cb(d)})};Cb({basic:{fill:"#000000"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Xb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Lb=function(b){function d(o,u,B){Ba||U(pa-u,qa-B)}function f(o,u,B,R){Q(x(I(ta+Y(2,R)-1,0.5),2))}function e(){var o=ya(ta)/Math.LN2|0;if(o!==0){ta=Y(2,o);T(ab+o,dc,ec)}redraw=true}function a(o,u){var B=renderer&&
renderer.projectXY?renderer.projectXY(o,u):null;if(!B){B=$.getViewport();var R=1/ta;B=new q(B?B.x+o*R:o,B?B.y+u*R:u)}return B}function c(o,u,B){fa("doubleTap",u,B,a(B.x,B.y));b.scalable&&Q(2,a(B.x,B.y),b.zoomEasing,null,b.zoomDuration)}function g(o,u,B){Ba=null;K("down",u,B)}function h(o,u,B){K("hover",u,B)}function j(o,u,B){A(u,B,false)}function i(o,u,B){A(u,B,true)}function r(){clearTimeout(Db);Db=setTimeout(function(){renderer.checkSize()},250)}function G(o,u,B){K("tap",u,B);fa("tap",u,B,a(B.x,
B.y,true))}function Z(){renderer=bc(b.renderer,$,Ha);Eb=!renderer.preventPartialScale;D()}function C(o,u){u.id=o;u.added=X();u.view=$;u.trigger("parentChange",$,Ha,fc);M.push(u);M.sort(function(B,R){var ga=R.zindex-B.zindex;if(ga===0)ga=R.added-B.added;return ga});ja=M.length;return u}function D(){Ca&&Ca.unbind();if(renderer){Ca=INTERACT.watch(renderer.interactTarget);b.pannable&&Ca.pannable().bind("pan",d);if(b.scalable){Ca.bind("zoom",f);Ca.bind("doubleTap",c)}Ca.bind("pointerDown",g);Ca.bind("pointerMove",
j);Ca.bind("pointerUp",i);b.captureHover&&Ca.bind("pointerHover",h);Ca.bind("tap",G)}}function A(o,u,B){if(Ba){o=a(u.x,u.y);if(Ba.drag.call(Ba.target,Ba,o.x,o.y,B))redraw=true;if(B)Ba=null}}function H(o){var u,B,R=false;o=o||(new Date).getTime();if(R=o-Fb>gc){var ga=O(pa-lb),za=O(qa-mb);u=pa!==nb||qa!==ob;B=ta!==Gb;if(u||B)Na++;if(ga>=Hb||za>=Hb)y();B={index:hc++,draw:Na};$.trigger("enterFrame",o,B);Fb=o}if(R&&B.draw){Oa=Ib|(ta!==1?Jb:0)|(u?pb:0)|(qb?Kb:0);rb=(u=(Oa&(Jb|pb))!==0)&&(Oa&Kb)===0;u=la();
if(renderer.prepare(M,u,Oa,o,Da)){Na=0;for(ii=ja;ii--;){R=M[ii];if(R.visible&&(Oa&R.validStates)!==0){B=R.style?renderer.applyStyle(R.style,true):null;R.draw(renderer,u,Oa,$,o,Da);B&&renderer.applyStyle(B)}}renderer.render(u);$.trigger("drawComplete",u,o);nb=pa;ob=qa;Gb=ta}if(Da){o=Da?Da.elements:[];if(bb&&bb.type==="hover"){u=Hits.diffHits(bb.elements,o);u.length>0&&Hits.triggerEvent(bb,$,"Out",u)}if(o.length>0){R=Da.x;B=Da.y;for(u=o.length;u--;){ga=o[u];za=R;var Ka=B,Ja=ga&&ga.drag&&(!ga.canDrag||
ga.canDrag(ga,za,Ka));if(Ja){Ba=ga;Ba.startX=za;Ba.startY=Ka}if(Ja)break}Hits.triggerEvent(Da,$)}bb=o.length>0?COG.extend({},Da):null;Da=null}}animFrame(H)}function K(o,u,B){Da=Hits.init(o,u,B,a(B.x,B.y,true));for(o=ja;o--;)sb=sb||(M[o].hitGuess?M[o].hitGuess(Da.x,Da.y,Oa,$):false);sb&&Na++}function ca(){Na++}function la(){var o=new k(pa,qa,$.width,$.height);o.scaleFactor=ta;if(ta!==1)o.scaled=Va.fromCenter(pa+($.width>>1),qa+($.height>>1),$.width/ta|0,$.height/ta|0);return o}function y(){var o=la();
if(o){if(Xa||Ya)if(o){var u=fb?pa+(o.w>>1):pa,B=gb?qa+(o.h>>1):qa,R=o.w,ga=o.h;if(Xa&&Xa>R)if(u+R>Xa)pa=fb?pa:Xa-R;else if(u<0)pa=fb?pa:0;if(Ya&&Ya>ga)if(B+ga>Ya)qa=gb?qa:Ya-ga;else if(B<0)qa=gb?qa:0}lb=pa;mb=qa;fa("refresh",$,o);Na++}}function Q(o,u,B,R,ga){var za;if(!Eb){B=false;za=J(ya(o)/Math.LN2);o=Y(2,za)}if(B)COG.tweenValue(ta,o,B,ga,function(Ka,Ja){ta=Ka;if(Ja){za=J(ya(ta)/Math.LN2);ta=Y(2,za);R&&R()}e()});else{ta=o;e()}return $}function T(o,u,B){o=I(b.minZoom,x(b.maxZoom,o));if(o!==ab){var R=
Y(2,o-ab),ga=$.width>>1,za=$.height>>1,Ka=ga/R|0,Ja=za/R|0;ab=o;U(((u?u:pa+ga)-Ka)*R,((B?B:qa+za)-Ja)*R);nb=pa;ob=qa;mb=lb=0;fa("zoomLevelChange",o);ta=1;renderer.reset();y()}}function fa(){for(var o=$.trigger.apply(null,arguments).cancel,u=M.length;u--;)o=M[u].trigger.apply(null,arguments).cancel||o;return!o}function U(o,u,B,R,ga){function za(){Ka+=1;if(Ka>=2){qb=false;ga&&ga()}}var Ka=0;if(B){if((Oa&pb)===0){COG.tweenValue(pa,o,B,R,function(Ja,tb){pa=Ja|0;(tb?za:ca)();return!rb});COG.tweenValue(qa,
u,B,R,function(Ja,tb){qa=Ja|0;(tb?za:ca)();return!rb});qb=true}}else{pa=o|0;qa=u|0;ga&&ga()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},
b);var na={},M=[],ja=0,Ha=document.getElementById(b.container),Ba=null,hc=0,fc=null,ic=!t(window.attachEvent,va),sb=false,Hb=b.refreshDistance,pa=0,qa=0,lb=0,mb=0,nb=0,ob=0,Xa=null,Ya=null,fb=false,gb=false,Da=null,rb=false,bb=null,Db=0,ta=1,Gb=1,Fb=0,Ca=null,Eb=true,qb=false,gc=1E3/b.fps|0,Na=0,dc,ec,ab=b.zoomLevel,Ib=L("ACTIVE"),pb=L("PAN"),Jb=L("ZOOM"),Kb=L("ANIMATING"),Oa=Ib,$={id:b.id,detach:function(){Ca&&Ca.unbind()},eachLayer:function(o){for(var u=ja;u--;)o(M[u])},getLayer:function(o){for(var u=
0;u<ja;u++)if(M[u].id===o)return M[u];return null},getZoomLevel:function(){return ab},setLayer:function(o,u){for(var B=0;B<ja;B++)if(M[B].id===o){M.splice(B,1);break}if(u){C(o,u);u.trigger("refresh",$,la());$.trigger("layerChange",$,u)}Na++;return u},invalidate:ca,refresh:y,resetScale:function(){ta=1},scale:Q,setZoomLevel:T,syncXY:function(){},triggerAll:fa,removeLayer:function(o){a:{for(var u=ja;u--;)if(M[u].id===o){o=u;break a}o=-1}if(o>=0&&o<ja){$.trigger("layerRemove",$,M[o]);M.splice(o,1);Na++}ja=
M.length},getOffset:function(){return new q(pa,qa)},getRenderer:function(){return renderer},getScaleFactor:function(){return ta},setMaxOffset:function(o,u,B,R){Xa=o;Ya=u;fb=B;gb=R},getViewport:la,updateOffset:U,pan:function(o,u,B,R,ga){U(pa+o,qa+u,B,R,ga)}};COG.observable($);$.bind("resync",function(){});COG.configurable($,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(b,null,{container:function(o,u){Ha=document.getElementById(u);
Z()},inertia:D,captureHover:D,scalable:D,pannable:D}),true);CANI.init(function(o){$.markers=C("markers",new hb({zindex:20}));na=o;Z();ic?window.attachEvent("onresize",r):window.addEventListener("resize",r,false)});animFrame(H);return $},Fa=function(b){b=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=
1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Fa.prototype={constructor:Fa,animate:function(b,d,f,e){E(this,b,d,f,e)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds(Va.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=b},translate:function(b,d){this.translateX=b;this.translateY=d},updateBounds:function(b,d){b&&(!this.bounds||b.x!=this.bounds.x||
b.y!=this.bounds.y)&&this.trigger("move",this,b,this.bounds);this.bounds=b;if(d)this.xy=Va.center(this.bounds)}};var Yb=1E3/60|0,$a=[],xb=0;w.prototype=COG.extend(Fa.prototype,{constructor:w});m.prototype=COG.extend({},Fa.prototype,{constructor:m});s.prototype=COG.extend({},m.prototype);v.prototype=COG.extend({},Fa.prototype,{constructor:v});V.prototype=COG.extend({},v.prototype,{constructor:V});aa.prototype=COG.extend(Fa.prototype,{constructor:aa});ka.prototype={constructor:ka,clip:null,cycle:function(){},
draw:function(){},hitGuess:null};Wa=function(b,d){function f(i,r){if(a&&h){g=a.search(h);h=null}var G=r&&r.getZoomLevel?r.getZoomLevel():0;c[G]||(c[G]=new jb);a=c[G]}d=COG.extend({imageLoadArgs:{}},d);var e=b?Ab.init(b,d).run:null,a=null,c=[],g=[],h=null,j=COG.extend(new ka(d),{draw:function(i,r){i.drawTiles(r,a.search(r))}});j.bind("refresh",function(i,r,G){var Z=(new Date).getTime();if(a){g=h?a.search(h):[];e(r,G,a,function(){r.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-Z)+
" ms")});h=Va.copy(G)}});j.bind("parentChange",f);j.bind("resync",f);return j};var Mb=function(b){function d(j){clearTimeout(g);g=setTimeout(function(){a.sort(function(i,r){if(r.xy&&i.xy){var G=r.xy.y-i.xy.y;return G!=0?G:r.xy.x-i.xy.x}});j&&j.invalidate()},50)}function f(j,i,r,G){G&&c.remove(G,i);c.insert(r,i)}function e(j,i){for(var r=a.length;r--;)a[r].resync(i)}b=COG.extend({zindex:10},b);var a=[],c=new jb,g=0,h=COG.extend(new ka(b),{itemCount:0,add:function(j,i){if(j){j.layer=h;if(i)a.unshift(j);
else a[a.length]=j;var r=h.view;if(r){j.resync(r);c&&j.bounds&&c.insert(j.bounds,j);d(r)}j.bind("move",f)}h.itemCount=a.length},clear:function(){c=new jb;a=[];h.itemCount=0},draw:function(j,i,r,G,Z,C){G={};Z=c&&i?c.search(i):[];for(var D=Z.length;D--;){var A=Z[D],H=A.style||h.style,K,ca=j.applyTransform(A),la=A.getProps?A.getProps(j,r):G;if(la=(K=j["prep"+A.typeName])?K.call(j,A,i,C,r,la):null){if(la.hit){C.elements.push(Hits.initHit(A.type,A,A.draggable?A.drag:null));K=C.type+"Style";H=A[K]||h[K]||
H}H=H?j.applyStyle(H,true):null;(K=A.draw||la.draw)&&K.call(A,la);H&&j.applyStyle(H)}ca&&ca.undo&&ca.undo()}},find:function(){return[].concat(a)},hitGuess:function(j,i){return c&&c.search({x:j-10,y:i-10,w:20,h:20}).length>0}});h.bind("parentChange",e);h.bind("resync",e);return h},hb=function(b){return new Mb(b)};COG.extend(F,{ex:COG.extend,is:t,ticks:X,userMessage:function(b,d,f){F.trigger("userMessage",b,d,f)},indexOf:ia,Rect:k,XY:Ra,XYRect:Va,Vector:ib,Hits:Hits,Generator:Ab,tweenValue:COG.tweenValue,
easing:COG.easing,Tile:z,TileLayer:Wa,getImage:p,viewState:L,View:Lb,ViewLayer:ka,ImageLayer:Wa,Drawable:Fa,Marker:w,Poly:m,Line:s,Arc:aa,ImageDrawable:v,ImageMarker:V,DrawLayer:Mb,ShapeLayer:hb});var ub=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ia=Math.PI/180,Pa=180/Math.PI,vb=N,Nb=-vb,Ob=ea,jc=-Ob,eb=0.08181919084262157,cb=null,Pb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ha=function(){function b(a){return a?
f(a.lat,a.lon):null}function d(a){return!a||a.lat===0&&a.lon===0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function e(a){if(a)if(t(a.lat,zb))return b(a);else{if(a.split)for(var c=[" ",","],g=0;g<c.length;g++){var h=a.split(c[g]);if(h.length===2)return f(h[0],h[1])}}else return f();return null}return{calcDistance:function(a,c){if(d(a)||d(c))return 0;var g=(c.lat-a.lat)*Ia>>1,h=(c.lon-a.lon)*Ia>>1;g=P(g)*P(g)+ua(a.lat*Ia)*ua(c.lat*Ia)*P(h)*P(h);return 6371*2*Ga(xa(g),xa(1-
g))},copy:b,empty:d,equal:function(a,c){return a&&c&&a.lat==c.lat&&a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=Y(Math.E,-c),h=N-2*Aa(g),j=wa(h,g),i=0;i<12&&O(h-j)>1.0E-7;){h=j;j=wa(h,g);i++}return f(j*Pa,a%360*Pa)},generalize:function(a,c,g){var h=a.length,j=[],i=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+c.length+" positions");for(var r=h;r--;)if(r===0)j.unshift(a[r]);else{var G=!i||ha.inArray(a[r],c)?g:ha.calcDistance(i,a[r]);if(a[r]&&G>=g){j.unshift(a[r]);
i=a[r]}}COG.info("generalized "+h+" positions into "+j.length+" positions");return j},inArray:function(a,c){for(var g=ha.equal,h=c.length;h--;)if(g(a,c[h]))return true;return false},inBounds:function(a,c){var g=!(ha.empty(a)||ha.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,c,g){var h=a.lat*Ia;a=a.lon*Ia;c=h+c/6371;g=S(P(g/6371)/ua(h));g=a+g;c=(c+N)%Math.PI-N;g%=ea;return f(c*Pa,g*Pa)},parse:e,parseArray:function(a){var c=
a.length,g=Array(c);for(c=c;c--;)g[c]=e(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*Ia,W(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var r=0,G=c.chunkSize,Z=h;Z--;){j[Z]=T5.GeoXY.init(a[Z]);r+=1;if(r>G)break}h=Z;if(h<=0)c.callback&&c.callback(j);else animFrame(g)}var h=a.length,j=Array(h);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var i=h;i--;)j[i]=T5.GeoXY.init(a[i]);return j}animFrame(g);
return null}}}(),La=function(){function b(a,c,g){var h=new q(0,c.lat-a.lat);h.x=(g||t(g,va))&&a.lon>c.lon?360-a.lon+c.lon:c.lon-a.lon;return h}function d(a,c){return La.init(ha.init(a.min.lat-c,a.min.lon-c%360),ha.init(a.max.lat+c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ha.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function e(a,c){return{min:ha.parse(a),max:ha.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,h=a.lat*Ia,j=a.lon*Ia,i=h-g,r=h+g;if(i>
Nb&&r<vb){h=S(P(g)/ua(h));g=(j-h)%ea;j=(j+h)%ea}else{i=I(i,Nb);r=x(r,vb);g=jc;j=Ob}return La.init(ha.init(i*Pa,g*Pa),ha.init(r*Pa,j*Pa))},expand:d,forPositions:function(a,c){var g=null,h=T5.ticks();c||(c="auto");for(var j=a.length;j--;)if(g){var i=b(g.min,a[j],false),r=b(a[j],g.max,false);if(i.x<0)g.min.lon=a[j].lon;if(i.y<0)g.min.lat=a[j].lat;if(r.x<0)g.max.lon=a[j].lon;if(r.y<0)g.max.lat=a[j].lat}else g=e(a[j],a[j]);if(c){if(c=="auto"){j=b(g.min,g.max);c=I(j.x,j.y)*0.3}g=d(g,c)}COG.trace("calculated bounds for "+
a.length+" positions",h);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,c){var g=f(a);g=x(J(O(g.lat)*0.05),ub.length);var h=ub[g],j=b(a.min,a.max);g=ma(ya(ub[3]*c.h/j.y)/ya(2));h=ma(ya(h*c.w/j.x)/ya(2));return x(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:e,isEmpty:function(a){return!a||ha.empty(a.min)||ha.empty(a.max)},toString:function(a){return"min: "+
ha.toString(a.min)+", max: "+ha.toString(a.max)}}}();ib=function(){var b=/^(\d+).*$/,d=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(f,e){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=e.split(","),g=0;g<c.length;g++){d.lastIndex=-1;if(d.test(c[g])){var h=d.exec(c[g]);if(a>=parseInt(h[1],10)&&a<=parseInt(h[2],10))return true}else if(a==c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!cb){var e=[];for(var a in Pb)e.push(a);cb=RegExp("(\\s)("+
e.join("|")+")(\\s|$)","i")}cb.lastIndex=-1;if(e=cb.exec(f))f=f.replace(cb,"$1"+Pb[e[2]]);return f},toString:function(f){return f.streetDetails+" "+f.location}}}();var Ma=F.GeoXY=function(){function b(e,a){if(e.length){for(var c,g,h,j,i=e.length;i--;){b(e[i],a);c=t(c,va)||e.x<c?e.x:c;g=t(g,va)||e.y<g?e.y:g;h=t(h,va)||e.x>h?e.x:h;j=t(j,va)||e.y>j?e.y:j}return new k(c,g,h-c,j-g)}else if(e.mercXY){c=e.mercXY;e.x=(c.x+Math.PI)/a|0;e.y=(Math.PI-c.y)/a|0;e.rpp=a}return e}function d(e,a){if(e.length)for(var c=
e.length;c--;)d(e[c],a);else{e.mercXY=new q(e.x*a-Math.PI,Math.PI-e.y*a);e.pos=ha.fromMercatorPixels(e.mercXY.x,e.mercXY.y)}return e}function f(e,a,c){e.pos=a;e.mercXY=ha.toMercatorPixels(a);(c=t(c,zb)?c:e.rpp)&&b(e,c)}return{init:function(e,a){var c=new q;f(c,e,a);return c},sync:b,syncPos:d,toPos:function(e,a){a=a||e.rpp;return ha.fromMercatorPixels(e.x*a-Math.PI,Math.PI-e.y*a)},updatePos:f}}(),Sa={};Wa=function(){return{bestResults:function(b,d){d||(d=20);for(var f=b.length>0?b[0]:null,e=[],a=0;a<
b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=d)e.push(b[a]);else break;return e}}}();var Qb=function(b){b=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})},kc=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&ha.vectorize(c.geometry,{callback:function(h){g.add(new T5.Line(h,{style:"waypoints",simplify:true}));a.setLayer("route",g)}})}function d(a){for(var c=
f.Unknown,g=e,h=0;h<g.length;h++){g[h].regex.lastIndex=-1;var j=g[h].regex.exec(a);if(j){c=g[h].customCheck?g[h].customCheck(a,j):g[h].turnType;break}}return c}var f={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",
EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},e=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});a.push({regex:/take.*?ramp/i,turnType:f.Ramp});
a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=da("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=
ha.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:d,TurnType:f,Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=d(a.description);return a},RouteData:function(a){a=COG.extend({geometry:[],
instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=La.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&c.push(a.instructions[g].position);return c}},a)}}}(),lc="featurecollection",mc="feature",yb={async:false},Ta={processor:null,group:"shapes",layerClass:hb},nc={point:COG.extend({},Ta,{processor:function(b,d,f,e){d=ba([d.coordinates],yb);if(d.length>0)if(f=e.marker(d[0],f)){b.add(f);
return d.length}},group:"markers",layerClass:hb}),linestring:COG.extend({},Ta,{processor:function(b,d,f,e){d=ba(d&&d.coordinates?d.coordinates:[]);return Ea(b,d,f,e.line)}}),multilinestring:COG.extend({},Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=d.length;c--;)a+=Ea(b,d[c],f,e.line);return a}}),polygon:COG.extend({},Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];if(d.length>0)return Ea(b,d[0],f,e.poly);return 0}}),multipolygon:COG.extend({},
Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=0;c<d.length;c++)a+=Ea(b,d[c][0],f,e.poly);return a}})},Rb=function(b,d,f,e){function a(A,H){var K=A.processor,ca=i+A.group,la=COG.extend({},A,f,{properties:H.properties});if(K){var y=D[ca];if(!y){y=new A.layerClass({id:ca});D[ca]=y}return K(y,H.data,la,e)}return 0}function c(A,H){var K=A&&A.type?A.type.toLowerCase():null;return K&&K===mc?c(A.geometry,A.properties):{type:K,isCollection:K?K===lc:false,definition:nc[K],
data:A,properties:H?H:A.properties}}function g(A){var H=0,K=COG.extend({},f),ca=r;A=A?A:(new Date).getTime();if(!Z){for(;ca<G;ca++){A=c(j?j(b[ca]):b[ca]);var la=null;if(A.isCollection){K.layerPrefix=i+C++ +"-";Z=new Rb(A.data.features,function(y){Z=null;for(var Q in y)D[Q]=y[Q];r>=G&&d&&d(D)},K);la+=1}else if(A.definition)la=a(A.definition,A);H+=la?la:1;if(H>=h)break}r=ca+1;if(Z||r<G)animFrame(g);else d&&d(D)}}f=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},f);e=COG.extend({marker:function(A){return new w({xy:A})},
line:function(A,H){return new m(A,COG.extend({},f,H))},poly:function(A,H){return new m(A,COG.extend({fill:true},f,H))}},e);var h=500,j=f.rowPreParse,i=f.layerPrefix,r=0,G=0,Z=null,C=0,D={};if(b){t(b,"array")||(b=[b]);G=b.length;animFrame(g)}};Ta=F.GeoJSON={parse:function(b,d,f){return new Rb(b,d,f)}};F.Map=function(b){function d(D){try{var A=ha.init(D.coords.latitude,D.coords.longitude),H=D.coords.accuracy/1E3;C.trigger("locationUpdate",D,H);if(r){if(!j){j=new UI.LocationOverlay({pos:A,accuracy:H});
j.update(C.getTileLayer());C.setLayer("location",j)}var K=La.createBoundsFromCenter(A,Math.max(H,1));C.gotoBounds(K)}else{j.pos=A;j.accuracy=H;j.update(C.getTileLayer());a(A,null,COG.easing("sine.out"))}r=false}catch(ca){COG.exception(ca)}}function f(D){COG.info("caught location tracking error:",D)}function e(D,A,H){C.setZoomLevel(A);a(D,H)}function a(D,A,H,K){D=Ma.init(D,ra(C.getZoomLevel()));C.updateOffset(D.x-(C.width>>1),D.y-(C.height>>1),H,K,function(){A&&A(C)})}b=COG.extend({tapExtent:10,crosshair:false,
zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2},g=new q,h=c.NONE,j=null,i=0,r=true,G=0,Z=b.tapExtent;b.adjustScaleFactor=function(D){return Math.pow(2,(D<1?Math.floor:Math.ceil)(Math.log(D)))};var C=COG.extend(new Lb(b),{getBoundingBox:function(){var D=C.getViewport();return D?La.init(Ma.toPos(new q(D.x,D.y2),G),Ma.toPos(new q(D.x2,D.y),G)):null},getCenterPosition:function(){var D=C.getViewport();if(D){D=new q(D.x+(D.w>>1),D.y+(D.h>>1));return Ma.toPos(D,
G)}return null},gotoBounds:function(D,A){var H=La.getZoomLevel(D,C.getViewport());e(La.getCenter(D),H,A)},gotoPosition:e,panToPosition:a,syncXY:function(D,A){return(A?Ma.syncPos:Ma.sync)(D,G)},locate:function(){C.trackStart(c.SINGLE);setTimeout(C.trackCancel,1E4)},trackStart:function(D){if(navigator.geolocation&&!i){h=D?D:c.WATCH;r=true;i=navigator.geolocation.watchPosition(d,f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},trackCancel:function(){i&&navigator.geolocation&&navigator.geolocation.clearWatch(i);
C.removeLayer("location");j=null;h=c.NONE;i=0},animateRoute:function(D,A,H,K){var ca=C.getLayer("route");if(ca)(D=ca.getAnimation(D,A,H,K))&&D.addToView(C)}});C.bind("pan",function(){h===c.SINGLE&&C.trackCancel()});C.bind("tap",function(D,A,H,K){D=Ma.toPos(K,G);var ca=Ma.toPos(Ra.offset(K,-Z,Z),G);K=Ma.toPos(Ra.offset(K,Z,-Z),G);C.trigger("geotap",A,H,D,La.init(ca,K))});C.bind("refresh",function(D,A,H){if(g.x!=H.x||g.y!=H.y){C.trigger("boundsChange",C.getBoundingBox());g.x=H.x;g.y=H.y}});C.bind("zoomLevelChange",
function(D,A){var H;G=ra(A);H=ea/G|0;C.setMaxOffset(H,H,true,false);C.resetScale();C.triggerAll("resync",C)});return C};F.GeoShape=function(b,d){d=COG.extend({autoParse:true},d);for(var f=Array(b.length),e=d.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(e?a(b[c]):b[c]);return new T5.Poly(f,d)};F.LocationOverlay=function(b){b=COG.extend({pos:null,accuracy:null,zindex:90},b);var d=new Image,f=T5.XY.init(),e=T5.XY.init(),a=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
d.onload=function(){f=T5.XY.init(d.width>>1,d.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,h){var j=e.x-h.x,i=e.y-h.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(j,i,a,0,Math.PI*2,false);g.fill()}d.complete&&d.width>0&&g.drawImage(d,j-f.x,i-f.y,d.width,d.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;e=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,h){c.update(h)});
return c};F.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:da,radsPerPixel:ra,Position:ha,BoundingBox:La,Radius:function(b,d){return{distance:parseInt(b,10),uom:d}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:ib,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var d=COG.extend({remove:function(){delete Sa[d.id]}},b);return Sa[d.id]=d},Search:Wa,GeoSearchResult:Qb,LocationSearch:function(b){function d(g,h){navigator.geolocation.clearWatch(e);e=0;if(a){clearTimeout(a);a=0}h&&h([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var e=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,h){if(navigator.geolocation&&!e){e=navigator.geolocation.watchPosition(function(j){var i=
ha.init(j.coords.latitude,j.coords.longitude);j=new Qb({id:1,caption:"Current Location",pos:i,accuracy:j.coords.accuracy/1E3,matchWeight:100});if(!c||j.accuracy<c.accuracy)c=j;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)d(c,h)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&d(c,h)},b.searchTimeout)}}},b))},Routing:kc,GeoJSON:Ta}})(T5);
