COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var C=arguments[0]||{},T,t=1,r=arguments.length;t<r;t++)if((T=arguments[t])!==null)for(var l in T){var m=T[l];if(C!==m)if(m!==undefined)C[l]=m}return C};
(function(){var C=Object.prototype.hasOwnProperty,T=0,t={};t.toID=function(r){return r.replace(/\s/g,"-")};t.objId=function(r){return(r?r:"obj")+T++};t.isFunction=function(r){return toString.call(r)==="[object Function]"};t.isArray=function(r){return toString.call(r)==="[object Array]"};t.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!C.call(r,"constructor")&&!C.call(r.constructor.prototype,"isPrototypeOf"))return false;
var l;for(l in r);return l===undefined||C.call(r,l)};t.isEmptyObject=function(r){for(var l in r)return false;return true};t.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};t.contains=function(r,l){var m=r,s=arguments,w=1;if(l&&module.isArray(l)){s=l;w=0}for(w=w;w<s;w++)m=m&&typeof foo[s[w]]!=="undefined";return m};t.formatStr=function(r){if(arguments.length<=1)return r;for(var l=arguments.length-2,m=0;m<=l;m++)r=r.replace(RegExp("\\{"+m+"\\}","gi"),arguments[m+1]);return r};
t.wordExists=function(r,l){var m="";if(l.toString)l=l.toString();for(var s=0;s<l.length;s++)m+=!/\w/.test(l[s])?"\\"+l[s]:l[s];return RegExp("(^|\\s|\\,)"+m+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,t)})();
(function(){function C(m){return typeof console!=="undefined"?function(){console[m](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var T=window.console&&window.console.markTimeline,t=C("error"),r=C("info"),l=function(){return T?function(m,s){console.markTimeline(m+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:l,debug:C("debug"),info:r,warn:C("warn"),error:t,exception:function(m){if(t)for(var s in m)r("ERROR DETAIL: "+s+
": "+m[s])}})})();
(function(){function C(t,r){var l=t.hasOwnProperty("obsHandlers")?t.obsHandlers:null;l[r]||(l[r]=[]);return l[r]}var T=0;COG.observable=function(t){if(!t)return null;if(!(t.hasOwnProperty("obsHandlers")?t.obsHandlers:null))t.obsHandlers={};if(!t.hasOwnProperty("bind")){t.bind=function(r,l){var m="callback"+T++;C(t,r).unshift({fn:l,id:m});return m};t.triggerCustom=function(r,l){var m=C(t,r),s={cancel:false,name:r,source:this},w;l&&COG.extend(s,l);if(!m)return null;w=Array.prototype.slice.call(arguments,2);
t.eventInterceptor&&t.eventInterceptor(r,s,w);w.unshift(s);for(var P=m.length;P--&&!s.cancel;)m[P].fn.apply(this,w);return s};t.trigger=function(r){var l=Array.prototype.slice.call(arguments,1);l.splice(0,0,r,null);return t.triggerCustom.apply(this,l)};t.unbind=function(r,l){if(typeof r==="undefined")t.obsHandlers={};else for(var m=C(t,r),s=0;m&&s<m.length;s++)if(m[s].id===l){m.splice(s,1);break}return t}}return t}})();
(function(){function C(l,m){l[m]||(l[m]=function(s){return l.configure(m,s)})}function T(l){l.gtConfId="configurable"+r++;l.gtConfig={};l.gtConfigFns=[];return l.gtConfig}var t={},r=0;COG.paramTweaker=function(l,m,s){return function(w,P){if(typeof P!=="undefined"){if(w in l)l[w]=P;s&&w in s&&s[w](w,P)}else return m&&w in m?m[w](w):l[w]}};COG.configurable=function(l,m,s,w){if(l){l.gtConfId||T(l);var P=l.gtConfId,ia=l.gtConfig,p=l.gtConfigFns;t[P]=l;p.push(s);for(s=m.length;s--;){ia[m[s]]=true;w&&C(l,
m[s])}if(!l.configure)l.configure=function(A,i){if(ia[A]){for(var o=p.length;o--;){var u=p[o](A,i);if(typeof u!=="undefined")return u}return t[P]}return null}}}})();
(function(){function C(l){var m=document.createElement("script"),s=false;m.src=l;m.async=true;m.onload=m.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;m.onload=m.onreadystatechange=null;m&&m.parentNode&&m.parentNode.removeChild(m)}};t||(t=document.getElementsByTagName("head")[0]);t.appendChild(m)}var T=0,t,r=this;COG.jsonp=function(l,m,s){l+=l.indexOf("?")>=0?"&":"?";var w="json"+ ++T;r[w]=function(P){m(P);r[w]=null;try{delete r[w]}catch(ia){}};
C(l+(s?s:"callback")+"="+w);return w}})();
(function(){var C=1.70158,T=Math.PI/2,t=Math.PI*2,r=1E3/60|0,l=Math.abs,m=Math.pow,s=Math.sin,w=Math.asin,P=Math.cos,ia={linear:function(p,A,i,o){return i*p/o+A},backin:function(p,A,i,o){return i*(p/=o)*p*((C+1)*p-C)+A},backout:function(p,A,i,o){return i*((p=p/o-1)*p*((C+1)*p+C)+1)+A},backinout:function(p,A,i,o){return(p/=o/2)<1?i/2*p*p*(((C*=1.525)+1)*p-C)+A:i/2*((p-=2)*p*(((C*=1.525)+1)*p+C)+2)+A},bouncein:function(p,A,i,o){return i-ia.bounceout(o-p,0,i,o)+A},bounceout:function(p,A,i,o){return(p/=
o)<1/2.75?i*7.5625*p*p+A:p<2/2.75?i*(7.5625*(p-=1.5/2.75)*p+0.75)+A:p<2.5/2.75?i*(7.5625*(p-=2.25/2.75)*p+0.9375)+A:i*(7.5625*(p-=2.625/2.75)*p+0.984375)+A},bounceinout:function(p,A,i,o){return p<o/2?ia.bouncein(p*2,0,i,o)/2+A:ia.bounceout(p*2-o,0,i,o)/2+i/2+A},cubicin:function(p,A,i,o){return i*(p/=o)*p*p+A},cubicout:function(p,A,i,o){return i*((p=p/o-1)*p*p+1)+A},cubicinout:function(p,A,i,o){if((p/=o/2)<1)return i/2*p*p*p+A;return i/2*((p-=2)*p*p+2)+A},elasticin:function(p,A,i,o,u,F){if(p==0)return A;
if((p/=o)==1)return A+i;F||(F=o*0.3);if(!u||u<l(i)){u=i;i=F/4}else i=F/t*w(i/u);return-(u*m(2,10*(p-=1))*s((p*o-i)*t/F))+A},elasticout:function(p,A,i,o,u,F){var Q;if(p==0)return A;if((p/=o)==1)return A+i;F||(F=o*0.3);if(!u||u<l(i)){u=i;Q=F/4}else Q=F/t*w(i/u);return u*m(2,-10*p)*s((p*o-Q)*t/F)+i+A},elasticinout:function(p,A,i,o,u,F){var Q;if(p==0)return A;if((p/=o/2)==2)return A+i;F||(F=o*0.3*1.5);if(!u||u<l(i)){u=i;Q=F/4}else Q=F/t*w(i/u);if(p<1)return-0.5*u*m(2,10*(p-=1))*s((p*o-Q)*t/F)+A;return u*
m(2,-10*(p-=1))*s((p*o-Q)*t/F)*0.5+i+A},quadin:function(p,A,i,o){return i*(p/=o)*p+A},quadout:function(p,A,i,o){return-i*(p/=o)*(p-2)+A},quadinout:function(p,A,i,o){if((p/=o/2)<1)return i/2*p*p+A;return-i/2*(--p*(p-2)-1)+A},sinein:function(p,A,i,o){return-i*P(p/o*T)+i+A},sineout:function(p,A,i,o){return i*s(p/o*T)+A},sineinout:function(p,A,i,o){return-i/2*(P(Math.PI*p/o)-1)+A}};COG.tweenValue=function(p,A,i,o,u){function F(X){X=X?X:(new Date).getTime();if(ca+r<X){var W=X-Q,V=i(W,p,ja,o),ra=Q+o<=X;
X=!ra;if(u){W=u(V,ra,W);X=typeof W!="undefined"?W&&X:X}X&&animFrame(F)}}var Q=(new Date).getTime(),ca=0,ja=A-p;animFrame(F);return{}};COG.easing=function(p){return ia[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(p,A){ia[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]=A}})();
(function(){var C=/^P(\d+Y)?(\d+M)?(\d+D)?$/,T=/^(\d+H)?(\d+M)?(\d+S)?$/,t={8601:function(l){l=l.split("T");var m=null;m=null;var s=0,w=0;C.lastIndex=-1;m=C.exec(l[0]);s+=m[3]?parseInt(m[3].slice(0,-1),10):0;T.lastIndex=-1;m=T.exec(l[1]);w+=m[1]?parseInt(m[1].slice(0,-1),10)*3600:0;w+=m[2]?parseInt(m[2].slice(0,-1),10)*60:0;w+=m[3]?parseInt(m[3].slice(0,-1),10):0;return new r(s,w)}},r=COG.Duration=function(l,m){return{days:l?l:0,seconds:m?m:0}};COG.addDuration=function(){for(var l=new r,m=arguments.length;m--;){l.days+=
arguments[m].days;l.seconds+=arguments[m].seconds}if(l.seconds>=86400){l.days+=~~(l.seconds/86400);l.seconds%=86400}return l};COG.formatDuration=function(l){var m,s,w="";if(l.days)w=l.days+" days ";if(l.seconds){l=l.seconds;if(l>=3600){m=~~(l/3600);l-=m*3600}if(l>=60){s=Math.round(l/60);l-=s*60}if(m)w=w+m+(m>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)w=w+s+" min";else if(l>0)w=w+(l>10?l:"0"+l)+" sec"}return w};COG.parseDuration=function(l,m){var s=m?t[m]:null;if(s)return s(l);COG.Log.warn("Could not find duration parser for specified format: "+
m);return new r}})();COG.ObjectStore=function(){var C={},T={},t="obj_"+(new Date).getTime(),r=0,l=Object.prototype.hasOwnProperty;return{add:function(m,s){var w;s=s?s:"default";if(m&&m.constructor)if(!l.call(m,"id"))m.id=t+ ++r;w=T[s]?T[s]:T[s]=[];C[m.id]=w.length;w[m.length]=m}}};var CANI={};
(function(C){var T=[],t=0,r=false,l=C.register=function(m,s){T.push({section:m,run:s})};C.init=function(m){function s(){if(t<T.length){var P=T[t++];w[P.section]||(w[P.section]={});P.run(w[P.section],s)}else{for(P in w)C[P]=w[P];r=true;m&&m(C)}}var w={};if(r&&m)m(C);else{t=0;s()}};l("canvas",function(m,s){function w(){var A,i=P.getContext("2d");i.save();try{i.translate(50,50);i.beginPath();i.rect(0,0,20,20);A=i.isPointInPath(10,10)}finally{i.restore()}return A}var P=document.createElement("canvas"),
ia=typeof FlashCanvas!="undefined",p=typeof G_vmlCanvasManager!="undefnined";P.width=200;P.height=200;m.pipTransformed=ia||p?false:w();s()})})(CANI);
INTERACT=function(){function C(i){return function(o,u){i.addEventListener(o,u,false)}}function T(i){return function(o,u){i.removeEventListener(o,u,false)}}function t(i){return function(o,u){i.attachEvent("on"+o,u)}}function r(i,o){return{x:i?i:0,y:o?o:0,count:1}}function l(i,o){p.push(COG.extend({handler:null,checks:{},type:i},o))}function m(i){var o=0,u=0;if(i.offsetParent){do{o+=i.offsetLeft;u+=i.offsetTop;i=i.offsetParent}while(i)}return{left:o,top:u}}function s(i,o){return{source:i,target:o.target?
o.target:o.srcElement}}function w(i,o){for(var u=i.target?i.target:i.srcElement;u&&u!==o;)u=u.parentNode;return u&&u===o}function P(i,o){return{x:i.x-(o?o.left:0),y:i.y-(o?o.top:0)}}function ia(i,o){if(i.preventDefault){i.preventDefault();i.stopPropagation()}else if(typeof i.cancelBubble!="undefined")i.cancelBubble=true;o&&i.stopImmediatePropagation&&i.stopImmediatePropagation()}var p=[],A=function(i,o,u){u=COG.extend({binder:null,unbinder:null,observable:null},u);for(var F=u.observable,Q=[],ca,ja,
X={bind:function(){return F.bind.apply(null,arguments)},unbind:function(){F.unbind();for(W=0;W<Q.length;W++)Q[W].unbind();return X}},W=0;W<o.length;W++)Q.push(o[W](i,F,u));F.bind("pointerDown",function(){ja=ca=0});F.bind("pointerMove",function(V,ra,Ga,wa){ca+=wa.x||0;ja+=wa.y||0});F.bind("pointerUp",function(V,ra,Ga){Math.abs(ca)>20||Math.abs(ja)>20||F.triggerCustom("tap",V,ra,Ga)});return X};l("pointer",{handler:function(i,o,u){function F(y){if(y.pageX&&y.pageY)return r(y.pageX,y.pageY);else{var H=
document.documentElement,$=document.body;return r(y.clientX+(H&&H.scrollLeft||$&&$.scrollLeft||0)-(H&&H.clientLeft||$&&$.clientLeft||0),y.clientY+(H&&H.scrollTop||$&&$.scrollTop||0)-(H&&H.clientTop||$&&$.clientTop||0))}}function Q(y){if(w(y,i))if(wa=W(y)){var H=F(y);i.style.cursor="move";ia(y,true);ka=H.x;ga=H.y;Ca=r(ka,ga);o.triggerCustom("pointerDown",s("mouse",y),Ca,P(Ca,m(i)))}}function ca(y){var H=F(y);Ha=H.x;oa=H.y;if(w(y,i))V(y,wa?"pointerMove":"pointerHover")}function ja(y){if(wa&&W(y)){wa=
false;if(w(y,i)){i.style.cursor="default";V(y,"pointerUp")}}}function X(y){if(w(y,i)){var H;y=y||window.event;if(y.detail)H=y.axis===2?-y.detail*ra:0;else{H=y.wheelDeltaY?y.wheelDeltaY:y.wheelDelta;if(window.opera)H=-H}if(H!==0){var $=r(Ha,oa);o.triggerCustom("zoom",s("mouse",y),$,P($,m(i)),H/Ga,"wheel");ia(y);y.returnValue=false}}}function W(y){y=y||window.event;return(y.which||y.button)==1}function V(y,H,$,sa,ta){$=typeof $!="undefined"?$:Ha;sa=typeof sa!="undefined"?sa:oa;var E=$-ka,N=sa-ga,L=
r($,sa);o.triggerCustom(H,s("mouse",y),L,P(L,m(i)),r(E,N));if(typeof ta=="undefined"||ta){ka=$;ga=sa}}u=COG.extend({},u);var ra=120,Ga=ra*8,wa=false,Ca,Ha,oa,ka,ga;u.binder("mousedown",Q);u.binder("mousemove",ca);u.binder("mouseup",ja);u.binder("dblclick",function(y){COG.info("captured double click");if(w(y,i)){var H=F(y);o.triggerCustom("doubleTap",s("mouse",y),H,P(H,m(i)))}});u.binder("mousewheel",X);u.binder("DOMMouseScroll",X);return{unbind:function(){u.unbinder("mousedown",Q);u.unbinder("mousemove",
ca);u.unbinder("mouseup",ja);u.unbinder("mousewheel",X);u.unbinder("DOMMouseScroll",X)}}},checks:{touch:false}});l("pointer",{handler:function(i,o,u){function F(E){if(E.count<2)return 0;var N=E.x-E.next.x;E=E.y-E.next.y;return~~Math.sqrt(N*N+E*E)}function Q(E,N,L){N=N?N:0;L=L?L:0;for(var la={x:E.x-N,y:E.y-L,id:E.id,count:E.count},ma=la;E.next;){E=E.next;ma=ma.next={x:E.x-N,y:E.y-L,id:E.id}}return la}function ca(E,N){var L=E[N?N:"touches"],la,ma;if(L.length===0)return null;ma=la={x:L[0].pageX,y:L[0].pageY,
id:L[0].identifier,count:L.length};for(var Aa=1,La=L.length;Aa<La;Aa++)ma=ma.next={x:L[Aa].pageX,y:L[Aa].pageY,id:L[Aa].identifier};return la}function ja(E){if(w(E,i)){oa=m(i);var N=ca(E,"changedTouches"),L=Q(N,oa.left,oa.top);if(!ga){ka=wa;o.triggerCustom("pointerDown",s("touch",E),N,L)}sa&&o.triggerCustom("pointerDownMulti",s("touch",E),N,L);ga=ca(E);if(ga.count>1)H=F(ga);ta=1;$=Q(ga)}}function X(E){if(w(E,i)){ia(E);y=ca(E);if(ka==wa)ka=Math.abs(ga.x-y.x)>ra||Math.abs(ga.y-y.y)>ra?Ga:wa;if(ka!=
wa){ka=y.count>1?Ha:Ca;if(ka==Ha)if(ga.count===1){ga=Q(y);H=F(ga)}else{var N=F(y);if(Math.abs(H-N)<V)ka=Ca;else{var L;L=y.x;var la=y.next.x,ma=y.y,Aa=y.next.y,La=ma<Aa?ma:Aa;L={x:(L<la?L:la)+(Math.abs(L-la)>>1),y:La+(Math.abs(ma-Aa)>>1)};N=N/H;la=N-ta;o.triggerCustom("zoom",s("touch",E),L,P(L,oa),la,"pinch");ta=N}}ka==Ca&&o.triggerCustom("pointerMove",s("touch",E),y,Q(y,oa.left,oa.top),r(y.x-$.x,y.y-$.y));sa&&o.triggerCustom("pointerMoveMulti",s("touch",E),y,Q(y,oa.left,oa.top))}$=Q(y)}}function W(E){if(w(E,
i)){var N=ca(E,"changedTouches"),L=Q(N,oa.left,oa.top);y=ca(E);if(!y){o.triggerCustom("pointerUp",s("touch",E),N,L);ga=null}sa&&o.triggerCustom("pointerUpMulti",s("touch",E),N,L)}}u=COG.extend({detailed:false,inertia:false},u);var V=20,ra=7,Ga=0,wa=1,Ca=2,Ha=3,oa,ka,ga,y,H,$,sa=u.detailed,ta=1;u.binder("touchstart",ja);u.binder("touchmove",X);u.binder("touchend",W);COG.info("initialized touch handler");return{unbind:function(){u.unbinder("touchstart",ja);u.unbinder("touchmove",X);u.unbinder("touchend",
W)}}},checks:{touch:true}});return{register:l,watch:function(i,o,u){o=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},o);capabilities=COG.extend({touch:"ontouchstart"in window},u);if(!o.observable){COG.info("creating observable");o.observable=COG.observable({});globalOpts=o}o.binder=(o.isIE?t:C)(o.bindTarget||document);o.unbinder=(o.isIE?t:T)(o.bindTarget||document);u=o.types;for(var F=capabilities,Q=[],ca=p.length;ca--;){var ja=p[ca],X=!u||u.indexOf(ja.type)>=
0,W=true;for(var V in ja.checks){var ra=ja.checks[V];COG.info("checking "+V+" capability. require: "+ra+", capability = "+F[V]);W=W&&ra===F[V]}if(X&&W)Q[Q.length]=ja.handler}return new A(i,Q,o)}}}();var T5={};
(function(C){function T(){return(new Date).getTime()}function t(a,e){e=$b.call(e);if(e=="finite")return!ac[bc](+a);return e=="null"&&a===null||e==typeof a||e=="object"&&a===Object(a)||e=="array"&&Array.isArray&&Array.isArray(a)||cc.call(a).slice(8,-1).toLowerCase()==e}function r(a,e){this.x=a||0;this.y=e||0}function l(a,e,c,d){this.x=a||0;this.y=e||0;this.w=c||0;this.h=d||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function m(a,e){var c=new Fb(Math.sqrt(256<<a)|0);e&&e.zoomLevel===a&&e.copyInto(c);
c.zoomLevel=a;return c}function s(a,e,c){a=document.createElement(a);a.id=e;a.style.cssText=c||"";return a}function w(a,e,c,d){if(Gb)a.style[y]="translate3d("+e+"px, "+c+"px, 0px) "+(d||"");else{a.style.left=e+"px";a.style.top=c+"px"}}function P(a){a=a||(new Date).getTime();for(var e=0;e<Ya.length;){var c=Ya[e],d=Va[c],b=Va[c].image&&Va[c].image.complete&&Va[c].image.width>0,f=a-d.start;f=b||f>=dc;if(b){b=d.callbacks;Hb[c]=d.image;for(var g=0;g<b.length;g++)b[g](d.image,true)}if(f){Ya.splice(e,1);
delete Va[c]}else e++}Ya.length>0&&animFrame(P)}function ia(a,e){var c=a&&e?Hb[a]:null;if(c&&c&&c.complete&&c.width>0)e(c);else{if(c=Va[a])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++ec;Va[a]={start:(new Date).getTime(),image:c,callbacks:[e]};c.src=a;Ya[Ya.length]=a}animFrame(P)}}function p(a,e,c,d,b,f){this.x=a;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=c;this.id=f||a+"_"+e;this.loaded=false;this.image=null}function A(a){a=a?a:(new Date).getTime();
if(a-Ib>fc){for(var e=ab.splice(0),c=e.length;c--;)e[c](a);Ib=a}ab.length&&animFrame(A)}function i(a){var e=ab.length==0;ab[ab.length]=a;e&&animFrame(A)}function o(a,e,c,d,b){b=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},b);var f=(new Date).getTime(),g=a[e],h=e=="translate",k=b.autoInvalidate,j=c.length&&d.length&&c.length==d.length?c.length:0,n=Array(j),B=Array(j),G=COG.easing(b.easing),R=b.duration,I=b.progress,D=function(K){var U=K-f;K=f+R<=K;for(var ha=
a.layer?a.layer.view:null,ba,na=j;na--;){ba=G(U,c[na],n[na],R);B[na]=h?ba|0:ba}g.apply(a,B);k&&ha&&ha.invalidate();if(I){U=[].concat(K?d:B);U.unshift(K);I.apply(a,U)}if(K){a.animations--;g.apply(a,d);b.complete&&b.complete.apply(a,d)}else i(D)};if(g&&g.apply&&j>0){R=R?R:DEFAULT_DURATION;for(e=j;e--;)n[e]=d[e]-c[e];a.animations++;i(D)}}function u(a){a=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},a);Da.call(this,a)}function F(a,e){e=COG.extend({simplify:false,
fill:true,typeName:"Poly"},e);var c=e.simplify;Da.call(this,e);COG.extend(this,{getPoints:function(){return[].concat(a)},resync:function(d){var b,f,g,h,k,j;d.syncXY(a);j=this.points=Wa.floor(c?Wa.simplify(a):a);for(var n=j.length;n--;){d=j[n].x;b=j[n].y;h=t(h,ya)||d<h?d:h;k=t(k,ya)||b<k?b:k;f=t(f,ya)||d>f?d:f;g=t(g,ya)||b>g?b:g}this.updateBounds(new l(h,k,f-h,g-k),true)}});this.haveData=a&&a.length>=2}function Q(a,e){e.fill=false;F.call(this,a,e)}function ca(a){function e(){if(g&&g.width>0){if(!this.centerOffset)this.centerOffset=
new r(-g.width>>1,-g.height>>1);this.updateBounds(new l(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,g.width,g.height),false)}}function c(k){if(this.imageUrl=k){var j=this;ia(this.imageUrl,function(n,B){g=n;if(B){var G=h.layer?h.layer.view:null;G&&G.invalidate()}e.apply(j)})}}a=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},a);var d=Da.prototype.resync,b=0,f=0,g=a.image;Da.call(this,a);var h=COG.extend(this,{changeImage:c,getProps:function(){this.bounds||e(this,
g);return{image:g,x:this.xy.x+b,y:this.xy.y+f}},resync:function(k){d.call(this,k);e.call(this)}});g||c.call(this,this.imageUrl);if(this.centerOffset){b=this.centerOffset.x;f=this.centerOffset.y}}function ja(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.centerOffset=Wa.invert(a.imageAnchor);ca.call(this,a)}function X(a){a=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},a);Da.call(this,a)}function W(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,style:null,minXY:null,
maxXY:null},a);this.view=null;this.visible=true;COG.observable(COG.extend(this,a))}function V(a,e){if(a&&a.split){var c=a.split(gc);if(c.length>1){a=c[0];e=c[1]}}else if(a&&a.lat){e=a.lon;a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(e||0)}function ra(a){a=parseFloat(a)*Ia;a=ma(a);var e=jb*a;return la((1+a)/(1-a)*N((1-e)/(1+e),jb))/2}function Ga(a){return ka/(256<<a)}function wa(a,e){var c=jb*ma(a);return ga-2*Jb(e*N((1-c)/(1+c),jb/2))}function Ca(a,e,c,d){e=Ha(e);a.add(d(e,c));return e.length}
function Ha(a){var e=a?a.length:0,c=Array(e);for(e=e;e--;)c[e]=new V(a[e][1],a[e][0]);return za.vectorize(c,Kb)}COG.observable(C);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();var oa=Array.prototype.indexOf||function(a){for(var e=0;e<this.length;e++)if(this[e]===a)return e;return-1},
ka=Math.PI*2,ga=Math.PI/2,y="-webkit-transform",H=Math.abs,$=Math.ceil,sa=Math.round,ta=Math.min,E=Math.max,N=Math.pow,L=Math.sqrt,la=Math.log,ma=Math.sin,Aa=Math.asin,La=Math.cos,Jb=Math.atan,hc=Math.atan2,bc="hasOwnProperty",ac={NaN:1,Infinity:1,"-Infinity":1},$b=String.prototype.toLowerCase,cc=Object.prototype.toString,ya="undefined",ic="number",Gb=typeof document.body.style[y]!="undefined",gc=/[\,\s]/,jc=T5.newCanvas=function(a,e){var c=document.createElement("canvas");c.width=a?a:0;c.height=
e?e:0;T5.trigger("createCanvas",c);return c},Lb=function(){var a={};return{init:function(e,c){var d=a[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(c)},register:function(e,c){a[e]=c}}}(),tb=function(){var a={};return{find:function(e){return(a[e]||[])[0]},register:function(e,c){a[e]||(a[e]=[]);a[e].push(c())}}}();r.prototype={constructor:r,add:function(){for(var a=this.x,e=this.y,c=arguments.length;c--;){a+=arguments[c].x;e+=arguments[c].y}return new r(a,e)},equals:function(a){return this.x===
a.x&&this.y===a.y}};l.prototype={constructor:l};var Wa=function(){function a(d,b){return c(d.x-b.x,d.y-b.y)}function e(d,b){b=b||d.length;if(b<=1)return null;for(var f=Array(b-1),g=Array(b-1),h=0,k,j=0;j<b-1;j++){k=a(d[j],d[j+1]);f[j]=L(k.x*k.x+k.y*k.y);g[j]=h+=f[j]}return{edges:f,accrued:g,tota:h}}function c(d,b){return new r(d,b)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,b=0,f=arguments.length;f--;){d+=arguments[f].x;b+=arguments[f].y}return c(d,b)},
absSize:function(d){return E(H(d.x),H(d.y))},copy:function(d){return d?c(d.x,d.y):null},diff:a,distance:function(d,b){return e(d,b).total},edges:e,equals:function(d,b){return d.equals(b)},extendBy:function(d,b,f){var g=La(b)*f|0;b=ma(b)*f|0;return c(d.x-g,d.y-b)},floor:function(d){for(var b=Array(d.length),f=d.length;f--;)b[f]=c(d[f].x|0,d[f].y|0);return b},getRect:function(d){for(var b,f,g,h,k=d.length;k--;){var j=d[k];b=t(b,ya)||j.x<b?j.x:b;f=t(f,ya)||j.y<f?j.y:f;g=t(g,ya)||j.x>g?j.x:g;h=t(h,ya)||
j.y>h?j.y:h}return new l(b,f,g-b,h-f)},init:c,invert:function(d){return c(-d.x,-d.y)},min:function(d,b){return c(d.x<b.x?d.x:b.x,d.y<b.y?d.y:b.y)},max:function(d,b){return c(d.x>b.x?d.x:b.x,d.y>b.y?d.y:b.y)},offset:function(d,b,f){return c(d.x+b,d.y+(f||b))},scale:function(d,b){return c(d.x/b|0,d.y/b|0)},simplify:function(d,b){if(!d)return null;b=b?b:Wa.VECTOR_SIMPLIFICATION;for(var f=[],g=null,h=d.length;h--;){var k=d[h];if(include=!g||h===0||H(k.x-g.x)+H(k.y-g.y)>b){f.unshift(k);g=k}}return f},
theta:function(d,b,f){f=Aa((d.y-b.y)/f);return d.x>b.x?f:Math.PI-f},toString:function(d){return d?d.x+", "+d.y:""}}}(),Ma=function(){return{dotProduct:function(a,e){return a.x*e.x+a.y*e.y}}}(),bb=function(){function a(c){return e(c.x,c.y,c.x2,c.y2)}function e(c,d,b,f){return new l(c,d,(b||c)-c,(f||d)-d)}return{buffer:function(c,d,b){return bb.init(c.x-d,c.y-(b||d),c.x2+d,c.y2+(b||d))},center:function(c){return new r(c.x+(c.w>>1),c.y+(c.h>>1))},copy:a,diagonalSize:function(c){return L(c.w*c.w+c.h*
c.h)},fromCenter:function(c,d,b,f){b=b>>1;f=f>>1;return e(c-b,d-f,c+b,d+f)},init:e,intersect:function(c,d){var b=E(c.x,d.x),f=E(c.y,d.y),g=ta(c.x2,d.x2),h=ta(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null},toString:function(c){return c?"["+c.x+", "+c.y+", "+c.x2+", "+c.y2+"]":""},union:function(c,d){if(c.w===0||c.h===0)return a(d);else if(d.w===0||d.h===0)return a(c);else{var b=ta(c.x,d.x),f=ta(c.y,d.y),g=E(c.x2,d.x2),h=E(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null}}}}();Hits=function(){return{diffHits:function(a,
e){var c=[],d={},b;for(b=e.length;b--;)d[e[b].target.id]=true;for(b=a.length;b--;)d[a[b].target.id]||(c[c.length]=a[b]);return c},init:function(a,e,c,d){return{type:a,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:c}},initHit:function(a,e,c){return{type:a,target:e,drag:c}},triggerEvent:function(a,e,c,d){e.triggerCustom(a.type+(c?c:"Hit"),{hitType:a.type},d?d:a.elements,a.absXY,a.relXY,new r(a.x,a.y))}}}();var Fb=function(a){function e(b,f){var g=c[b],h;g||(g=c[b]=[]);(h=g[f])||(h=g[f]=[]);return h}a=a||
128;var c=[],d={};return{copyInto:function(b){for(var f in d){var g=d[f];b.insert(g.bounds||g,g,f)}},insert:function(b,f,g){var h=b.x/a|0,k=b.y/a|0,j=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;g=g||f.id||COG.objId("spatial");d[g]=f;for(f=h;f<=j;f++)for(h=k;h<=b;h++)e(f,h).push(g)},remove:function(b,f,g){g=g||f.id;if(d[g]){var h=b.x/a|0;f=b.y/a|0;var k=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;delete d[g];for(h=h;h<=k;h++)for(var j=f;j<=b;j++){var n=e(h,j),B=oa.call(n,g);B>=0&&n.splice(B,1)}}},search:function(b){var f=b.y/
a|0,g=(b.x+b.w)/a|0,h=(b.y+b.h)/a|0,k=[],j=[];for(b=b.x/a|0;b<=g;b++)for(var n=f;n<=h;n++)k=k.concat(e(b,n));k.sort();for(f=k.length;f--;){g=k[f];if(h=d[g])j[j.length]=h;for(;f>0&&k[f-1]==g;)f--}return j}}},dc=3E4,Hb={},ec=0;(new Date).getTime();var Va={},Ya=[];p.prototype={constructor:p,load:function(a){var e=this;ia(this.url,function(c){e.loaded=true;e.image=c;a&&a()})}};var kc=function(){return COG.observable({fastpan:true,applyStyle:function(){},applyTransform:function(a,e,c){return{restore:null,
x:e,y:c}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new r},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,reset:function(){}})},Mb={},cb=C.registerRenderer=function(a,e){Mb[a]=e},lc=C.attachRenderer=function(a,e,c,d,b){a=a.split("/");for(var f=new kc(e,c,d,b),g=0;g<a.length;g++){var h=Mb[a[g]];if(h)f=new h(e,c,d,b,f)}return f};cb("canvas",function(a,e,c,d,b){function f(z,Y,M){var J,da;R[Y]=function(Z){for(J=
ba.length;J--;)if(da=M[ba[J]])Z[na[J]]=da}}function g(z,Y,M){var J=false;if(Y)J=n.isPointInPath(D?Y.x-B:Y.relXY.x,D?Y.y-G:Y.relXY.y);return{draw:M||ha,viewport:z,hit:J,vpX:B,vpY:G,context:n}}d=COG.extend({},d);var h,k,j,n,B=0,G=0,R={},I=null,D=CANI.canvas.pipTransformed,K={},U=function(){},ha=function(){this.fill&&n.fill();this.stroke&&n.stroke()},ba=["fill","stroke","lineWidth","opacity"],na=["fillStyle","strokeStyle","lineWidth","globalAlpha"];if(e){h=e.offsetWidth;k=e.offsetHeight;j=jc(h,k);j.style.cssText=
"position: absolute; z-index: 1;";a.attachFrame(j,true);n=null}c=COG.extend(b,{applyStyle:function(z){var Y=R[z],M=n&&n.canvas?n.canvas.id:"default",J;K[M]||(K[M]=[]);J=K[M].pop()||"basic";if(Y){K[M].push(z);Y(n);return J}},applyTransform:function(z){if(z.translateX!==0||z.translateY!==0||z.scaling!==1||z.rotation!==0){n.save();I={undo:function(){n.restore();I=null},x:z.xy.x,y:z.xy.y};n.translate(z.xy.x-B+z.translateX,z.xy.y-G+z.translateY);z.rotation!==0&&n.rotate(z.rotation);z.scaling!==1&&n.scale(z.scaling,
z.scaling)}return I},drawTiles:function(z,Y){for(var M,J,da=B-256,Z=G-256,pa=z.x2,aa=z.y2,xa=Y.length;xa--;){M=Y[xa];if(J=M.x>=da&&M.x<=pa&&M.y>=Z&&M.y<=aa)M.loaded?n.drawImage(M.image,M.x-B,M.y-G):M.load(a.invalidate)}},prepare:function(z,Y){var M,J=false,da=Y.scaled||Y;if(n)n.restore();else n=j.getContext("2d");for(M=z.length;M--;)J=J||z[M].clip;B=da.x;G=da.y;if(n){J||n.clearRect(0,0,h,k);n.save()}n.globalCompositeOperation="source-over";return n},prepArc:function(z,Y,M){n.beginPath();n.arc(z.xy.x-
(I?I.x:B),z.xy.y-(I?I.y:G),z.size>>1,z.startAngle,z.endAngle,false);return g(Y,M)},prepImage:function(z,Y,M,J){var da=(J.x||z.xy.x)-(I?I.x:B),Z=(J.y||z.xy.y)-(I?I.y:G),pa=J.image||z.image;if(pa){n.beginPath();n.rect(da,Z,J.width||pa.width,J.height||pa.height);return g(Y,M,function(){n.drawImage(pa,da,Z,J.width||pa.width,J.height||pa.height)})}},prepMarker:function(z,Y,M){var J=z.xy.x-(I?I.x:B),da=z.xy.y-(I?I.y:G),Z=z.size,pa=undefined;n.beginPath();switch(z.markerStyle.toLowerCase()){case "image":pa=
U;n.rect(J-(Z>>1),da-(Z>>1),Z,Z);if(z.reset&&z.image){z.image=null;z.reset=false}z.image?n.drawImage(z.image,J-(Z>>1),da-(Z>>1),Z,Z):ia(z.imageUrl,function(aa){z.image=aa;n.drawImage(z.image,J-(Z>>1),da-(Z>>1),Z,Z)});break;default:n.moveTo(J,da);n.lineTo(J-(Z>>1),da-Z);n.lineTo(J+(Z>>1),da-Z);n.lineTo(J,da);break}return g(Y,M,pa)},prepPoly:function(z,Y,M,J){var da=true;z=J.points||z.points;J=I?I.x:B;var Z=I?I.y:G;n.beginPath();for(var pa=z.length;pa--;){var aa=z[pa].x-J,xa=z[pa].y-Z;if(da){n.moveTo(aa,
xa);da=false}else n.lineTo(aa,xa)}return g(Y,M)},getContext:function(){return n}});(function(){for(var z in T5.styles)f(null,z,T5.styles[z]);T5.bind("styleDefined",f)})();c.bind("detach",function(){e.removeChild(j)});return c});cb("dom",function(a,e,c,d,b){function f(n){var B=n.image=new Image;k[n.id]=n;B.src=n.url;B.onload=function(){if(j[n.id])h.appendChild(this);else n.image=null};B.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";
return B}function g(n,B,G){var R=[];for(var I in n){var D=n[I];if(G?D[G]:!B[I]){if(D.image&&D.image.parentNode){h.removeChild(D.image);D.image=null}R[R.length]=I}}for(B=R.length;B--;)delete n[R[B]]}var h=null,k={},j={};h=s("div",COG.objId("domImages"),COG.formatStr("-webkit-user-select: none; position: absolute; overflow: hidden; width: {0}px; height: {1}px;",e.offsetWidth,e.offsetHeight));e.childNodes.length>0?e.insertBefore(h,e.childNodes[0]):e.appendChild(h);a.attachFrame(h);a=COG.extend(b,{drawTiles:function(n,
B){for(var G,R,I=n.x,D=n.y,K=B.length;K--;){G=B[K];if(G.url){R=G.image||f(G);w(R,G.x-I,G.y-D);j[G.id]=G}}}});a.bind("predraw",function(){g(k,j);j={}});a.bind("detach",function(){e.removeChild(h)});a.bind("reset",function(){for(g(k,j={});h.childNodes.length>0;)h.removeChild(h.childNodes[0])});return a});var ub=C.styles={},mc=C.defineStyle=function(a,e){ub[a]=e;C.trigger("styleDefined",a,ub[a]);return a},Nb=C.defineStyles=function(a){for(var e in a)mc(e,a[e])};C.getStyle=function(a){return ub[a]};C.loadStyles=
function(a){COG.jsonp(a,function(e){Nb(e)})};Nb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Ub=function(a){function e(q,v,x,O){z(ta(E(ea+N(2,O)-1,0.5),2))}function c(){var q=la(ea)/Math.LN2|0;if(q!==0){ea=N(2,q);Y(db+q,nc,oc)}redraw=true}function d(q,v){var x=renderer&&renderer.projectXY?renderer.projectXY(q,v):null;if(!x){x=fa.getViewport();var O=1/ea;x=new r(x?x.x+q*
O:q,x?x.y+v*O:v)}return x}function b(q,v,x){M("doubleTap",v,x,d(x.x,x.y));a.scalable&&z(2,d(x.x,x.y),pc,null,qc)}function f(q,v,x){Ja=null;vb=true;U("down",v,x)}function g(q,v,x){U("hover",v,x)}function h(q,v,x,O){I(v,x,false);if(!Ja){Na=O.x;Oa=O.y}}function k(q,v,x){I(v,x,true);vb=false}function j(){clearTimeout(Ob);Ob=setTimeout(function(){renderer.checkSize()},250)}function n(q,v,x){U("tap",v,x);M("tap",v,x,d(x.x,x.y,true))}function B(q){renderer=lc(q||a.renderer,fa,Qa,Ra,a);Pb=a.fastpan&&renderer.fastpan;
R()}function G(q,v){v.id=q;v.added=T();v.view=fa;v.trigger("parentChange",fa,Qa,rc);aa.push(v);aa.sort(function(x,O){var S=O.zindex-x.zindex;if(S===0)S=O.added-x.added;return S});xa=aa.length;return v}function R(){Ea&&Ea.unbind();if(renderer){Ea=INTERACT.watch(renderer.interactTarget||Ra);if(a.scalable){Ea.bind("zoom",e);Ea.bind("doubleTap",b)}Ea.bind("pointerDown",f);Ea.bind("pointerMove",h);Ea.bind("pointerUp",k);a.captureHover&&Ea.bind("pointerHover",g);Ea.bind("tap",n)}}function I(q,v,x){if(Ja){q=
d(v.x,v.y);Ja.drag.call(Ja.target,Ja,q.x,q.y,x)&&Fa++;if(x)Ja=null}}function D(q,v){Ra=document.getElementById(v);Ra.appendChild(Sa=s("div",COG.objId("t5_container"),COG.formatStr("-webkit-user-select: none; position: absolute; overflow: hidden; width: {0}px; height: {1}px;",Ra.offsetWidth,Ra.offsetHeight)));kb=Sa.offsetWidth+lb*2;mb=Sa.offsetHeight+lb*2;eb=kb/2;fb=mb/2;wb=Ra.offsetWidth/2;xb=Ra.offsetHeight/2;Sa.appendChild(Qa=s("div",COG.objId("t5_view"),COG.formatStr("-webkit-user-select: none; position: absolute; width: {0}px; height: {1}px; margin: {2}px 0 0 {2}px;",
kb,mb,-lb)));B()}function K(q){var v="",x,O=false,S;q=q||(new Date).getTime();if(O=q-Qb>sc){panSpeed=H(Na)+H(Oa);S=H(ua-yb)>=Rb||H(va-zb)>=Rb;x=ea!==Sb;if(panSpeed>0||x)Fa++;S&&panSpeed<da&&na();nb.index++;nb.draw=Fa||panSpeed||tc||uc;fa.trigger("enterFrame",q,nb);Qb=q}if(renderer&&O&&nb.draw){ob+=Na;pb+=Oa;if(!Pb||panSpeed<Z){ua=ua-ob|0;va=va-pb|0;S=ba();S.panSpeed=panSpeed;renderer.trigger("predraw",S);if(renderer.prepare(aa,S,q,Ba)){O=pb=x=ob=Fa=0;for(ii=xa;ii--;){var qa=aa[ii];if(qa.visible){var Ka=
qa.style?renderer.applyStyle(qa.style,true):null;qa.draw(renderer,S,fa,q,Ba);Ka&&renderer.applyStyle(Ka)}}renderer.trigger("render",S);fa.trigger("drawComplete",S,q);Sb=ea;if(Gb)v+="scale("+ea+")";else{Qa.style.zoom=ea;if(ea>1){x=-(wb-eb/ea);O=-(xb-fb/ea)}else if(ea<1){x=wb/ea-eb;O=xb/ea-fb}}w(Qa,x,O,v)}}else w(Qa,ob,pb);if(vb||!a.inertia)Oa=Na=0;else if(Na!=0||Oa!=0){Na*=0.8;Oa*=0.8;if(H(Na)<0.5)Na=0;if(H(Oa)<0.5)Oa=0}if(Ba){q=Ba?Ba.elements:[];if(gb&&gb.type==="hover"){v=Hits.diffHits(gb.elements,
q);v.length>0&&Hits.triggerEvent(gb,fa,"Out",v)}if(q.length>0){x=Ba.x;O=Ba.y;for(v=q.length;v--;){S=q[v];qa=x;Ka=O;var Ta=S&&S.drag&&(!S.canDrag||S.canDrag(S,qa,Ka));if(Ta){Ja=S;Ja.startX=qa;Ja.startY=Ka}if(Ta)break}Hits.triggerEvent(Ba,fa)}gb=q.length>0?COG.extend({},Ba):null;Ba=null}}animFrame(K)}function U(q,v,x){Ba=Hits.init(q,v,x,d(x.x,x.y,true));for(q=xa;q--;)Ab=Ab||(aa[q].hitGuess?aa[q].hitGuess(Ba.x,Ba.y,fa):false);Ab&&Fa++}function ha(){Fa++}function ba(){var q=new l(ua,va,kb,mb);q.scaleFactor=
ea;return q}function na(){var q=ba();if(q){if(Za||$a)if(q){var v=qb?ua+(q.w>>1):ua,x=rb?va+(q.h>>1):va,O=q.w,S=q.h;if(Za&&Za>O)if(v+O>Za)ua=qb?ua:Za-O;else if(v<0)ua=qb?ua:0;if($a&&$a>S)if(x+S>$a)va=rb?va:$a-S;else if(x<0)va=rb?va:0}yb=ua;zb=va;M("refresh",fa,q);Fa++}}function z(q,v,x,O,S){var qa;if(!vc){x=false;qa=sa(la(q)/Math.LN2);q=N(2,qa)}if(x)COG.tweenValue(ea,q,x,S,function(Ka,Ta){ea=Ka;if(Ta){qa=sa(la(ea)/Math.LN2);ea=N(2,qa);O&&O()}c()});else{ea=q;c()}return fa}function Y(q,v,x){q=E(a.minZoom,
ta(a.maxZoom,q));if(q!==db){var O=N(2,q-db),S=eb/O|0,qa=fb/O|0;db=q;J(((v?v:ua+eb)-S)*O,((x?x:va+fb)-qa)*O);zb=yb=0;M("zoomLevelChange",q);ea=1;renderer.trigger("reset");na()}}function M(){for(var q=fa.trigger.apply(null,arguments).cancel,v=aa.length;v--;)q=aa[v].trigger.apply(null,arguments).cancel||q;return!q}function J(q,v,x,O,S){function qa(){Ka+=1;if(Ka>=2){Tb=false;S&&S()}}var Ka=0;if(x&&panSpeed===0){COG.tweenValue(ua,q,x,O,function(Ta,Bb){ua=Ta|0;(Bb?qa:ha)();return panSpeed===0});COG.tweenValue(va,
v,x,O,function(Ta,Bb){va=Ta|0;(Bb?qa:ha)();return panSpeed===0});Tb=true}else{ua=q|0;va=v|0;S&&S()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,fastpan:false,fastpanPadding:128,inertia:true,refreshDistance:256,pannable:false,scalable:false,fps:60,minZoom:1,maxZoom:1,renderer:"canvas",zoomLevel:1},a);var da=2,Z=5,pa={},aa=[],xa=0,Qa=null,Sa=null,Ra,Ja=null,rc=null,wc=!t(window.attachEvent,ya),Ab=false,Pb=true,vb=false,Na=0,Oa=0,tc=0,uc=0,Rb=a.refreshDistance,ua=0,va=0,ob=0,pb=
0,yb=0,zb=0,Za=null,$a=null,qb=false,rb=false,lb=a.fastpan?a.fastpanPadding:0,Cb=[],Ba=null,gb=null,Ob=0,ea=1,Sb=1,Qb=0,Ea=null,nb={index:0,draw:false},vc=true,Tb=false,sc=1E3/a.fps|0,Fa=0,kb,mb,eb,fb,wb,xb,nc,oc,db=a.zoomLevel,pc=COG.easing("quad.out"),qc=300,fa={id:a.id,padding:lb,attachFrame:function(q,v){Cb[Cb.length]=q;v&&Qa.appendChild(q)},detach:function(){renderer&&renderer.trigger("detach");Ea&&Ea.unbind();if(Sa){document.getElementById(Sa).removeChild(Sa);Qa=Sa=null}Cb=[]},eachLayer:function(q){for(var v=
xa;v--;)q(aa[v])},getLayer:function(q){for(var v=0;v<xa;v++)if(aa[v].id===q)return aa[v];return null},getZoomLevel:function(){return db},setLayer:function(q,v){for(var x=0;x<xa;x++)if(aa[x].id===q){aa.splice(x,1);break}if(v){G(q,v);v.trigger("refresh",fa,ba());fa.trigger("layerChange",fa,v)}Fa++;return v},invalidate:ha,refresh:na,resetScale:function(){ea=1},scale:z,setZoomLevel:Y,syncXY:function(){},triggerAll:M,removeLayer:function(q){a:{for(var v=xa;v--;)if(aa[v].id===q){q=v;break a}q=-1}if(q>=
0&&q<xa){fa.trigger("layerRemove",fa,aa[q]);aa.splice(q,1);Fa++}xa=aa.length},getOffset:function(){return new r(ua,va)},getRenderer:function(){return renderer},getScaleFactor:function(){return ea},setMaxOffset:function(q,v,x,O){Za=q;$a=v;qb=x;rb=O},getViewport:ba,updateOffset:J,pan:function(q,v){Na=q;Oa=v;Fa++}};COG.observable(fa);fa.bind("resync",function(){});COG.configurable(fa,["container","captureHover","scalable","pannable","inertia","minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(a,
null,{container:D,captureHover:R,scalable:R,pannable:R,renderer:function(q,v){if(renderer){renderer.trigger("detach");renderer=null}B(v);Fa++}}),true);CANI.init(function(q){fa.markers=G("markers",new sb({zindex:20}));pa=q;D(null,a.container);wc?window.attachEvent("onresize",j):window.addEventListener("resize",j,false)});animFrame(K);return fa},Da=function(a){a=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},a);COG.extend(this,
a);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Da.prototype={constructor:Da,animate:function(a,e,c,d){o(this,a,e,c,d)},drag:null,draw:null,getProps:null,resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(bb.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=a},translate:function(a,
e){this.translateX=a;this.translateY=e},updateBounds:function(a,e){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);this.bounds=a;if(e)this.xy=bb.center(this.bounds)}};var fc=1E3/60|0,ab=[],Ib=0;u.prototype=COG.extend(Da.prototype,{constructor:u});F.prototype=COG.extend({},Da.prototype,{constructor:F});Q.prototype=COG.extend({},F.prototype);ca.prototype=COG.extend({},Da.prototype,{constructor:ca});ja.prototype=COG.extend({},ca.prototype,{constructor:ja});
X.prototype=COG.extend(Da.prototype,{constructor:X});W.prototype={constructor:W,clip:null,cycle:function(){},draw:function(){},hitGuess:null};cb=function(a,e){function c(h,k){var j=k&&k.getZoomLevel?k.getZoomLevel():0;f[j]||(f[j]=m(j));b=f[j]}e=COG.extend({imageLoadArgs:{}},e);var d=a?Lb.init(a,e).run:null,b=null,f=[],g=COG.extend(new W(e),{draw:function(h,k){h.drawTiles&&h.drawTiles(k,b.search(bb.buffer(k,128)))}});g.bind("refresh",function(h,k,j){var n=(new Date).getTime();b&&d(k,j,b,function(){k.invalidate();
COG.info("GEN COMPLETED IN "+((new Date).getTime()-n)+" ms")})});g.bind("parentChange",c);g.bind("resync",c);return g};var Vb=function(a){function e(j,n,B,G){var R=this.dragOffset;if(!R)R=this.dragOffset=new r(j.startX-this.xy.x,j.startY-this.xy.y);this.xy.x=n-R.x;this.xy.y=B-R.y;if(G){delete this.dragOffset;if(j=k.view){j.syncXY([this.xy],true);j.invalidate()}this.trigger("dragDrop")}return true}function c(j){clearTimeout(h);h=setTimeout(function(){f.sort(function(n,B){if(B.xy&&n.xy){var G=B.xy.y-
n.xy.y;return G!=0?G:B.xy.x-n.xy.x}});j&&j.invalidate()},50)}function d(j,n,B,G){G&&g.remove(G,n);g.insert(B,n)}function b(j,n){g=m(n.getZoomLevel(),g);for(var B=f.length;B--;)f[B].resync(n)}a=COG.extend({zindex:10},a);var f=[],g,h=0,k=COG.extend(new W(a),{itemCount:0,add:function(j,n){if(j){j.layer=k;if(n)f.unshift(j);else f[f.length]=j;var B=k.view;if(B){j.resync(B);g&&j.bounds&&g.insert(j.bounds,j);c(B)}j.bind("move",d)}k.itemCount=f.length},clear:function(){g=new Fb;f=[];k.itemCount=0},draw:function(j,
n,B,G,R){B={};G=g&&n?g.search(n):[];for(var I=G.length;I--;){var D=G[I],K=D.style||k.style,U,ha=j.applyTransform(D),ba=D.getProps?D.getProps(j):B;if(ba=(U=j["prep"+D.typeName])?U.call(j,D,n,R,ba):null){if(R&&ba.hit){R.elements.push(Hits.initHit(D.type,D,D.draggable?e:null));U=R.type+"Style";K=D[U]||k[U]||K}K=K?j.applyStyle(K,true):null;(U=D.draw||ba.draw)&&U.call(D,ba);K&&j.applyStyle(K)}ha&&ha.undo&&ha.undo()}},find:function(){return[].concat(f)},hitGuess:function(j,n){return g&&g.search({x:j-10,
y:n-10,w:20,h:20}).length>0}});k.bind("parentChange",b);k.bind("resync",b);return k},sb=function(a){return new Vb(a)};V.prototype={constructor:V,offset:function(a,e){var c=this.lat*Ia,d=this.lon*Ia,b=c+a/hb;c=Aa(ma(e/hb)/La(c));d=d+c;b=(b+ga)%Math.PI-ga;d%=ka;return new V(b*Ua,d*Ua)},toString:function(a){return this.lat+(a||" ")+this.lon}};COG.extend(C,{ex:COG.extend,is:t,ticks:T,userMessage:function(a,e,c){C.trigger("userMessage",a,e,c)},indexOf:oa,Rect:l,XY:Wa,XYRect:bb,Vector:Ma,Hits:Hits,Generator:Lb,
Service:tb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:p,TileLayer:cb,getImage:ia,View:Ub,ViewLayer:W,ImageLayer:cb,Drawable:Da,Marker:u,Poly:F,Line:Q,Arc:X,ImageDrawable:ca,ImageMarker:ja,DrawLayer:Vb,ShapeLayer:sb,Map:function(a){function e(h,k,j){g.setZoomLevel(k);c(h,j)}function c(h,k,j,n){h=Pa.init(h,Ga(g.getZoomLevel()));var B=g.getViewport();g.updateOffset(h.x-(B.w>>1),h.y-(B.h>>1),j,n,function(){k&&k(g)})}a=COG.extend({zoomLevel:1,minZoom:1,maxZoom:18,pannable:true,scalable:true},a);
var d=new r,b=0,f=a.tapExtent;a.adjustScaleFactor=function(h){return Math.pow(2,(h<1?Math.floor:Math.ceil)(Math.log(h)))};var g=COG.extend(new Ub(a),{getBoundingBox:function(){var h=g.getViewport();return h?Xa.init(Pa.toPos(new r(h.x,h.y2),b),Pa.toPos(new r(h.x2,h.y),b)):null},getCenterPosition:function(){var h=g.getViewport();if(h){h=new r(h.x+(h.w>>1),h.y+(h.h>>1));return Pa.toPos(h,b)}return null},gotoBounds:function(h,k){var j=Xa.getZoomLevel(h,g.getViewport());e(Xa.getCenter(h),j,k)},gotoPosition:e,
panToPosition:c,syncXY:function(h,k){return(k?Pa.syncPos:Pa.sync)(h,b)}});g.bind("tap",function(h,k,j,n){h=Pa.toPos(n,b);var B=Pa.toPos(Wa.offset(n,-f,f),b);n=Pa.toPos(Wa.offset(n,f,-f),b);g.trigger("geotap",k,j,h,Xa.init(B,n))});g.bind("refresh",function(h,k,j){if(d.x!=j.x||d.y!=j.y){g.trigger("boundsChange",g.getBoundingBox());d.x=j.x;d.y=j.y}});g.bind("zoomLevelChange",function(h,k){var j;b=Ga(k);j=ka/b|0;g.setMaxOffset(j,j,true,false);g.resetScale();g.triggerAll("resync",g)});return g},Pos:V});
var Db=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ia=Math.PI/180,Ua=180/Math.PI,Eb=ga,Wb=-Eb,Xb=ka,xc=-Xb,hb=6371,jb=0.08181919084262157,ib=null,Yb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},za=function(){function a(c){return!c||c.lat===0&&c.lon===0}function e(c,d){return new V(c,d)}return{calcDistance:function(c,d){if(a(c)||a(d))return 0;var b=(d.lat-c.lat)*Ia>>1,f=(d.lon-c.lon)*Ia>>1;b=
ma(b)*ma(b)+La(c.lat*Ia)*La(d.lat*Ia)*ma(f)*ma(f);b=2*hc(L(b),L(1-b));return hb*b},copy:function(c){return c?e(c.lat,c.lon):null},empty:a,equal:function(c,d){return c&&d&&c.lat==d.lat&&c.lon==d.lon},fromMercatorPixels:function(c,d){for(var b=N(Math.E,-d),f=ga-2*Jb(b),g=wa(f,b),h=0;h<12&&H(f-g)>1.0E-7;){f=g;g=wa(f,b);h++}return e(g*Ua,c%360*Ua)},generalize:function(c,d,b){var f=c.length,g=[],h=null;b||(b=250);b/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");for(var k=
f;k--;)if(k===0)g.unshift(c[k]);else{var j=!h||za.inArray(c[k],d)?b:za.calcDistance(h,c[k]);if(c[k]&&j>=b){g.unshift(c[k]);h=c[k]}}COG.info("generalized "+f+" positions into "+g.length+" positions");return g},inArray:function(c,d){for(var b=za.equal,f=d.length;f--;)if(b(c,d[f]))return true;return false},inBounds:function(c,d){var b=!(za.empty(c)||za.empty(d));return b=(b=b&&c.lat>=d.min.lat&&c.lat<=d.max.lat)&&c.lon>=d.min.lon&&c.lon<=d.max.lon},init:e,offset:function(c,d,b){return c.offset(d,b)},
parse:function(c){return new V(c)},parseArray:function(c){var d=c.length,b=Array(d);for(d=d;d--;)b[d]=new V(c[d]);return b},toMercatorPixels:function(c){return T5.XY.init(parseFloat(c.lon)*Ia,ra(c.lat))},toString:function(c){return c?c.toString():""},vectorize:function(c,d){function b(){for(var k=0,j=d.chunkSize,n=f;n--;){g[n]=T5.GeoXY.init(c[n]);k+=1;if(k>j)break}f=n;if(f<=0)d.callback&&d.callback(g);else animFrame(b)}var f=c.length,g=Array(f);d=COG.extend({chunkSize:500,async:true,callback:null},
d);if(!d.async){for(var h=f;h--;)g[h]=T5.GeoXY.init(c[h]);return g}animFrame(b);return null}}}(),Xa=function(){function a(b,f,g){var h=new r(0,f.lat-b.lat);h.x=(g||t(g,ya))&&b.lon>f.lon?360-b.lon+f.lon:f.lon-b.lon;return h}function e(b,f){return Xa.init(new V(b.min.lat-f,b.min.lon-f%360),new V(b.max.lat+f,b.max.lon+f%360))}function c(b){var f=a(b.min,b.max);return new V(b.min.lat+(f.y>>1),b.min.lon+(f.x>>1))}function d(b,f){return{min:new V(b),max:new V(f)}}return{calcSize:a,createBoundsFromCenter:function(b,
f){var g=f/hb,h=b.lat*Ia,k=b.lon*Ia,j=h-g,n=h+g;if(j>Wb&&n<Eb){h=Aa(ma(g)/La(h));g=(k-h)%ka;k=(k+h)%ka}else{j=E(j,Wb);n=ta(n,Eb);g=xc;k=Xb}return Xa.init(new V(j*Ua,g*Ua),new V(n*Ua,k*Ua))},expand:e,forPositions:function(b,f){var g=null,h=T5.ticks();f||(f="auto");for(var k=b.length;k--;)if(g){var j=a(g.min,b[k],false),n=a(b[k],g.max,false);if(j.x<0)g.min.lon=b[k].lon;if(j.y<0)g.min.lat=b[k].lat;if(n.x<0)g.max.lon=b[k].lon;if(n.y<0)g.max.lat=b[k].lat}else g=d(b[k],b[k]);if(f){if(f=="auto"){k=a(g.min,
g.max);f=E(k.x,k.y)*0.3}g=e(g,f)}COG.trace("calculated bounds for "+b.length+" positions",h);return g},getCenter:c,getZoomLevel:function(b,f){var g=c(b);g=ta(sa(H(g.lat)*0.05),Db.length);var h=Db[g],k=a(b.min,b.max);g=$(la(Db[3]*f.h/k.y)/la(2));h=$(la(h*f.w/k.x)/la(2));return ta(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:d,isEmpty:function(b){return!b||za.empty(b.min)||za.empty(b.max)},toString:function(b){return"min: "+za.toString(b.min)+", max: "+za.toString(b.max)}}}();tb=function(){var a=/^(\d+).*$/,
e=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(c,d){a.lastIndex=-1;if(a.test(c))for(var b=c.replace(a,"$1"),f=d.split(","),g=0;g<f.length;g++){e.lastIndex=-1;if(e.test(f[g])){var h=e.exec(f[g]);if(b>=parseInt(h[1],10)&&b<=parseInt(h[2],10))return true}else if(b==f[g])return true}return false},normalize:function(c){if(!c)return"";c=c.toUpperCase();if(!ib){var d=[];for(var b in Yb)d.push(b);ib=RegExp("(\\s)("+d.join("|")+")(\\s|$)","i")}ib.lastIndex=-1;if(d=ib.exec(c))c=c.replace(ib,"$1"+Yb[d[2]]);
return c},toString:function(c){return c.streetDetails+" "+c.location}}}();var Pa=C.GeoXY=function(){function a(d,b){if(d.length){for(var f,g,h,k,j=d.length;j--;){a(d[j],b);f=t(f,ya)||d.x<f?d.x:f;g=t(g,ya)||d.y<g?d.y:g;h=t(h,ya)||d.x>h?d.x:h;k=t(k,ya)||d.y>k?d.y:k}return new l(f,g,h-f,k-g)}else if(d.mercXY){f=d.mercXY;d.x=sa((f.x+Math.PI)/b);d.y=sa((Math.PI-f.y)/b);d.rpp=b}return d}function e(d,b){if(d.length)for(var f=d.length;f--;)e(d[f],b);else{d.mercXY=new r(d.x*b-Math.PI,Math.PI-d.y*b);d.pos=
za.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function c(d,b,f){d.pos=b;d.mercXY=za.toMercatorPixels(b);(f=t(f,ic)?f:d.rpp)&&a(d,f)}return{init:function(d,b){var f=new r;c(f,d,b);return f},sync:a,syncPos:e,toPos:function(d,b){b=b||d.rpp;return za.fromMercatorPixels(d.x*b-Math.PI,Math.PI-d.y*b)},updatePos:c}}(),yc="featurecollection",zc="feature",Kb={async:false};Ma={processor:null,group:"shapes",layerClass:sb};var Ac={point:COG.extend({},Ma,{processor:function(a,e,c,d){e=Ha([e.coordinates],
Kb);if(e.length>0)if(c=d.marker(e[0],c)){a.add(c);return e.length}},group:"markers",layerClass:sb}),linestring:COG.extend({},Ma,{processor:function(a,e,c,d){e=Ha(e&&e.coordinates?e.coordinates:[]);return Ca(a,e,c,d.line)}}),multilinestring:COG.extend({},Ma,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=e.length;f--;)b+=Ca(a,e[f],c,d.line);return b}}),polygon:COG.extend({},Ma,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return Ca(a,
e[0],c,d.poly);return 0}}),multipolygon:COG.extend({},Ma,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=0;f<e.length;f++)b+=Ca(a,e[f][0],c,d.poly);return b}})},Zb=function(a,e,c,d){function b(D,K){var U=D.processor,ha=j+D.group,ba=COG.extend({},D,c,{properties:K.properties});if(U){var na=I[ha];if(!na){na=new D.layerClass({id:ha});I[ha]=na}return U(na,K.data,ba,d)}return 0}function f(D,K){var U=D&&D.type?D.type.toLowerCase():null;return U&&U===zc?f(D.geometry,D.properties):
{type:U,isCollection:U?U===yc:false,definition:Ac[U],data:D,properties:K?K:D.properties}}function g(D){var K=0,U=COG.extend({},c),ha=n;D=D?D:(new Date).getTime();if(!G){for(;ha<B;ha++){D=f(k?k(a[ha]):a[ha]);var ba=null;if(D.isCollection){U.layerPrefix=j+R++ +"-";G=new Zb(D.data.features,function(na){G=null;for(var z in na)I[z]=na[z];n>=B&&e&&e(I)},U);ba+=1}else if(D.definition)ba=b(D.definition,D);K+=ba?ba:1;if(K>=h)break}n=ha+1;if(G||n<B)animFrame(g);else e&&e(I)}}c=COG.extend({rowPreParse:null,
simplify:false,layerPrefix:"geojson-"},c);d=COG.extend({marker:function(D){return new u({xy:D})},line:function(D,K){return new F(D,COG.extend({},c,K))},poly:function(D,K){return new F(D,COG.extend({fill:true},c,K))}},d);var h=500,k=c.rowPreParse,j=c.layerPrefix,n=0,B=0,G=null,R=0,I={};if(a){t(a,"array")||(a=[a]);B=a.length;animFrame(g)}};Ma=C.GeoJSON={parse:function(a,e,c){return new Zb(a,e,c)}};C.GeoShape=function(a,e){e=COG.extend({autoParse:true},e);for(var c=Array(a.length),d=e.autoParse,b=T5.Geo.Position.parse,
f=a.length;f--;)c[f]=T5.GeoXY.init(d?b(a[f]):a[f]);return new T5.Poly(c,e)};C.Geo={distanceToString:function(a){if(a>1E3)return~~(a/10)/100+" km";return a?a+" m":""},dist2rad:function(a){return a/hb},radsPerPixel:Ga,Position:za,BoundingBox:Xa,Radius:function(a,e){return{distance:parseInt(a,10),uom:e}},Address:function(a){return a=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},a)},A:tb,GeoJSON:Ma}})(T5);
