COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var D=arguments[0]||{},X,u=1,s=arguments.length;u<s;u++)if((X=arguments[u])!==null)for(var k in X){var l=X[k];if(D!==l)if(l!==undefined)D[k]=l}return D};
(function(){var D=Object.prototype.hasOwnProperty,X=0,u={};u.toID=function(s){return s.replace(/\s/g,"-")};u.objId=function(s){return(s?s:"obj")+X++};u.isFunction=function(s){return toString.call(s)==="[object Function]"};u.isArray=function(s){return toString.call(s)==="[object Array]"};u.isPlainObject=function(s){if(!s||toString.call(s)!=="[object Object]"||s.nodeType||s.setInterval)return false;if(s.constructor&&!D.call(s,"constructor")&&!D.call(s.constructor.prototype,"isPrototypeOf"))return false;
var k;for(k in s);return k===undefined||D.call(s,k)};u.isEmptyObject=function(s){for(var k in s)return false;return true};u.isXmlDocument=function(s){return toString.call(s)==="[object Document]"};u.contains=function(s,k){var l=s,r=arguments,y=1;if(k&&module.isArray(k)){r=k;y=0}for(y=y;y<r;y++)l=l&&typeof foo[r[y]]!=="undefined";return l};u.formatStr=function(s){if(arguments.length<=1)return s;for(var k=arguments.length-2,l=0;l<=k;l++)s=s.replace(RegExp("\\{"+l+"\\}","gi"),arguments[l+1]);return s};
u.wordExists=function(s,k){var l="";if(k.toString)k=k.toString();for(var r=0;r<k.length;r++)l+=!/\w/.test(k[r])?"\\"+k[r]:k[r];return RegExp("(^|\\s|\\,)"+l+"(\\,|\\s|$)","i").test(s)};COG.extend(COG,u)})();
(function(){function D(l){return typeof console!=="undefined"?function(){console[l](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var X=window.console&&window.console.markTimeline,u=D("error"),s=D("info"),k=function(){return X?function(l,r){console.markTimeline(l+(r?": "+((new Date).getTime()-r)+"ms":""))}:function(){}}();COG.extend(COG,{trace:k,debug:D("debug"),info:s,warn:D("warn"),error:u,exception:function(l){if(u)for(var r in l)s("ERROR DETAIL: "+r+
": "+l[r])}})})();
(function(){function D(u,s){var k=u.hasOwnProperty("obsHandlers")?u.obsHandlers:null;k[s]||(k[s]=[]);return k[s]}var X=0;COG.observable=function(u){if(!u)return null;if(!(u.hasOwnProperty("obsHandlers")?u.obsHandlers:null))u.obsHandlers={};if(!u.hasOwnProperty("bind")){u.bind=function(s,k){var l="callback"+X++;D(u,s).unshift({fn:k,id:l});return l};u.triggerCustom=function(s,k){var l=D(u,s),r={cancel:false,name:s,source:this},y;k&&COG.extend(r,k);if(!l)return null;y=Array.prototype.slice.call(arguments,2);
u.eventInterceptor&&u.eventInterceptor(s,r,y);y.unshift(r);for(var Q=l.length;Q--&&!r.cancel;)l[Q].fn.apply(this,y);return r};u.trigger=function(s){var k=Array.prototype.slice.call(arguments,1);k.splice(0,0,s,null);return u.triggerCustom.apply(this,k)};u.unbind=function(s,k){if(typeof s==="undefined")u.obsHandlers={};else for(var l=D(u,s),r=0;l&&r<l.length;r++)if(l[r].id===k){l.splice(r,1);break}return u}}return u}})();
(function(){function D(k,l){k[l]||(k[l]=function(r){return k.configure(l,r)})}function X(k){k.gtConfId="configurable"+s++;k.gtConfig={};k.gtConfigFns=[];return k.gtConfig}var u={},s=0;COG.paramTweaker=function(k,l,r){return function(y,Q){if(typeof Q!=="undefined"){if(y in k)k[y]=Q;r&&y in r&&r[y](y,Q)}else return l&&y in l?l[y](y):k[y]}};COG.configurable=function(k,l,r,y){if(k){k.gtConfId||X(k);var Q=k.gtConfId,wa=k.gtConfig,n=k.gtConfigFns;u[Q]=k;n.push(r);for(r=l.length;r--;){wa[l[r]]=true;y&&D(k,
l[r])}if(!k.configure)k.configure=function(C,j){if(wa[C]){for(var m=n.length;m--;){var w=n[m](C,j);if(typeof w!=="undefined")return w}return u[Q]}return null}}}})();
(function(){function D(k){var l=document.createElement("script"),r=false;l.src=k;l.async=true;l.onload=l.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){r=true;l.onload=l.onreadystatechange=null;l&&l.parentNode&&l.parentNode.removeChild(l)}};u||(u=document.getElementsByTagName("head")[0]);u.appendChild(l)}var X=0,u,s=this;COG.jsonp=function(k,l,r){k+=k.indexOf("?")>=0?"&":"?";var y="json"+ ++X;s[y]=function(Q){l(Q);s[y]=null;try{delete s[y]}catch(wa){}};
D(k+(r?r:"callback")+"="+y);return y}})();
(function(){var D=1.70158,X=Math.PI/2,u=Math.PI*2,s=1E3/60|0,k=Math.abs,l=Math.pow,r=Math.sin,y=Math.asin,Q=Math.cos,wa={linear:function(n,C,j,m){return j*n/m+C},backin:function(n,C,j,m){return j*(n/=m)*n*((D+1)*n-D)+C},backout:function(n,C,j,m){return j*((n=n/m-1)*n*((D+1)*n+D)+1)+C},backinout:function(n,C,j,m){return(n/=m/2)<1?j/2*n*n*(((D*=1.525)+1)*n-D)+C:j/2*((n-=2)*n*(((D*=1.525)+1)*n+D)+2)+C},bouncein:function(n,C,j,m){return j-wa.bounceout(m-n,0,j,m)+C},bounceout:function(n,C,j,m){return(n/=
m)<1/2.75?j*7.5625*n*n+C:n<2/2.75?j*(7.5625*(n-=1.5/2.75)*n+0.75)+C:n<2.5/2.75?j*(7.5625*(n-=2.25/2.75)*n+0.9375)+C:j*(7.5625*(n-=2.625/2.75)*n+0.984375)+C},bounceinout:function(n,C,j,m){return n<m/2?wa.bouncein(n*2,0,j,m)/2+C:wa.bounceout(n*2-m,0,j,m)/2+j/2+C},cubicin:function(n,C,j,m){return j*(n/=m)*n*n+C},cubicout:function(n,C,j,m){return j*((n=n/m-1)*n*n+1)+C},cubicinout:function(n,C,j,m){if((n/=m/2)<1)return j/2*n*n*n+C;return j/2*((n-=2)*n*n+2)+C},elasticin:function(n,C,j,m,w,M){if(n==0)return C;
if((n/=m)==1)return C+j;M||(M=m*0.3);if(!w||w<k(j)){w=j;j=M/4}else j=M/u*y(j/w);return-(w*l(2,10*(n-=1))*r((n*m-j)*u/M))+C},elasticout:function(n,C,j,m,w,M){var N;if(n==0)return C;if((n/=m)==1)return C+j;M||(M=m*0.3);if(!w||w<k(j)){w=j;N=M/4}else N=M/u*y(j/w);return w*l(2,-10*n)*r((n*m-N)*u/M)+j+C},elasticinout:function(n,C,j,m,w,M){var N;if(n==0)return C;if((n/=m/2)==2)return C+j;M||(M=m*0.3*1.5);if(!w||w<k(j)){w=j;N=M/4}else N=M/u*y(j/w);if(n<1)return-0.5*w*l(2,10*(n-=1))*r((n*m-N)*u/M)+C;return w*
l(2,-10*(n-=1))*r((n*m-N)*u/M)*0.5+j+C},quadin:function(n,C,j,m){return j*(n/=m)*n+C},quadout:function(n,C,j,m){return-j*(n/=m)*(n-2)+C},quadinout:function(n,C,j,m){if((n/=m/2)<1)return j/2*n*n+C;return-j/2*(--n*(n-2)-1)+C},sinein:function(n,C,j,m){return-j*Q(n/m*X)+j+C},sineout:function(n,C,j,m){return j*r(n/m*X)+C},sineinout:function(n,C,j,m){return-j/2*(Q(Math.PI*n/m)-1)+C}};COG.tweenValue=function(n,C,j,m,w){function M(O){O=O?O:(new Date).getTime();if(la+s<O){var ma=O-N,qa=j(ma,n,ka,m),ta=N+m<=
O;O=!ta;if(w){ma=w(qa,ta,ma);O=typeof ma!="undefined"?ma&&O:O}O&&animFrame(M)}}var N=(new Date).getTime(),la=0,ka=C-n;animFrame(M);return{}};COG.easing=function(n){return wa[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(n,C){wa[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]=C}})();
(function(){var D=/^P(\d+Y)?(\d+M)?(\d+D)?$/,X=/^(\d+H)?(\d+M)?(\d+S)?$/,u={8601:function(k){k=k.split("T");var l=null;l=null;var r=0,y=0;D.lastIndex=-1;l=D.exec(k[0]);r+=l[3]?parseInt(l[3].slice(0,-1),10):0;X.lastIndex=-1;l=X.exec(k[1]);y+=l[1]?parseInt(l[1].slice(0,-1),10)*3600:0;y+=l[2]?parseInt(l[2].slice(0,-1),10)*60:0;y+=l[3]?parseInt(l[3].slice(0,-1),10):0;return new s(r,y)}},s=COG.Duration=function(k,l){return{days:k?k:0,seconds:l?l:0}};COG.addDuration=function(){for(var k=new s,l=arguments.length;l--;){k.days+=
arguments[l].days;k.seconds+=arguments[l].seconds}if(k.seconds>=86400){k.days+=~~(k.seconds/86400);k.seconds%=86400}return k};COG.formatDuration=function(k){var l,r,y="";if(k.days)y=k.days+" days ";if(k.seconds){k=k.seconds;if(k>=3600){l=~~(k/3600);k-=l*3600}if(k>=60){r=Math.round(k/60);k-=r*60}if(l)y=y+l+(l>1?" hrs ":" hr ")+(r?(r>10?r:"0"+r)+" min ":"");else if(r)y=y+r+" min";else if(k>0)y=y+(k>10?k:"0"+k)+" sec"}return y};COG.parseDuration=function(k,l){var r=l?u[l]:null;if(r)return r(k);COG.Log.warn("Could not find duration parser for specified format: "+
l);return new s}})();COG.ObjectStore=function(){var D={},X={},u="obj_"+(new Date).getTime(),s=0,k=Object.prototype.hasOwnProperty;return{add:function(l,r){var y;r=r?r:"default";if(l&&l.constructor)if(!k.call(l,"id"))l.id=u+ ++s;y=X[r]?X[r]:X[r]=[];D[l.id]=y.length;y[l.length]=l}}};var CANI={};
(function(D){var X=[],u=0,s=false,k=D.register=function(l,r){X.push({section:l,run:r})};D.init=function(l){function r(){if(u<X.length){var Q=X[u++];y[Q.section]||(y[Q.section]={});Q.run(y[Q.section],r)}else{for(Q in y)D[Q]=y[Q];s=true;l&&l(D)}}var y={};if(s&&l)l(D);else{u=0;r()}};k("canvas",function(l,r){function y(){var C,j=Q.getContext("2d");j.save();try{j.translate(50,50);j.beginPath();j.rect(0,0,20,20);C=j.isPointInPath(10,10)}finally{j.restore()}return C}var Q=document.createElement("canvas"),
wa=typeof FlashCanvas!="undefined",n=typeof G_vmlCanvasManager!="undefnined";Q.width=200;Q.height=200;l.pipTransformed=wa||n?false:y();r()})})(CANI);
INTERACT=function(){function D(j){return function(m,w){j.addEventListener(m,w,false)}}function X(j){return function(m,w){j.removeEventListener(m,w,false)}}function u(j){return function(m,w){j.attachEvent("on"+m,w)}}function s(j,m){return{x:j?j:0,y:m?m:0,count:1}}function k(j,m){n.push(COG.extend({handler:null,checks:{},type:j},m))}function l(j){var m=0,w=0;if(j.offsetParent){do{m+=j.offsetLeft;w+=j.offsetTop;j=j.offsetParent}while(j)}return{left:m,top:w}}function r(j,m){return{source:j,target:m.target?
m.target:m.srcElement}}function y(j,m){for(var w=j.target?j.target:j.srcElement;w&&w!==m;)w=w.parentNode;return w&&w===m}function Q(j,m){return{x:j.x-(m?m.left:0),y:j.y-(m?m.top:0)}}function wa(j){if(j.preventDefault){j.preventDefault();j.stopPropagation()}else if(typeof j.cancelBubble!="undefined")j.cancelBubble=true}var n=[],C=function(j,m,w){function M(fa,ga,ia,L){var U=0,ca=0,A=0;COG.tweenValue(0,fa,ia,L,function(I){A=U;U=I});COG.tweenValue(0,ga,ia,L,function(I){N.trigger("pan",U-A,I-ca);ca=I})}
w=COG.extend({binder:null,unbinder:null,observable:null},w);for(var N=w.observable,la=null,ka=[],O=[],ma,qa,ta={bind:function(){return N.bind.apply(null,arguments)},pannable:function(fa){la=COG.extend({inertia:true},fa);return ta},unbind:function(){N.unbind();for(Ba=0;Ba<ka.length;Ba++)ka[Ba].unbind();return ta}},Ba=0;Ba<m.length;Ba++)ka.push(m[Ba](j,N,w));N.bind("pointerDown",function(){O=[];qa=ma=0});N.bind("pointerMove",function(fa,ga,ia,L){if(la){O[O.length]={ticks:(new Date).getTime(),x:L.x,
y:L.y};N.trigger("pan",L.x,L.y)}ma+=L.x?L.x:0;qa+=L.y?L.y:0});N.bind("pointerUp",function(fa,ga,ia){if(Math.abs(ma)>20||Math.abs(qa)>20){if(la){ia=O.length;var L,U;ga=0;for(U=O.length;--U>1&&ga<50;)ga+=O[U].ticks-O[U-1].ticks;if(ia-U>1){fa=O[ia-1].x-O[U].x;L=O[ia-1].y-O[U].y;U=Math.sqrt(fa*fa+L*L)|0;if(U>15){fa=O[ia-1].x-O[0].x;L=O[ia-1].y-O[0].y;U=Math.sqrt(fa*fa+L*L)|0;ia=Math.asin(L/U);ga=U*500/ga|0;ga=ga>300?300:ga;M(Math.cos(fa>0?ia:Math.PI-ia)*ga,Math.sin(ia)*ga,COG.easing("sine.out"),500)}}}}else N.trigger("tap",
ga,ia)});return ta};k("pointer",{handler:function(j,m,w){function M(A){if(A.pageX&&A.pageY)return s(A.pageX,A.pageY);else{var I=document.documentElement,V=document.body;return s(A.clientX+(I&&I.scrollLeft||V&&V.scrollLeft||0)-(I&&I.clientLeft||V&&V.clientLeft||0),A.clientY+(I&&I.scrollTop||V&&V.scrollTop||0)-(I&&I.clientTop||V&&V.clientTop||0))}}function N(A){if(y(A,j))if(fa=ma(A)){var I=M(A);j.style.cursor="move";wa(A,true);U=I.x;ca=I.y;ga=s(U,ca);m.triggerCustom("pointerDown",r("mouse",A),ga,Q(ga,
l(j)))}}function la(A){var I=M(A);ia=I.x;L=I.y;if(y(A,j))qa(A,fa?"pointerMove":"pointerHover")}function ka(A){if(fa&&ma(A)){fa=false;if(y(A,j)){j.style.cursor="default";qa(A,"pointerUp")}}}function O(A){if(y(A,j)){var I;A=A||window.event;if(A.detail)I=A.axis===2?-A.detail*ta:0;else{I=A.wheelDeltaY?A.wheelDeltaY:A.wheelDelta;if(window.opera)I=-I}if(I!==0){var V=s(ia,L);m.triggerCustom("zoom",r("mouse",A),V,Q(V,l(j)),I/Ba,"wheel");wa(A);A.returnValue=false}}}function ma(A){A=A||window.event;return(A.which||
A.button)==1}function qa(A,I,V,ra,Ga){V=typeof V!="undefined"?V:ia;ra=typeof ra!="undefined"?ra:L;var H=V-U,$=ra-ca,K=s(V,ra);m.triggerCustom(I,r("mouse",A),K,Q(K,l(j)),s(H,$));if(typeof Ga=="undefined"||Ga){U=V;ca=ra}}w=COG.extend({},w);var ta=120,Ba=ta*8,fa=false,ga,ia,L,U,ca;w.binder("mousedown",N);w.binder("mousemove",la);w.binder("mouseup",ka);w.binder("dblclick",function(A){COG.info("captured double click");if(y(A,j)){var I=M(A);m.triggerCustom("doubleTap",r("mouse",A),I,Q(I,l(j)))}});w.binder("mousewheel",
O);w.binder("DOMMouseScroll",O);return{unbind:function(){w.unbinder("mousedown",N);w.unbinder("mousemove",la);w.unbinder("mouseup",ka);w.unbinder("mousewheel",O);w.unbinder("DOMMouseScroll",O)}}},checks:{touch:false}});k("pointer",{handler:function(j,m,w){function M(H){if(H.count<2)return 0;var $=H.x-H.next.x;H=H.y-H.next.y;return~~Math.sqrt($*$+H*H)}function N(H,$,K){$=$?$:0;K=K?K:0;for(var za={x:H.x-$,y:H.y-K,id:H.id,count:H.count},xa=za;H.next;){H=H.next;xa=xa.next={x:H.x-$,y:H.y-K,id:H.id}}return za}
function la(H,$){var K=H[$?$:"touches"],za,xa;if(K.length===0)return null;xa=za={x:K[0].pageX,y:K[0].pageY,id:K[0].identifier,count:K.length};for(var Ea=1,Ya=K.length;Ea<Ya;Ea++)xa=xa.next={x:K[Ea].pageX,y:K[Ea].pageY,id:K[Ea].identifier};return za}function ka(H){if(y(H,j)){L=l(j);var $=la(H,"changedTouches"),K=N($,L.left,L.top);if(!ca){U=fa;m.triggerCustom("pointerDown",r("touch",H),$,K)}ra&&m.triggerCustom("pointerDownMulti",r("touch",H),$,K);ca=la(H);if(ca.count>1)I=M(ca);Ga=1;V=N(ca)}}function O(H){if(y(H,
j)){H.preventDefault();A=la(H);if(U==fa)U=Math.abs(ca.x-A.x)>ta||Math.abs(ca.y-A.y)>ta?Ba:fa;if(U!=fa){U=A.count>1?ia:ga;if(U==ia)if(ca.count===1){ca=N(A);I=M(ca)}else{var $=M(A);if(Math.abs(I-$)<qa)U=ga;else{var K;K=A.x;var za=A.next.x,xa=A.y,Ea=A.next.y,Ya=xa<Ea?xa:Ea;K={x:(K<za?K:za)+(Math.abs(K-za)>>1),y:Ya+(Math.abs(xa-Ea)>>1)};$=$/I;za=$-Ga;m.triggerCustom("zoom",r("touch",H),K,Q(K,L),za,"pinch");Ga=$}}U==ga&&m.triggerCustom("pointerMove",r("touch",H),A,N(A,L.left,L.top),s(A.x-V.x,A.y-V.y));
ra&&m.triggerCustom("pointerMoveMulti",r("touch",H),A,N(A,L.left,L.top))}V=N(A)}}function ma(H){if(y(H,j)){var $=la(H,"changedTouches"),K=N($,L.left,L.top);A=la(H);if(!A){m.triggerCustom("pointerUp",r("touch",H),$,K);ca=null}ra&&m.triggerCustom("pointerUpMulti",r("touch",H),$,K)}}w=COG.extend({detailed:false,inertia:false},w);var qa=20,ta=7,Ba=0,fa=1,ga=2,ia=3,L,U,ca,A,I,V,ra=w.detailed,Ga=1;w.binder("touchstart",ka);w.binder("touchmove",O);w.binder("touchend",ma);COG.info("initialized touch handler");
return{unbind:function(){w.unbinder("touchstart",ka);w.unbinder("touchmove",O);w.unbinder("touchend",ma)}}},checks:{touch:true}});return{register:k,watch:function(j,m,w){m=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},m);capabilities=COG.extend({touch:"ontouchstart"in window},w);if(!m.observable){COG.info("creating observable");m.observable=COG.observable({});globalOpts=m}m.binder=(m.isIE?u:D)(m.bindTarget||document);m.unbinder=(m.isIE?u:X)(m.bindTarget||
document);w=m.types;for(var M=capabilities,N=[],la=n.length;la--;){var ka=n[la],O=!w||w.indexOf(ka.type)>=0,ma=true;for(var qa in ka.checks){var ta=ka.checks[qa];COG.info("checking "+qa+" capability. require: "+ta+", capability = "+M[qa]);ma=ma&&ta===M[qa]}if(O&&ma)N[N.length]=ka.handler}return new C(j,N,m)}}}();var T5={};
(function(D){function X(){return(new Date).getTime()}function u(b,d){d=Sb.call(d);if(d=="finite")return!Tb[Ub](+b);return d=="null"&&b===null||d==typeof b||d=="object"&&b===Object(b)||d=="array"&&Array.isArray&&Array.isArray(b)||Vb.call(b).slice(8,-1).toLowerCase()==d}function s(b,d){this.x=b||0;this.y=d||0}function k(b,d,f,e){this.x=b||0;this.y=d||0;this.w=f||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function l(b){b=b||(new Date).getTime();for(var d=0;d<Ta.length;){var f=Ta[d],e=
Pa[f],a=Pa[f].image&&(cb||Pa[f].image.complete&&Pa[f].image.width>0),c=b-e.start;c=a||c>=Wb;if(a){a=e.callbacks;wb[f]=e.image;for(var g=0;g<a.length;g++)a[g](e.image,true)}if(c){Ta.splice(d,1);delete Pa[f]}else d++}Ta.length>0&&animFrame(l)}function r(b,d){var f=b&&d?wb[b]:null;if(f&&f&&(cb||f.complete&&f.width>0))d(f);else{if(f=Pa[b])f.callbacks.push(d);else{f=new Image;f.id="_ldimg"+ ++Xb;Pa[b]={start:(new Date).getTime(),image:f,callbacks:[d]};f.src=b;Ta[Ta.length]=b}animFrame(l)}}function y(b,
d,f,e,a,c){this.x=b;this.y=d;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+d;this.loaded=false;this.image=null}function Q(){for(var b=0,d=arguments.length;d--;){var f=Yb[arguments[d].toUpperCase()];if(f)b|=f}return b}function wa(b){b=b?b:(new Date).getTime();if(b-xb>Zb){for(var d=Za.splice(0),f=d.length;f--;)d[f](b);xb=b}Za.length&&animFrame(wa)}function n(b){var d=Za.length==0;Za[Za.length]=b;d&&animFrame(wa)}function C(b,d,f,e,a){a=COG.extend({easing:"sine.out",
duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),g=b[d],h=d=="translate",i=a.autoInvalidate,o=f.length&&e.length&&f.length==e.length?f.length:0,p=Array(o),G=Array(o),P=COG.easing(a.easing),F=a.duration,v=a.progress,z=function(E){var J=E-c;E=c+F<=E;for(var ba=b.layer?b.layer.view:null,ja,ua=o;ua--;){ja=P(J,f[ua],p[ua],F);G[ua]=h?ja|0:ja}g.apply(b,G);i&&ba&&ba.invalidate();if(v){J=[].concat(E?e:G);J.unshift(E);v.apply(b,J)}if(E){b.animations--;g.apply(b,e);
a.complete&&a.complete.apply(b,e)}else n(z)};if(g&&g.apply&&o>0){F=F?F:DEFAULT_DURATION;for(d=o;d--;)p[d]=e[d]-f[d];b.animations++;n(z)}}function j(b){b=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},b);Fa.call(this,b)}function m(b,d){d=COG.extend({simplify:false,fill:true,typeName:"Poly"},d);var f=d.simplify;Fa.call(this,d);COG.extend(this,{resync:function(e){var a,c,g,h,i,o;e.syncXY(b);o=this.points=Qa.floor(f?Qa.simplify(b):b);for(var p=o.length;p--;){e=
o[p].x;a=o[p].y;h=u(h,ya)||e<h?e:h;i=u(i,ya)||a<i?a:i;c=u(c,ya)||e>c?e:c;g=u(g,ya)||a>g?a:g}this.updateBounds(new k(h,i,c-h,g-i),true)}});this.haveData=b&&b.length>=2}function w(b,d){d.fill=false;m.call(this,b,d)}function M(b){function d(){if(h&&h.width>0){if(!this.centerOffset)this.centerOffset=new s(-h.width>>1,-h.height>>1);this.updateBounds(new k(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,h.width,h.height),false)}}function f(o){if(this.imageUrl=o){var p=this;r(this.imageUrl,function(G,
P){h=G;if(P){var F=i.layer?i.layer.view:null;F&&F.invalidate()}d.apply(p)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var e=null,a=Fa.prototype.resync,c=0,g=0,h=b.image;Fa.call(this,b);var i=COG.extend(this,{changeImage:f,drag:function(o,p,G,P){e||(e=new s(o.startX-this.xy.x,o.startY-this.xy.y));this.xy.x=p-e.x;this.xy.y=G-e.y;if(P){e=null;if(this.layer)if(o=this.layer.view){o.syncXY([this.xy],true);o.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||
d(this,h);return{image:h,x:this.xy.x+c,y:this.xy.y+g}},resync:function(o){a.call(this,o);d.call(this)}});h||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;g=this.centerOffset.y}}function N(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Qa.invert(b.imageAnchor);M.call(this,b)}function la(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);Fa.call(this,b)}function ka(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:Q("ACTIVE",
"ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;this.visible=true;COG.observable(COG.extend(this,b))}function O(b){for(var d=null,f=1;!d&&f<arguments.length;f++)d=ta(b,arguments[f]);d=d?d:ta(b);if(!d)throw Error("Unable to find GEO engine with "+b+" capability");return d}function ma(b){b=parseFloat(b)*Ha;b=K(b);var d=db*b;return H((1+b)/(1-b)*ra((1-d)/(1+d),db))/2}function qa(b){return L/(256<<b)}function ta(b,d){var f=null;for(var e in Ra)if(d){if(e==d&&Ra[e][b]){f=
Ra[e];break}}else if(Ra[e][b]){f=Ra[e];break}return f}function Ba(b,d){var f=db*K(b);return U-2*Ea(d*ra((1-f)/(1+f),db/2))}function fa(b,d,f,e){d=ga(d);b.add(e(d,f));return d.length}function ga(b){var d=b?b.length:0,f=Array(d);for(d=d;d--;)f[d]=ha.init(b[d][1],b[d][0]);return ha.vectorize(f,yb)}COG.observable(D);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var ia=Array.prototype.indexOf||function(b){for(var d=0;d<this.length;d++)if(this[d]===b)return d;return-1},L=Math.PI*2,U=Math.PI/2,ca=Math.abs,A=Math.ceil,I=Math.min,V=Math.max,ra=Math.pow,Ga=Math.sqrt,H=Math.log,$=Math.round,K=Math.sin,za=Math.asin,xa=Math.cos,Ea=Math.atan,Ya=Math.atan2,Ub="hasOwnProperty",Tb={NaN:1,Infinity:1,"-Infinity":1},Sb=String.prototype.toLowerCase,Vb=Object.prototype.toString,ya="undefined",zb="number",
$b=typeof G_vmlCanvasManager!=ya,cb=typeof FlashCanvas!=ya,ac=T5.newCanvas=function(b,d){var f=document.createElement("canvas");f.width=b?b:0;f.height=d?d:0;if(cb){document.body.appendChild(f);FlashCanvas.initElement(f)}$b&&G_vmlCanvasManager.initElement(f);return f},Ab=function(){var b={};return{init:function(d,f){var e=b[d];if(!e)throw Error("Unable to locate requested generator: "+d);return new e(f)},register:function(d,f){b[d]=f}}}();s.prototype={constructor:s};k.prototype={constructor:k};var Qa=
function(){function b(e,a){return f(e.x-a.x,e.y-a.y)}function d(e,a){a=a||e.length;if(a<=1)return null;for(var c=Array(a-1),g=Array(a-1),h=0,i,o=0;o<a-1;o++){i=b(e[o],e[o+1]);c[o]=Ga(i.x*i.x+i.y*i.y);g[o]=h+=c[o]}return{edges:c,accrued:g,tota:h}}function f(e,a){return new s(e,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var e=0,a=0,c=arguments.length;c--;){e+=arguments[c].x;a+=arguments[c].y}return f(e,a)},absSize:function(e){return V(ca(e.x),ca(e.y))},copy:function(e){return e?
f(e.x,e.y):null},diff:b,distance:function(e,a){return d(e,a).total},edges:d,equals:function(e,a){return e.x===a.x&&e.y===a.y},extendBy:function(e,a,c){var g=xa(a)*c|0;a=K(a)*c|0;return f(e.x-g,e.y-a)},floor:function(e){for(var a=Array(e.length),c=e.length;c--;)a[c]=f(~~e[c].x,~~e[c].y);return a},getRect:function(e){for(var a,c,g,h,i=e.length;i--;){var o=e[i];a=u(a,ya)||o.x<a?o.x:a;c=u(c,ya)||o.y<c?o.y:c;g=u(g,ya)||o.x>g?o.x:g;h=u(h,ya)||o.y>h?o.y:h}return new k(a,c,g-a,h-c)},init:f,invert:function(e){return f(-e.x,
-e.y)},min:function(e,a){return f(e.x<a.x?e.x:a.x,e.y<a.y?e.y:a.y)},max:function(e,a){return f(e.x>a.x?e.x:a.x,e.y>a.y?e.y:a.y)},offset:function(e,a,c){return f(e.x+a,e.y+(c||a))},scale:function(e,a){return f(e.x/a|0,e.y/a|0)},simplify:function(e,a){if(!e)return null;a=a?a:Qa.VECTOR_SIMPLIFICATION;for(var c=[],g=null,h=e.length;h--;){var i=e[h];if(include=!g||h===0||ca(i.x-g.x)+ca(i.y-g.y)>a){c.unshift(i);g=i}}return c},theta:function(e,a,c){c=za((e.y-a.y)/c);return e.x>a.x?c:Math.PI-c},toString:function(e){return e?
e.x+", "+e.y:""}}}(),ib=function(){return{dotProduct:function(b,d){return b.x*d.x+b.y*d.y}}}(),Ua=function(){function b(f){return d(f.x,f.y,f.x2,f.y2)}function d(f,e,a,c){return new k(f,e,(a||f)-f,(c||e)-e)}return{buffer:function(f,e,a){return Ua.init(f.x-e,f.y-(a||e),f.x2+e,f.y2+(a||e))},center:function(f){return new s(f.x+(f.w>>1),f.y+(f.h>>1))},copy:b,diagonalSize:function(f){return Ga(f.w*f.w+f.h*f.h)},fromCenter:function(f,e,a,c){a=a>>1;c=c>>1;return d(f-a,e-c,f+a,e+c)},init:d,intersect:function(f,
e){var a=V(f.x,e.x),c=V(f.y,e.y),g=I(f.x2,e.x2),h=I(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,e){if(f.w===0||f.h===0)return b(e);else if(e.w===0||e.h===0)return b(f);else{var a=I(f.x,e.x),c=I(f.y,e.y),g=V(f.x2,e.x2),h=V(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,d){var f=[],e={},a;for(a=d.length;a--;)e[d[a].target.id]=true;for(a=b.length;a--;)e[b[a].target.id]||
(f[f.length]=b[a]);return f},init:function(b,d,f,e){return{type:b,x:e.x|0,y:e.y|0,elements:[],absXY:d,relXY:f}},initHit:function(b,d,f){return{type:b,target:d,drag:f}},triggerEvent:function(b,d,f,e){d.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},e?e:b.elements,b.absXY,b.relXY,new s(b.x,b.y))}}}();var jb=function(b){function d(a,c){var g=f[a],h;g||(g=f[a]=[]);(h=g[c])||(h=g[c]=[]);return h}b=b||128;var f=[],e={};return{insert:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,o=(a.x+a.w)/b|0;a=(a.y+a.h)/
b|0;g=g||c.id||COG.objId("spatial");e[g]=c;for(c=h;c<=o;c++)for(h=i;h<=a;h++)d(c,h).push(g)},remove:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,o=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;delete e[g];for(c=h;c<=o;c++)for(h=i;h<=a;h++){var p=d(c,h),G=ia.call(p,g);G>=0&&p.splice(G,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,h=(a.y+a.h)/b|0,i=[],o=[];for(a=a.x/b|0;a<=g;a++)for(var p=c;p<=h;p++)i=i.concat(d(a,p));i.sort();for(c=i.length;c--;){g=i[c];if(h=e[g])o[o.length]=h;for(;c>0&&i[c-1]==g;)c--}return o}}},
Wb=3E4,wb={},Xb=0;(new Date).getTime();var Pa={},Ta=[];y.prototype={constructor:y,load:function(b){var d=this;r(this.url,function(f){d.loaded=true;d.image=f;b&&b()})}};var bc=function(){return COG.observable({applyStyle:function(){},applyTransform:function(b,d,f){return{restore:null,x:d,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new s},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},
reset:function(){}})},Bb={},Va=D.registerRenderer=function(b,d){Bb[b]=d},cc=D.attachRenderer=function(b,d,f,e){b=b.split("/");for(var a=new bc(d,f,e),c=0;c<b.length;c++){var g=Bb[b[c]];if(g)a=new g(d,f,e,a)}return a};Va("canvas",function(b,d,f,e){function a(B,aa,S){var da,Y;F[aa]=function(R){for(da=ja.length;da--;)if(Y=S[ja[da]])R[ua[da]]=Y}}function c(B,aa,S,da){var Y=false;if(aa)Y=p.isPointInPath(z?aa.x-G:aa.relXY.x,z?aa.y-P:aa.relXY.y);return{draw:da||ba,viewport:B,state:S,hit:Y,vpX:G,vpY:P,context:p}}
f=COG.extend({},f);var g,h,i,o=false,p,G=0,P=0,F={},v=null,z=CANI.canvas.pipTransformed,E={},J=function(){},ba=function(){this.fill&&p.fill();this.stroke&&p.stroke()},ja=["fill","stroke","lineWidth","opacity"],ua=["fillStyle","strokeStyle","lineWidth","globalAlpha"];(function(){if(d){var B=d.tagName=="CANVAS",aa=B?d.parentNode:d;g=b.width=aa.offsetWidth;h=b.height=aa.offsetHeight;if(B){i=d;i.width=g;i.height=h;cb&&FlashCanvas.initElement(i)}else{i=ac(g,h);i.style.cssText="position: absolute; z-index: 1;";
o=true;d.appendChild(i)}p=null}})();f=COG.extend(e,{applyStyle:function(B){var aa=F[B],S=p&&p.canvas?p.canvas.id:"default",da;E[S]||(E[S]=[]);da=E[S].pop()||"basic";if(aa){E[S].push(B);aa(p);return da}},applyTransform:function(B){if(B.translateX!==0||B.translateY!==0||B.scaling!==1||B.rotation!==0){p.save();v={undo:function(){p.restore();v=null},x:B.xy.x,y:B.xy.y};p.translate(B.xy.x-G+B.translateX,B.xy.y-P+B.translateY);B.rotation!==0&&p.rotate(B.rotation);B.scaling!==1&&p.scale(B.scaling,B.scaling)}return v},
drawTiles:function(B,aa){for(var S,da,Y=G-256,R=P-256,W=B.x2,pa=B.y2,va=aa.length;va--;){S=aa[va];if(da=S.x>=Y&&S.x<=W&&S.y>=R&&S.y<=pa)S.loaded?p.drawImage(S.image,S.x-G,S.y-P):S.load(b.invalidate)}},prepare:function(B,aa){var S,da=false,Y=aa.scaled||aa,R=aa.scaleFactor;if(p)p.restore();else p=i.getContext("2d");for(S=B.length;S--;)da=da||B[S].clip;G=Y.x;P=Y.y;if(p){da||p.clearRect(0,0,g,h);p.save();p.scale(R,R)}p.globalCompositeOperation="source-over";return p},prepArc:function(B,aa,S,da){p.beginPath();
p.arc(B.xy.x-(v?v.x:G),B.xy.y-(v?v.y:P),B.size>>1,B.startAngle,B.endAngle,false);return c(aa,S,da)},prepImage:function(B,aa,S,da,Y){var R=(Y.x||B.xy.x)-(v?v.x:G),W=(Y.y||B.xy.y)-(v?v.y:P),pa=Y.image||B.image;if(pa){p.beginPath();p.rect(R,W,Y.width||pa.width,Y.height||pa.height);return c(aa,S,da,function(){p.drawImage(pa,R,W,Y.width||pa.width,Y.height||pa.height)})}},prepMarker:function(B,aa,S,da){var Y=B.xy.x-(v?v.x:G),R=B.xy.y-(v?v.y:P),W=B.size,pa=undefined;p.beginPath();switch(B.markerStyle.toLowerCase()){case "image":pa=
J;p.rect(Y-(W>>1),R-(W>>1),W,W);if(B.reset&&B.image){B.image=null;B.reset=false}B.image?p.drawImage(B.image,Y-(W>>1),R-(W>>1),W,W):r(B.imageUrl,function(va){B.image=va;p.drawImage(B.image,Y-(W>>1),R-(W>>1),W,W)});break;default:p.moveTo(Y,R);p.lineTo(Y-(W>>1),R-W);p.lineTo(Y+(W>>1),R-W);p.lineTo(Y,R);break}return c(aa,S,da,pa)},prepPoly:function(B,aa,S,da,Y){var R=true;B=Y.points||B.points;Y=v?v.x:G;var W=v?v.y:P;p.beginPath();for(var pa=B.length;pa--;){var va=B[pa].x-Y,eb=B[pa].y-W;if(R){p.moveTo(va,
eb);R=false}else p.lineTo(va,eb)}return c(aa,S,da)},getContext:function(){return p},getDimensions:function(){return{width:g,height:h}},getOffset:function(){return new s(G,P)}});(function(){for(var B in T5.styles)a(null,B,T5.styles[B]);T5.bind("styleDefined",a)})();f.bind("detach",function(){o&&d.removeChild(i)});return f});var kb=D.styles={},dc=D.defineStyle=function(b,d){kb[b]=d;D.trigger("styleDefined",b,kb[b]);return b},Cb=D.defineStyles=function(b){for(var d in b)dc(d,b[d])};D.getStyle=function(b){return kb[b]};
D.loadStyles=function(b){COG.jsonp(b,function(d){Cb(d)})};Cb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Yb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Lb=function(b){function d(q,t,x){if(!va){da(na-t,oa-x);Z.trigger("pan",na,oa)}}function f(q,t,x,T){B(I(V(sa+ra(2,T)-1,0.5),2))}function e(){var q=H(sa)/Math.LN2|0;if(q!==0){sa=ra(2,q);aa($a+q,ec,fc)}redraw=true}
function a(q,t){var x=renderer&&renderer.projectXY?renderer.projectXY(q,t):null;if(!x){x=Z.getViewport();var T=1/sa;x=new s(x?x.x+q*T:q,x?x.y+t*T:t)}return x}function c(q,t,x){S("doubleTap",t,x,a(x.x,x.y));b.scalable&&B(2,a(x.x,x.y),b.zoomEasing,null,b.zoomDuration)}function g(q,t,x){va=null;J("down",t,x)}function h(q,t,x){J("hover",t,x)}function i(q,t,x){z(t,x,false)}function o(q,t,x){z(t,x,true)}function p(){clearTimeout(Db);Db=setTimeout(function(){renderer.checkSize()},250)}function G(q,t,x){J("tap",
t,x);S("tap",t,x,a(x.x,x.y,true))}function P(q){renderer=cc(q||b.renderer,Z,pa,b);Eb=!renderer.preventPartialScale;v()}function F(q,t){t.id=q;t.added=X();t.view=Z;t.trigger("parentChange",Z,pa,gc);R.push(t);R.sort(function(x,T){var ea=T.zindex-x.zindex;if(ea===0)ea=T.added-x.added;return ea});W=R.length;return t}function v(){Ca&&Ca.unbind();if(renderer){Ca=INTERACT.watch(renderer.interactTarget||pa);b.pannable&&Ca.pannable().bind("pan",d);if(b.scalable){Ca.bind("zoom",f);Ca.bind("doubleTap",c)}Ca.bind("pointerDown",
g);Ca.bind("pointerMove",i);Ca.bind("pointerUp",o);b.captureHover&&Ca.bind("pointerHover",h);Ca.bind("tap",G)}}function z(q,t,x){if(va){q=a(t.x,t.y);if(va.drag.call(va.target,va,q.x,q.y,x))redraw=true;if(x)va=null}}function E(q){var t,x,T=false;q=q||(new Date).getTime();if(T=q-Fb>hc){var ea=ca(na-lb),Aa=ca(oa-mb);t=na!==nb||oa!==ob;x=sa!==Gb;if(t||x)Ja++;if(ea>=Hb||Aa>=Hb)ua();x={index:eb++,draw:Ja};Z.trigger("enterFrame",q,x);Fb=q}if(renderer&&T&&x.draw){Ka=Ib|(sa!==1?Jb:0)|(t?pb:0)|(qb?Kb:0);rb=
(t=(Ka&(Jb|pb))!==0)&&(Ka&Kb)===0;t=ja();renderer.trigger("predraw",t,Ka);if(renderer.prepare(R,t,Ka,q,Da)){Ja=0;for(ii=W;ii--;){T=R[ii];if(T.visible&&(Ka&T.validStates)!==0){x=T.style?renderer.applyStyle(T.style,true):null;T.draw(renderer,t,Ka,Z,q,Da);x&&renderer.applyStyle(x)}}renderer.render(t);Z.trigger("drawComplete",t,q);nb=na;ob=oa;Gb=sa}if(Da){q=Da?Da.elements:[];if(ab&&ab.type==="hover"){t=Hits.diffHits(ab.elements,q);t.length>0&&Hits.triggerEvent(ab,Z,"Out",t)}if(q.length>0){T=Da.x;x=Da.y;
for(t=q.length;t--;){ea=q[t];Aa=T;var La=x,Ia=ea&&ea.drag&&(!ea.canDrag||ea.canDrag(ea,Aa,La));if(Ia){va=ea;va.startX=Aa;va.startY=La}if(Ia)break}Hits.triggerEvent(Da,Z)}ab=q.length>0?COG.extend({},Da):null;Da=null}}animFrame(E)}function J(q,t,x){Da=Hits.init(q,t,x,a(x.x,x.y,true));for(q=W;q--;)sb=sb||(R[q].hitGuess?R[q].hitGuess(Da.x,Da.y,Ka,Z):false);sb&&Ja++}function ba(){Ja++}function ja(){var q=new k(na,oa,Z.width,Z.height);q.scaleFactor=sa;if(sa!==1)q.scaled=Ua.fromCenter(na+(Z.width>>1),oa+
(Z.height>>1),Z.width/sa|0,Z.height/sa|0);return q}function ua(){var q=ja();if(q){if(Wa||Xa)if(q){var t=fb?na+(q.w>>1):na,x=gb?oa+(q.h>>1):oa,T=q.w,ea=q.h;if(Wa&&Wa>T)if(t+T>Wa)na=fb?na:Wa-T;else if(t<0)na=fb?na:0;if(Xa&&Xa>ea)if(x+ea>Xa)oa=gb?oa:Xa-ea;else if(x<0)oa=gb?oa:0}lb=na;mb=oa;S("refresh",Z,q);Ja++}}function B(q,t,x,T,ea){var Aa;if(!Eb){x=false;Aa=$(H(q)/Math.LN2);q=ra(2,Aa)}if(x)COG.tweenValue(sa,q,x,ea,function(La,Ia){sa=La;if(Ia){Aa=$(H(sa)/Math.LN2);sa=ra(2,Aa);T&&T()}e()});else{sa=
q;e()}return Z}function aa(q,t,x){q=V(b.minZoom,I(b.maxZoom,q));if(q!==$a){var T=ra(2,q-$a),ea=Z.width>>1,Aa=Z.height>>1,La=ea/T|0,Ia=Aa/T|0;$a=q;da(((t?t:na+ea)-La)*T,((x?x:oa+Aa)-Ia)*T);nb=na;ob=oa;mb=lb=0;S("zoomLevelChange",q);sa=1;renderer.reset();ua()}}function S(){for(var q=Z.trigger.apply(null,arguments).cancel,t=R.length;t--;)q=R[t].trigger.apply(null,arguments).cancel||q;return!q}function da(q,t,x,T,ea){function Aa(){La+=1;if(La>=2){qb=false;ea&&ea()}}var La=0;if(x){if((Ka&pb)===0){COG.tweenValue(na,
q,x,T,function(Ia,tb){na=Ia|0;(tb?Aa:ba)();return!rb});COG.tweenValue(oa,t,x,T,function(Ia,tb){oa=Ia|0;(tb?Aa:ba)();return!rb});qb=true}}else{na=q|0;oa=t|0;ea&&ea()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,
renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},b);var Y={},R=[],W=0,pa=document.getElementById(b.container),va=null,eb=0,gc=null,ic=!u(window.attachEvent,ya),sb=false,Hb=b.refreshDistance,na=0,oa=0,lb=0,mb=0,nb=0,ob=0,Wa=null,Xa=null,fb=false,gb=false,Da=null,rb=false,ab=null,Db=0,sa=1,Gb=1,Fb=0,Ca=null,Eb=true,qb=false,hc=1E3/b.fps|0,Ja=0,ec,fc,$a=b.zoomLevel,Ib=Q("ACTIVE"),pb=Q("PAN"),Jb=Q("ZOOM"),Kb=Q("ANIMATING"),Ka=Ib,Z={id:b.id,detach:function(){renderer&&
renderer.trigger("detach");Ca&&Ca.unbind()},eachLayer:function(q){for(var t=W;t--;)q(R[t])},getLayer:function(q){for(var t=0;t<W;t++)if(R[t].id===q)return R[t];return null},getZoomLevel:function(){return $a},setLayer:function(q,t){for(var x=0;x<W;x++)if(R[x].id===q){R.splice(x,1);break}if(t){F(q,t);t.trigger("refresh",Z,ja());Z.trigger("layerChange",Z,t)}Ja++;return t},invalidate:ba,refresh:ua,resetScale:function(){sa=1},scale:B,setZoomLevel:aa,syncXY:function(){},triggerAll:S,removeLayer:function(q){a:{for(var t=
W;t--;)if(R[t].id===q){q=t;break a}q=-1}if(q>=0&&q<W){Z.trigger("layerRemove",Z,R[q]);R.splice(q,1);Ja++}W=R.length},getOffset:function(){return new s(na,oa)},getRenderer:function(){return renderer},getScaleFactor:function(){return sa},setMaxOffset:function(q,t,x,T){Wa=q;Xa=t;fb=x;gb=T},getViewport:ja,updateOffset:da,pan:function(q,t,x,T,ea){da(na+q,oa+t,x,T,ea)}};COG.observable(Z);Z.bind("resync",function(){});COG.configurable(Z,["container","captureHover","captureDrag","scalable","pannable","inertia",
"minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(b,null,{container:function(q,t){pa=document.getElementById(t);P()},inertia:v,captureHover:v,scalable:v,pannable:v,renderer:function(q,t){if(renderer){renderer.trigger("detach");renderer=null}P(t);Ja++}}),true);CANI.init(function(q){Z.markers=F("markers",new hb({zindex:20}));Y=q;P();ic?window.attachEvent("onresize",p):window.addEventListener("resize",p,false)});animFrame(E);return Z},Fa=function(b){b=COG.extend({style:null,xy:null,size:10,fill:false,
stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Fa.prototype={constructor:Fa,animate:function(b,d,f,e){C(this,b,d,f,e)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds(Ua.fromCenter(this.xy.x,this.xy.y,this.size,
this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=b},translate:function(b,d){this.translateX=b;this.translateY=d},updateBounds:function(b,d){b&&(!this.bounds||b.x!=this.bounds.x||b.y!=this.bounds.y)&&this.trigger("move",this,b,this.bounds);this.bounds=b;if(d)this.xy=Ua.center(this.bounds)}};var Zb=1E3/60|0,Za=[],xb=0;j.prototype=COG.extend(Fa.prototype,{constructor:j});m.prototype=COG.extend({},Fa.prototype,{constructor:m});w.prototype=COG.extend({},m.prototype);M.prototype=
COG.extend({},Fa.prototype,{constructor:M});N.prototype=COG.extend({},M.prototype,{constructor:N});la.prototype=COG.extend(Fa.prototype,{constructor:la});ka.prototype={constructor:ka,clip:null,cycle:function(){},draw:function(){},hitGuess:null};Va=function(b,d){function f(h,i){var o=i&&i.getZoomLevel?i.getZoomLevel():0;c[o]||(c[o]=new jb);a=c[o]}d=COG.extend({imageLoadArgs:{}},d);var e=b?Ab.init(b,d).run:null,a=null,c=[],g=COG.extend(new ka(d),{draw:function(h,i){h.drawTiles(i,a.search(Ua.buffer(i,
128)))}});g.bind("refresh",function(h,i,o){var p=(new Date).getTime();a&&e(i,o,a,function(){i.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-p)+" ms")})});g.bind("parentChange",f);g.bind("resync",f);return g};var Mb=function(b){function d(i){clearTimeout(g);g=setTimeout(function(){a.sort(function(o,p){if(p.xy&&o.xy){var G=p.xy.y-o.xy.y;return G!=0?G:p.xy.x-o.xy.x}});i&&i.invalidate()},50)}function f(i,o,p,G){G&&c.remove(G,o);c.insert(p,o)}function e(i,o){for(var p=a.length;p--;)a[p].resync(o)}
b=COG.extend({zindex:10},b);var a=[],c=new jb,g=0,h=COG.extend(new ka(b),{itemCount:0,add:function(i,o){if(i){i.layer=h;if(o)a.unshift(i);else a[a.length]=i;var p=h.view;if(p){i.resync(p);c&&i.bounds&&c.insert(i.bounds,i);d(p)}i.bind("move",f)}h.itemCount=a.length},clear:function(){c=new jb;a=[];h.itemCount=0},draw:function(i,o,p,G,P,F){G={};P=c&&o?c.search(o):[];for(var v=P.length;v--;){var z=P[v],E=z.style||h.style,J,ba=i.applyTransform(z),ja=z.getProps?z.getProps(i,p):G;if(ja=(J=i["prep"+z.typeName])?
J.call(i,z,o,F,p,ja):null){if(F&&ja.hit){F.elements.push(Hits.initHit(z.type,z,z.draggable?z.drag:null));J=F.type+"Style";E=z[J]||h[J]||E}E=E?i.applyStyle(E,true):null;(J=z.draw||ja.draw)&&J.call(z,ja);E&&i.applyStyle(E)}ba&&ba.undo&&ba.undo()}},find:function(){return[].concat(a)},hitGuess:function(i,o){return c&&c.search({x:i-10,y:o-10,w:20,h:20}).length>0}});h.bind("parentChange",e);h.bind("resync",e);return h},hb=function(b){return new Mb(b)};COG.extend(D,{ex:COG.extend,is:u,ticks:X,userMessage:function(b,
d,f){D.trigger("userMessage",b,d,f)},indexOf:ia,Rect:k,XY:Qa,XYRect:Ua,Vector:ib,Hits:Hits,Generator:Ab,tweenValue:COG.tweenValue,easing:COG.easing,Tile:y,TileLayer:Va,getImage:r,viewState:Q,View:Lb,ViewLayer:ka,ImageLayer:Va,Drawable:Fa,Marker:j,Poly:m,Line:w,Arc:la,ImageDrawable:M,ImageMarker:N,DrawLayer:Mb,ShapeLayer:hb});var ub=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ha=Math.PI/180,Oa=180/Math.PI,vb=U,Nb=-vb,Ob=L,jc=-Ob,db=0.08181919084262157,
bb=null,Pb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ha=function(){function b(a){return a?f(a.lat,a.lon):null}function d(a){return!a||a.lat===0&&a.lon===0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function e(a){if(a)if(u(a.lat,zb))return b(a);else{if(a.split)for(var c=[" ",","],g=0;g<c.length;g++){var h=a.split(c[g]);if(h.length===2)return f(h[0],h[1])}}else return f();return null}return{calcDistance:function(a,
c){if(d(a)||d(c))return 0;var g=(c.lat-a.lat)*Ha>>1,h=(c.lon-a.lon)*Ha>>1;g=K(g)*K(g)+xa(a.lat*Ha)*xa(c.lat*Ha)*K(h)*K(h);return 6371*2*Ya(Ga(g),Ga(1-g))},copy:b,empty:d,equal:function(a,c){return a&&c&&a.lat==c.lat&&a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=ra(Math.E,-c),h=U-2*Ea(g),i=Ba(h,g),o=0;o<12&&ca(h-i)>1.0E-7;){h=i;i=Ba(h,g);o++}return f(i*Oa,a%360*Oa)},generalize:function(a,c,g){var h=a.length,i=[],o=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+
c.length+" positions");for(var p=h;p--;)if(p===0)i.unshift(a[p]);else{var G=!o||ha.inArray(a[p],c)?g:ha.calcDistance(o,a[p]);if(a[p]&&G>=g){i.unshift(a[p]);o=a[p]}}COG.info("generalized "+h+" positions into "+i.length+" positions");return i},inArray:function(a,c){for(var g=ha.equal,h=c.length;h--;)if(g(a,c[h]))return true;return false},inBounds:function(a,c){var g=!(ha.empty(a)||ha.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,
c,g){var h=a.lat*Ha;a=a.lon*Ha;c=h+c/6371;g=za(K(g/6371)/xa(h));g=a+g;c=(c+U)%Math.PI-U;g%=L;return f(c*Oa,g*Oa)},parse:e,parseArray:function(a){var c=a.length,g=Array(c);for(c=c;c--;)g[c]=e(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*Ha,ma(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var p=0,G=c.chunkSize,P=h;P--;){i[P]=T5.GeoXY.init(a[P]);p+=1;if(p>G)break}h=P;if(h<=0)c.callback&&c.callback(i);else animFrame(g)}
var h=a.length,i=Array(h);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var o=h;o--;)i[o]=T5.GeoXY.init(a[o]);return i}animFrame(g);return null}}}(),Ma=function(){function b(a,c,g){var h=new s(0,c.lat-a.lat);h.x=(g||u(g,ya))&&a.lon>c.lon?360-a.lon+c.lon:c.lon-a.lon;return h}function d(a,c){return Ma.init(ha.init(a.min.lat-c,a.min.lon-c%360),ha.init(a.max.lat+c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ha.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function e(a,
c){return{min:ha.parse(a),max:ha.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,h=a.lat*Ha,i=a.lon*Ha,o=h-g,p=h+g;if(o>Nb&&p<vb){h=za(K(g)/xa(h));g=(i-h)%L;i=(i+h)%L}else{o=V(o,Nb);p=I(p,vb);g=jc;i=Ob}return Ma.init(ha.init(o*Oa,g*Oa),ha.init(p*Oa,i*Oa))},expand:d,forPositions:function(a,c){var g=null,h=T5.ticks();c||(c="auto");for(var i=a.length;i--;)if(g){var o=b(g.min,a[i],false),p=b(a[i],g.max,false);if(o.x<0)g.min.lon=a[i].lon;if(o.y<0)g.min.lat=a[i].lat;if(p.x<
0)g.max.lon=a[i].lon;if(p.y<0)g.max.lat=a[i].lat}else g=e(a[i],a[i]);if(c){if(c=="auto"){i=b(g.min,g.max);c=V(i.x,i.y)*0.3}g=d(g,c)}COG.trace("calculated bounds for "+a.length+" positions",h);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,c){var g=f(a);g=I($(ca(g.lat)*0.05),ub.length);var h=ub[g],i=b(a.min,a.max);g=A(H(ub[3]*c.h/i.y)/H(2));
h=A(H(h*c.w/i.x)/H(2));return I(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:e,isEmpty:function(a){return!a||ha.empty(a.min)||ha.empty(a.max)},toString:function(a){return"min: "+ha.toString(a.min)+", max: "+ha.toString(a.max)}}}();ib=function(){var b=/^(\d+).*$/,d=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(f,e){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=e.split(","),g=0;g<c.length;g++){d.lastIndex=-1;if(d.test(c[g])){var h=d.exec(c[g]);if(a>=parseInt(h[1],10)&&a<=parseInt(h[2],10))return true}else if(a==
c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!bb){var e=[];for(var a in Pb)e.push(a);bb=RegExp("(\\s)("+e.join("|")+")(\\s|$)","i")}bb.lastIndex=-1;if(e=bb.exec(f))f=f.replace(bb,"$1"+Pb[e[2]]);return f},toString:function(f){return f.streetDetails+" "+f.location}}}();var Na=D.GeoXY=function(){function b(e,a){if(e.length){for(var c,g,h,i,o=e.length;o--;){b(e[o],a);c=u(c,ya)||e.x<c?e.x:c;g=u(g,ya)||e.y<g?e.y:g;h=u(h,ya)||e.x>h?e.x:h;i=u(i,ya)||e.y>i?e.y:i}return new k(c,
g,h-c,i-g)}else if(e.mercXY){c=e.mercXY;e.x=(c.x+Math.PI)/a|0;e.y=(Math.PI-c.y)/a|0;e.rpp=a}return e}function d(e,a){if(e.length)for(var c=e.length;c--;)d(e[c],a);else{e.mercXY=new s(e.x*a-Math.PI,Math.PI-e.y*a);e.pos=ha.fromMercatorPixels(e.mercXY.x,e.mercXY.y)}return e}function f(e,a,c){e.pos=a;e.mercXY=ha.toMercatorPixels(a);(c=u(c,zb)?c:e.rpp)&&b(e,c)}return{init:function(e,a){var c=new s;f(c,e,a);return c},sync:b,syncPos:d,toPos:function(e,a){a=a||e.rpp;return ha.fromMercatorPixels(e.x*a-Math.PI,
Math.PI-e.y*a)},updatePos:f}}(),Ra={};Va=function(){return{bestResults:function(b,d){d||(d=20);for(var f=b.length>0?b[0]:null,e=[],a=0;a<b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=d)e.push(b[a]);else break;return e}}}();var Qb=function(b){b=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})},kc=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&
ha.vectorize(c.geometry,{callback:function(h){g.add(new T5.Line(h,{style:"waypoints",simplify:true}));a.setLayer("route",g)}})}function d(a){for(var c=f.Unknown,g=e,h=0;h<g.length;h++){g[h].regex.lastIndex=-1;var i=g[h].regex.exec(a);if(i){c=g[h].customCheck?g[h].customCheck(a,i):g[h].turnType;break}}return c}var f={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",
TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},e=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:
f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});a.push({regex:/take.*?ramp/i,turnType:f.Ramp});a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",
waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=O("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=ha.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:d,TurnType:f,Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,
"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=d(a.description);return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Ma.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&c.push(a.instructions[g].position);return c}},a)}}}(),lc="featurecollection",mc="feature",yb={async:false},Sa={processor:null,group:"shapes",layerClass:hb},
nc={point:COG.extend({},Sa,{processor:function(b,d,f,e){d=ga([d.coordinates],yb);if(d.length>0)if(f=e.marker(d[0],f)){b.add(f);return d.length}},group:"markers",layerClass:hb}),linestring:COG.extend({},Sa,{processor:function(b,d,f,e){d=ga(d&&d.coordinates?d.coordinates:[]);return fa(b,d,f,e.line)}}),multilinestring:COG.extend({},Sa,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=d.length;c--;)a+=fa(b,d[c],f,e.line);return a}}),polygon:COG.extend({},Sa,{processor:function(b,
d,f,e){d=d&&d.coordinates?d.coordinates:[];if(d.length>0)return fa(b,d[0],f,e.poly);return 0}}),multipolygon:COG.extend({},Sa,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=0;c<d.length;c++)a+=fa(b,d[c][0],f,e.poly);return a}})},Rb=function(b,d,f,e){function a(z,E){var J=z.processor,ba=o+z.group,ja=COG.extend({},z,f,{properties:E.properties});if(J){var ua=v[ba];if(!ua){ua=new z.layerClass({id:ba});v[ba]=ua}return J(ua,E.data,ja,e)}return 0}function c(z,E){var J=z&&
z.type?z.type.toLowerCase():null;return J&&J===mc?c(z.geometry,z.properties):{type:J,isCollection:J?J===lc:false,definition:nc[J],data:z,properties:E?E:z.properties}}function g(z){var E=0,J=COG.extend({},f),ba=p;z=z?z:(new Date).getTime();if(!P){for(;ba<G;ba++){z=c(i?i(b[ba]):b[ba]);var ja=null;if(z.isCollection){J.layerPrefix=o+F++ +"-";P=new Rb(z.data.features,function(ua){P=null;for(var B in ua)v[B]=ua[B];p>=G&&d&&d(v)},J);ja+=1}else if(z.definition)ja=a(z.definition,z);E+=ja?ja:1;if(E>=h)break}p=
ba+1;if(P||p<G)animFrame(g);else d&&d(v)}}f=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},f);e=COG.extend({marker:function(z){return new j({xy:z})},line:function(z,E){return new m(z,COG.extend({},f,E))},poly:function(z,E){return new m(z,COG.extend({fill:true},f,E))}},e);var h=500,i=f.rowPreParse,o=f.layerPrefix,p=0,G=0,P=null,F=0,v={};if(b){u(b,"array")||(b=[b]);G=b.length;animFrame(g)}};Sa=D.GeoJSON={parse:function(b,d,f){return new Rb(b,d,f)}};D.Map=function(b){function d(v){try{var z=
ha.init(v.coords.latitude,v.coords.longitude),E=v.coords.accuracy/1E3;F.trigger("locationUpdate",v,E);if(p){if(!i){i=new UI.LocationOverlay({pos:z,accuracy:E});i.update(F.getTileLayer());F.setLayer("location",i)}var J=Ma.createBoundsFromCenter(z,Math.max(E,1));F.gotoBounds(J)}else{i.pos=z;i.accuracy=E;i.update(F.getTileLayer());a(z,null,COG.easing("sine.out"))}p=false}catch(ba){COG.exception(ba)}}function f(v){COG.info("caught location tracking error:",v)}function e(v,z,E){F.setZoomLevel(z);a(v,E)}
function a(v,z,E,J){v=Na.init(v,qa(F.getZoomLevel()));F.updateOffset(v.x-(F.width>>1),v.y-(F.height>>1),E,J,function(){z&&z(F)})}b=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2},g=new s,h=c.NONE,i=null,o=0,p=true,G=0,P=b.tapExtent;b.adjustScaleFactor=function(v){return Math.pow(2,(v<1?Math.floor:Math.ceil)(Math.log(v)))};var F=COG.extend(new Lb(b),{getBoundingBox:function(){var v=F.getViewport();return v?Ma.init(Na.toPos(new s(v.x,
v.y2),G),Na.toPos(new s(v.x2,v.y),G)):null},getCenterPosition:function(){var v=F.getViewport();if(v){v=new s(v.x+(v.w>>1),v.y+(v.h>>1));return Na.toPos(v,G)}return null},gotoBounds:function(v,z){var E=Ma.getZoomLevel(v,F.getViewport());e(Ma.getCenter(v),E,z)},gotoPosition:e,panToPosition:a,syncXY:function(v,z){return(z?Na.syncPos:Na.sync)(v,G)},locate:function(){F.trackStart(c.SINGLE);setTimeout(F.trackCancel,1E4)},trackStart:function(v){if(navigator.geolocation&&!o){h=v?v:c.WATCH;p=true;o=navigator.geolocation.watchPosition(d,
f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},trackCancel:function(){o&&navigator.geolocation&&navigator.geolocation.clearWatch(o);F.removeLayer("location");i=null;h=c.NONE;o=0},animateRoute:function(v,z,E,J){var ba=F.getLayer("route");if(ba)(v=ba.getAnimation(v,z,E,J))&&v.addToView(F)}});F.bind("pan",function(){h===c.SINGLE&&F.trackCancel()});F.bind("tap",function(v,z,E,J){v=Na.toPos(J,G);var ba=Na.toPos(Qa.offset(J,-P,P),G);J=Na.toPos(Qa.offset(J,P,-P),G);F.trigger("geotap",z,E,v,Ma.init(ba,
J))});F.bind("refresh",function(v,z,E){if(g.x!=E.x||g.y!=E.y){F.trigger("boundsChange",F.getBoundingBox());g.x=E.x;g.y=E.y}});F.bind("zoomLevelChange",function(v,z){var E;G=qa(z);E=L/G|0;F.setMaxOffset(E,E,true,false);F.resetScale();F.triggerAll("resync",F)});return F};D.GeoShape=function(b,d){d=COG.extend({autoParse:true},d);for(var f=Array(b.length),e=d.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(e?a(b[c]):b[c]);return new T5.Poly(f,d)};D.LocationOverlay=function(b){b=COG.extend({pos:null,
accuracy:null,zindex:90},b);var d=new Image,f=T5.XY.init(),e=T5.XY.init(),a=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
d.onload=function(){f=T5.XY.init(d.width>>1,d.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,h){var i=e.x-h.x,o=e.y-h.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(i,o,a,0,Math.PI*2,false);g.fill()}d.complete&&d.width>0&&g.drawImage(d,i-f.x,o-f.y,d.width,d.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;e=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,h){c.update(h)});
return c};D.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:O,radsPerPixel:qa,Position:ha,BoundingBox:Ma,Radius:function(b,d){return{distance:parseInt(b,10),uom:d}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:ib,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var d=COG.extend({remove:function(){delete Ra[d.id]}},b);return Ra[d.id]=d},Search:Va,GeoSearchResult:Qb,LocationSearch:function(b){function d(g,h){navigator.geolocation.clearWatch(e);e=0;if(a){clearTimeout(a);a=0}h&&h([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var e=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,h){if(navigator.geolocation&&!e){e=navigator.geolocation.watchPosition(function(i){var o=
ha.init(i.coords.latitude,i.coords.longitude);i=new Qb({id:1,caption:"Current Location",pos:o,accuracy:i.coords.accuracy/1E3,matchWeight:100});if(!c||i.accuracy<c.accuracy)c=i;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)d(c,h)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&d(c,h)},b.searchTimeout)}}},b))},Routing:kc,GeoJSON:Sa}})(T5);
