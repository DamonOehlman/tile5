COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var H=arguments[0]||{},U,v=1,q=arguments.length;v<q;v++)if((U=arguments[v])!==null)for(var j in U){var k=U[j];if(H!==k)if(k!==undefined)H[j]=k}return H};
(function(){var H=Object.prototype.hasOwnProperty,U=0,v={};v.toID=function(q){return q.replace(/\s/g,"-")};v.objId=function(q){return(q?q:"obj")+U++};v.isFunction=function(q){return toString.call(q)==="[object Function]"};v.isArray=function(q){return toString.call(q)==="[object Array]"};v.isPlainObject=function(q){if(!q||toString.call(q)!=="[object Object]"||q.nodeType||q.setInterval)return false;if(q.constructor&&!H.call(q,"constructor")&&!H.call(q.constructor.prototype,"isPrototypeOf"))return false;
var j;for(j in q);return j===undefined||H.call(q,j)};v.isEmptyObject=function(q){for(var j in q)return false;return true};v.isXmlDocument=function(q){return toString.call(q)==="[object Document]"};v.contains=function(q,j){var k=q,s=arguments,x=1;if(j&&module.isArray(j)){s=j;x=0}for(x=x;x<s;x++)k=k&&typeof foo[s[x]]!=="undefined";return k};v.formatStr=function(q){if(arguments.length<=1)return q;for(var j=arguments.length-2,k=0;k<=j;k++)q=q.replace(RegExp("\\{"+k+"\\}","gi"),arguments[k+1]);return q};
v.wordExists=function(q,j){var k="";if(j.toString)j=j.toString();for(var s=0;s<j.length;s++)k+=!/\w/.test(j[s])?"\\"+j[s]:j[s];return RegExp("(^|\\s|\\,)"+k+"(\\,|\\s|$)","i").test(q)};COG.extend(COG,v)})();
(function(){function H(k){return typeof console!=="undefined"?function(){console[k](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var U=window.console&&window.console.markTimeline,v=H("error"),q=H("info"),j=function(){return U?function(k,s){console.markTimeline(k+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:j,debug:H("debug"),info:q,warn:H("warn"),error:v,exception:function(k){if(v)for(var s in k)q("ERROR DETAIL: "+s+
": "+k[s])}})})();
(function(){function H(v,q){var j=v.hasOwnProperty("obsHandlers")?v.obsHandlers:null;j[q]||(j[q]=[]);return j[q]}var U=0;COG.observable=function(v){if(!v)return null;if(!(v.hasOwnProperty("obsHandlers")?v.obsHandlers:null))v.obsHandlers={};if(!v.hasOwnProperty("bind")){v.bind=function(q,j){var k="callback"+U++;H(v,q).unshift({fn:j,id:k});return k};v.triggerCustom=function(q,j){var k=H(v,q),s={cancel:false,name:q,source:this},x;j&&COG.extend(s,j);if(!k)return null;x=Array.prototype.slice.call(arguments,2);
v.eventInterceptor&&v.eventInterceptor(q,s,x);x.unshift(s);for(var N=k.length;N--&&!s.cancel;)k[N].fn.apply(this,x);return s};v.trigger=function(q){var j=Array.prototype.slice.call(arguments,1);j.splice(0,0,q,null);return v.triggerCustom.apply(this,j)};v.unbind=function(q,j){if(typeof q==="undefined")v.obsHandlers={};else for(var k=H(v,q),s=0;k&&s<k.length;s++)if(k[s].id===j){k.splice(s,1);break}return v}}return v}})();
(function(){function H(j,k){j[k]||(j[k]=function(s){return j.configure(k,s)})}function U(j){j.gtConfId="configurable"+q++;j.gtConfig={};j.gtConfigFns=[];return j.gtConfig}var v={},q=0;COG.paramTweaker=function(j,k,s){return function(x,N){if(typeof N!=="undefined"){if(x in j)j[x]=N;s&&x in s&&s[x](x,N)}else return k&&x in k?k[x](x):j[x]}};COG.configurable=function(j,k,s,x){if(j){j.gtConfId||U(j);var N=j.gtConfId,l=j.gtConfig,C=j.gtConfigFns;v[N]=j;C.push(s);for(s=k.length;s--;){l[k[s]]=true;x&&H(j,
k[s])}if(!j.configure)j.configure=function(w,E){if(l[w]){for(var t=C.length;t--;){var r=C[t](w,E);if(typeof r!=="undefined")return r}return v[N]}return null}}}})();
(function(){function H(j){var k=document.createElement("script"),s=false;k.src=j;k.async=true;k.onload=k.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;k.onload=k.onreadystatechange=null;k&&k.parentNode&&k.parentNode.removeChild(k)}};v||(v=document.getElementsByTagName("head")[0]);v.appendChild(k)}var U=0,v,q=this;COG.jsonp=function(j,k,s){j+=j.indexOf("?")>=0?"&":"?";var x="json"+ ++U;q[x]=function(N){k(N);q[x]=null;try{delete q[x]}catch(l){}};
H(j+(s?s:"callback")+"="+x);return x}})();
(function(){var H=1.70158,U=Math.PI/2,v=1E3/60|0,q=Math.abs,j=Math.pow,k=Math.sin,s=Math.asin,x=Math.cos,N={linear:function(l,C,w,E){return w*l/E+C},backin:function(l,C,w,E){return w*(l/=E)*l*((H+1)*l-H)+C},backout:function(l,C,w,E){return w*((l=l/E-1)*l*((H+1)*l+H)+1)+C},backinout:function(l,C,w,E){return(l/=E/2)<1?w/2*l*l*(((H*=1.525)+1)*l-H)+C:w/2*((l-=2)*l*(((H*=1.525)+1)*l+H)+2)+C},bouncein:function(l,C,w,E){return w-N.bounceout(E-l,0,w,E)+C},bounceout:function(l,C,w,E){return(l/=E)<1/2.75?w*
7.5625*l*l+C:l<2/2.75?w*(7.5625*(l-=1.5/2.75)*l+0.75)+C:l<2.5/2.75?w*(7.5625*(l-=2.25/2.75)*l+0.9375)+C:w*(7.5625*(l-=2.625/2.75)*l+0.984375)+C},bounceinout:function(l,C,w,E){return l<E/2?N.bouncein(l*2,0,w,E)/2+C:N.bounceout(l*2-E,0,w,E)/2+w/2+C},cubicin:function(l,C,w,E){return w*(l/=E)*l*l+C},cubicout:function(l,C,w,E){return w*((l=l/E-1)*l*l+1)+C},cubicinout:function(l,C,w,E){if((l/=E/2)<1)return w/2*l*l*l+C;return w/2*((l-=2)*l*l+2)+C},elasticin:function(l,C,w,E,t,r){if(l==0)return C;if((l/=
E)==1)return C+w;r||(r=E*0.3);if(!t||t<q(w)){t=w;w=r/4}else w=r/TWO_PI*s(w/t);return-(t*j(2,10*(l-=1))*k((l*E-w)*TWO_PI/r))+C},elasticout:function(l,C,w,E,t,r){var y;if(l==0)return C;if((l/=E)==1)return C+w;r||(r=E*0.3);if(!t||t<q(w)){t=w;y=r/4}else y=r/TWO_PI*s(w/t);return t*j(2,-10*l)*k((l*E-y)*TWO_PI/r)+w+C},elasticinout:function(l,C,w,E,t,r){var y;if(l==0)return C;if((l/=E/2)==2)return C+w;r||(r=E*0.3*1.5);if(!t||t<q(w)){t=w;y=r/4}else y=r/TWO_PI*s(w/t);if(l<1)return-0.5*t*j(2,10*(l-=1))*k((l*
E-y)*TWO_PI/r)+C;return t*j(2,-10*(l-=1))*k((l*E-y)*TWO_PI/r)*0.5+w+C},quadin:function(l,C,w,E){return w*(l/=E)*l+C},quadout:function(l,C,w,E){return-w*(l/=E)*(l-2)+C},quadinout:function(l,C,w,E){if((l/=E/2)<1)return w/2*l*l+C;return-w/2*(--l*(l-2)-1)+C},sinein:function(l,C,w,E){return-w*x(l/E*U)+w+C},sineout:function(l,C,w,E){return w*k(l/E*U)+C},sineinout:function(l,C,w,E){return-w/2*(x(Math.PI*l/E)-1)+C}};COG.tweenValue=function(l,C,w,E,t){function r(V){V=V?V:(new Date).getTime();if(ba+v<V){var ca=
V-y,Z=w(ca,l,Y,E),ma=y+E<=V;V=!ma;if(t){ca=t(Z,ma,ca);V=typeof ca!="undefined"?ca&&V:V}V&&animFrame(r)}}var y=(new Date).getTime(),ba=0,Y=C-l;animFrame(r);return{}};COG.easing=function(l){return N[l.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(l,C){N[l.replace(/[\-\_\s\.]/g,"").toLowerCase()]=C}})();
(function(){var H=/^P(\d+Y)?(\d+M)?(\d+D)?$/,U=/^(\d+H)?(\d+M)?(\d+S)?$/,v={8601:function(j){j=j.split("T");var k=null;k=null;var s=0,x=0;H.lastIndex=-1;k=H.exec(j[0]);s+=k[3]?parseInt(k[3].slice(0,-1),10):0;U.lastIndex=-1;k=U.exec(j[1]);x+=k[1]?parseInt(k[1].slice(0,-1),10)*3600:0;x+=k[2]?parseInt(k[2].slice(0,-1),10)*60:0;x+=k[3]?parseInt(k[3].slice(0,-1),10):0;return new q(s,x)}},q=COG.Duration=function(j,k){return{days:j?j:0,seconds:k?k:0}};COG.addDuration=function(){for(var j=new q,k=arguments.length;k--;){j.days+=
arguments[k].days;j.seconds+=arguments[k].seconds}if(j.seconds>=86400){j.days+=~~(j.seconds/86400);j.seconds%=86400}return j};COG.formatDuration=function(j){var k,s,x="";if(j.days)x=j.days+" days ";if(j.seconds){j=j.seconds;if(j>=3600){k=~~(j/3600);j-=k*3600}if(j>=60){s=Math.round(j/60);j-=s*60}if(k)x=x+k+(k>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)x=x+s+" min";else if(j>0)x=x+(j>10?j:"0"+j)+" sec"}return x};COG.parseDuration=function(j,k){var s=k?v[k]:null;if(s)return s(j);COG.Log.warn("Could not find duration parser for specified format: "+
k);return new q}})();COG.ObjectStore=function(){var H={},U={},v="obj_"+(new Date).getTime(),q=0,j=Object.prototype.hasOwnProperty;return{add:function(k,s){var x;s=s?s:"default";if(k&&k.constructor)if(!j.call(k,"id"))k.id=v+ ++q;x=U[s]?U[s]:U[s]=[];H[k.id]=x.length;x[k.length]=k}}};var CANI={};
(function(H){var U=[],v=0,q=false,j=H.register=function(k,s){U.push({section:k,run:s})};H.init=function(k){function s(){if(v<U.length){var N=U[v++];x[N.section]||(x[N.section]={});N.run(x[N.section],s)}else{for(N in x)H[N]=x[N];q=true;k&&k(H)}}var x={};if(q&&k)k(H);else{v=0;s()}};j("canvas",function(k,s){function x(){var w,E=N.getContext("2d");E.save();try{E.translate(50,50);E.beginPath();E.rect(0,0,20,20);w=E.isPointInPath(10,10)}finally{E.restore()}return w}var N=document.createElement("canvas"),
l=typeof FlashCanvas!="undefined",C=typeof G_vmlCanvasManager!="undefnined";N.width=200;N.height=200;k.pipTransformed=l||C?false:x();s()})})(CANI);
INTERACT=function(){function H(t){return function(r,y,ba){(ba?ba:t?document.body:document).addEventListener(r,y,false)}}function U(t){return function(r,y,ba){(ba?ba:t?document.body:document).removeEventListener(r,y,false)}}function v(t,r,y){(y?y:document).attachEvent("on"+t,r)}function q(t,r,y){(y?y:document).detachEvent("on"+t,r)}function j(t,r){return{x:t?t:0,y:r?r:0,count:1}}function k(t,r){w.push(COG.extend({handler:null,checks:{},type:t},r))}function s(t){var r=0,y=0;if(t.offsetParent){do{r+=
t.offsetLeft;y+=t.offsetTop;t=t.offsetParent}while(t)}return{left:r,top:y}}function x(t,r){return{source:t,target:r.target?r.target:r.srcElement}}function N(t,r){for(var y=t.target?t.target:t.srcElement;y&&y!==r&&y.nodeName&&y.nodeName.toUpperCase()!="CANVAS";)y=y.parentNode;return y&&y===r}function l(t,r){return{x:t.x-(r?r.left:0),y:t.y-(r?r.top:0)}}function C(t){if(t.preventDefault){t.preventDefault();t.stopPropagation()}else t.cancelBubble&&t.cancelBubble()}var w=[],E=function(t,r,y){function ba(W,
da,ga,M){var Q=0,$=0,z=0;COG.tweenValue(0,W,ga,M,function(K){z=Q;Q=K});COG.tweenValue(0,da,ga,M,function(K){Y.trigger("pan",Q-z,K-$);$=K})}y=COG.extend({binder:null,unbinder:null,observable:null},y);for(var Y=y.observable,V=null,ca=[],Z=[],ma,oa,ra={bind:function(){return Y.bind.apply(null,arguments)},pannable:function(W){V=COG.extend({inertia:true},W);return ra},unbind:function(){Y.unbind();for(var W=0;W<ca.length;W++)ca[W].unbind();return ra}},Ca=0;Ca<r.length;Ca++)ca.push(r[Ca](t,Y,y));Y.bind("pointerDown",
function(){Z=[];oa=ma=0});Y.bind("pointerMove",function(W,da,ga,M){if(V){Z[Z.length]={ticks:(new Date).getTime(),x:M.x,y:M.y};Y.trigger("pan",M.x,M.y)}ma+=M.x?M.x:0;oa+=M.y?M.y:0});Y.bind("pointerUp",function(W,da,ga){if(Math.abs(ma)>20||Math.abs(oa)>20){if(V){ga=Z.length;var M,Q;da=0;for(Q=Z.length;--Q>1&&da<50;)da+=Z[Q].ticks-Z[Q-1].ticks;if(ga-Q>1){W=Z[ga-1].x-Z[Q].x;M=Z[ga-1].y-Z[Q].y;Q=Math.sqrt(W*W+M*M)|0;if(Q>15){W=Z[ga-1].x-Z[0].x;M=Z[ga-1].y-Z[0].y;Q=Math.sqrt(W*W+M*M)|0;ga=Math.asin(M/Q);
da=Q*500/da|0;da=da>300?300:da;ba(Math.cos(W>0?ga:Math.PI-ga)*da,Math.sin(ga)*da,COG.easing("sine.out"),500)}}}}else Y.trigger("tap",da,ga)});return ra};k("pointer",{handler:function(t,r,y){function ba(z){if(z.pageX&&z.pageY)return j(z.pageX,z.pageY);else{var K=document.documentElement,T=document.body;return j(z.clientX+(K&&K.scrollLeft||T&&T.scrollLeft||0)-(K&&K.clientLeft||T&&T.clientLeft||0),z.clientY+(K&&K.scrollTop||T&&T.scrollTop||0)-(K&&K.clientTop||T&&T.clientTop||0))}}function Y(z){if(N(z,
t))if(W=ma(z)){var K=ba(z);t.style.cursor="move";C(z);Q=K.x;$=K.y;da=j(Q,$);r.triggerCustom("pointerDown",x("mouse",z),da,l(da,s(t)))}}function V(z){var K=ba(z);ga=K.x;M=K.y;if(N(z,t))oa(z,W?"pointerMove":"pointerHover")}function ca(z){if(W&&ma(z)){W=false;if(N(z,t)){t.style.cursor="default";oa(z,"pointerUp")}}}function Z(z){if(N(z,t)){var K;z=z||window.event;if(z.detail)K=z.axis===2?-z.detail*ra:0;else{K=z.wheelDeltaY?z.wheelDeltaY:z.wheelDelta;if(window.opera)K=-K}if(K!==0){var T=j(ga,M);r.triggerCustom("zoom",
x("mouse",z),T,l(T,s(t)),K/Ca,"wheel");C(z);z.returnValue=false}}}function ma(z){z=z||window.event;return(z.which||z.button)==1}function oa(z,K,T,ka,Aa){T=typeof T!="undefined"?T:ga;ka=typeof ka!="undefined"?ka:M;var J=T-Q,X=ka-$,L=j(T,ka);r.triggerCustom(K,x("mouse",z),L,l(L,s(t)),j(J,X));if(typeof Aa=="undefined"||Aa){Q=T;$=ka}}y=COG.extend({},y);var ra=120,Ca=ra*8,W=false,da,ga,M,Q,$;y.binder("mousedown",Y,false);y.binder("mousemove",V,false);y.binder("mouseup",ca,false);y.binder("dblclick",function(z){COG.info("captured double click");
if(N(z,t)){var K=ba(z);r.triggerCustom("doubleTap",x("mouse",z),K,l(K,s(t)))}},false);y.binder("mousewheel",Z,document);y.binder("DOMMouseScroll",Z,document);return{unbind:function(){y.unbinder("mousedown",Y,false);y.unbinder("mousemove",V,false);y.unbinder("mouseup",ca,false);y.unbinder("mousewheel",Z,document);y.unbinder("DOMMouseScroll",Z,document)}}},checks:{touch:false}});k("pointer",{handler:function(t,r,y){function ba(J){if(J.count<2)return 0;var X=J.x-J.next.x;J=J.y-J.next.y;return~~Math.sqrt(X*
X+J*J)}function Y(J,X,L){X=X?X:0;L=L?L:0;for(var sa={x:J.x-X,y:J.y-L,id:J.id,count:J.count},qa=sa;J.next;){J=J.next;qa=qa.next={x:J.x-X,y:J.y-L,id:J.id}}return sa}function V(J,X){var L=J[X?X:"touches"],sa,qa;if(L.length===0)return null;qa=sa={x:L[0].pageX,y:L[0].pageY,id:L[0].identifier,count:L.length};for(var ya=1,Xa=L.length;ya<Xa;ya++)qa=qa.next={x:L[ya].pageX,y:L[ya].pageY,id:L[ya].identifier};return sa}function ca(J){if(N(J,t)){M=s(t);var X=V(J,"changedTouches"),L=Y(X,M.left,M.top);if(!$){Q=
W;r.triggerCustom("pointerDown",x("touch",J),X,L)}ka&&r.triggerCustom("pointerDownMulti",x("touch",J),X,L);$=V(J);if($.count>1)K=ba($);Aa=1;T=Y($)}}function Z(J){if(N(J,t)){J.preventDefault();z=V(J);if(Q==W)Q=Math.abs($.x-z.x)>ra||Math.abs($.y-z.y)>ra?Ca:W;if(Q!=W){Q=z.count>1?ga:da;if(Q==ga)if($.count===1){$=Y(z);K=ba($)}else{var X=ba(z);if(Math.abs(K-X)<oa)Q=da;else{var L;L=z.x;var sa=z.next.x,qa=z.y,ya=z.next.y,Xa=qa<ya?qa:ya;L={x:(L<sa?L:sa)+(Math.abs(L-sa)>>1),y:Xa+(Math.abs(qa-ya)>>1)};X=X/
K;sa=X-Aa;r.triggerCustom("zoom",x("touch",J),L,l(L,M),sa,"pinch");Aa=X}}Q==da&&r.triggerCustom("pointerMove",x("touch",J),z,Y(z,M.left,M.top),j(z.x-T.x,z.y-T.y));ka&&r.triggerCustom("pointerMoveMulti",x("touch",J),z,Y(z,M.left,M.top))}T=Y(z)}}function ma(J){if(N(J,t)){var X=V(J,"changedTouches"),L=Y(X,M.left,M.top);z=V(J);if(!z){r.triggerCustom("pointerUp",x("touch",J),X,L);$=null}ka&&r.triggerCustom("pointerUpMulti",x("touch",J),X,L)}}y=COG.extend({detailed:false,inertia:false},y);var oa=20,ra=
7,Ca=0,W=1,da=2,ga=3,M,Q,$,z,K,T,ka=y.detailed,Aa=1;y.binder("touchstart",ca,false);y.binder("touchmove",Z,false);y.binder("touchend",ma,false);COG.info("initialized touch handler");return{unbind:function(){y.unbinder("touchstart",ca,false);y.unbinder("touchmove",Z,false);y.unbinder("touchend",ma,false)}}},checks:{touch:true}});return{register:k,watch:function(t,r,y){r=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},r);capabilities=COG.extend({touch:"ontouchstart"in
window},y);if(!r.observable){COG.info("creating observable");r.observable=COG.observable({});globalOpts=r}r.binder=r.isIE?v:H(r.bindToBody);r.unbinder=r.isIE?q:U(r.bindToBody);y=r.types;for(var ba=capabilities,Y=[],V=w.length;V--;){var ca=w[V],Z=!y||y.indexOf(ca.type)>=0,ma=true;for(var oa in ca.checks){var ra=ca.checks[oa];COG.info("checking "+oa+" capability. require: "+ra+", capability = "+ba[oa]);ma=ma&&ra===ba[oa]}if(Z&&ma)Y[Y.length]=ca.handler}return new E(t,Y,r)}}}();var T5={};
(function(H){function U(){return(new Date).getTime()}function v(b,d){d=Rb.call(d);if(d=="finite")return!Sb[Tb](+b);return d=="null"&&b===null||d==typeof b||d=="object"&&b===Object(b)||d=="array"&&Array.isArray&&Array.isArray(b)||Ub.call(b).slice(8,-1).toLowerCase()==d}function q(b,d){this.x=b||0;this.y=d||0}function j(b,d,f,e){this.x=b||0;this.y=d||0;this.w=f||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function k(b){b=b||(new Date).getTime();for(var d=0;d<Sa.length;){var f=Sa[d],e=
Ma[f],a=Ma[f].image&&(bb||Ma[f].image.complete&&Ma[f].image.width>0),c=b-e.start;c=a||c>=Vb;if(a){a=e.callbacks;ub[f]=e.image;for(var g=0;g<a.length;g++)a[g](e.image,true)}if(c){Sa.splice(d,1);delete Ma[f]}else d++}Sa.length>0&&animFrame(k)}function s(b,d){var f=b&&d?ub[b]:null;if(f&&f&&(bb||f.complete&&f.width>0))d(f);else{if(f=Ma[b])f.callbacks.push(d);else{f=new Image;f.id="_ldimg"+ ++Wb;Ma[b]={start:(new Date).getTime(),image:f,callbacks:[d]};f.src=b;Sa[Sa.length]=b}animFrame(k)}}function x(b,
d,f,e,a,c){this.x=b;this.y=d;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+d;this.loaded=false;this.image=null}function N(b){function d(c){var g=b[c];v(g,pa)||e.push(function(h){h[c]=g})}function f(){e=[];for(var c in b)d(c)}b=COG.extend({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},b);var e=[],a={applyToContext:function(c){for(var g=
e.length;g--;)e[g](c)},update:function(c,g){b[c]=g;f()}};f();return a}function l(){for(var b=0,d=arguments.length;d--;){var f=Xb[arguments[d].toUpperCase()];if(f)b|=f}return b}function C(b){b=b?b:(new Date).getTime();if(b-vb>Yb){for(var d=Ya.splice(0),f=d.length;f--;)d[f](b);vb=b}Ya.length&&animFrame(C)}function w(b){var d=Ya.length==0;Ya[Ya.length]=b;d&&animFrame(C)}function E(b,d,f,e,a){a=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),
g=b[d],h=d=="translate",i=a.autoInvalidate,n=f.length&&e.length&&f.length==e.length?f.length:0,p=Array(n),I=Array(n),G=COG.easing(a.easing),D=a.duration,P=a.progress,m=function(A){var F=A-c;A=c+D<=A;for(var R=b.layer?b.layer.view:null,O,ha=n;ha--;){O=G(F,f[ha],p[ha],D);I[ha]=h?O|0:O}g.apply(b,I);i&&R&&R.invalidate();if(P){F=[].concat(A?e:I);F.unshift(A);P.apply(b,F)}if(A){b.animations--;g.apply(b,e);a.complete&&a.complete.apply(b,e)}else w(m)};if(g&&g.apply&&n>0){D=D?D:DEFAULT_DURATION;for(d=n;d--;)p[d]=
e[d]-f[d];b.animations++;w(m)}}function t(b){za.call(this,b)}function r(b,d){d=COG.extend({simplify:false,typeName:"Poly"},d);var f=d.simplify;za.call(this,d);COG.extend(this,{resync:function(e){var a,c,g,h,i,n;e.syncXY(b);n=this.points=Na.floor(f?Na.simplify(b):b);for(var p=n.length;p--;){e=n[p].x;a=n[p].y;h=v(h,pa)||e<h?e:h;i=v(i,pa)||a<i?a:i;c=v(c,pa)||e>c?e:c;g=v(g,pa)||a>g?a:g}this.updateBounds(new j(h,i,c-h,g-i),true)}});this.haveData=b&&b.length>=2}function y(b,d){d.fill=false;r.call(this,
b,d)}function ba(b){function d(){if(h&&h.width>0){if(!this.centerOffset)this.centerOffset=new q(-h.width>>1,-h.height>>1);this.updateBounds(new j(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,h.width,h.height),false)}}function f(n){if(this.imageUrl=n){var p=this;s(this.imageUrl,function(I,G){h=I;if(G){var D=i.layer?i.layer.view:null;D&&D.invalidate()}d.apply(p)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var e=null,a=za.prototype.resync,c=0,g=0,h=
b.image;za.call(this,b);var i=COG.extend(this,{changeImage:f,drag:function(n,p,I,G){e||(e=new q(n.startX-this.xy.x,n.startY-this.xy.y));this.xy.x=p-e.x;this.xy.y=I-e.y;if(G){e=null;if(this.layer)if(n=this.layer.view){n.syncXY([this.xy],true);n.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||d(this,h);return{image:h,x:this.xy.x+c,y:this.xy.y+g}},resync:function(n){a.call(this,n);d.call(this)}});h||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;
g=this.centerOffset.y}}function Y(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Na.invert(b.imageAnchor);ba.call(this,b)}function V(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);za.call(this,b)}function ca(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:l("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;COG.observable(COG.extend(this,b))}function Z(b){for(var d=null,f=1;!d&&f<arguments.length;f++)d=
ra(b,arguments[f]);d=d?d:ra(b);if(!d)throw Error("Unable to find GEO engine with "+b+" capability");return d}function ma(b){b=parseFloat(b)*Da;b=L(b);var d=cb*b;return J((1+b)/(1-b)*ka((1-d)/(1+d),cb))/2}function oa(b){return M/(256<<b)}function ra(b,d){var f=null;for(var e in Oa)if(d){if(e==d&&Oa[e][b]){f=Oa[e];break}}else if(Oa[e][b]){f=Oa[e];break}return f}function Ca(b,d){var f=cb*L(b);return Q-2*ya(d*ka((1-f)/(1+f),cb/2))}function W(b,d,f,e){d=da(d);b.add(e(d,f));return d.length}function da(b){var d=
b?b.length:0,f=Array(d);for(d=d;d--;)f[d]=ea.init(b[d][1],b[d][0]);return ea.vectorize(f,wb)}window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var ga=Array.prototype.indexOf||function(b){for(var d=0;d<this.length;d++)if(this[d]===b)return d;return-1},M=Math.PI*2,Q=Math.PI/2,$=Math.abs,
z=Math.ceil,K=Math.min,T=Math.max,ka=Math.pow,Aa=Math.sqrt,J=Math.log,X=Math.round,L=Math.sin,sa=Math.asin,qa=Math.cos,ya=Math.atan,Xa=Math.atan2,Tb="hasOwnProperty",Sb={NaN:1,Infinity:1,"-Infinity":1},Rb=String.prototype.toLowerCase,Ub=Object.prototype.toString,pa="undefined",xb="number",Zb=typeof G_vmlCanvasManager!=pa,bb=typeof FlashCanvas!=pa,$b=T5.newCanvas=function(b,d){var f=document.createElement("canvas");f.width=b?b:0;f.height=d?d:0;if(bb){document.body.appendChild(f);FlashCanvas.initElement(f)}Zb&&
G_vmlCanvasManager.initElement(f);return f},yb=function(){var b={};return{init:function(d,f){var e=b[d];if(!e)throw Error("Unable to locate requested generator: "+d);return new e(f)},register:function(d,f){b[d]=f}}}();q.prototype={constructor:q};j.prototype={constructor:j};var Na=function(){function b(e,a){return f(e.x-a.x,e.y-a.y)}function d(e,a){a=a||e.length;if(a<=1)return null;for(var c=Array(a-1),g=Array(a-1),h=0,i,n=0;n<a-1;n++){i=b(e[n],e[n+1]);c[n]=Aa(i.x*i.x+i.y*i.y);g[n]=h+=c[n]}return{edges:c,
accrued:g,tota:h}}function f(e,a){return new q(e,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var e=0,a=0,c=arguments.length;c--;){e+=arguments[c].x;a+=arguments[c].y}return f(e,a)},absSize:function(e){return T($(e.x),$(e.y))},copy:function(e){return e?f(e.x,e.y):null},diff:b,distance:function(e,a){return d(e,a).total},edges:d,equals:function(e,a){return e.x===a.x&&e.y===a.y},extendBy:function(e,a,c){var g=qa(a)*c|0;a=L(a)*c|0;return f(e.x-g,e.y-a)},floor:function(e){for(var a=
Array(e.length),c=e.length;c--;)a[c]=f(~~e[c].x,~~e[c].y);return a},getRect:function(e){for(var a,c,g,h,i=e.length;i--;){var n=e[i];a=v(a,pa)||n.x<a?n.x:a;c=v(c,pa)||n.y<c?n.y:c;g=v(g,pa)||n.x>g?n.x:g;h=v(h,pa)||n.y>h?n.y:h}return new j(a,c,g-a,h-c)},init:f,invert:function(e){return f(-e.x,-e.y)},min:function(e,a){return f(e.x<a.x?e.x:a.x,e.y<a.y?e.y:a.y)},max:function(e,a){return f(e.x>a.x?e.x:a.x,e.y>a.y?e.y:a.y)},offset:function(e,a,c){return f(e.x+a,e.y+(c||a))},scale:function(e,a){return f(e.x/
a|0,e.y/a|0)},simplify:function(e,a){if(!e)return null;a=a?a:Na.VECTOR_SIMPLIFICATION;for(var c=[],g=null,h=e.length;h--;){var i=e[h];if(include=!g||h===0||$(i.x-g.x)+$(i.y-g.y)>a){c.unshift(i);g=i}}return c},theta:function(e,a,c){c=sa((e.y-a.y)/c);return e.x>a.x?c:Math.PI-c},toString:function(e){return e?e.x+", "+e.y:""}}}(),gb=function(){return{dotProduct:function(b,d){return b.x*d.x+b.y*d.y}}}(),Ta=function(){function b(f){return d(f.x,f.y,f.x2,f.y2)}function d(f,e,a,c){return new j(f,e,(a||f)-
f,(c||e)-e)}return{buffer:function(f,e,a){return Ta.init(f.x-e,f.y-(a||e),f.x+e,f.y+(a||e))},center:function(f){return new q(f.x+(f.w>>1),f.y+(f.h>>1))},copy:b,diagonalSize:function(f){return Aa(f.w*f.w+f.h*f.h)},fromCenter:function(f,e,a,c){a=a>>1;c=c>>1;return d(f-a,e-c,f+a,e+c)},init:d,intersect:function(f,e){var a=T(f.x,e.x),c=T(f.y,e.y),g=K(f.x2,e.x2),h=K(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,
e){if(f.w===0||f.h===0)return b(e);else if(e.w===0||e.h===0)return b(f);else{var a=K(f.x,e.x),c=K(f.y,e.y),g=T(f.x2,e.x2),h=T(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,d){var f=[],e={},a;for(a=d.length;a--;)e[d[a].target.id]=true;for(a=b.length;a--;)e[b[a].target.id]||(f[f.length]=b[a]);return f},init:function(b,d,f,e){return{type:b,x:e.x|0,y:e.y|0,elements:[],absXY:d,relXY:f}},initHit:function(b,d,f){return{type:b,target:d,drag:f}},triggerEvent:function(b,
d,f,e){d.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},e?e:b.elements,b.absXY,b.relXY,new q(b.x,b.y))}}}();var hb=function(b){function d(a,c){var g=f[a],h;g||(g=f[a]=[]);(h=g[c])||(h=g[c]=[]);return h}b=b||128;var f=[],e={};return{insert:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,n=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id||COG.objId("spatial");e[g]=c;for(c=h;c<=n;c++)for(h=i;h<=a;h++)d(c,h).push(g)},remove:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,n=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;delete e[g];
for(c=h;c<=n;c++)for(h=i;h<=a;h++){var p=d(c,h),I=ga.call(p,g);I>=0&&p.splice(I,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,h=(a.y+a.h)/b|0,i=[],n=[];for(a=a.x/b|0;a<=g;a++)for(var p=c;p<=h;p++)i=i.concat(d(a,p));i.sort();for(c=i.length;c--;){g=i[c];if(h=e[g])n[n.length]=h;for(;c>0&&i[c-1]==g;)c--}return n}}},Vb=3E4,ub={},Wb=0;(new Date).getTime();var Ma={},Sa=[];x.prototype={constructor:x,load:function(b){var d=this;s(this.url,function(f){d.loaded=true;d.image=f;b&&b()})}};var ac=function(){return{applyStyle:function(){},
applyTransform:function(b,d,f){return{restore:null,x:d,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new q},getViewport:function(){},hitTest:function(){return false},prepare:function(){},render:function(){},reset:function(){}}},zb={},Ua=H.registerRenderer=function(b,d){zb[b]=d},bc=H.attachRenderer=function(b,d,f,e){b=b.split("/");for(var a=new ac(d,f,e),c=0;c<b.length;c++){var g=zb[b[c]];if(g)a=new g(d,f,e,a)}return a};Ua("canvas",function(b,
d,f,e){function a(m,A,F,R){var O=false;if(A)O=i.isPointInPath(G?A.x-n:A.relXY.x,G?A.y-p:A.relXY.y);return{draw:R||P,viewport:m,state:F,hit:O,vpX:n,vpY:p,context:i}}f=COG.extend({},f);var c,g,h,i,n=0,p=0,I=null,G=CANI.canvas.pipTransformed,D={},P=function(){this.fill&&i.fill();this.stroke&&i.stroke()};(function(){if(d){var m=d.tagName=="CANVAS",A=m?d.parentNode:d;c=b.width=A.offsetWidth;g=b.height=A.offsetHeight;if(m){h=d;h.width=c;h.height=g;bb&&FlashCanvas.initElement(h)}else{h=$b(c,g);h.style.cssText=
"position: absolute; z-index: 1;";d.appendChild(h)}i=null}})();return COG.extend(e,{interactTarget:h,applyStyle:function(m){var A=cc(m),F=A&&i&&i.canvas?D[i.canvas.id]:null;if(A){D[i.canvas.id]=m;A.applyToContext(i);return F}},applyTransform:function(m){if(m.translateX!==0||m.translateY!==0||m.scaling!==1||m.rotation!==0){i.save();I={undo:function(){i.restore();I=null},x:m.xy.x,y:m.xy.y};i.translate(m.xy.x-n+m.translateX,m.xy.y-p+m.translateY);m.rotation!==0&&i.rotate(m.rotation);m.scaling!==1&&i.scale(m.scaling,
m.scaling)}return I},drawTiles:function(m,A){for(var F,R,O=n-256,ha=p-256,va=m.x2,ta=m.y2,Ba=A.length;Ba--;){F=A[Ba];if(R=F.x>=O&&F.x<=va&&F.y>=ha&&F.y<=ta)F.loaded?i.drawImage(F.image,F.x-n,F.y-p):F.load(b.invalidate)}},hitTest:function(m,A,F){return i.isPointInPath(A,F)},prepare:function(m,A){var F,R=false;b.getOffset();var O=b.getScaleFactor();if(i)i.restore();else i=h.getContext("2d");for(F=m.length;F--;)R=R||m[F].clip;n=A.x;p=A.y;if(i){R||i.clearRect(0,0,c,g);i.save();i.scale(O,O)}i.globalCompositeOperation=
"source-over";return i},prepArc:function(m,A,F,R){i.beginPath();i.arc(m.xy.x-(I?I.x:n),m.xy.y-(I?I.y:p),m.size>>1,m.startAngle,m.endAngle,false);return a(A,F,R)},prepImage:function(m,A,F,R,O){var ha=(O.x||m.xy.x)-(I?I.x:n),va=(O.y||m.xy.y)-(I?I.y:p),ta=O.image||m.image;if(ta){i.beginPath();i.rect(ha,va,O.width||ta.width,O.height||ta.height);return a(A,F,R,function(){i.drawImage(ta,ha,va,O.width||ta.width,O.height||ta.height)})}},prepPoly:function(m,A,F,R,O){var ha=true;m=O.points||m.points;O=I?I.x:
n;var va=I?I.y:p;i.beginPath();for(var ta=m.length;ta--;){var Ba=m[ta].x-O,Pa=m[ta].y-va;if(ha){i.moveTo(Ba,Pa);ha=false}else i.lineTo(Ba,Pa)}return a(A,F,R)},getContext:function(){return i},getDimensions:function(){return{width:c,height:g}},getOffset:function(){return new q(n,p)}})});var Ab={},dc=H.defineStyle=function(b,d){Ab[b]=N(d);return b},Bb=H.defineStyles=function(b){for(var d in b)dc(d,b[d])},cc=H.getStyle=function(b){return Ab[b]};H.loadStyles=function(b){COG.jsonp(b,function(d){Bb(d)})};
Bb({basic:{lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"},waypointsHover:{lineWidth:4,strokeStyle:"#f00",fillStyle:"#FFF"}});var Xb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Kb=function(b){function d(o,u,B){Ea||Pa(ia-u,ja-B)}function f(o,u,B,S){va(K(T(la+ka(2,S)-1,0.5),2))}function e(){var o=J(la)/Math.LN2|0;if(o!==0){la=ka(2,o);ta(Za+o,ec,fc)}redraw=true}function a(o,u){var B=fa.getViewport(),S=1/la;return new q(B?
B.x+o*S:o,B?B.y+u*S:u)}function c(o,u,B){Ba("doubleTap",u,B,a(B.x,B.y));b.scalable&&va(2,a(B.x,B.y),b.zoomEasing,null,b.zoomDuration)}function g(o,u,B){Ea=null;F("down",u,B)}function h(o,u,B){F("hover",u,B)}function i(o,u,B){m(u,B,false)}function n(o,u,B){m(u,B,true)}function p(){clearTimeout(Cb);Cb=setTimeout(function(){renderer.checkSize()},250)}function I(o,u,B){F("tap",u,B);Ba("tap",u,B,a(B.x,B.y,true))}function G(){renderer=bc(b.renderer,fa,ib);Db=!renderer.preventPartialScale;P()}function D(o,
u){u.id=o;u.added=U();u.view=fa;u.trigger("parentChange",fa,ib,gc);na.push(u);na.sort(function(B,S){var aa=S.zindex-B.zindex;if(aa===0)aa=S.added-B.added;return aa});Ga=na.length;return u}function P(){wa&&wa.unbind();if(renderer){wa=INTERACT.watch(renderer.interactTarget);b.pannable&&wa.pannable().bind("pan",d);if(b.scalable){wa.bind("zoom",f);wa.bind("doubleTap",c)}wa.bind("pointerDown",g);wa.bind("pointerMove",i);wa.bind("pointerUp",n);b.captureHover&&wa.bind("pointerHover",h);wa.bind("tap",I)}}
function m(o,u,B){if(Ea){o=a(u.x,u.y);if(Ea.drag.call(Ea.target,Ea,o.x,o.y,B))redraw=true;if(B)Ea=null}}function A(o){var u,B,S=false;o=o||(new Date).getTime();if(S=o-Eb>hc){var aa=$(ia-jb),ua=$(ja-kb);u=ia!==lb||ja!==mb;B=la!==Fb;if(u||B)Qa++;if(aa>=Gb||ua>=Gb)ha();fa.trigger("enterFrame",o,ic++);Eb=o}if(S&&Qa){Ka=Hb|(la!==1?Ib:0)|(u?nb:0)|(ob?Jb:0);pb=(u=(Ka&(Ib|nb))!==0)&&(Ka&Jb)===0;u=O();if(renderer.prepare(na,u,Ka,o,xa)){Qa=0;for(ii=Ga;ii--;){B=na[ii];if((Ka&B.validStates)!==0){S=B.style?renderer.applyStyle(B.style):
null;B.draw(renderer,u,Ka,fa,o,xa);S&&renderer.applyStyle(S)}}renderer.render(u);lb=ia;mb=ja;Fb=la}if(xa){o=xa?xa.elements:[];if($a&&$a.type==="hover"){u=Hits.diffHits($a.elements,o);u.length>0&&Hits.triggerEvent($a,fa,"Out",u)}if(o.length>0){B=xa.x;S=xa.y;for(u=o.length;u--;){aa=o[u];ua=B;var Ha=S,Fa=aa&&aa.drag&&(!aa.canDrag||aa.canDrag(aa,ua,Ha));if(Fa){Ea=aa;Ea.startX=ua;Ea.startY=Ha}if(Fa)break}Hits.triggerEvent(xa,fa)}$a=o.length>0?COG.extend({},xa):null;xa=null}}animFrame(A)}function F(o,u,
B){xa=Hits.init(o,u,B,a(B.x,B.y,true));for(o=Ga;o--;)qb=qb||(na[o].hitGuess?na[o].hitGuess(xa.x,xa.y,Ka,fa):false);qb&&Qa++}function R(){Qa++}function O(){var o;o=la!==1?Ta.fromCenter(ia+(fa.width>>1),ja+(fa.height>>1),fa.width/la|0,fa.height/la|0):new j(ia,ja,fa.width,fa.height);o.scaleFactor=la;return o}function ha(){var o=O();if(o){if(Va||Wa)if(o){var u=db?ia+(o.w>>1):ia,B=eb?ja+(o.h>>1):ja,S=o.w,aa=o.h;if(Va&&Va>S)if(u+S>Va)ia=db?ia:Va-S;else if(u<0)ia=db?ia:0;if(Wa&&Wa>aa)if(B+aa>Wa)ja=eb?ja:
Wa-aa;else if(B<0)ja=eb?ja:0}jb=ia;kb=ja;Ba("refresh",fa,o);Qa++}}function va(o,u,B,S,aa){var ua;if(!Db){B=false;ua=X(J(o)/Math.LN2);o=ka(2,ua)}if(B)COG.tweenValue(la,o,B,aa,function(Ha,Fa){la=Ha;if(Fa){ua=X(J(la)/Math.LN2);la=ka(2,ua);S&&S()}e()});else{la=o;e()}return fa}function ta(o,u,B){o=T(b.minZoom,K(b.maxZoom,o));if(o!==Za){var S=ka(2,o-Za),aa=fa.width>>1,ua=fa.height>>1,Ha=aa/S|0,Fa=ua/S|0;Za=o;Pa(((u?u:ia+aa)-Ha)*S,((B?B:ja+ua)-Fa)*S);lb=ia;mb=ja;kb=jb=0;Ba("zoomLevelChange",o);la=1;renderer.reset();
ha()}}function Ba(){for(var o=fa.trigger.apply(null,arguments).cancel,u=na.length;u--;)o=na[u].trigger.apply(null,arguments).cancel||o;return!o}function Pa(o,u,B,S,aa){function ua(){Ha+=1;if(Ha>=2){ob=false;aa&&aa()}}var Ha=0;if(B){if((Ka&nb)===0){COG.tweenValue(ia,o,B,S,function(Fa,rb){ia=Fa|0;(rb?ua:R)();return!pb});COG.tweenValue(ja,u,B,S,function(Fa,rb){ja=Fa|0;(rb?ua:R)();return!pb});ob=true}}else{ia=o|0;ja=u|0;aa&&aa()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,
inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},b);var jc={},na=[],Ga=0,ib=document.getElementById(b.container),Ea=null,ic=0,gc=null,kc=!v(window.attachEvent,pa),qb=false,Gb=b.refreshDistance,ia=0,ja=0,jb=0,kb=0,lb=0,
mb=0,Va=null,Wa=null,db=false,eb=false,xa=null,pb=false,$a=null,Cb=0,la=1,Fb=1,Eb=0,wa=null,Db=true,ob=false,hc=1E3/b.fps|0,Qa=0,ec,fc,Za=b.zoomLevel,Hb=l("ACTIVE"),nb=l("PAN"),Ib=l("ZOOM"),Jb=l("ANIMATING"),Ka=Hb,fa={id:b.id,detach:function(){wa&&wa.unbind()},eachLayer:function(o){for(var u=Ga;u--;)o(na[u])},getLayer:function(o){for(var u=0;u<Ga;u++)if(na[u].id===o)return na[u];return null},getZoomLevel:function(){return Za},setLayer:function(o,u){for(var B=0;B<Ga;B++)if(na[B].id===o){na.splice(B,
1);break}u&&D(o,u);ha();return u},invalidate:R,refresh:ha,resetScale:function(){la=1},scale:va,setZoomLevel:ta,syncXY:function(){},triggerAll:Ba,removeLayer:function(o){a:{for(var u=Ga;u--;)if(na[u].id===o){o=u;break a}o=-1}if(o>=0&&o<Ga){fa.trigger("layerRemoved",na[o]);na.splice(o,1);Qa++}Ga=na.length},getOffset:function(){return new q(ia,ja)},getRenderer:function(){return renderer},getScaleFactor:function(){return la},setMaxOffset:function(o,u,B,S){Va=o;Wa=u;db=B;eb=S},getViewport:O,updateOffset:Pa,
pan:function(o,u,B,S,aa){Pa(ia+o,ja+u,B,S,aa)}};COG.observable(fa);fa.bind("resync",function(){});COG.configurable(fa,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(b,null,{container:function(o,u){ib=document.getElementById(u);G()},inertia:P,captureHover:P,scalable:P,pannable:P}),true);CANI.init(function(o){fa.markers=D("markers",new fb({zindex:20}));jc=o;G();kc?window.attachEvent("onresize",p):window.addEventListener("resize",
p,false)});animFrame(A);return fa},za=function(b){b=COG.extend({style:null,xy:null,size:null,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};za.prototype={constructor:za,animate:function(b,d,f,e){E(this,b,d,f,e)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);
this.size&&this.updateBounds(Ta.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=b},translate:function(b,d){this.translateX=b;this.translateY=d},updateBounds:function(b,d){b&&(!this.bounds||b.x!=this.bounds.x||b.y!=this.bounds.y)&&this.trigger("move",this,b,this.bounds);this.bounds=b;if(d)this.xy=Ta.center(this.bounds)}};var Yb=1E3/60|0,Ya=[],vb=0;t.prototype=COG.extend(za.prototype,{constructor:t,prep:function(b){return b.arc(this.xy.x,
this.xy.y,this.size>>1,0,Math.PI*2)}});r.prototype=COG.extend({},za.prototype,{constructor:r});y.prototype=COG.extend({},r.prototype);ba.prototype=COG.extend({},za.prototype,{constructor:ba});Y.prototype=COG.extend({},ba.prototype,{constructor:Y});V.prototype=COG.extend(za.prototype,{constructor:V});ca.prototype={constructor:ca,clip:null,cycle:function(){},draw:function(){},hitGuess:null};Ua=function(b,d){function f(n,p){if(a&&h){g=a.search(h);h=null}var I=p&&p.getZoomLevel?p.getZoomLevel():0;c[I]||
(c[I]=new hb);a=c[I]}d=COG.extend({imageLoadArgs:{}},d);var e=b?yb.init(b,d).run:null,a=null,c=[],g=[],h=null,i=COG.extend(new ca(d),{draw:function(n,p){n.drawTiles(p,a.search(p))}});i.bind("refresh",function(n,p,I){var G=(new Date).getTime();if(a){g=h?a.search(h):[];e(p,I,a,function(){p.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-G)+" ms")});h=Ta.copy(I)}});i.bind("parentChange",f);i.bind("resync",f);return i};var Lb=function(b){function d(i){clearTimeout(g);g=setTimeout(function(){a.sort(function(n,
p){if(p.xy&&n.xy){var I=p.xy.y-n.xy.y;return I!=0?I:p.xy.x-n.xy.x}});i&&i.invalidate()},50)}function f(i,n,p,I){I&&c.remove(I,n);c.insert(p,n)}function e(i,n){for(var p=a.length;p--;)a[p].resync(n)}b=COG.extend({zindex:10},b);var a=[],c=new hb,g=0,h=COG.extend(new ca(b),{add:function(i,n){if(i){i.layer=h;if(n)a.unshift(i);else a[a.length]=i;var p=h.view;if(p){i.resync(p);c&&i.bounds&&c.insert(i.bounds,i);d(p)}i.bind("move",f)}},clear:function(){c=new hb;a=[]},draw:function(i,n,p,I,G,D){I={};G=c&&
n?c.search(n):[];for(var P=G.length;P--;){var m=G[P],A=m.style||h.style,F,R=i.applyTransform(m),O=m.getProps?m.getProps(i,p):I;if(O=(F=i["prep"+m.typeName])?F.call(i,m,n,D,p,O):null){if(O.hit){D.elements.push(Hits.initHit(m.type,m,m.draggable?m.drag:null));F=D.type+"Style";A=m[F]||h[F]||A}A=A?i.applyStyle(A):null;(F=m.draw||O.draw)&&F.call(m,O);A&&i.applyStyle(A)}R&&R.undo&&R.undo()}},find:function(){return[].concat(a)},hitGuess:function(i,n){return c&&c.search({x:i-10,y:n-10,w:20,h:20}).length>0}});
h.bind("parentChange",e);h.bind("resync",e);return h},fb=function(b){return new Lb(b)};COG.extend(H,{ex:COG.extend,is:v,ticks:U,userMessage:function(b,d,f){H.trigger("userMessage",b,d,f)},indexOf:ga,Rect:j,XY:Na,XYRect:Ta,Vector:gb,Hits:Hits,Generator:yb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:x,TileLayer:Ua,getImage:s,viewState:l,View:Kb,ViewLayer:ca,ImageLayer:Ua,Drawable:za,Marker:t,Poly:r,Line:y,Arc:V,ImageDrawable:ba,ImageMarker:Y,DrawLayer:Lb,ShapeLayer:fb});COG.observable(H);var sb=
[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Da=Math.PI/180,La=180/Math.PI,tb=Q,Mb=-tb,Nb=M,lc=-Nb,cb=0.08181919084262157,ab=null,Ob={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ea=function(){function b(a){return a?f(a.lat,a.lon):null}function d(a){return!a||a.lat===0&&a.lon===0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function e(a){if(a)if(v(a.lat,xb))return b(a);else{if(a.split)for(var c=
[" ",","],g=0;g<c.length;g++){var h=a.split(c[g]);if(h.length===2)return f(h[0],h[1])}}else return f();return null}return{calcDistance:function(a,c){if(d(a)||d(c))return 0;var g=(c.lat-a.lat)*Da>>1,h=(c.lon-a.lon)*Da>>1;g=L(g)*L(g)+qa(a.lat*Da)*qa(c.lat*Da)*L(h)*L(h);return 6371*2*Xa(Aa(g),Aa(1-g))},copy:b,empty:d,equal:function(a,c){return a&&c&&a.lat==c.lat&&a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=ka(Math.E,-c),h=Q-2*ya(g),i=Ca(h,g),n=0;n<12&&$(h-i)>1.0E-7;){h=i;i=Ca(h,g);n++}return f(i*
La,a%360*La)},generalize:function(a,c,g){var h=a.length,i=[],n=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+c.length+" positions");for(var p=h;p--;)if(p===0)i.unshift(a[p]);else{var I=!n||ea.inArray(a[p],c)?g:ea.calcDistance(n,a[p]);if(a[p]&&I>=g){i.unshift(a[p]);n=a[p]}}COG.info("generalized "+h+" positions into "+i.length+" positions");return i},inArray:function(a,c){for(var g=ea.equal,h=c.length;h--;)if(g(a,c[h]))return true;return false},inBounds:function(a,c){var g=
!(ea.empty(a)||ea.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,c,g){var h=a.lat*Da;a=a.lon*Da;c=h+c/6371;g=sa(L(g/6371)/qa(h));g=a+g;c=(c+Q)%Math.PI-Q;g%=M;return f(c*La,g*La)},parse:e,parseArray:function(a){var c=a.length,g=Array(c);for(c=c;c--;)g[c]=e(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*Da,ma(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var p=
0,I=c.chunkSize,G=h;G--;){i[G]=T5.GeoXY.init(a[G]);p+=1;if(p>I)break}h=G;if(h<=0)c.callback&&c.callback(i);else animFrame(g)}var h=a.length,i=Array(h);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var n=h;n--;)i[n]=T5.GeoXY.init(a[n]);return i}animFrame(g);return null}}}(),Ia=function(){function b(a,c,g){var h=new q(0,c.lat-a.lat);h.x=(g||v(g,pa))&&a.lon>c.lon?360-a.lon+c.lon:c.lon-a.lon;return h}function d(a,c){return Ia.init(ea.init(a.min.lat-c,a.min.lon-c%360),ea.init(a.max.lat+
c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ea.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function e(a,c){return{min:ea.parse(a),max:ea.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,h=a.lat*Da,i=a.lon*Da,n=h-g,p=h+g;if(n>Mb&&p<tb){h=sa(L(g)/qa(h));g=(i-h)%M;i=(i+h)%M}else{n=T(n,Mb);p=K(p,tb);g=lc;i=Nb}return Ia.init(ea.init(n*La,g*La),ea.init(p*La,i*La))},expand:d,forPositions:function(a,c){var g=null,h=T5.ticks();c||(c="auto");for(var i=a.length;i--;)if(g){var n=
b(g.min,a[i],false),p=b(a[i],g.max,false);if(n.x<0)g.min.lon=a[i].lon;if(n.y<0)g.min.lat=a[i].lat;if(p.x<0)g.max.lon=a[i].lon;if(p.y<0)g.max.lat=a[i].lat}else g=e(a[i],a[i]);if(c){if(c=="auto"){i=b(g.min,g.max);c=T(i.x,i.y)*0.3}g=d(g,c)}COG.trace("calculated bounds for "+a.length+" positions",h);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,
c){var g=f(a);g=K(X($(g.lat)*0.05),sb.length);var h=sb[g],i=b(a.min,a.max);g=z(J(sb[3]*c.h/i.y)/J(2));h=z(J(h*c.w/i.x)/J(2));return K(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:e,isEmpty:function(a){return!a||ea.empty(a.min)||ea.empty(a.max)},toString:function(a){return"min: "+ea.toString(a.min)+", max: "+ea.toString(a.max)}}}();gb=function(){var b=/^(\d+).*$/,d=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(f,e){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=e.split(","),g=0;g<c.length;g++){d.lastIndex=
-1;if(d.test(c[g])){var h=d.exec(c[g]);if(a>=parseInt(h[1],10)&&a<=parseInt(h[2],10))return true}else if(a==c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!ab){var e=[];for(var a in Ob)e.push(a);ab=RegExp("(\\s)("+e.join("|")+")(\\s|$)","i")}ab.lastIndex=-1;if(e=ab.exec(f))f=f.replace(ab,"$1"+Ob[e[2]]);return f},toString:function(f){return f.streetDetails+" "+f.location}}}();var Ja=H.GeoXY=function(){function b(e,a){if(e.length){for(var c,g,h,i,n=e.length;n--;){b(e[n],
a);c=v(c,pa)||e.x<c?e.x:c;g=v(g,pa)||e.y<g?e.y:g;h=v(h,pa)||e.x>h?e.x:h;i=v(i,pa)||e.y>i?e.y:i}return new j(c,g,h-c,i-g)}else if(e.mercXY){c=e.mercXY;e.x=(c.x+Math.PI)/a|0;e.y=(Math.PI-c.y)/a|0;e.rpp=a}else COG.warn("Attempted to sync an XY composite, not a GeoXY");return e}function d(e,a){if(e.length)for(var c=e.length;c--;)d(e[c],a);else{e.mercXY=new q(e.x*a-Math.PI,Math.PI-e.y*a);e.pos=ea.fromMercatorPixels(e.mercXY.x,e.mercXY.y)}return e}function f(e,a,c){e.pos=a;e.mercXY=ea.toMercatorPixels(a);
(c=v(c,xb)?c:e.rpp)&&b(e,c)}return{init:function(e,a){var c=new q;f(c,e,a);return c},sync:b,syncPos:d,toPos:function(e,a){a=a||e.rpp;return ea.fromMercatorPixels(e.x*a-Math.PI,Math.PI-e.y*a)},updatePos:f}}(),Oa={};Ua=function(){return{bestResults:function(b,d){d||(d=20);for(var f=b.length>0?b[0]:null,e=[],a=0;a<b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=d)e.push(b[a]);else break;return e}}}();var Pb=function(b){b=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},
b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})},mc=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&ea.vectorize(c.geometry,{callback:function(h){g.add(new T5.Line(h,{style:"waypoints",simplify:true}));a.setLayer("route",g)}})}function d(a){for(var c=f.Unknown,g=e,h=0;h<g.length;h++){g[h].regex.lastIndex=-1;var i=g[h].regex.exec(a);if(i){c=g[h].customCheck?g[h].customCheck(a,i):g[h].turnType;break}}return c}var f={Unknown:"turn-unknown",
Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},e=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,
g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});a.push({regex:/take.*?ramp/i,turnType:f.Ramp});a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});
a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=Z("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=ea.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:d,TurnType:f,
Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=d(a.description);return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Ia.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&
c.push(a.instructions[g].position);return c}},a)}}}(),nc="featurecollection",oc="feature",wb={async:false},Ra={processor:null,group:"shapes",layerClass:fb},pc={point:COG.extend({},Ra,{processor:function(b,d,f,e){d=da([d.coordinates],wb);if(d.length>0)if(f=e.marker(d[0],f)){b.add(f);return d.length}},group:"markers",layerClass:fb}),linestring:COG.extend({},Ra,{processor:function(b,d,f,e){d=da(d&&d.coordinates?d.coordinates:[]);return W(b,d,f,e.line)}}),multilinestring:COG.extend({},Ra,{processor:function(b,
d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=d.length;c--;)a+=W(b,d[c],f,e.line);return a}}),polygon:COG.extend({},Ra,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];if(d.length>0)return W(b,d[0],f,e.poly);return 0}}),multipolygon:COG.extend({},Ra,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=0;c<d.length;c++)a+=W(b,d[c][0],f,e.poly);return a}})},Qb=function(b,d,f,e){function a(m,A){var F=m.processor,R=n+m.group,O=COG.extend({},m,f,{properties:A.properties});
if(F){var ha=P[R];if(!ha){ha=new m.layerClass({id:R});P[R]=ha}return F(ha,A.data,O,e)}return 0}function c(m,A){var F=m&&m.type?m.type.toLowerCase():null;return F&&F===oc?c(m.geometry,m.properties):{type:F,isCollection:F?F===nc:false,definition:pc[F],data:m,properties:A?A:m.properties}}function g(m){var A=0,F=COG.extend({},f),R=p;m=m?m:(new Date).getTime();if(!G){for(;R<I;R++){m=c(i?i(b[R]):b[R]);var O=null;if(m.isCollection){F.layerPrefix=n+D++ +"-";G=new Qb(m.data.features,function(ha){G=null;for(var va in ha)P[va]=
ha[va];p>=I&&d&&d(P)},F);O+=1}else if(m.definition)O=a(m.definition,m);A+=O?O:1;if(A>=h)break}p=R+1;if(G||p<I)animFrame(g);else d&&d(P)}}f=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},f);e=COG.extend({marker:function(m){return new t({xy:m})},line:function(m,A){return new r(m,COG.extend({},f,A))},poly:function(m,A){return new r(m,COG.extend({fill:true},f,A))}},e);var h=500,i=f.rowPreParse,n=f.layerPrefix,p=0,I=0,G=null,D=0,P={};if(b){v(b,"array")||(b=[b]);I=b.length;animFrame(g)}};
Ra=H.GeoJSON={parse:function(b,d,f){return new Qb(b,d,f)}};H.Map=function(b){function d(D){try{var P=ea.init(D.coords.latitude,D.coords.longitude),m=D.coords.accuracy/1E3;G.trigger("locationUpdate",D,m);if(n){if(!h){h=new UI.LocationOverlay({pos:P,accuracy:m});h.update(G.getTileLayer());G.setLayer("location",h)}var A=Ia.createBoundsFromCenter(P,Math.max(m,1));G.gotoBounds(A)}else{h.pos=P;h.accuracy=m;h.update(G.getTileLayer());a(P,null,COG.easing("sine.out"))}n=false}catch(F){COG.exception(F)}}function f(D){COG.info("caught location tracking error:",
D)}function e(D,P,m){G.setZoomLevel(P);a(D,m)}function a(D,P,m,A){D=Ja.init(D,oa(G.getZoomLevel()));G.updateOffset(D.x-(G.width>>1),D.y-(G.height>>1),m,A,function(){P&&P(G)})}b=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2};new q;var g=c.NONE,h=null,i=0,n=true,p=0,I=b.tapExtent;b.adjustScaleFactor=function(D){return Math.pow(2,(D<1?Math.floor:Math.ceil)(Math.log(D)))};var G=COG.extend(new Kb(b),{getBoundingBox:function(){var D=
G.getViewport();return D?Ia.init(Ja.toPos(new q(D.x,D.y2),p),Ja.toPos(new q(D.x2,D.y),p)):null},getCenterPosition:function(){var D=G.getViewport();if(D){D=new q(D.x+(D.w>>1),D.y+(D.h>>1));return Ja.toPos(D,p)}return null},gotoBounds:function(D,P){var m=Ia.getZoomLevel(D,G.getViewport());e(Ia.getCenter(D),m,P)},gotoPosition:e,panToPosition:a,syncXY:function(D,P){return(P?Ja.syncPos:Ja.sync)(D,p)},locate:function(){G.trackStart(c.SINGLE);setTimeout(G.trackCancel,1E4)},trackStart:function(D){if(navigator.geolocation&&
!i){g=D?D:c.WATCH;n=true;i=navigator.geolocation.watchPosition(d,f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},trackCancel:function(){i&&navigator.geolocation&&navigator.geolocation.clearWatch(i);G.removeLayer("location");h=null;g=c.NONE;i=0},animateRoute:function(D,P,m,A){var F=G.getLayer("route");if(F)(D=F.getAnimation(D,P,m,A))&&D.addToView(G)}});G.bind("pan",function(){g===c.SINGLE&&G.trackCancel()});G.bind("tap",function(D,P,m,A){D=Ja.toPos(A,p);var F=Ja.toPos(Na.offset(A,-I,I),p);
A=Ja.toPos(Na.offset(A,I,-I),p);G.trigger("geotap",P,m,D,Ia.init(F,A))});G.bind("refresh",function(){G.trigger("boundsChange",G.getBoundingBox())});G.bind("zoomLevelChange",function(D,P){var m;p=oa(P);m=M/p|0;G.setMaxOffset(m,m,true,false);G.resetScale();G.triggerAll("resync",G)});return G};H.GeoShape=function(b,d){d=COG.extend({autoParse:true},d);for(var f=Array(b.length),e=d.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(e?a(b[c]):b[c]);return new T5.Poly(f,d)};H.LocationOverlay=
function(b){b=COG.extend({pos:null,accuracy:null,zindex:90},b);var d=new Image,f=T5.XY.init(),e=T5.XY.init(),a=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
d.onload=function(){f=T5.XY.init(d.width>>1,d.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,h){var i=e.x-h.x,n=e.y-h.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(i,n,a,0,Math.PI*2,false);g.fill()}d.complete&&d.width>0&&g.drawImage(d,i-f.x,n-f.y,d.width,d.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;e=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,h){c.update(h)});
return c};H.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:Z,radsPerPixel:oa,Position:ea,BoundingBox:Ia,Radius:function(b,d){return{distance:parseInt(b,10),uom:d}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:gb,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var d=COG.extend({remove:function(){delete Oa[d.id]}},b);return Oa[d.id]=d},Search:Ua,GeoSearchResult:Pb,LocationSearch:function(b){function d(g,h){navigator.geolocation.clearWatch(e);e=0;if(a){clearTimeout(a);a=0}h&&h([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var e=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,h){if(navigator.geolocation&&!e){e=navigator.geolocation.watchPosition(function(i){var n=
ea.init(i.coords.latitude,i.coords.longitude);i=new Pb({id:1,caption:"Current Location",pos:n,accuracy:i.coords.accuracy/1E3,matchWeight:100});if(!c||i.accuracy<c.accuracy)c=i;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)d(c,h)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&d(c,h)},b.searchTimeout)}}},b))},Routing:mc,GeoJSON:Ra}})(T5);
