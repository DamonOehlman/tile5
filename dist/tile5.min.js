COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var B=arguments[0]||{},X,u=1,r=arguments.length;u<r;u++)if((X=arguments[u])!==null)for(var k in X){var l=X[k];if(B!==l)if(l!==undefined)B[k]=l}return B};
(function(){var B=Object.prototype.hasOwnProperty,X=0,u={};u.toID=function(r){return r.replace(/\s/g,"-")};u.objId=function(r){return(r?r:"obj")+X++};u.isFunction=function(r){return toString.call(r)==="[object Function]"};u.isArray=function(r){return toString.call(r)==="[object Array]"};u.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!B.call(r,"constructor")&&!B.call(r.constructor.prototype,"isPrototypeOf"))return false;
var k;for(k in r);return k===undefined||B.call(r,k)};u.isEmptyObject=function(r){for(var k in r)return false;return true};u.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};u.contains=function(r,k){var l=r,s=arguments,y=1;if(k&&module.isArray(k)){s=k;y=0}for(y=y;y<s;y++)l=l&&typeof foo[s[y]]!=="undefined";return l};u.formatStr=function(r){if(arguments.length<=1)return r;for(var k=arguments.length-2,l=0;l<=k;l++)r=r.replace(RegExp("\\{"+l+"\\}","gi"),arguments[l+1]);return r};
u.wordExists=function(r,k){var l="";if(k.toString)k=k.toString();for(var s=0;s<k.length;s++)l+=!/\w/.test(k[s])?"\\"+k[s]:k[s];return RegExp("(^|\\s|\\,)"+l+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,u)})();
(function(){function B(l){return typeof console!=="undefined"?function(){console[l](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var X=window.console&&window.console.markTimeline,u=B("error"),r=B("info"),k=function(){return X?function(l,s){console.markTimeline(l+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:k,debug:B("debug"),info:r,warn:B("warn"),error:u,exception:function(l){if(u)for(var s in l)r("ERROR DETAIL: "+s+
": "+l[s])}})})();
(function(){function B(u,r){var k=u.hasOwnProperty("obsHandlers")?u.obsHandlers:null;k[r]||(k[r]=[]);return k[r]}var X=0;COG.observable=function(u){if(!u)return null;if(!(u.hasOwnProperty("obsHandlers")?u.obsHandlers:null))u.obsHandlers={};if(!u.hasOwnProperty("bind")){u.bind=function(r,k){var l="callback"+X++;B(u,r).unshift({fn:k,id:l});return l};u.triggerCustom=function(r,k){var l=B(u,r),s={cancel:false,name:r,source:this},y;k&&COG.extend(s,k);if(!l)return null;y=Array.prototype.slice.call(arguments,2);
u.eventInterceptor&&u.eventInterceptor(r,s,y);y.unshift(s);for(var Q=l.length;Q--&&!s.cancel;)l[Q].fn.apply(this,y);return s};u.trigger=function(r){var k=Array.prototype.slice.call(arguments,1);k.splice(0,0,r,null);return u.triggerCustom.apply(this,k)};u.unbind=function(r,k){if(typeof r==="undefined")u.obsHandlers={};else for(var l=B(u,r),s=0;l&&s<l.length;s++)if(l[s].id===k){l.splice(s,1);break}return u}}return u}})();
(function(){function B(k,l){k[l]||(k[l]=function(s){return k.configure(l,s)})}function X(k){k.gtConfId="configurable"+r++;k.gtConfig={};k.gtConfigFns=[];return k.gtConfig}var u={},r=0;COG.paramTweaker=function(k,l,s){return function(y,Q){if(typeof Q!=="undefined"){if(y in k)k[y]=Q;s&&y in s&&s[y](y,Q)}else return l&&y in l?l[y](y):k[y]}};COG.configurable=function(k,l,s,y){if(k){k.gtConfId||X(k);var Q=k.gtConfId,ja=k.gtConfig,o=k.gtConfigFns;u[Q]=k;o.push(s);for(s=l.length;s--;){ja[l[s]]=true;y&&B(k,
l[s])}if(!k.configure)k.configure=function(A,i){if(ja[A]){for(var m=o.length;m--;){var v=o[m](A,i);if(typeof v!=="undefined")return v}return u[Q]}return null}}}})();
(function(){function B(k){var l=document.createElement("script"),s=false;l.src=k;l.async=true;l.onload=l.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;l.onload=l.onreadystatechange=null;l&&l.parentNode&&l.parentNode.removeChild(l)}};u||(u=document.getElementsByTagName("head")[0]);u.appendChild(l)}var X=0,u,r=this;COG.jsonp=function(k,l,s){k+=k.indexOf("?")>=0?"&":"?";var y="json"+ ++X;r[y]=function(Q){l(Q);r[y]=null;try{delete r[y]}catch(ja){}};
B(k+(s?s:"callback")+"="+y);return y}})();
(function(){var B=1.70158,X=Math.PI/2,u=Math.PI*2,r=1E3/60|0,k=Math.abs,l=Math.pow,s=Math.sin,y=Math.asin,Q=Math.cos,ja={linear:function(o,A,i,m){return i*o/m+A},backin:function(o,A,i,m){return i*(o/=m)*o*((B+1)*o-B)+A},backout:function(o,A,i,m){return i*((o=o/m-1)*o*((B+1)*o+B)+1)+A},backinout:function(o,A,i,m){return(o/=m/2)<1?i/2*o*o*(((B*=1.525)+1)*o-B)+A:i/2*((o-=2)*o*(((B*=1.525)+1)*o+B)+2)+A},bouncein:function(o,A,i,m){return i-ja.bounceout(m-o,0,i,m)+A},bounceout:function(o,A,i,m){return(o/=
m)<1/2.75?i*7.5625*o*o+A:o<2/2.75?i*(7.5625*(o-=1.5/2.75)*o+0.75)+A:o<2.5/2.75?i*(7.5625*(o-=2.25/2.75)*o+0.9375)+A:i*(7.5625*(o-=2.625/2.75)*o+0.984375)+A},bounceinout:function(o,A,i,m){return o<m/2?ja.bouncein(o*2,0,i,m)/2+A:ja.bounceout(o*2-m,0,i,m)/2+i/2+A},cubicin:function(o,A,i,m){return i*(o/=m)*o*o+A},cubicout:function(o,A,i,m){return i*((o=o/m-1)*o*o+1)+A},cubicinout:function(o,A,i,m){if((o/=m/2)<1)return i/2*o*o*o+A;return i/2*((o-=2)*o*o+2)+A},elasticin:function(o,A,i,m,v,L){if(o==0)return A;
if((o/=m)==1)return A+i;L||(L=m*0.3);if(!v||v<k(i)){v=i;i=L/4}else i=L/u*y(i/v);return-(v*l(2,10*(o-=1))*s((o*m-i)*u/L))+A},elasticout:function(o,A,i,m,v,L){var F;if(o==0)return A;if((o/=m)==1)return A+i;L||(L=m*0.3);if(!v||v<k(i)){v=i;F=L/4}else F=L/u*y(i/v);return v*l(2,-10*o)*s((o*m-F)*u/L)+i+A},elasticinout:function(o,A,i,m,v,L){var F;if(o==0)return A;if((o/=m/2)==2)return A+i;L||(L=m*0.3*1.5);if(!v||v<k(i)){v=i;F=L/4}else F=L/u*y(i/v);if(o<1)return-0.5*v*l(2,10*(o-=1))*s((o*m-F)*u/L)+A;return v*
l(2,-10*(o-=1))*s((o*m-F)*u/L)*0.5+i+A},quadin:function(o,A,i,m){return i*(o/=m)*o+A},quadout:function(o,A,i,m){return-i*(o/=m)*(o-2)+A},quadinout:function(o,A,i,m){if((o/=m/2)<1)return i/2*o*o+A;return-i/2*(--o*(o-2)-1)+A},sinein:function(o,A,i,m){return-i*Q(o/m*X)+i+A},sineout:function(o,A,i,m){return i*s(o/m*X)+A},sineinout:function(o,A,i,m){return-i/2*(Q(Math.PI*o/m)-1)+A}};COG.tweenValue=function(o,A,i,m,v){function L(E){E=E?E:(new Date).getTime();if(ma+r<E){var U=E-F,wa=i(U,o,qa,m),ta=F+m<=
E;E=!ta;if(v){U=v(wa,ta,U);E=typeof U!="undefined"?U&&E:E}E&&animFrame(L)}}var F=(new Date).getTime(),ma=0,qa=A-o;animFrame(L);return{}};COG.easing=function(o){return ja[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(o,A){ja[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]=A}})();
(function(){var B=/^P(\d+Y)?(\d+M)?(\d+D)?$/,X=/^(\d+H)?(\d+M)?(\d+S)?$/,u={8601:function(k){k=k.split("T");var l=null;l=null;var s=0,y=0;B.lastIndex=-1;l=B.exec(k[0]);s+=l[3]?parseInt(l[3].slice(0,-1),10):0;X.lastIndex=-1;l=X.exec(k[1]);y+=l[1]?parseInt(l[1].slice(0,-1),10)*3600:0;y+=l[2]?parseInt(l[2].slice(0,-1),10)*60:0;y+=l[3]?parseInt(l[3].slice(0,-1),10):0;return new r(s,y)}},r=COG.Duration=function(k,l){return{days:k?k:0,seconds:l?l:0}};COG.addDuration=function(){for(var k=new r,l=arguments.length;l--;){k.days+=
arguments[l].days;k.seconds+=arguments[l].seconds}if(k.seconds>=86400){k.days+=~~(k.seconds/86400);k.seconds%=86400}return k};COG.formatDuration=function(k){var l,s,y="";if(k.days)y=k.days+" days ";if(k.seconds){k=k.seconds;if(k>=3600){l=~~(k/3600);k-=l*3600}if(k>=60){s=Math.round(k/60);k-=s*60}if(l)y=y+l+(l>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)y=y+s+" min";else if(k>0)y=y+(k>10?k:"0"+k)+" sec"}return y};COG.parseDuration=function(k,l){var s=l?u[l]:null;if(s)return s(k);COG.Log.warn("Could not find duration parser for specified format: "+
l);return new r}})();COG.ObjectStore=function(){var B={},X={},u="obj_"+(new Date).getTime(),r=0,k=Object.prototype.hasOwnProperty;return{add:function(l,s){var y;s=s?s:"default";if(l&&l.constructor)if(!k.call(l,"id"))l.id=u+ ++r;y=X[s]?X[s]:X[s]=[];B[l.id]=y.length;y[l.length]=l}}};var CANI={};
(function(B){var X=[],u=0,r=false,k=B.register=function(l,s){X.push({section:l,run:s})};B.init=function(l){function s(){if(u<X.length){var Q=X[u++];y[Q.section]||(y[Q.section]={});Q.run(y[Q.section],s)}else{for(Q in y)B[Q]=y[Q];r=true;l&&l(B)}}var y={};if(r&&l)l(B);else{u=0;s()}};k("canvas",function(l,s){function y(){var A,i=Q.getContext("2d");i.save();try{i.translate(50,50);i.beginPath();i.rect(0,0,20,20);A=i.isPointInPath(10,10)}finally{i.restore()}return A}var Q=document.createElement("canvas"),
ja=typeof FlashCanvas!="undefined",o=typeof G_vmlCanvasManager!="undefnined";Q.width=200;Q.height=200;l.pipTransformed=ja||o?false:y();s()})})(CANI);
INTERACT=function(){function B(i){return function(m,v){i.addEventListener(m,v,false)}}function X(i){return function(m,v){i.removeEventListener(m,v,false)}}function u(i){return function(m,v){i.attachEvent("on"+m,v)}}function r(i,m){return{x:i?i:0,y:m?m:0,count:1}}function k(i,m){o.push(COG.extend({handler:null,checks:{},type:i},m))}function l(i){var m=0,v=0;if(i.offsetParent){do{m+=i.offsetLeft;v+=i.offsetTop;i=i.offsetParent}while(i)}return{left:m,top:v}}function s(i,m){return{source:i,target:m.target?
m.target:m.srcElement}}function y(i,m){for(var v=i.target?i.target:i.srcElement;v&&v!==m;)v=v.parentNode;return v&&v===m}function Q(i,m){return{x:i.x-(m?m.left:0),y:i.y-(m?m.top:0)}}function ja(i,m){if(i.preventDefault){i.preventDefault();i.stopPropagation()}else if(typeof i.cancelBubble!="undefined")i.cancelBubble=true;m&&i.stopImmediatePropagation&&i.stopImmediatePropagation()}var o=[],A=function(i,m,v){function L(ea,da,fa,M){var N=0,ha=0,w=0;COG.tweenValue(0,ea,fa,M,function(I){w=N;N=I});COG.tweenValue(0,
da,fa,M,function(I){F.trigger("pan",N-w,I-ha);ha=I})}v=COG.extend({binder:null,unbinder:null,observable:null},v);for(var F=v.observable,ma=null,qa=[],E=[],U,wa,ta={bind:function(){return F.bind.apply(null,arguments)},pannable:function(ea){ma=COG.extend({inertia:true},ea);return ta},unbind:function(){F.unbind();for(Ba=0;Ba<qa.length;Ba++)qa[Ba].unbind();return ta}},Ba=0;Ba<m.length;Ba++)qa.push(m[Ba](i,F,v));F.bind("pointerDown",function(){E=[];wa=U=0});F.bind("pointerMove",function(ea,da,fa,M){if(ma){E[E.length]=
{ticks:(new Date).getTime(),x:M.x,y:M.y};F.trigger("pan",M.x,M.y)}U+=M.x?M.x:0;wa+=M.y?M.y:0});F.bind("pointerUp",function(ea,da,fa){if(Math.abs(U)>20||Math.abs(wa)>20){if(ma){fa=E.length;var M,N;da=0;for(N=E.length;--N>1&&da<50;)da+=E[N].ticks-E[N-1].ticks;if(fa-N>1){ea=E[fa-1].x-E[N].x;M=E[fa-1].y-E[N].y;N=Math.sqrt(ea*ea+M*M)|0;if(N>15){ea=E[fa-1].x-E[0].x;M=E[fa-1].y-E[0].y;N=Math.sqrt(ea*ea+M*M)|0;fa=Math.asin(M/N);da=N*500/da|0;da=da>300?300:da;L(Math.cos(ea>0?fa:Math.PI-fa)*da,Math.sin(fa)*
da,COG.easing("sine.out"),500)}}}}else F.triggerCustom("tap",ea,da,fa)});return ta};k("pointer",{handler:function(i,m,v){function L(w){if(w.pageX&&w.pageY)return r(w.pageX,w.pageY);else{var I=document.documentElement,V=document.body;return r(w.clientX+(I&&I.scrollLeft||V&&V.scrollLeft||0)-(I&&I.clientLeft||V&&V.clientLeft||0),w.clientY+(I&&I.scrollTop||V&&V.scrollTop||0)-(I&&I.clientTop||V&&V.clientTop||0))}}function F(w){if(y(w,i))if(ea=U(w)){var I=L(w);i.style.cursor="move";ja(w,true);N=I.x;ha=
I.y;da=r(N,ha);m.triggerCustom("pointerDown",s("mouse",w),da,Q(da,l(i)))}}function ma(w){var I=L(w);fa=I.x;M=I.y;if(y(w,i))wa(w,ea?"pointerMove":"pointerHover")}function qa(w){if(ea&&U(w)){ea=false;if(y(w,i)){i.style.cursor="default";wa(w,"pointerUp")}}}function E(w){if(y(w,i)){var I;w=w||window.event;if(w.detail)I=w.axis===2?-w.detail*ta:0;else{I=w.wheelDeltaY?w.wheelDeltaY:w.wheelDelta;if(window.opera)I=-I}if(I!==0){var V=r(fa,M);m.triggerCustom("zoom",s("mouse",w),V,Q(V,l(i)),I/Ba,"wheel");ja(w);
w.returnValue=false}}}function U(w){w=w||window.event;return(w.which||w.button)==1}function wa(w,I,V,ra,ya){V=typeof V!="undefined"?V:fa;ra=typeof ra!="undefined"?ra:M;var C=V-N,R=ra-ha,S=r(V,ra);m.triggerCustom(I,s("mouse",w),S,Q(S,l(i)),r(C,R));if(typeof ya=="undefined"||ya){N=V;ha=ra}}v=COG.extend({},v);var ta=120,Ba=ta*8,ea=false,da,fa,M,N,ha;v.binder("mousedown",F);v.binder("mousemove",ma);v.binder("mouseup",qa);v.binder("dblclick",function(w){COG.info("captured double click");if(y(w,i)){var I=
L(w);m.triggerCustom("doubleTap",s("mouse",w),I,Q(I,l(i)))}});v.binder("mousewheel",E);v.binder("DOMMouseScroll",E);return{unbind:function(){v.unbinder("mousedown",F);v.unbinder("mousemove",ma);v.unbinder("mouseup",qa);v.unbinder("mousewheel",E);v.unbinder("DOMMouseScroll",E)}}},checks:{touch:false}});k("pointer",{handler:function(i,m,v){function L(C){if(C.count<2)return 0;var R=C.x-C.next.x;C=C.y-C.next.y;return~~Math.sqrt(R*R+C*C)}function F(C,R,S){R=R?R:0;S=S?S:0;for(var na={x:C.x-R,y:C.y-S,id:C.id,
count:C.count},Ca=na;C.next;){C=C.next;Ca=Ca.next={x:C.x-R,y:C.y-S,id:C.id}}return na}function ma(C,R){var S=C[R?R:"touches"],na,Ca;if(S.length===0)return null;Ca=na={x:S[0].pageX,y:S[0].pageY,id:S[0].identifier,count:S.length};for(var za=1,Ta=S.length;za<Ta;za++)Ca=Ca.next={x:S[za].pageX,y:S[za].pageY,id:S[za].identifier};return na}function qa(C){if(y(C,i)){M=l(i);var R=ma(C,"changedTouches"),S=F(R,M.left,M.top);if(!ha){N=ea;m.triggerCustom("pointerDown",s("touch",C),R,S)}ra&&m.triggerCustom("pointerDownMulti",
s("touch",C),R,S);ha=ma(C);if(ha.count>1)I=L(ha);ya=1;V=F(ha)}}function E(C){if(y(C,i)){ja(C);w=ma(C);if(N==ea)N=Math.abs(ha.x-w.x)>ta||Math.abs(ha.y-w.y)>ta?Ba:ea;if(N!=ea){N=w.count>1?fa:da;if(N==fa)if(ha.count===1){ha=F(w);I=L(ha)}else{var R=L(w);if(Math.abs(I-R)<wa)N=da;else{var S;S=w.x;var na=w.next.x,Ca=w.y,za=w.next.y,Ta=Ca<za?Ca:za;S={x:(S<na?S:na)+(Math.abs(S-na)>>1),y:Ta+(Math.abs(Ca-za)>>1)};R=R/I;na=R-ya;m.triggerCustom("zoom",s("touch",C),S,Q(S,M),na,"pinch");ya=R}}N==da&&m.triggerCustom("pointerMove",
s("touch",C),w,F(w,M.left,M.top),r(w.x-V.x,w.y-V.y));ra&&m.triggerCustom("pointerMoveMulti",s("touch",C),w,F(w,M.left,M.top))}V=F(w)}}function U(C){if(y(C,i)){var R=ma(C,"changedTouches"),S=F(R,M.left,M.top);w=ma(C);if(!w){m.triggerCustom("pointerUp",s("touch",C),R,S);ha=null}ra&&m.triggerCustom("pointerUpMulti",s("touch",C),R,S)}}v=COG.extend({detailed:false,inertia:false},v);var wa=20,ta=7,Ba=0,ea=1,da=2,fa=3,M,N,ha,w,I,V,ra=v.detailed,ya=1;v.binder("touchstart",qa);v.binder("touchmove",E);v.binder("touchend",
U);COG.info("initialized touch handler");return{unbind:function(){v.unbinder("touchstart",qa);v.unbinder("touchmove",E);v.unbinder("touchend",U)}}},checks:{touch:true}});return{register:k,watch:function(i,m,v){m=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},m);capabilities=COG.extend({touch:"ontouchstart"in window},v);if(!m.observable){COG.info("creating observable");m.observable=COG.observable({});globalOpts=m}m.binder=(m.isIE?u:B)(m.bindTarget||
document);m.unbinder=(m.isIE?u:X)(m.bindTarget||document);v=m.types;for(var L=capabilities,F=[],ma=o.length;ma--;){var qa=o[ma],E=!v||v.indexOf(qa.type)>=0,U=true;for(var wa in qa.checks){var ta=qa.checks[wa];COG.info("checking "+wa+" capability. require: "+ta+", capability = "+L[wa]);U=U&&ta===L[wa]}if(E&&U)F[F.length]=qa.handler}return new A(i,F,m)}}}();var T5={};
(function(B){function X(){return(new Date).getTime()}function u(a,e){e=Qb.call(e);if(e=="finite")return!Rb[Sb](+a);return e=="null"&&a===null||e==typeof a||e=="object"&&a===Object(a)||e=="array"&&Array.isArray&&Array.isArray(a)||Tb.call(a).slice(8,-1).toLowerCase()==e}function r(a,e){this.x=a||0;this.y=e||0}function k(a,e,c,d){this.x=a||0;this.y=e||0;this.w=c||0;this.h=d||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function l(a,e){var c=new vb(Math.sqrt(256<<a)|0);e&&e.zoomLevel===a&&e.copyInto(c);
c.zoomLevel=a;return c}function s(a){a=a||(new Date).getTime();for(var e=0;e<Ua.length;){var c=Ua[e],d=Pa[c],b=Pa[c].image&&(cb||Pa[c].image.complete&&Pa[c].image.width>0),f=a-d.start;f=b||f>=Ub;if(b){b=d.callbacks;wb[c]=d.image;for(var g=0;g<b.length;g++)b[g](d.image,true)}if(f){Ua.splice(e,1);delete Pa[c]}else e++}Ua.length>0&&animFrame(s)}function y(a,e){var c=a&&e?wb[a]:null;if(c&&c&&(cb||c.complete&&c.width>0))e(c);else{if(c=Pa[a])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++Vb;Pa[a]=
{start:(new Date).getTime(),image:c,callbacks:[e]};c.src=a;Ua[Ua.length]=a}animFrame(s)}}function Q(a,e,c,d,b,f){this.x=a;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=c;this.id=f||a+"_"+e;this.loaded=false;this.image=null}function ja(){for(var a=0,e=arguments.length;e--;){var c=Wb[arguments[e].toUpperCase()];if(c)a|=c}return a}function o(a){a=a?a:(new Date).getTime();if(a-xb>Xb){for(var e=Ya.splice(0),c=e.length;c--;)e[c](a);xb=a}Ya.length&&animFrame(o)}
function A(a){var e=Ya.length==0;Ya[Ya.length]=a;e&&animFrame(o)}function i(a,e,c,d,b){b=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},b);var f=(new Date).getTime(),g=a[e],h=e=="translate",j=b.autoInvalidate,n=c.length&&d.length&&c.length==d.length?c.length:0,p=Array(n),D=Array(n),T=COG.easing(b.easing),ka=b.duration,J=b.progress,H=function(G){var $=G-f;G=f+ka<=G;for(var ga=a.layer?a.layer.view:null,la,ia=n;ia--;){la=T($,c[ia],p[ia],ka);D[ia]=h?la|0:la}g.apply(a,
D);j&&ga&&ga.invalidate();if(J){$=[].concat(G?d:D);$.unshift(G);J.apply(a,$)}if(G){a.animations--;g.apply(a,d);b.complete&&b.complete.apply(a,d)}else A(H)};if(g&&g.apply&&n>0){ka=ka?ka:DEFAULT_DURATION;for(e=n;e--;)p[e]=d[e]-c[e];a.animations++;A(H)}}function m(a){a=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},a);Ga.call(this,a)}function v(a,e){e=COG.extend({simplify:false,fill:true,typeName:"Poly"},e);var c=e.simplify;Ga.call(this,e);COG.extend(this,
{getPoints:function(){return[].concat(a)},resync:function(d){var b,f,g,h,j,n;d.syncXY(a);n=this.points=Qa.floor(c?Qa.simplify(a):a);for(var p=n.length;p--;){d=n[p].x;b=n[p].y;h=u(h,xa)||d<h?d:h;j=u(j,xa)||b<j?b:j;f=u(f,xa)||d>f?d:f;g=u(g,xa)||b>g?b:g}this.updateBounds(new k(h,j,f-h,g-j),true)}});this.haveData=a&&a.length>=2}function L(a,e){e.fill=false;v.call(this,a,e)}function F(a){function e(){if(g&&g.width>0){if(!this.centerOffset)this.centerOffset=new r(-g.width>>1,-g.height>>1);this.updateBounds(new k(this.xy.x+
this.centerOffset.x,this.xy.y+this.centerOffset.y,g.width,g.height),false)}}function c(j){if(this.imageUrl=j){var n=this;y(this.imageUrl,function(p,D){g=p;if(D){var T=h.layer?h.layer.view:null;T&&T.invalidate()}e.apply(n)})}}a=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},a);var d=Ga.prototype.resync,b=0,f=0,g=a.image;Ga.call(this,a);var h=COG.extend(this,{changeImage:c,getProps:function(){this.bounds||e(this,g);return{image:g,x:this.xy.x+b,y:this.xy.y+f}},resync:function(j){d.call(this,
j);e.call(this)}});g||c.call(this,this.imageUrl);if(this.centerOffset){b=this.centerOffset.x;f=this.centerOffset.y}}function ma(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.centerOffset=Qa.invert(a.imageAnchor);F.call(this,a)}function qa(a){a=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},a);Ga.call(this,a)}function E(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:ja("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},a);this.view=
null;this.visible=true;COG.observable(COG.extend(this,a))}function U(a,e){if(a&&a.split){var c=a.split(Yb);if(c.length>1){a=c[0];e=c[1]}}else if(a&&a.lat){e=a.lon;a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(e||0)}function wa(a){a=parseFloat(a)*Ia;a=na(a);var e=db*a;return R((1+a)/(1-a)*ya((1-e)/(1+e),db))/2}function ta(a){return N/(256<<a)}function Ba(a,e){var c=null;for(var d in Ra)if(e){if(d==e&&Ra[d][a]){c=Ra[d];break}}else if(Ra[d][a]){c=Ra[d];break}return c}function ea(a,e){var c=db*
na(a);return ha-2*Ta(e*ya((1-c)/(1+c),db/2))}function da(a,e,c,d){e=fa(e);a.add(d(e,c));return e.length}function fa(a){var e=a?a.length:0,c=Array(e);for(e=e;e--;)c[e]=new U(a[e][1],a[e][0]);return Da.vectorize(c,yb)}COG.observable(B);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();
var M=Array.prototype.indexOf||function(a){for(var e=0;e<this.length;e++)if(this[e]===a)return e;return-1},N=Math.PI*2,ha=Math.PI/2,w=Math.abs,I=Math.ceil,V=Math.min,ra=Math.max,ya=Math.pow,C=Math.sqrt,R=Math.log,S=Math.round,na=Math.sin,Ca=Math.asin,za=Math.cos,Ta=Math.atan,Zb=Math.atan2,Sb="hasOwnProperty",Rb={NaN:1,Infinity:1,"-Infinity":1},Qb=String.prototype.toLowerCase,Tb=Object.prototype.toString,xa="undefined",$b="number",Yb=/[\,\s]/,ac=typeof G_vmlCanvasManager!=xa,cb=typeof FlashCanvas!=
xa,bc=T5.newCanvas=function(a,e){var c=document.createElement("canvas");c.width=a?a:0;c.height=e?e:0;if(cb){document.body.appendChild(c);FlashCanvas.initElement(c)}ac&&G_vmlCanvasManager.initElement(c);return c},zb=function(){var a={};return{init:function(e,c){var d=a[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(c)},register:function(e,c){a[e]=c}}}();r.prototype={constructor:r,add:function(){for(var a=this.x,e=this.y,c=arguments.length;c--;){a+=arguments[c].x;e+=arguments[c].y}return new r(a,
e)},equals:function(a){return this.x===a.x&&this.y===a.y}};k.prototype={constructor:k};var Qa=function(){function a(d,b){return c(d.x-b.x,d.y-b.y)}function e(d,b){b=b||d.length;if(b<=1)return null;for(var f=Array(b-1),g=Array(b-1),h=0,j,n=0;n<b-1;n++){j=a(d[n],d[n+1]);f[n]=C(j.x*j.x+j.y*j.y);g[n]=h+=f[n]}return{edges:f,accrued:g,tota:h}}function c(d,b){return new r(d,b)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,b=0,f=arguments.length;f--;){d+=arguments[f].x;
b+=arguments[f].y}return c(d,b)},absSize:function(d){return ra(w(d.x),w(d.y))},copy:function(d){return d?c(d.x,d.y):null},diff:a,distance:function(d,b){return e(d,b).total},edges:e,equals:function(d,b){return d.equals(b)},extendBy:function(d,b,f){var g=za(b)*f|0;b=na(b)*f|0;return c(d.x-g,d.y-b)},floor:function(d){for(var b=Array(d.length),f=d.length;f--;)b[f]=c(~~d[f].x,~~d[f].y);return b},getRect:function(d){for(var b,f,g,h,j=d.length;j--;){var n=d[j];b=u(b,xa)||n.x<b?n.x:b;f=u(f,xa)||n.y<f?n.y:
f;g=u(g,xa)||n.x>g?n.x:g;h=u(h,xa)||n.y>h?n.y:h}return new k(b,f,g-b,h-f)},init:c,invert:function(d){return c(-d.x,-d.y)},min:function(d,b){return c(d.x<b.x?d.x:b.x,d.y<b.y?d.y:b.y)},max:function(d,b){return c(d.x>b.x?d.x:b.x,d.y>b.y?d.y:b.y)},offset:function(d,b,f){return c(d.x+b,d.y+(f||b))},scale:function(d,b){return c(d.x/b|0,d.y/b|0)},simplify:function(d,b){if(!d)return null;b=b?b:Qa.VECTOR_SIMPLIFICATION;for(var f=[],g=null,h=d.length;h--;){var j=d[h];if(include=!g||h===0||w(j.x-g.x)+w(j.y-
g.y)>b){f.unshift(j);g=j}}return f},theta:function(d,b,f){f=Ca((d.y-b.y)/f);return d.x>b.x?f:Math.PI-f},toString:function(d){return d?d.x+", "+d.y:""}}}(),ib=function(){return{dotProduct:function(a,e){return a.x*e.x+a.y*e.y}}}(),Va=function(){function a(c){return e(c.x,c.y,c.x2,c.y2)}function e(c,d,b,f){return new k(c,d,(b||c)-c,(f||d)-d)}return{buffer:function(c,d,b){return Va.init(c.x-d,c.y-(b||d),c.x2+d,c.y2+(b||d))},center:function(c){return new r(c.x+(c.w>>1),c.y+(c.h>>1))},copy:a,diagonalSize:function(c){return C(c.w*
c.w+c.h*c.h)},fromCenter:function(c,d,b,f){b=b>>1;f=f>>1;return e(c-b,d-f,c+b,d+f)},init:e,intersect:function(c,d){var b=ra(c.x,d.x),f=ra(c.y,d.y),g=V(c.x2,d.x2),h=V(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null},toString:function(c){return c?"["+c.x+", "+c.y+", "+c.x2+", "+c.y2+"]":""},union:function(c,d){if(c.w===0||c.h===0)return a(d);else if(d.w===0||d.h===0)return a(c);else{var b=V(c.x,d.x),f=V(c.y,d.y),g=ra(c.x2,d.x2),h=ra(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null}}}}();Hits=function(){return{diffHits:function(a,
e){var c=[],d={},b;for(b=e.length;b--;)d[e[b].target.id]=true;for(b=a.length;b--;)d[a[b].target.id]||(c[c.length]=a[b]);return c},init:function(a,e,c,d){return{type:a,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:c}},initHit:function(a,e,c){return{type:a,target:e,drag:c}},triggerEvent:function(a,e,c,d){e.triggerCustom(a.type+(c?c:"Hit"),{hitType:a.type},d?d:a.elements,a.absXY,a.relXY,new r(a.x,a.y))}}}();var vb=function(a){function e(b,f){var g=c[b],h;g||(g=c[b]=[]);(h=g[f])||(h=g[f]=[]);return h}a=a||
128;var c=[],d={};return{copyInto:function(b){for(var f in d){var g=d[f];b.insert(g.bounds||g,g,f)}},insert:function(b,f,g){var h=b.x/a|0,j=b.y/a|0,n=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;g=g||f.id||COG.objId("spatial");d[g]=f;for(f=h;f<=n;f++)for(h=j;h<=b;h++)e(f,h).push(g)},remove:function(b,f,g){g=g||f.id;if(d[g]){var h=b.x/a|0;f=b.y/a|0;var j=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;delete d[g];for(h=h;h<=j;h++)for(var n=f;n<=b;n++){var p=e(h,n),D=M.call(p,g);D>=0&&p.splice(D,1)}}},search:function(b){var f=b.y/
a|0,g=(b.x+b.w)/a|0,h=(b.y+b.h)/a|0,j=[],n=[];for(b=b.x/a|0;b<=g;b++)for(var p=f;p<=h;p++)j=j.concat(e(b,p));j.sort();for(f=j.length;f--;){g=j[f];if(h=d[g])n[n.length]=h;for(;f>0&&j[f-1]==g;)f--}return n}}},Ub=3E4,wb={},Vb=0;(new Date).getTime();var Pa={},Ua=[];Q.prototype={constructor:Q,load:function(a){var e=this;y(this.url,function(c){e.loaded=true;e.image=c;a&&a()})}};var cc=function(){return COG.observable({applyStyle:function(){},applyTransform:function(a,e,c){return{restore:null,x:e,y:c}},
checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new r},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},reset:function(){}})},Ab={},Ha=B.registerRenderer=function(a,e){Ab[a]=e},dc=B.attachRenderer=function(a,e,c,d){a=a.split("/");for(var b=new cc(e,c,d),f=0;f<a.length;f++){var g=Ab[a[f]];if(g)b=new g(e,c,d,b)}return b};Ha("canvas",function(a,e,c,d){function b(z,aa,O){var ba,Y;ka[aa]=
function(K){for(ba=la.length;ba--;)if(Y=O[la[ba]])K[ia[ba]]=Y}}function f(z,aa,O,ba){var Y=false;if(aa)Y=p.isPointInPath(H?aa.x-D:aa.relXY.x,H?aa.y-T:aa.relXY.y);return{draw:ba||ga,viewport:z,state:O,hit:Y,vpX:D,vpY:T,context:p}}c=COG.extend({},c);var g,h,j,n=false,p,D=0,T=0,ka={},J=null,H=CANI.canvas.pipTransformed,G={},$=function(){},ga=function(){this.fill&&p.fill();this.stroke&&p.stroke()},la=["fill","stroke","lineWidth","opacity"],ia=["fillStyle","strokeStyle","lineWidth","globalAlpha"];(function(){if(e){var z=
e.tagName=="CANVAS",aa=z?e.parentNode:e;g=a.width=aa.offsetWidth;h=a.height=aa.offsetHeight;if(z){j=e;j.width=g;j.height=h;cb&&FlashCanvas.initElement(j)}else{j=bc(g,h);j.style.cssText="position: absolute; z-index: 1;";n=true;e.appendChild(j)}p=null}})();c=COG.extend(d,{applyStyle:function(z){var aa=ka[z],O=p&&p.canvas?p.canvas.id:"default",ba;G[O]||(G[O]=[]);ba=G[O].pop()||"basic";if(aa){G[O].push(z);aa(p);return ba}},applyTransform:function(z){if(z.translateX!==0||z.translateY!==0||z.scaling!==
1||z.rotation!==0){p.save();J={undo:function(){p.restore();J=null},x:z.xy.x,y:z.xy.y};p.translate(z.xy.x-D+z.translateX,z.xy.y-T+z.translateY);z.rotation!==0&&p.rotate(z.rotation);z.scaling!==1&&p.scale(z.scaling,z.scaling)}return J},drawTiles:function(z,aa){for(var O,ba,Y=D-256,K=T-256,W=z.x2,sa=z.y2,va=aa.length;va--;){O=aa[va];if(ba=O.x>=Y&&O.x<=W&&O.y>=K&&O.y<=sa)O.loaded?p.drawImage(O.image,O.x-D,O.y-T):O.load(a.invalidate)}},prepare:function(z,aa){var O,ba=false,Y=aa.scaled||aa,K=aa.scaleFactor;
if(p)p.restore();else p=j.getContext("2d");for(O=z.length;O--;)ba=ba||z[O].clip;D=Y.x;T=Y.y;if(p){ba||p.clearRect(0,0,g,h);p.save();p.scale(K,K)}p.globalCompositeOperation="source-over";return p},prepArc:function(z,aa,O,ba){p.beginPath();p.arc(z.xy.x-(J?J.x:D),z.xy.y-(J?J.y:T),z.size>>1,z.startAngle,z.endAngle,false);return f(aa,O,ba)},prepImage:function(z,aa,O,ba,Y){var K=(Y.x||z.xy.x)-(J?J.x:D),W=(Y.y||z.xy.y)-(J?J.y:T),sa=Y.image||z.image;if(sa){p.beginPath();p.rect(K,W,Y.width||sa.width,Y.height||
sa.height);return f(aa,O,ba,function(){p.drawImage(sa,K,W,Y.width||sa.width,Y.height||sa.height)})}},prepMarker:function(z,aa,O,ba){var Y=z.xy.x-(J?J.x:D),K=z.xy.y-(J?J.y:T),W=z.size,sa=undefined;p.beginPath();switch(z.markerStyle.toLowerCase()){case "image":sa=$;p.rect(Y-(W>>1),K-(W>>1),W,W);if(z.reset&&z.image){z.image=null;z.reset=false}z.image?p.drawImage(z.image,Y-(W>>1),K-(W>>1),W,W):y(z.imageUrl,function(va){z.image=va;p.drawImage(z.image,Y-(W>>1),K-(W>>1),W,W)});break;default:p.moveTo(Y,K);
p.lineTo(Y-(W>>1),K-W);p.lineTo(Y+(W>>1),K-W);p.lineTo(Y,K);break}return f(aa,O,ba,sa)},prepPoly:function(z,aa,O,ba,Y){var K=true;z=Y.points||z.points;Y=J?J.x:D;var W=J?J.y:T;p.beginPath();for(var sa=z.length;sa--;){var va=z[sa].x-Y,eb=z[sa].y-W;if(K){p.moveTo(va,eb);K=false}else p.lineTo(va,eb)}return f(aa,O,ba)},getContext:function(){return p},getDimensions:function(){return{width:g,height:h}},getOffset:function(){return new r(D,T)}});(function(){for(var z in T5.styles)b(null,z,T5.styles[z]);T5.bind("styleDefined",
b)})();c.bind("detach",function(){n&&e.removeChild(j)});return c});var jb=B.styles={},ec=B.defineStyle=function(a,e){jb[a]=e;B.trigger("styleDefined",a,jb[a]);return a},Bb=B.defineStyles=function(a){for(var e in a)ec(e,a[e])};B.getStyle=function(a){return jb[a]};B.loadStyles=function(a){COG.jsonp(a,function(e){Bb(e)})};Bb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Wb=
{NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Kb=function(a){function e(q,t,x){if(!va){ba(oa-t,pa-x);Z.trigger("pan",oa,pa)}}function c(q,t,x,P){z(V(ra(ua+ya(2,P)-1,0.5),2))}function d(){var q=R(ua)/Math.LN2|0;if(q!==0){ua=ya(2,q);aa(Za+q,fc,gc)}redraw=true}function b(q,t){var x=renderer&&renderer.projectXY?renderer.projectXY(q,t):null;if(!x){x=Z.getViewport();var P=1/ua;x=new r(x?x.x+q*P:q,x?x.y+t*P:t)}return x}function f(q,t,x){O("doubleTap",t,x,b(x.x,x.y));a.scalable&&z(2,b(x.x,x.y),a.zoomEasing,
null,a.zoomDuration)}function g(q,t,x){va=null;$("down",t,x)}function h(q,t,x){$("hover",t,x)}function j(q,t,x){H(t,x,false)}function n(q,t,x){H(t,x,true)}function p(){clearTimeout(Cb);Cb=setTimeout(function(){renderer.checkSize()},250)}function D(q,t,x){$("tap",t,x);O("tap",t,x,b(x.x,x.y,true))}function T(q){renderer=dc(q||a.renderer,Z,sa,a);Db=!renderer.preventPartialScale;J()}function ka(q,t){t.id=q;t.added=X();t.view=Z;t.trigger("parentChange",Z,sa,hc);K.push(t);K.sort(function(x,P){var ca=P.zindex-
x.zindex;if(ca===0)ca=P.added-x.added;return ca});W=K.length;return t}function J(){Ea&&Ea.unbind();if(renderer){Ea=INTERACT.watch(renderer.interactTarget||sa);a.pannable&&Ea.pannable().bind("pan",e);if(a.scalable){Ea.bind("zoom",c);Ea.bind("doubleTap",f)}Ea.bind("pointerDown",g);Ea.bind("pointerMove",j);Ea.bind("pointerUp",n);a.captureHover&&Ea.bind("pointerHover",h);Ea.bind("tap",D)}}function H(q,t,x){if(va){q=b(t.x,t.y);va.drag.call(va.target,va,q.x,q.y,x)&&Ja++;if(x)va=null}}function G(q){var t,
x,P=false;q=q||(new Date).getTime();if(P=q-Eb>ic){var ca=w(oa-kb),Aa=w(pa-lb);t=oa!==mb||pa!==nb;x=ua!==Fb;if(t||x)Ja++;if(ca>=Gb||Aa>=Gb)ia();x={index:eb++,draw:Ja};Z.trigger("enterFrame",q,x);Eb=q}if(renderer&&P&&x.draw){La=Hb|(ua!==1?Ib:0)|(t?ob:0)|(pb?Jb:0);qb=(t=(La&(Ib|ob))!==0)&&(La&Jb)===0;t=la();renderer.trigger("predraw",t,La);if(renderer.prepare(K,t,La,q,Fa)){Ja=0;for(ii=W;ii--;){P=K[ii];if(P.visible&&(La&P.validStates)!==0){x=P.style?renderer.applyStyle(P.style,true):null;P.draw(renderer,
t,La,Z,q,Fa);x&&renderer.applyStyle(x)}}renderer.render(t);Z.trigger("drawComplete",t,q);mb=oa;nb=pa;Fb=ua}if(Fa){q=Fa?Fa.elements:[];if($a&&$a.type==="hover"){t=Hits.diffHits($a.elements,q);t.length>0&&Hits.triggerEvent($a,Z,"Out",t)}if(q.length>0){P=Fa.x;x=Fa.y;for(t=q.length;t--;){ca=q[t];Aa=P;var Ma=x,Ka=ca&&ca.drag&&(!ca.canDrag||ca.canDrag(ca,Aa,Ma));if(Ka){va=ca;va.startX=Aa;va.startY=Ma}if(Ka)break}Hits.triggerEvent(Fa,Z)}$a=q.length>0?COG.extend({},Fa):null;Fa=null}}animFrame(G)}function $(q,
t,x){Fa=Hits.init(q,t,x,b(x.x,x.y,true));for(q=W;q--;)rb=rb||(K[q].hitGuess?K[q].hitGuess(Fa.x,Fa.y,La,Z):false);rb&&Ja++}function ga(){Ja++}function la(){var q=new k(oa,pa,Z.width,Z.height);q.scaleFactor=ua;if(ua!==1)q.scaled=Va.fromCenter(oa+(Z.width>>1),pa+(Z.height>>1),Z.width/ua|0,Z.height/ua|0);return q}function ia(){var q=la();if(q){if(Wa||Xa)if(q){var t=fb?oa+(q.w>>1):oa,x=gb?pa+(q.h>>1):pa,P=q.w,ca=q.h;if(Wa&&Wa>P)if(t+P>Wa)oa=fb?oa:Wa-P;else if(t<0)oa=fb?oa:0;if(Xa&&Xa>ca)if(x+ca>Xa)pa=
gb?pa:Xa-ca;else if(x<0)pa=gb?pa:0}kb=oa;lb=pa;O("refresh",Z,q);Ja++}}function z(q,t,x,P,ca){var Aa;if(!Db){x=false;Aa=S(R(q)/Math.LN2);q=ya(2,Aa)}if(x)COG.tweenValue(ua,q,x,ca,function(Ma,Ka){ua=Ma;if(Ka){Aa=S(R(ua)/Math.LN2);ua=ya(2,Aa);P&&P()}d()});else{ua=q;d()}return Z}function aa(q,t,x){q=ra(a.minZoom,V(a.maxZoom,q));if(q!==Za){var P=ya(2,q-Za),ca=Z.width>>1,Aa=Z.height>>1,Ma=ca/P|0,Ka=Aa/P|0;Za=q;ba(((t?t:oa+ca)-Ma)*P,((x?x:pa+Aa)-Ka)*P);mb=oa;nb=pa;lb=kb=0;O("zoomLevelChange",q);ua=1;renderer.trigger("reset");
ia()}}function O(){for(var q=Z.trigger.apply(null,arguments).cancel,t=K.length;t--;)q=K[t].trigger.apply(null,arguments).cancel||q;return!q}function ba(q,t,x,P,ca){function Aa(){Ma+=1;if(Ma>=2){pb=false;ca&&ca()}}var Ma=0;if(x){if((La&ob)===0){COG.tweenValue(oa,q,x,P,function(Ka,sb){oa=Ka|0;(sb?Aa:ga)();return!qb});COG.tweenValue(pa,t,x,P,function(Ka,sb){pa=Ka|0;(sb?Aa:ga)();return!qb});pb=true}}else{oa=q|0;pa=t|0;ca&&ca()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,
inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},a);var Y={},K=[],W=0,sa=document.getElementById(a.container),va=null,eb=0,hc=null,jc=!u(window.attachEvent,xa),rb=false,Gb=a.refreshDistance,oa=0,pa=0,kb=0,lb=0,mb=0,nb=
0,Wa=null,Xa=null,fb=false,gb=false,Fa=null,qb=false,$a=null,Cb=0,ua=1,Fb=1,Eb=0,Ea=null,Db=true,pb=false,ic=1E3/a.fps|0,Ja=0,fc,gc,Za=a.zoomLevel,Hb=ja("ACTIVE"),ob=ja("PAN"),Ib=ja("ZOOM"),Jb=ja("ANIMATING"),La=Hb,Z={id:a.id,detach:function(){renderer&&renderer.trigger("detach");Ea&&Ea.unbind()},eachLayer:function(q){for(var t=W;t--;)q(K[t])},getLayer:function(q){for(var t=0;t<W;t++)if(K[t].id===q)return K[t];return null},getZoomLevel:function(){return Za},setLayer:function(q,t){for(var x=0;x<W;x++)if(K[x].id===
q){K.splice(x,1);break}if(t){ka(q,t);t.trigger("refresh",Z,la());Z.trigger("layerChange",Z,t)}Ja++;return t},invalidate:ga,refresh:ia,resetScale:function(){ua=1},scale:z,setZoomLevel:aa,syncXY:function(){},triggerAll:O,removeLayer:function(q){a:{for(var t=W;t--;)if(K[t].id===q){q=t;break a}q=-1}if(q>=0&&q<W){Z.trigger("layerRemove",Z,K[q]);K.splice(q,1);Ja++}W=K.length},getOffset:function(){return new r(oa,pa)},getRenderer:function(){return renderer},getScaleFactor:function(){return ua},setMaxOffset:function(q,
t,x,P){Wa=q;Xa=t;fb=x;gb=P},getViewport:la,updateOffset:ba,pan:function(q,t,x,P,ca){ba(oa+q,pa+t,x,P,ca)}};COG.observable(Z);Z.bind("resync",function(){});COG.configurable(Z,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(a,null,{container:function(q,t){sa=document.getElementById(t);T()},inertia:J,captureHover:J,scalable:J,pannable:J,renderer:function(q,t){if(renderer){renderer.trigger("detach");renderer=null}T(t);Ja++}}),
true);CANI.init(function(q){Z.markers=ka("markers",new hb({zindex:20}));Y=q;T();jc?window.attachEvent("onresize",p):window.addEventListener("resize",p,false)});animFrame(G);return Z},Ga=function(a){a=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},a);COG.extend(this,a);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&
COG.observable(this)};Ga.prototype={constructor:Ga,animate:function(a,e,c,d){i(this,a,e,c,d)},drag:null,draw:null,getProps:null,resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(Va.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=a},translate:function(a,e){this.translateX=a;this.translateY=e},updateBounds:function(a,e){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",
this,a,this.bounds);this.bounds=a;if(e)this.xy=Va.center(this.bounds)}};var Xb=1E3/60|0,Ya=[],xb=0;m.prototype=COG.extend(Ga.prototype,{constructor:m});v.prototype=COG.extend({},Ga.prototype,{constructor:v});L.prototype=COG.extend({},v.prototype);F.prototype=COG.extend({},Ga.prototype,{constructor:F});ma.prototype=COG.extend({},F.prototype,{constructor:ma});qa.prototype=COG.extend(Ga.prototype,{constructor:qa});E.prototype={constructor:E,clip:null,cycle:function(){},draw:function(){},hitGuess:null};
Ha=function(a,e){function c(h,j){var n=j&&j.getZoomLevel?j.getZoomLevel():0;f[n]||(f[n]=l(n));b=f[n]}e=COG.extend({imageLoadArgs:{}},e);var d=a?zb.init(a,e).run:null,b=null,f=[],g=COG.extend(new E(e),{draw:function(h,j){h.drawTiles(j,b.search(Va.buffer(j,128)))}});g.bind("refresh",function(h,j,n){var p=(new Date).getTime();b&&d(j,n,b,function(){j.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-p)+" ms")})});g.bind("parentChange",c);g.bind("resync",c);return g};var Lb=function(a){function e(n,
p,D,T){var ka=this.dragOffset;if(!ka)ka=this.dragOffset=new r(n.startX-this.xy.x,n.startY-this.xy.y);this.xy.x=p-ka.x;this.xy.y=D-ka.y;if(T){delete this.dragOffset;if(n=j.view){n.syncXY([this.xy],true);n.invalidate()}this.trigger("dragDrop")}return true}function c(n){clearTimeout(h);h=setTimeout(function(){f.sort(function(p,D){if(D.xy&&p.xy){var T=D.xy.y-p.xy.y;return T!=0?T:D.xy.x-p.xy.x}});n&&n.invalidate()},50)}function d(n,p,D,T){T&&g.remove(T,p);g.insert(D,p)}function b(n,p){g=l(p.getZoomLevel(),
g);for(var D=f.length;D--;)f[D].resync(p)}a=COG.extend({zindex:10},a);var f=[],g,h=0,j=COG.extend(new E(a),{itemCount:0,add:function(n,p){if(n){n.layer=j;if(p)f.unshift(n);else f[f.length]=n;var D=j.view;if(D){n.resync(D);g&&n.bounds&&g.insert(n.bounds,n);c(D)}n.bind("move",d)}j.itemCount=f.length},clear:function(){g=new vb;f=[];j.itemCount=0},draw:function(n,p,D,T,ka,J){T={};ka=g&&p?g.search(p):[];for(var H=ka.length;H--;){var G=ka[H],$=G.style||j.style,ga,la=n.applyTransform(G),ia=G.getProps?G.getProps(n,
D):T;if(ia=(ga=n["prep"+G.typeName])?ga.call(n,G,p,J,D,ia):null){if(J&&ia.hit){J.elements.push(Hits.initHit(G.type,G,G.draggable?e:null));ga=J.type+"Style";$=G[ga]||j[ga]||$}$=$?n.applyStyle($,true):null;(ga=G.draw||ia.draw)&&ga.call(G,ia);$&&n.applyStyle($)}la&&la.undo&&la.undo()}},find:function(){return[].concat(f)},hitGuess:function(n,p){return g&&g.search({x:n-10,y:p-10,w:20,h:20}).length>0}});j.bind("parentChange",b);j.bind("resync",b);return j},hb=function(a){return new Lb(a)};U.prototype={constructor:U,
offset:function(a,e){var c=this.lat*Ia,d=this.lon*Ia,b=c+a/ab;c=Ca(na(e/ab)/za(c));d=d+c;b=(b+ha)%Math.PI-ha;d%=N;return new U(b*Oa,d*Oa)},toString:function(a){return this.lat+(a||" ")+this.lon}};COG.extend(B,{ex:COG.extend,is:u,ticks:X,userMessage:function(a,e,c){B.trigger("userMessage",a,e,c)},indexOf:M,Rect:k,XY:Qa,XYRect:Va,Vector:ib,Hits:Hits,Generator:zb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:Q,TileLayer:Ha,getImage:y,viewState:ja,View:Kb,ViewLayer:E,ImageLayer:Ha,Drawable:Ga,Marker:m,
Poly:v,Line:L,Arc:qa,ImageDrawable:F,ImageMarker:ma,DrawLayer:Lb,ShapeLayer:hb,Map:function(a){function e(h,j,n){g.setZoomLevel(j);c(h,n)}function c(h,j,n,p){h=Na.init(h,ta(g.getZoomLevel()));g.updateOffset(h.x-(g.width>>1),h.y-(g.height>>1),n,p,function(){j&&j(g)})}a=COG.extend({zoomLevel:1,minZoom:1,maxZoom:18,pannable:true,scalable:true},a);var d=new r,b=0,f=a.tapExtent;a.adjustScaleFactor=function(h){return Math.pow(2,(h<1?Math.floor:Math.ceil)(Math.log(h)))};var g=COG.extend(new Kb(a),{getBoundingBox:function(){var h=
g.getViewport();return h?Sa.init(Na.toPos(new r(h.x,h.y2),b),Na.toPos(new r(h.x2,h.y),b)):null},getCenterPosition:function(){var h=g.getViewport();if(h){h=new r(h.x+(h.w>>1),h.y+(h.h>>1));return Na.toPos(h,b)}return null},gotoBounds:function(h,j){var n=Sa.getZoomLevel(h,g.getViewport());e(Sa.getCenter(h),n,j)},gotoPosition:e,panToPosition:c,syncXY:function(h,j){return(j?Na.syncPos:Na.sync)(h,b)}});g.bind("tap",function(h,j,n,p){h=Na.toPos(p,b);var D=Na.toPos(Qa.offset(p,-f,f),b);p=Na.toPos(Qa.offset(p,
f,-f),b);g.trigger("geotap",j,n,h,Sa.init(D,p))});g.bind("refresh",function(h,j,n){if(d.x!=n.x||d.y!=n.y){g.trigger("boundsChange",g.getBoundingBox());d.x=n.x;d.y=n.y}});g.bind("zoomLevelChange",function(h,j){var n;b=ta(j);n=N/b|0;g.setMaxOffset(n,n,true,false);g.resetScale();g.triggerAll("resync",g)});return g},Pos:U});var tb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ia=Math.PI/180,Oa=180/Math.PI,ub=ha,Mb=-ub,Nb=N,kc=-Nb,ab=6371,db=0.08181919084262157,
bb=null,Ob={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},Da=function(){function a(c){return!c||c.lat===0&&c.lon===0}function e(c,d){return new U(c,d)}return{calcDistance:function(c,d){if(a(c)||a(d))return 0;var b=(d.lat-c.lat)*Ia>>1,f=(d.lon-c.lon)*Ia>>1;b=na(b)*na(b)+za(c.lat*Ia)*za(d.lat*Ia)*na(f)*na(f);b=2*Zb(C(b),C(1-b));return ab*b},copy:function(c){return c?e(c.lat,c.lon):null},empty:a,equal:function(c,d){return c&&d&&c.lat==d.lat&&c.lon==
d.lon},fromMercatorPixels:function(c,d){for(var b=ya(Math.E,-d),f=ha-2*Ta(b),g=ea(f,b),h=0;h<12&&w(f-g)>1.0E-7;){f=g;g=ea(f,b);h++}return e(g*Oa,c%360*Oa)},generalize:function(c,d,b){var f=c.length,g=[],h=null;b||(b=250);b/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");for(var j=f;j--;)if(j===0)g.unshift(c[j]);else{var n=!h||Da.inArray(c[j],d)?b:Da.calcDistance(h,c[j]);if(c[j]&&n>=b){g.unshift(c[j]);h=c[j]}}COG.info("generalized "+f+" positions into "+g.length+" positions");
return g},inArray:function(c,d){for(var b=Da.equal,f=d.length;f--;)if(b(c,d[f]))return true;return false},inBounds:function(c,d){var b=!(Da.empty(c)||Da.empty(d));return b=(b=b&&c.lat>=d.min.lat&&c.lat<=d.max.lat)&&c.lon>=d.min.lon&&c.lon<=d.max.lon},init:e,offset:function(c,d,b){return c.offset(d,b)},parse:function(c){return new U(c)},parseArray:function(c){var d=c.length,b=Array(d);for(d=d;d--;)b[d]=new U(c[d]);return b},toMercatorPixels:function(c){return T5.XY.init(parseFloat(c.lon)*Ia,wa(c.lat))},
toString:function(c){return c?c.toString():""},vectorize:function(c,d){function b(){for(var j=0,n=d.chunkSize,p=f;p--;){g[p]=T5.GeoXY.init(c[p]);j+=1;if(j>n)break}f=p;if(f<=0)d.callback&&d.callback(g);else animFrame(b)}var f=c.length,g=Array(f);d=COG.extend({chunkSize:500,async:true,callback:null},d);if(!d.async){for(var h=f;h--;)g[h]=T5.GeoXY.init(c[h]);return g}animFrame(b);return null}}}(),Sa=function(){function a(b,f,g){var h=new r(0,f.lat-b.lat);h.x=(g||u(g,xa))&&b.lon>f.lon?360-b.lon+f.lon:
f.lon-b.lon;return h}function e(b,f){return Sa.init(new U(b.min.lat-f,b.min.lon-f%360),new U(b.max.lat+f,b.max.lon+f%360))}function c(b){var f=a(b.min,b.max);return new U(b.min.lat+(f.y>>1),b.min.lon+(f.x>>1))}function d(b,f){return{min:new U(b),max:new U(f)}}return{calcSize:a,createBoundsFromCenter:function(b,f){var g=f/ab,h=b.lat*Ia,j=b.lon*Ia,n=h-g,p=h+g;if(n>Mb&&p<ub){h=Ca(na(g)/za(h));g=(j-h)%N;j=(j+h)%N}else{n=ra(n,Mb);p=V(p,ub);g=kc;j=Nb}return Sa.init(new U(n*Oa,g*Oa),new U(p*Oa,j*Oa))},expand:e,
forPositions:function(b,f){var g=null,h=T5.ticks();f||(f="auto");for(var j=b.length;j--;)if(g){var n=a(g.min,b[j],false),p=a(b[j],g.max,false);if(n.x<0)g.min.lon=b[j].lon;if(n.y<0)g.min.lat=b[j].lat;if(p.x<0)g.max.lon=b[j].lon;if(p.y<0)g.max.lat=b[j].lat}else g=d(b[j],b[j]);if(f){if(f=="auto"){j=a(g.min,g.max);f=ra(j.x,j.y)*0.3}g=e(g,f)}COG.trace("calculated bounds for "+b.length+" positions",h);return g},getCenter:c,getZoomLevel:function(b,f){var g=c(b);g=V(S(w(g.lat)*0.05),tb.length);var h=tb[g],
j=a(b.min,b.max);g=I(R(tb[3]*f.h/j.y)/R(2));h=I(R(h*f.w/j.x)/R(2));return V(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:d,isEmpty:function(b){return!b||Da.empty(b.min)||Da.empty(b.max)},toString:function(b){return"min: "+Da.toString(b.min)+", max: "+Da.toString(b.max)}}}();ib=function(){var a=/^(\d+).*$/,e=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(c,d){a.lastIndex=-1;if(a.test(c))for(var b=c.replace(a,"$1"),f=d.split(","),g=0;g<f.length;g++){e.lastIndex=-1;if(e.test(f[g])){var h=e.exec(f[g]);if(b>=
parseInt(h[1],10)&&b<=parseInt(h[2],10))return true}else if(b==f[g])return true}return false},normalize:function(c){if(!c)return"";c=c.toUpperCase();if(!bb){var d=[];for(var b in Ob)d.push(b);bb=RegExp("(\\s)("+d.join("|")+")(\\s|$)","i")}bb.lastIndex=-1;if(d=bb.exec(c))c=c.replace(bb,"$1"+Ob[d[2]]);return c},toString:function(c){return c.streetDetails+" "+c.location}}}();var Na=B.GeoXY=function(){function a(d,b){if(d.length){for(var f,g,h,j,n=d.length;n--;){a(d[n],b);f=u(f,xa)||d.x<f?d.x:f;g=u(g,
xa)||d.y<g?d.y:g;h=u(h,xa)||d.x>h?d.x:h;j=u(j,xa)||d.y>j?d.y:j}return new k(f,g,h-f,j-g)}else if(d.mercXY){f=d.mercXY;d.x=(f.x+Math.PI)/b|0;d.y=(Math.PI-f.y)/b|0;d.rpp=b}return d}function e(d,b){if(d.length)for(var f=d.length;f--;)e(d[f],b);else{d.mercXY=new r(d.x*b-Math.PI,Math.PI-d.y*b);d.pos=Da.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function c(d,b,f){d.pos=b;d.mercXY=Da.toMercatorPixels(b);(f=u(f,$b)?f:d.rpp)&&a(d,f)}return{init:function(d,b){var f=new r;c(f,d,b);return f},sync:a,syncPos:e,
toPos:function(d,b){b=b||d.rpp;return Da.fromMercatorPixels(d.x*b-Math.PI,Math.PI-d.y*b)},updatePos:c}}(),Ra={},lc="featurecollection",mc="feature",yb={async:false};Ha={processor:null,group:"shapes",layerClass:hb};var nc={point:COG.extend({},Ha,{processor:function(a,e,c,d){e=fa([e.coordinates],yb);if(e.length>0)if(c=d.marker(e[0],c)){a.add(c);return e.length}},group:"markers",layerClass:hb}),linestring:COG.extend({},Ha,{processor:function(a,e,c,d){e=fa(e&&e.coordinates?e.coordinates:[]);return da(a,
e,c,d.line)}}),multilinestring:COG.extend({},Ha,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=e.length;f--;)b+=da(a,e[f],c,d.line);return b}}),polygon:COG.extend({},Ha,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return da(a,e[0],c,d.poly);return 0}}),multipolygon:COG.extend({},Ha,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=0;f<e.length;f++)b+=da(a,e[f][0],c,d.poly);return b}})},Pb=function(a,e,c,
d){function b(H,G){var $=H.processor,ga=n+H.group,la=COG.extend({},H,c,{properties:G.properties});if($){var ia=J[ga];if(!ia){ia=new H.layerClass({id:ga});J[ga]=ia}return $(ia,G.data,la,d)}return 0}function f(H,G){var $=H&&H.type?H.type.toLowerCase():null;return $&&$===mc?f(H.geometry,H.properties):{type:$,isCollection:$?$===lc:false,definition:nc[$],data:H,properties:G?G:H.properties}}function g(H){var G=0,$=COG.extend({},c),ga=p;H=H?H:(new Date).getTime();if(!T){for(;ga<D;ga++){H=f(j?j(a[ga]):a[ga]);
var la=null;if(H.isCollection){$.layerPrefix=n+ka++ +"-";T=new Pb(H.data.features,function(ia){T=null;for(var z in ia)J[z]=ia[z];p>=D&&e&&e(J)},$);la+=1}else if(H.definition)la=b(H.definition,H);G+=la?la:1;if(G>=h)break}p=ga+1;if(T||p<D)animFrame(g);else e&&e(J)}}c=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},c);d=COG.extend({marker:function(H){return new m({xy:H})},line:function(H,G){return new v(H,COG.extend({},c,G))},poly:function(H,G){return new v(H,COG.extend({fill:true},
c,G))}},d);var h=500,j=c.rowPreParse,n=c.layerPrefix,p=0,D=0,T=null,ka=0,J={};if(a){u(a,"array")||(a=[a]);D=a.length;animFrame(g)}};Ha=B.GeoJSON={parse:function(a,e,c){return new Pb(a,e,c)}};B.GeoShape=function(a,e){e=COG.extend({autoParse:true},e);for(var c=Array(a.length),d=e.autoParse,b=T5.Geo.Position.parse,f=a.length;f--;)c[f]=T5.GeoXY.init(d?b(a[f]):a[f]);return new T5.Poly(c,e)};B.Geo={distanceToString:function(a){if(a>1E3)return~~(a/10)/100+" km";return a?a+" m":""},dist2rad:function(a){return a/
ab},getEngine:function(a){for(var e=null,c=1;!e&&c<arguments.length;c++)e=Ba(a,arguments[c]);e=e?e:Ba(a);if(!e)throw Error("Unable to find GEO engine with "+a+" capability");return e},radsPerPixel:ta,Position:Da,BoundingBox:Sa,Radius:function(a,e){return{distance:parseInt(a,10),uom:e}},Address:function(a){return a=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},a)},A:ib,Engine:function(a){if(!a.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var e=COG.extend({remove:function(){delete Ra[e.id]}},a);return Ra[e.id]=e},GeoJSON:Ha}})(T5);
