COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var C=arguments[0]||{},Y,u=1,p=arguments.length;u<p;u++)if((Y=arguments[u])!==null)for(var l in Y){var m=Y[l];if(C!==m)if(m!==undefined)C[l]=m}return C};
(function(){var C=Object.prototype.hasOwnProperty,Y=0,u={};u.toID=function(p){return p.replace(/\s/g,"-")};u.objId=function(p){return(p?p:"obj")+Y++};u.isFunction=function(p){return toString.call(p)==="[object Function]"};u.isArray=function(p){return toString.call(p)==="[object Array]"};u.isPlainObject=function(p){if(!p||toString.call(p)!=="[object Object]"||p.nodeType||p.setInterval)return false;if(p.constructor&&!C.call(p,"constructor")&&!C.call(p.constructor.prototype,"isPrototypeOf"))return false;
var l;for(l in p);return l===undefined||C.call(p,l)};u.isEmptyObject=function(p){for(var l in p)return false;return true};u.isXmlDocument=function(p){return toString.call(p)==="[object Document]"};u.contains=function(p,l){var m=p,r=arguments,A=1;if(l&&module.isArray(l)){r=l;A=0}for(A=A;A<r;A++)m=m&&typeof foo[r[A]]!=="undefined";return m};u.formatStr=function(p){if(arguments.length<=1)return p;for(var l=arguments.length-2,m=0;m<=l;m++)p=p.replace(RegExp("\\{"+m+"\\}","gi"),arguments[m+1]);return p};
u.wordExists=function(p,l){var m="";if(l.toString)l=l.toString();for(var r=0;r<l.length;r++)m+=!/\w/.test(l[r])?"\\"+l[r]:l[r];return RegExp("(^|\\s|\\,)"+m+"(\\,|\\s|$)","i").test(p)};COG.extend(COG,u)})();
(function(){function C(m){return typeof console!=="undefined"?function(){console[m](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var Y=window.console&&window.console.markTimeline,u=C("error"),p=C("info"),l=function(){return Y?function(m,r){console.markTimeline(m+(r?": "+((new Date).getTime()-r)+"ms":""))}:function(){}}();COG.extend(COG,{trace:l,debug:C("debug"),info:p,warn:C("warn"),error:u,exception:function(m){if(u)for(var r in m)p("ERROR DETAIL: "+r+
": "+m[r])}})})();
(function(){function C(u,p){var l=u.hasOwnProperty("obsHandlers")?u.obsHandlers:null;l[p]||(l[p]=[]);return l[p]}var Y=0;COG.observable=function(u){if(!u)return null;if(!(u.hasOwnProperty("obsHandlers")?u.obsHandlers:null))u.obsHandlers={};if(!u.hasOwnProperty("bind")){u.bind=function(p,l){var m="callback"+Y++;C(u,p).unshift({fn:l,id:m});return m};u.triggerCustom=function(p,l){var m=C(u,p),r={cancel:false,name:p,source:this},A;l&&COG.extend(r,l);if(!m)return null;A=Array.prototype.slice.call(arguments,2);
u.eventInterceptor&&u.eventInterceptor(p,r,A);A.unshift(r);for(var P=m.length;P--&&!r.cancel;)m[P].fn.apply(this,A);return r};u.trigger=function(p){var l=Array.prototype.slice.call(arguments,1);l.splice(0,0,p,null);return u.triggerCustom.apply(this,l)};u.unbind=function(p,l){if(typeof p==="undefined")u.obsHandlers={};else for(var m=C(u,p),r=0;m&&r<m.length;r++)if(m[r].id===l){m.splice(r,1);break}return u}}return u}})();
(function(){function C(l,m){l[m]||(l[m]=function(r){return l.configure(m,r)})}function Y(l){l.gtConfId="configurable"+p++;l.gtConfig={};l.gtConfigFns=[];return l.gtConfig}var u={},p=0;COG.paramTweaker=function(l,m,r){return function(A,P){if(typeof P!=="undefined"){if(A in l)l[A]=P;r&&A in r&&r[A](A,P)}else return m&&A in m?m[A](A):l[A]}};COG.configurable=function(l,m,r,A){if(l){l.gtConfId||Y(l);var P=l.gtConfId,ga=l.gtConfig,o=l.gtConfigFns;u[P]=l;o.push(r);for(r=m.length;r--;){ga[m[r]]=true;A&&C(l,
m[r])}if(!l.configure)l.configure=function(B,j){if(ga[B]){for(var n=o.length;n--;){var v=o[n](B,j);if(typeof v!=="undefined")return v}return u[P]}return null}}}})();
(function(){function C(l){var m=document.createElement("script"),r=false;m.src=l;m.async=true;m.onload=m.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){r=true;m.onload=m.onreadystatechange=null;m&&m.parentNode&&m.parentNode.removeChild(m)}};u||(u=document.getElementsByTagName("head")[0]);u.appendChild(m)}var Y=0,u,p=this;COG.jsonp=function(l,m,r){l+=l.indexOf("?")>=0?"&":"?";var A="json"+ ++Y;p[A]=function(P){m(P);p[A]=null;try{delete p[A]}catch(ga){}};
C(l+(r?r:"callback")+"="+A);return A}})();
(function(){var C=1.70158,Y=Math.PI/2,u=Math.PI*2,p=1E3/60|0,l=Math.abs,m=Math.pow,r=Math.sin,A=Math.asin,P=Math.cos,ga={linear:function(o,B,j,n){return j*o/n+B},backin:function(o,B,j,n){return j*(o/=n)*o*((C+1)*o-C)+B},backout:function(o,B,j,n){return j*((o=o/n-1)*o*((C+1)*o+C)+1)+B},backinout:function(o,B,j,n){return(o/=n/2)<1?j/2*o*o*(((C*=1.525)+1)*o-C)+B:j/2*((o-=2)*o*(((C*=1.525)+1)*o+C)+2)+B},bouncein:function(o,B,j,n){return j-ga.bounceout(n-o,0,j,n)+B},bounceout:function(o,B,j,n){return(o/=
n)<1/2.75?j*7.5625*o*o+B:o<2/2.75?j*(7.5625*(o-=1.5/2.75)*o+0.75)+B:o<2.5/2.75?j*(7.5625*(o-=2.25/2.75)*o+0.9375)+B:j*(7.5625*(o-=2.625/2.75)*o+0.984375)+B},bounceinout:function(o,B,j,n){return o<n/2?ga.bouncein(o*2,0,j,n)/2+B:ga.bounceout(o*2-n,0,j,n)/2+j/2+B},cubicin:function(o,B,j,n){return j*(o/=n)*o*o+B},cubicout:function(o,B,j,n){return j*((o=o/n-1)*o*o+1)+B},cubicinout:function(o,B,j,n){if((o/=n/2)<1)return j/2*o*o*o+B;return j/2*((o-=2)*o*o+2)+B},elasticin:function(o,B,j,n,v,G){if(o==0)return B;
if((o/=n)==1)return B+j;G||(G=n*0.3);if(!v||v<l(j)){v=j;j=G/4}else j=G/u*A(j/v);return-(v*m(2,10*(o-=1))*r((o*n-j)*u/G))+B},elasticout:function(o,B,j,n,v,G){var Q;if(o==0)return B;if((o/=n)==1)return B+j;G||(G=n*0.3);if(!v||v<l(j)){v=j;Q=G/4}else Q=G/u*A(j/v);return v*m(2,-10*o)*r((o*n-Q)*u/G)+j+B},elasticinout:function(o,B,j,n,v,G){var Q;if(o==0)return B;if((o/=n/2)==2)return B+j;G||(G=n*0.3*1.5);if(!v||v<l(j)){v=j;Q=G/4}else Q=G/u*A(j/v);if(o<1)return-0.5*v*m(2,10*(o-=1))*r((o*n-Q)*u/G)+B;return v*
m(2,-10*(o-=1))*r((o*n-Q)*u/G)*0.5+j+B},quadin:function(o,B,j,n){return j*(o/=n)*o+B},quadout:function(o,B,j,n){return-j*(o/=n)*(o-2)+B},quadinout:function(o,B,j,n){if((o/=n/2)<1)return j/2*o*o+B;return-j/2*(--o*(o-2)-1)+B},sinein:function(o,B,j,n){return-j*P(o/n*Y)+j+B},sineout:function(o,B,j,n){return j*r(o/n*Y)+B},sineinout:function(o,B,j,n){return-j/2*(P(Math.PI*o/n)-1)+B}};COG.tweenValue=function(o,B,j,n,v){function G($){$=$?$:(new Date).getTime();if(ia+p<$){var K=$-Q,ta=j(K,o,la,n),ra=Q+n<=
$;$=!ra;if(v){K=v(ta,ra,K);$=typeof K!="undefined"?K&&$:$}$&&animFrame(G)}}var Q=(new Date).getTime(),ia=0,la=B-o;animFrame(G);return{}};COG.easing=function(o){return ga[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(o,B){ga[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]=B}})();
(function(){var C=/^P(\d+Y)?(\d+M)?(\d+D)?$/,Y=/^(\d+H)?(\d+M)?(\d+S)?$/,u={8601:function(l){l=l.split("T");var m=null;m=null;var r=0,A=0;C.lastIndex=-1;m=C.exec(l[0]);r+=m[3]?parseInt(m[3].slice(0,-1),10):0;Y.lastIndex=-1;m=Y.exec(l[1]);A+=m[1]?parseInt(m[1].slice(0,-1),10)*3600:0;A+=m[2]?parseInt(m[2].slice(0,-1),10)*60:0;A+=m[3]?parseInt(m[3].slice(0,-1),10):0;return new p(r,A)}},p=COG.Duration=function(l,m){return{days:l?l:0,seconds:m?m:0}};COG.addDuration=function(){for(var l=new p,m=arguments.length;m--;){l.days+=
arguments[m].days;l.seconds+=arguments[m].seconds}if(l.seconds>=86400){l.days+=~~(l.seconds/86400);l.seconds%=86400}return l};COG.formatDuration=function(l){var m,r,A="";if(l.days)A=l.days+" days ";if(l.seconds){l=l.seconds;if(l>=3600){m=~~(l/3600);l-=m*3600}if(l>=60){r=Math.round(l/60);l-=r*60}if(m)A=A+m+(m>1?" hrs ":" hr ")+(r?(r>10?r:"0"+r)+" min ":"");else if(r)A=A+r+" min";else if(l>0)A=A+(l>10?l:"0"+l)+" sec"}return A};COG.parseDuration=function(l,m){var r=m?u[m]:null;if(r)return r(l);COG.Log.warn("Could not find duration parser for specified format: "+
m);return new p}})();COG.ObjectStore=function(){var C={},Y={},u="obj_"+(new Date).getTime(),p=0,l=Object.prototype.hasOwnProperty;return{add:function(m,r){var A;r=r?r:"default";if(m&&m.constructor)if(!l.call(m,"id"))m.id=u+ ++p;A=Y[r]?Y[r]:Y[r]=[];C[m.id]=A.length;A[m.length]=m}}};var CANI={};
(function(C){var Y=[],u=0,p=false,l=C.register=function(m,r){Y.push({section:m,run:r})};C.init=function(m){function r(){if(u<Y.length){var P=Y[u++];A[P.section]||(A[P.section]={});P.run(A[P.section],r)}else{for(P in A)C[P]=A[P];p=true;m&&m(C)}}var A={};if(p&&m)m(C);else{u=0;r()}};l("canvas",function(m,r){function A(){var B,j=P.getContext("2d");j.save();try{j.translate(50,50);j.beginPath();j.rect(0,0,20,20);B=j.isPointInPath(10,10)}finally{j.restore()}return B}var P=document.createElement("canvas"),
ga=typeof FlashCanvas!="undefined",o=typeof G_vmlCanvasManager!="undefnined";P.width=200;P.height=200;m.pipTransformed=ga||o?false:A();r()})})(CANI);
INTERACT=function(){function C(j){return function(n,v){j.addEventListener(n,v,false)}}function Y(j){return function(n,v){j.removeEventListener(n,v,false)}}function u(j){return function(n,v){j.attachEvent("on"+n,v)}}function p(j,n){return{x:j?j:0,y:n?n:0,count:1}}function l(j,n){o.push(COG.extend({handler:null,checks:{},type:j},n))}function m(j){var n=0,v=0;if(j.offsetParent){do{n+=j.offsetLeft;v+=j.offsetTop;j=j.offsetParent}while(j)}return{left:n,top:v}}function r(j,n){return{source:j,target:n.target?
n.target:n.srcElement}}function A(j,n){for(var v=j.target?j.target:j.srcElement;v&&v!==n;)v=v.parentNode;return v&&v===n}function P(j,n){return{x:j.x-(n?n.left:0),y:j.y-(n?n.top:0)}}function ga(j,n){if(j.preventDefault){j.preventDefault();j.stopPropagation()}else if(typeof j.cancelBubble!="undefined")j.cancelBubble=true;n&&j.stopImmediatePropagation&&j.stopImmediatePropagation()}var o=[],B=function(j,n,v){v=COG.extend({binder:null,unbinder:null,observable:null},v);for(var G=v.observable,Q=[],ia,la,
$={bind:function(){return G.bind.apply(null,arguments)},unbind:function(){G.unbind();for(K=0;K<Q.length;K++)Q[K].unbind();return $}},K=0;K<n.length;K++)Q.push(n[K](j,G,v));G.bind("pointerDown",function(){la=ia=0});G.bind("pointerMove",function(ta,ra,Ia,sa){ia+=sa.x||0;la+=sa.y||0});G.bind("pointerUp",function(ta,ra,Ia){Math.abs(ia)>20||Math.abs(la)>20||G.triggerCustom("tap",ta,ra,Ia)});return $};l("pointer",{handler:function(j,n,v){function G(z){if(z.pageX&&z.pageY)return p(z.pageX,z.pageY);else{var U=
document.documentElement,X=document.body;return p(z.clientX+(U&&U.scrollLeft||X&&X.scrollLeft||0)-(U&&U.clientLeft||X&&X.clientLeft||0),z.clientY+(U&&U.scrollTop||X&&X.scrollTop||0)-(U&&U.clientTop||X&&X.clientTop||0))}}function Q(z){if(A(z,j))if(sa=K(z)){var U=G(z);j.style.cursor="move";ga(z,true);pa=U.x;ea=U.y;Ea=p(pa,ea);n.triggerCustom("pointerDown",r("mouse",z),Ea,P(Ea,m(j)))}}function ia(z){var U=G(z);Ja=U.x;ja=U.y;if(A(z,j))ta(z,sa?"pointerMove":"pointerHover")}function la(z){if(sa&&K(z)){sa=
false;if(A(z,j)){j.style.cursor="default";ta(z,"pointerUp")}}}function $(z){if(A(z,j)){var U;z=z||window.event;if(z.detail)U=z.axis===2?-z.detail*ra:0;else{U=z.wheelDeltaY?z.wheelDeltaY:z.wheelDelta;if(window.opera)U=-U}if(U!==0){var X=p(Ja,ja);n.triggerCustom("zoom",r("mouse",z),X,P(X,m(j)),U/Ia,"wheel");ga(z);z.returnValue=false}}}function K(z){z=z||window.event;return(z.which||z.button)==1}function ta(z,U,X,ma,ua){X=typeof X!="undefined"?X:Ja;ma=typeof ma!="undefined"?ma:ja;var F=X-pa,R=ma-ea,
S=p(X,ma);n.triggerCustom(U,r("mouse",z),S,P(S,m(j)),p(F,R));if(typeof ua=="undefined"||ua){pa=X;ea=ma}}v=COG.extend({},v);var ra=120,Ia=ra*8,sa=false,Ea,Ja,ja,pa,ea;v.binder("mousedown",Q);v.binder("mousemove",ia);v.binder("mouseup",la);v.binder("dblclick",function(z){COG.info("captured double click");if(A(z,j)){var U=G(z);n.triggerCustom("doubleTap",r("mouse",z),U,P(U,m(j)))}});v.binder("mousewheel",$);v.binder("DOMMouseScroll",$);return{unbind:function(){v.unbinder("mousedown",Q);v.unbinder("mousemove",
ia);v.unbinder("mouseup",la);v.unbinder("mousewheel",$);v.unbinder("DOMMouseScroll",$)}}},checks:{touch:false}});l("pointer",{handler:function(j,n,v){function G(F){if(F.count<2)return 0;var R=F.x-F.next.x;F=F.y-F.next.y;return~~Math.sqrt(R*R+F*F)}function Q(F,R,S){R=R?R:0;S=S?S:0;for(var ka={x:F.x-R,y:F.y-S,id:F.id,count:F.count},wa=ka;F.next;){F=F.next;wa=wa.next={x:F.x-R,y:F.y-S,id:F.id}}return ka}function ia(F,R){var S=F[R?R:"touches"],ka,wa;if(S.length===0)return null;wa=ka={x:S[0].pageX,y:S[0].pageY,
id:S[0].identifier,count:S.length};for(var va=1,Xa=S.length;va<Xa;va++)wa=wa.next={x:S[va].pageX,y:S[va].pageY,id:S[va].identifier};return ka}function la(F){if(A(F,j)){ja=m(j);var R=ia(F,"changedTouches"),S=Q(R,ja.left,ja.top);if(!ea){pa=sa;n.triggerCustom("pointerDown",r("touch",F),R,S)}ma&&n.triggerCustom("pointerDownMulti",r("touch",F),R,S);ea=ia(F);if(ea.count>1)U=G(ea);ua=1;X=Q(ea)}}function $(F){if(A(F,j)){ga(F);z=ia(F);if(pa==sa)pa=Math.abs(ea.x-z.x)>ra||Math.abs(ea.y-z.y)>ra?Ia:sa;if(pa!=
sa){pa=z.count>1?Ja:Ea;if(pa==Ja)if(ea.count===1){ea=Q(z);U=G(ea)}else{var R=G(z);if(Math.abs(U-R)<ta)pa=Ea;else{var S;S=z.x;var ka=z.next.x,wa=z.y,va=z.next.y,Xa=wa<va?wa:va;S={x:(S<ka?S:ka)+(Math.abs(S-ka)>>1),y:Xa+(Math.abs(wa-va)>>1)};R=R/U;ka=R-ua;n.triggerCustom("zoom",r("touch",F),S,P(S,ja),ka,"pinch");ua=R}}pa==Ea&&n.triggerCustom("pointerMove",r("touch",F),z,Q(z,ja.left,ja.top),p(z.x-X.x,z.y-X.y));ma&&n.triggerCustom("pointerMoveMulti",r("touch",F),z,Q(z,ja.left,ja.top))}X=Q(z)}}function K(F){if(A(F,
j)){var R=ia(F,"changedTouches"),S=Q(R,ja.left,ja.top);z=ia(F);if(!z){n.triggerCustom("pointerUp",r("touch",F),R,S);ea=null}ma&&n.triggerCustom("pointerUpMulti",r("touch",F),R,S)}}v=COG.extend({detailed:false,inertia:false},v);var ta=20,ra=7,Ia=0,sa=1,Ea=2,Ja=3,ja,pa,ea,z,U,X,ma=v.detailed,ua=1;v.binder("touchstart",la);v.binder("touchmove",$);v.binder("touchend",K);COG.info("initialized touch handler");return{unbind:function(){v.unbinder("touchstart",la);v.unbinder("touchmove",$);v.unbinder("touchend",
K)}}},checks:{touch:true}});return{register:l,watch:function(j,n,v){n=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},n);capabilities=COG.extend({touch:"ontouchstart"in window},v);if(!n.observable){COG.info("creating observable");n.observable=COG.observable({});globalOpts=n}n.binder=(n.isIE?u:C)(n.bindTarget||document);n.unbinder=(n.isIE?u:Y)(n.bindTarget||document);v=n.types;for(var G=capabilities,Q=[],ia=o.length;ia--;){var la=o[ia],$=!v||v.indexOf(la.type)>=
0,K=true;for(var ta in la.checks){var ra=la.checks[ta];COG.info("checking "+ta+" capability. require: "+ra+", capability = "+G[ta]);K=K&&ra===G[ta]}if($&&K)Q[Q.length]=la.handler}return new B(j,Q,n)}}}();var T5={};
(function(C){function Y(){return(new Date).getTime()}function u(a,e){e=Yb.call(e);if(e=="finite")return!Zb[$b](+a);return e=="null"&&a===null||e==typeof a||e=="object"&&a===Object(a)||e=="array"&&Array.isArray&&Array.isArray(a)||ac.call(a).slice(8,-1).toLowerCase()==e}function p(a,e){this.x=a||0;this.y=e||0}function l(a,e,c,d){this.x=a||0;this.y=e||0;this.w=c||0;this.h=d||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function m(a,e){var c=new Eb(Math.sqrt(256<<a)|0);e&&e.zoomLevel===a&&e.copyInto(c);
c.zoomLevel=a;return c}function r(a){a=a||(new Date).getTime();for(var e=0;e<Ya.length;){var c=Ya[e],d=Sa[c],b=Sa[c].image&&Sa[c].image.complete&&Sa[c].image.width>0,f=a-d.start;f=b||f>=bc;if(b){b=d.callbacks;Fb[c]=d.image;for(var g=0;g<b.length;g++)b[g](d.image,true)}if(f){Ya.splice(e,1);delete Sa[c]}else e++}Ya.length>0&&animFrame(r)}function A(a,e){var c=a&&e?Fb[a]:null;if(c&&c&&c.complete&&c.width>0)e(c);else{if(c=Sa[a])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++cc;Sa[a]={start:(new Date).getTime(),
image:c,callbacks:[e]};c.src=a;Ya[Ya.length]=a}animFrame(r)}}function P(a,e,c,d,b,f){this.x=a;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=c;this.id=f||a+"_"+e;this.loaded=false;this.image=null}function ga(){for(var a=0,e=arguments.length;e--;){var c=dc[arguments[e].toUpperCase()];if(c)a|=c}return a}function o(a){a=a?a:(new Date).getTime();if(a-Gb>ec){for(var e=bb.splice(0),c=e.length;c--;)e[c](a);Gb=a}bb.length&&animFrame(o)}function B(a){var e=bb.length==
0;bb[bb.length]=a;e&&animFrame(o)}function j(a,e,c,d,b){b=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},b);var f=(new Date).getTime(),g=a[e],i=e=="translate",k=b.autoInvalidate,h=c.length&&d.length&&c.length==d.length?c.length:0,s=Array(h),x=Array(h),I=COG.easing(b.easing),D=b.duration,Z=b.progress,E=function(H){var M=H-f;H=f+D<=H;for(var V=a.layer?a.layer.view:null,ba,t=h;t--;){ba=I(M,c[t],s[t],D);x[t]=i?ba|0:ba}g.apply(a,x);k&&V&&V.invalidate();if(Z){M=
[].concat(H?d:x);M.unshift(H);Z.apply(a,M)}if(H){a.animations--;g.apply(a,d);b.complete&&b.complete.apply(a,d)}else B(E)};if(g&&g.apply&&h>0){D=D?D:DEFAULT_DURATION;for(e=h;e--;)s[e]=d[e]-c[e];a.animations++;B(E)}}function n(a){a=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},a);Ca.call(this,a)}function v(a,e){e=COG.extend({simplify:false,fill:true,typeName:"Poly"},e);var c=e.simplify;Ca.call(this,e);COG.extend(this,{getPoints:function(){return[].concat(a)},
resync:function(d){var b,f,g,i,k,h;d.syncXY(a);h=this.points=Ta.floor(c?Ta.simplify(a):a);for(var s=h.length;s--;){d=h[s].x;b=h[s].y;i=u(i,xa)||d<i?d:i;k=u(k,xa)||b<k?b:k;f=u(f,xa)||d>f?d:f;g=u(g,xa)||b>g?b:g}this.updateBounds(new l(i,k,f-i,g-k),true)}});this.haveData=a&&a.length>=2}function G(a,e){e.fill=false;v.call(this,a,e)}function Q(a){function e(){if(g&&g.width>0){if(!this.centerOffset)this.centerOffset=new p(-g.width>>1,-g.height>>1);this.updateBounds(new l(this.xy.x+this.centerOffset.x,this.xy.y+
this.centerOffset.y,g.width,g.height),false)}}function c(k){if(this.imageUrl=k){var h=this;A(this.imageUrl,function(s,x){g=s;if(x){var I=i.layer?i.layer.view:null;I&&I.invalidate()}e.apply(h)})}}a=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},a);var d=Ca.prototype.resync,b=0,f=0,g=a.image;Ca.call(this,a);var i=COG.extend(this,{changeImage:c,getProps:function(){this.bounds||e(this,g);return{image:g,x:this.xy.x+b,y:this.xy.y+f}},resync:function(k){d.call(this,k);e.call(this)}});
g||c.call(this,this.imageUrl);if(this.centerOffset){b=this.centerOffset.x;f=this.centerOffset.y}}function ia(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.centerOffset=Ta.invert(a.imageAnchor);Q.call(this,a)}function la(a){a=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},a);Ca.call(this,a)}function $(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:ga("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},a);this.view=null;this.visible=
true;COG.observable(COG.extend(this,a))}function K(a,e){if(a&&a.split){var c=a.split(fc);if(c.length>1){a=c[0];e=c[1]}}else if(a&&a.lat){e=a.lon;a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(e||0)}function ta(a){a=parseFloat(a)*Fa;a=ka(a);var e=jb*a;return R((1+a)/(1-a)*ua((1-e)/(1+e),jb))/2}function ra(a){return ja/(256<<a)}function Ia(a,e){var c=jb*ka(a);return pa-2*Xa(e*ua((1-c)/(1+c),jb/2))}function sa(a,e,c,d){e=Ea(e);a.add(d(e,c));return e.length}function Ea(a){var e=a?a.length:0,c=
Array(e);for(e=e;e--;)c[e]=new K(a[e][1],a[e][0]);return ya.vectorize(c,Hb)}COG.observable(C);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();var Ja=Array.prototype.indexOf||function(a){for(var e=0;e<this.length;e++)if(this[e]===a)return e;return-1},ja=Math.PI*2,pa=Math.PI/2,ea="-webkit-transform",
z=Math.abs,U=Math.ceil,X=Math.min,ma=Math.max,ua=Math.pow,F=Math.sqrt,R=Math.log,S=Math.round,ka=Math.sin,wa=Math.asin,va=Math.cos,Xa=Math.atan,gc=Math.atan2,$b="hasOwnProperty",Zb={NaN:1,Infinity:1,"-Infinity":1},Yb=String.prototype.toLowerCase,ac=Object.prototype.toString,xa="undefined",hc="number",pb=typeof document.body.style[ea]!="undefined",fc=/[\,\s]/,ic=T5.newCanvas=function(a,e){var c=document.createElement("canvas");c.width=a?a:0;c.height=e?e:0;T5.trigger("createCanvas",c);return c},Ib=
function(){var a={};return{init:function(e,c){var d=a[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(c)},register:function(e,c){a[e]=c}}}(),qb=function(){var a={};return{find:function(e){return(a[e]||[])[0]},register:function(e,c){a[e]||(a[e]=[]);a[e].push(c())}}}();p.prototype={constructor:p,add:function(){for(var a=this.x,e=this.y,c=arguments.length;c--;){a+=arguments[c].x;e+=arguments[c].y}return new p(a,e)},equals:function(a){return this.x===a.x&&this.y===a.y}};
l.prototype={constructor:l};var Ta=function(){function a(d,b){return c(d.x-b.x,d.y-b.y)}function e(d,b){b=b||d.length;if(b<=1)return null;for(var f=Array(b-1),g=Array(b-1),i=0,k,h=0;h<b-1;h++){k=a(d[h],d[h+1]);f[h]=F(k.x*k.x+k.y*k.y);g[h]=i+=f[h]}return{edges:f,accrued:g,tota:i}}function c(d,b){return new p(d,b)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,b=0,f=arguments.length;f--;){d+=arguments[f].x;b+=arguments[f].y}return c(d,b)},absSize:function(d){return ma(z(d.x),
z(d.y))},copy:function(d){return d?c(d.x,d.y):null},diff:a,distance:function(d,b){return e(d,b).total},edges:e,equals:function(d,b){return d.equals(b)},extendBy:function(d,b,f){var g=va(b)*f|0;b=ka(b)*f|0;return c(d.x-g,d.y-b)},floor:function(d){for(var b=Array(d.length),f=d.length;f--;)b[f]=c(~~d[f].x,~~d[f].y);return b},getRect:function(d){for(var b,f,g,i,k=d.length;k--;){var h=d[k];b=u(b,xa)||h.x<b?h.x:b;f=u(f,xa)||h.y<f?h.y:f;g=u(g,xa)||h.x>g?h.x:g;i=u(i,xa)||h.y>i?h.y:i}return new l(b,f,g-b,
i-f)},init:c,invert:function(d){return c(-d.x,-d.y)},min:function(d,b){return c(d.x<b.x?d.x:b.x,d.y<b.y?d.y:b.y)},max:function(d,b){return c(d.x>b.x?d.x:b.x,d.y>b.y?d.y:b.y)},offset:function(d,b,f){return c(d.x+b,d.y+(f||b))},scale:function(d,b){return c(d.x/b|0,d.y/b|0)},simplify:function(d,b){if(!d)return null;b=b?b:Ta.VECTOR_SIMPLIFICATION;for(var f=[],g=null,i=d.length;i--;){var k=d[i];if(include=!g||i===0||z(k.x-g.x)+z(k.y-g.y)>b){f.unshift(k);g=k}}return f},theta:function(d,b,f){f=wa((d.y-b.y)/
f);return d.x>b.x?f:Math.PI-f},toString:function(d){return d?d.x+", "+d.y:""}}}(),Ka=function(){return{dotProduct:function(a,e){return a.x*e.x+a.y*e.y}}}(),Za=function(){function a(c){return e(c.x,c.y,c.x2,c.y2)}function e(c,d,b,f){return new l(c,d,(b||c)-c,(f||d)-d)}return{buffer:function(c,d,b){return Za.init(c.x-d,c.y-(b||d),c.x2+d,c.y2+(b||d))},center:function(c){return new p(c.x+(c.w>>1),c.y+(c.h>>1))},copy:a,diagonalSize:function(c){return F(c.w*c.w+c.h*c.h)},fromCenter:function(c,d,b,f){b=
b>>1;f=f>>1;return e(c-b,d-f,c+b,d+f)},init:e,intersect:function(c,d){var b=ma(c.x,d.x),f=ma(c.y,d.y),g=X(c.x2,d.x2),i=X(c.y2,d.y2);b=e(b,f,g,i);return b.w>0&&b.h>0?b:null},toString:function(c){return c?"["+c.x+", "+c.y+", "+c.x2+", "+c.y2+"]":""},union:function(c,d){if(c.w===0||c.h===0)return a(d);else if(d.w===0||d.h===0)return a(c);else{var b=X(c.x,d.x),f=X(c.y,d.y),g=ma(c.x2,d.x2),i=ma(c.y2,d.y2);b=e(b,f,g,i);return b.w>0&&b.h>0?b:null}}}}();Hits=function(){return{diffHits:function(a,e){var c=
[],d={},b;for(b=e.length;b--;)d[e[b].target.id]=true;for(b=a.length;b--;)d[a[b].target.id]||(c[c.length]=a[b]);return c},init:function(a,e,c,d){return{type:a,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:c}},initHit:function(a,e,c){return{type:a,target:e,drag:c}},triggerEvent:function(a,e,c,d){e.triggerCustom(a.type+(c?c:"Hit"),{hitType:a.type},d?d:a.elements,a.absXY,a.relXY,new p(a.x,a.y))}}}();var Eb=function(a){function e(b,f){var g=c[b],i;g||(g=c[b]=[]);(i=g[f])||(i=g[f]=[]);return i}a=a||128;var c=
[],d={};return{copyInto:function(b){for(var f in d){var g=d[f];b.insert(g.bounds||g,g,f)}},insert:function(b,f,g){var i=b.x/a|0,k=b.y/a|0,h=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;g=g||f.id||COG.objId("spatial");d[g]=f;for(f=i;f<=h;f++)for(i=k;i<=b;i++)e(f,i).push(g)},remove:function(b,f,g){g=g||f.id;if(d[g]){var i=b.x/a|0;f=b.y/a|0;var k=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;delete d[g];for(i=i;i<=k;i++)for(var h=f;h<=b;h++){var s=e(i,h),x=Ja.call(s,g);x>=0&&s.splice(x,1)}}},search:function(b){var f=b.y/a|0,g=(b.x+
b.w)/a|0,i=(b.y+b.h)/a|0,k=[],h=[];for(b=b.x/a|0;b<=g;b++)for(var s=f;s<=i;s++)k=k.concat(e(b,s));k.sort();for(f=k.length;f--;){g=k[f];if(i=d[g])h[h.length]=i;for(;f>0&&k[f-1]==g;)f--}return h}}},bc=3E4,Fb={},cc=0;(new Date).getTime();var Sa={},Ya=[];P.prototype={constructor:P,load:function(a){var e=this;A(this.url,function(c){e.loaded=true;e.image=c;a&&a()})}};var jc=function(){return COG.observable({applyStyle:function(){},applyTransform:function(a,e,c){return{restore:null,x:e,y:c}},checkSize:function(){},
getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new p},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},reset:function(){}})},Jb={},cb=C.registerRenderer=function(a,e){Jb[a]=e},kc=C.attachRenderer=function(a,e,c,d){a=a.split("/");for(var b=new jc(e,c,d),f=0;f<a.length;f++){var g=Jb[a[f]];if(g)b=new g(e,c,d,b)}return b};cb("canvas",function(a,e,c,d){function b(t,L,N){var aa,W;I[L]=function(ha){for(aa=V.length;aa--;)if(W=
N[V[aa]])ha[ba[aa]]=W}}function f(t,L,N,aa){var W=false;if(L)W=h.isPointInPath(Z?L.x-s:L.relXY.x,Z?L.y-x:L.relXY.y);return{draw:aa||M,viewport:t,state:N,hit:W,vpX:s,vpY:x,context:h}}c=COG.extend({},c);var g,i,k,h,s=0,x=0,I={},D=null,Z=CANI.canvas.pipTransformed,E={},H=function(){},M=function(){this.fill&&h.fill();this.stroke&&h.stroke()},V=["fill","stroke","lineWidth","opacity"],ba=["fillStyle","strokeStyle","lineWidth","globalAlpha"];if(e){g=e.offsetWidth;i=e.offsetHeight;k=ic(g,i);k.style.cssText=
"position: absolute; z-index: 1;";e.appendChild(k);h=null}c=COG.extend(d,{applyStyle:function(t){var L=I[t],N=h&&h.canvas?h.canvas.id:"default",aa;E[N]||(E[N]=[]);aa=E[N].pop()||"basic";if(L){E[N].push(t);L(h);return aa}},applyTransform:function(t){if(t.translateX!==0||t.translateY!==0||t.scaling!==1||t.rotation!==0){h.save();D={undo:function(){h.restore();D=null},x:t.xy.x,y:t.xy.y};h.translate(t.xy.x-s+t.translateX,t.xy.y-x+t.translateY);t.rotation!==0&&h.rotate(t.rotation);t.scaling!==1&&h.scale(t.scaling,
t.scaling)}return D},drawTiles:function(t,L){for(var N,aa,W=s-256,ha=x-256,J=t.x2,ca=t.y2,da=L.length;da--;){N=L[da];if(aa=N.x>=W&&N.x<=J&&N.y>=ha&&N.y<=ca)N.loaded?h.drawImage(N.image,N.x-s,N.y-x):N.load(a.invalidate)}},prepare:function(t,L){var N,aa=false,W=L.scaled||L,ha=L.scaleFactor;if(h)h.restore();else h=k.getContext("2d");for(N=t.length;N--;)aa=aa||t[N].clip;s=W.x;x=W.y;if(h){aa||h.clearRect(0,0,g,i);h.save();h.scale(ha,ha)}h.globalCompositeOperation="source-over";return h},prepArc:function(t,
L,N,aa){h.beginPath();h.arc(t.xy.x-(D?D.x:s),t.xy.y-(D?D.y:x),t.size>>1,t.startAngle,t.endAngle,false);return f(L,N,aa)},prepImage:function(t,L,N,aa,W){var ha=(W.x||t.xy.x)-(D?D.x:s),J=(W.y||t.xy.y)-(D?D.y:x),ca=W.image||t.image;if(ca){h.beginPath();h.rect(ha,J,W.width||ca.width,W.height||ca.height);return f(L,N,aa,function(){h.drawImage(ca,ha,J,W.width||ca.width,W.height||ca.height)})}},prepMarker:function(t,L,N,aa){var W=t.xy.x-(D?D.x:s),ha=t.xy.y-(D?D.y:x),J=t.size,ca=undefined;h.beginPath();switch(t.markerStyle.toLowerCase()){case "image":ca=
H;h.rect(W-(J>>1),ha-(J>>1),J,J);if(t.reset&&t.image){t.image=null;t.reset=false}t.image?h.drawImage(t.image,W-(J>>1),ha-(J>>1),J,J):A(t.imageUrl,function(da){t.image=da;h.drawImage(t.image,W-(J>>1),ha-(J>>1),J,J)});break;default:h.moveTo(W,ha);h.lineTo(W-(J>>1),ha-J);h.lineTo(W+(J>>1),ha-J);h.lineTo(W,ha);break}return f(L,N,aa,ca)},prepPoly:function(t,L,N,aa,W){var ha=true;t=W.points||t.points;W=D?D.x:s;var J=D?D.y:x;h.beginPath();for(var ca=t.length;ca--;){var da=t[ca].x-W,za=t[ca].y-J;if(ha){h.moveTo(da,
za);ha=false}else h.lineTo(da,za)}return f(L,N,aa)},getContext:function(){return h},getDimensions:function(){return{width:g,height:i}},getOffset:function(){return new p(s,x)}});(function(){for(var t in T5.styles)b(null,t,T5.styles[t]);T5.bind("styleDefined",b)})();c.bind("detach",function(){e.removeChild(k)});return c});cb("dom",function(a,e,c,d){function b(h){var s=h.image=new Image;i[h.id]=h;s.src=h.url;s.onload=function(){if(k[h.id]){g.appendChild(this);h.indom=true}else h.image=null};s.style.cssText=
"-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";return s}function f(h,s,x){var I=[];for(var D in h){var Z=h[D];if(x?Z[x]:!s[D]){if(Z.indom){COG.info("attemping to remove tile "+
Z.id+" from the dom");try{g.removeChild(Z.image)}catch(E){COG.warn("could not remove tile "+Z.id+" from the DOM")}Z.image=null}I[I.length]=D}}for(s=I.length;s--;)delete h[I[s]]}var g=null,i={},k={};g=document.createElement("div");g.id=COG.objId("domImages");g.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",e.offsetWidth,e.offsetHeight);e.childNodes.length>0?e.insertBefore(g,e.childNodes[0]):e.appendChild(g);a=COG.extend(d,{preventPartialScale:true,
drawTiles:function(h,s){var x,I,D=h.scaleFactor,Z,E,H,M,V,ba,t,L,N;for(L=s.length;L--;){x=s[L];E=E||x.w;V=V||x.h;H=H?Math.min(x.x,H):x.x;M=M?Math.min(x.y,M):x.y;I=I?Math.max(x.x,I):x.x;Z=Z?Math.max(x.y,Z):x.y}Z=H-h.x;E=M-h.y;for(L=s.length;L--;){x=s[L];if(x.url){(I=x.image)||(I=b(x));ba=(x.x-H)/x.w;t=(x.y-M)/x.h;V=x.w*D|0;N=x.h*D|0;ba=Z+ba*V;t=E+t*V;if(pb)I.style[ea]="translate3d("+ba+"px, "+t+"px, 0px)";else{I.style.left=ba+"px";I.style.top=t+"px"}I.style.width=V+"px";I.style.height=N+"px";k[x.id]=
x}}}});a.bind("predraw",function(){f(i,k);k={}});a.bind("detach",function(){e.removeChild(g)});a.bind("reset",function(){for(f(i,k={});g.childNodes.length>0;)g.removeChild(g.childNodes[0])});return a});var rb=C.styles={},lc=C.defineStyle=function(a,e){rb[a]=e;C.trigger("styleDefined",a,rb[a]);return a},Kb=C.defineStyles=function(a){for(var e in a)lc(e,a[e])};C.getStyle=function(a){return rb[a]};C.loadStyles=function(a){COG.jsonp(a,function(e){Kb(e)})};Kb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},
waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var dc={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Sb=function(a){function e(q,w,y,O){L(X(ma(qa+ua(2,O)-1,0.5),2))}function c(){var q=R(qa)/Math.LN2|0;if(q!==0){qa=ua(2,q);N(db+q,mc,nc)}redraw=true}function d(q,w){var y=renderer&&renderer.projectXY?renderer.projectXY(q,w):null;if(!y){y=fa.getViewport();var O=1/qa;y=new p(y?y.x+q*O:q,y?y.y+w*O:w)}return y}function b(q,w,
y){aa("doubleTap",w,y,d(y.x,y.y));a.scalable&&L(2,d(y.x,y.y),a.zoomEasing,null,a.zoomDuration)}function f(q,w,y){Ga=null;sb=true;M("down",w,y)}function g(q,w,y){M("hover",w,y)}function i(q,w,y,O){Z(w,y,false);if(!Ga){La=O.x;Ma=O.y}}function k(q,w,y){Z(w,y,true);sb=false}function h(){clearTimeout(Lb);Lb=setTimeout(function(){renderer.checkSize()},250)}function s(q,w,y){M("tap",w,y);aa("tap",w,y,d(y.x,y.y,true))}function x(q){renderer=kc(q||a.renderer,fa,da,a);Mb=!renderer.preventPartialScale;D()}function I(q,
w){w.id=q;w.added=Y();w.view=fa;w.trigger("parentChange",fa,da,oc);J.push(w);J.sort(function(y,O){var T=O.zindex-y.zindex;if(T===0)T=O.added-y.added;return T});ca=J.length;return w}function D(){Da&&Da.unbind();if(renderer){Da=INTERACT.watch(renderer.interactTarget||da);if(a.scalable){Da.bind("zoom",e);Da.bind("doubleTap",b)}Da.bind("pointerDown",f);Da.bind("pointerMove",i);Da.bind("pointerUp",k);a.captureHover&&Da.bind("pointerHover",g);Da.bind("tap",s)}}function Z(q,w,y){if(Ga){q=d(w.x,w.y);Ga.drag.call(Ga.target,
Ga,q.x,q.y,y)&&Ha++;if(y)Ga=null}}function E(q,w){var y=document.getElementById(w);za=document.createElement("div");za.id=COG.objId("t5_container");za.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",y.offsetWidth,y.offsetHeight);y.appendChild(za);eb=za.offsetWidth+a.padding*2;fb=za.offsetHeight+a.padding*2;kb=eb/2;lb=fb/2;da=document.createElement("div");da.id=COG.objId("t5_view");da.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px; margin: {2}px 0 0 {2}px;",
eb,fb,-a.padding);za.appendChild(da);x()}function H(q){var w,y,O=false,T;T=z(La)+z(Ma);q=q||(new Date).getTime();if(O=true){var Aa=z(na-tb),Na=z(oa-ub);w=na!==vb||oa!==wb;y=qa!==Nb;if(w||y)Ha++;if(T<10&&(Aa>=Ob||Na>=Ob))t();y={index:pc++,draw:Ha||T||Ua||Va};fa.trigger("enterFrame",q,y);qc=q}if(renderer&&O&&y.draw){Oa=Pb|(qa!==1?Qb:0)|(w?xb:0)|(yb?Rb:0);zb=(w=(Oa&(Qb|xb))!==0)&&(Oa&Rb)===0;if(T>5){Ua+=La;Va+=Ma;if(pb){da.style[ea]="translate3d("+(Ua|0)+"px, "+(Va|0)+"px, 0px)";COG.info(da.style[ea])}else{da.style.left=
Ua+"px";da.style.top=Va+"px"}COG.info("drawing")}else{na-=La+Ua|0;oa-=Ma+Va|0;if(Ua||Va){COG.info("reset");if(pb){da.style[ea]="translate3d(0px, 0px, 0px)";COG.info(da.style[ea])}else{da.style.left=0;da.style.top=0}Va=Ua=0}T=ba();renderer.trigger("predraw",T,Oa);if(renderer.prepare(J,T,Oa,q,Ba)){Ha=0;for(ii=ca;ii--;){w=J[ii];if(w.visible&&(Oa&w.validStates)!==0){O=w.style?renderer.applyStyle(w.style,true):null;w.draw(renderer,T,Oa,fa,q,Ba);O&&renderer.applyStyle(O)}}renderer.render(T);fa.trigger("drawComplete",
T,q);vb=na;wb=oa;Nb=qa}}if(sb)Ma=La=0;else if(La!=0||Ma!=0){La*=0.8;Ma*=0.8;if(z(La)<0.5)La=0;if(z(Ma)<0.5)Ma=0}if(Ba){q=Ba?Ba.elements:[];if(gb&&gb.type==="hover"){T=Hits.diffHits(gb.elements,q);T.length>0&&Hits.triggerEvent(gb,fa,"Out",T)}if(q.length>0){w=Ba.x;O=Ba.y;for(T=q.length;T--;){y=q[T];Aa=w;Na=O;var Qa=y&&y.drag&&(!y.canDrag||y.canDrag(y,Aa,Na));if(Qa){Ga=y;Ga.startX=Aa;Ga.startY=Na}if(Qa)break}Hits.triggerEvent(Ba,fa)}gb=q.length>0?COG.extend({},Ba):null;Ba=null}}animFrame(H)}function M(q,
w,y){Ba=Hits.init(q,w,y,d(y.x,y.y,true));for(q=ca;q--;)Ab=Ab||(J[q].hitGuess?J[q].hitGuess(Ba.x,Ba.y,Oa,fa):false);Ab&&Ha++}function V(){Ha++}function ba(){var q=new l(na,oa,eb,fb);q.scaleFactor=qa;if(qa!==1)q.scaled=Za.fromCenter(na+kb|0,oa+lb|0,eb/qa|0,fb/qa|0);return q}function t(){var q=ba();if(q){if($a||ab)if(q){var w=mb?na+(q.w>>1):na,y=nb?oa+(q.h>>1):oa,O=q.w,T=q.h;if($a&&$a>O)if(w+O>$a)na=mb?na:$a-O;else if(w<0)na=mb?na:0;if(ab&&ab>T)if(y+T>ab)oa=nb?oa:ab-T;else if(y<0)oa=nb?oa:0}tb=na;ub=
oa;aa("refresh",fa,q);Ha++}}function L(q,w,y,O,T){var Aa;if(!Mb){y=false;Aa=S(R(q)/Math.LN2);q=ua(2,Aa)}if(y)COG.tweenValue(qa,q,y,T,function(Na,Qa){qa=Na;if(Qa){Aa=S(R(qa)/Math.LN2);qa=ua(2,Aa);O&&O()}c()});else{qa=q;c()}return fa}function N(q,w,y){q=ma(a.minZoom,X(a.maxZoom,q));if(q!==db){var O=ua(2,q-db),T=kb/O|0,Aa=lb/O|0;db=q;W(((w?w:na+kb)-T)*O,((y?y:oa+lb)-Aa)*O);vb=na;wb=oa;ub=tb=0;aa("zoomLevelChange",q);qa=1;renderer.trigger("reset");t()}}function aa(){for(var q=fa.trigger.apply(null,arguments).cancel,
w=J.length;w--;)q=J[w].trigger.apply(null,arguments).cancel||q;return!q}function W(q,w,y,O,T){function Aa(){Na+=1;if(Na>=2){yb=false;T&&T()}}var Na=0;if(y){if((Oa&xb)===0){COG.tweenValue(na,q,y,O,function(Qa,Bb){na=Qa|0;(Bb?Aa:V)();return!zb});COG.tweenValue(oa,w,y,O,function(Qa,Bb){oa=Qa|0;(Bb?Aa:V)();return!zb});yb=true}}else{na=q|0;oa=w|0;T&&T()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,padding:128,pannable:false,clipping:true,
scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:60,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},a);var ha={},J=[],ca=0,da=null,za=null,Ga=null,pc=0,oc=null,rc=!u(window.attachEvent,xa),Ab=false,sb=false,La=0,Ma=0,Ua=0,Va=0,Ob=a.refreshDistance,na=0,oa=0,tb=0,ub=0,vb=0,wb=0,$a=null,ab=null,mb=false,nb=false,Ba=null,zb=false,gb=
null,Lb=0,qa=1,Nb=1,qc=0,Da=null,Mb=true,yb=false,Ha=0,eb,fb,kb,lb,mc,nc,db=a.zoomLevel,Pb=ga("ACTIVE"),xb=ga("PAN"),Qb=ga("ZOOM"),Rb=ga("ANIMATING"),Oa=Pb,fa={id:a.id,detach:function(){renderer&&renderer.trigger("detach");Da&&Da.unbind();if(za){document.getElementById(za).removeChild(za);da=za=null}},eachLayer:function(q){for(var w=ca;w--;)q(J[w])},getLayer:function(q){for(var w=0;w<ca;w++)if(J[w].id===q)return J[w];return null},getZoomLevel:function(){return db},setLayer:function(q,w){for(var y=
0;y<ca;y++)if(J[y].id===q){J.splice(y,1);break}if(w){I(q,w);w.trigger("refresh",fa,ba());fa.trigger("layerChange",fa,w)}Ha++;return w},invalidate:V,refresh:t,resetScale:function(){qa=1},scale:L,setZoomLevel:N,syncXY:function(){},triggerAll:aa,removeLayer:function(q){a:{for(var w=ca;w--;)if(J[w].id===q){q=w;break a}q=-1}if(q>=0&&q<ca){fa.trigger("layerRemove",fa,J[q]);J.splice(q,1);Ha++}ca=J.length},getOffset:function(){return new p(na,oa)},getRenderer:function(){return renderer},getScaleFactor:function(){return qa},
setMaxOffset:function(q,w,y,O){$a=q;ab=w;mb=y;nb=O},getViewport:ba,updateOffset:W,pan:function(q,w,y,O,T){W(na+q,oa+w,y,O,T)}};COG.observable(fa);fa.bind("resync",function(){});COG.configurable(fa,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(a,null,{container:E,inertia:D,captureHover:D,scalable:D,pannable:D,renderer:function(q,w){if(renderer){renderer.trigger("detach");renderer=null}x(w);Ha++}}),true);CANI.init(function(q){fa.markers=
I("markers",new ob({zindex:20}));ha=q;E(null,a.container);rc?window.attachEvent("onresize",h):window.addEventListener("resize",h,false)});animFrame(H);return fa},Ca=function(a){a=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},a);COG.extend(this,a);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};
Ca.prototype={constructor:Ca,animate:function(a,e,c,d){j(this,a,e,c,d)},drag:null,draw:null,getProps:null,resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(Za.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=a},translate:function(a,e){this.translateX=a;this.translateY=e},updateBounds:function(a,e){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);
this.bounds=a;if(e)this.xy=Za.center(this.bounds)}};var ec=1E3/60|0,bb=[],Gb=0;n.prototype=COG.extend(Ca.prototype,{constructor:n});v.prototype=COG.extend({},Ca.prototype,{constructor:v});G.prototype=COG.extend({},v.prototype);Q.prototype=COG.extend({},Ca.prototype,{constructor:Q});ia.prototype=COG.extend({},Q.prototype,{constructor:ia});la.prototype=COG.extend(Ca.prototype,{constructor:la});$.prototype={constructor:$,clip:null,cycle:function(){},draw:function(){},hitGuess:null};cb=function(a,e){function c(i,
k){var h=k&&k.getZoomLevel?k.getZoomLevel():0;f[h]||(f[h]=m(h));b=f[h]}e=COG.extend({imageLoadArgs:{}},e);var d=a?Ib.init(a,e).run:null,b=null,f=[],g=COG.extend(new $(e),{draw:function(i,k){i.drawTiles(k,b.search(Za.buffer(k,128)))}});g.bind("refresh",function(i,k,h){var s=(new Date).getTime();b&&d(k,h,b,function(){k.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-s)+" ms")})});g.bind("parentChange",c);g.bind("resync",c);return g};var Tb=function(a){function e(h,s,x,I){var D=this.dragOffset;
if(!D)D=this.dragOffset=new p(h.startX-this.xy.x,h.startY-this.xy.y);this.xy.x=s-D.x;this.xy.y=x-D.y;if(I){delete this.dragOffset;if(h=k.view){h.syncXY([this.xy],true);h.invalidate()}this.trigger("dragDrop")}return true}function c(h){clearTimeout(i);i=setTimeout(function(){f.sort(function(s,x){if(x.xy&&s.xy){var I=x.xy.y-s.xy.y;return I!=0?I:x.xy.x-s.xy.x}});h&&h.invalidate()},50)}function d(h,s,x,I){I&&g.remove(I,s);g.insert(x,s)}function b(h,s){g=m(s.getZoomLevel(),g);for(var x=f.length;x--;)f[x].resync(s)}
a=COG.extend({zindex:10},a);var f=[],g,i=0,k=COG.extend(new $(a),{itemCount:0,add:function(h,s){if(h){h.layer=k;if(s)f.unshift(h);else f[f.length]=h;var x=k.view;if(x){h.resync(x);g&&h.bounds&&g.insert(h.bounds,h);c(x)}h.bind("move",d)}k.itemCount=f.length},clear:function(){g=new Eb;f=[];k.itemCount=0},draw:function(h,s,x,I,D,Z){I={};D=g&&s?g.search(s):[];for(var E=D.length;E--;){var H=D[E],M=H.style||k.style,V,ba=h.applyTransform(H),t=H.getProps?H.getProps(h,x):I;if(t=(V=h["prep"+H.typeName])?V.call(h,
H,s,Z,x,t):null){if(Z&&t.hit){Z.elements.push(Hits.initHit(H.type,H,H.draggable?e:null));V=Z.type+"Style";M=H[V]||k[V]||M}M=M?h.applyStyle(M,true):null;(V=H.draw||t.draw)&&V.call(H,t);M&&h.applyStyle(M)}ba&&ba.undo&&ba.undo()}},find:function(){return[].concat(f)},hitGuess:function(h,s){return g&&g.search({x:h-10,y:s-10,w:20,h:20}).length>0}});k.bind("parentChange",b);k.bind("resync",b);return k},ob=function(a){return new Tb(a)};K.prototype={constructor:K,offset:function(a,e){var c=this.lat*Fa,d=this.lon*
Fa,b=c+a/hb;c=wa(ka(e/hb)/va(c));d=d+c;b=(b+pa)%Math.PI-pa;d%=ja;return new K(b*Ra,d*Ra)},toString:function(a){return this.lat+(a||" ")+this.lon}};COG.extend(C,{ex:COG.extend,is:u,ticks:Y,userMessage:function(a,e,c){C.trigger("userMessage",a,e,c)},indexOf:Ja,Rect:l,XY:Ta,XYRect:Za,Vector:Ka,Hits:Hits,Generator:Ib,Service:qb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:P,TileLayer:cb,getImage:A,viewState:ga,View:Sb,ViewLayer:$,ImageLayer:cb,Drawable:Ca,Marker:n,Poly:v,Line:G,Arc:la,ImageDrawable:Q,
ImageMarker:ia,DrawLayer:Tb,ShapeLayer:ob,Map:function(a){function e(i,k,h){g.setZoomLevel(k);c(i,h)}function c(i,k,h,s){i=Pa.init(i,ra(g.getZoomLevel()));var x=g.getViewport();g.updateOffset(i.x-(x.w>>1),i.y-(x.h>>1),h,s,function(){k&&k(g)})}a=COG.extend({zoomLevel:1,minZoom:1,maxZoom:18,pannable:true,scalable:true},a);var d=new p,b=0,f=a.tapExtent;a.adjustScaleFactor=function(i){return Math.pow(2,(i<1?Math.floor:Math.ceil)(Math.log(i)))};var g=COG.extend(new Sb(a),{getBoundingBox:function(){var i=
g.getViewport();return i?Wa.init(Pa.toPos(new p(i.x,i.y2),b),Pa.toPos(new p(i.x2,i.y),b)):null},getCenterPosition:function(){var i=g.getViewport();if(i){i=new p(i.x+(i.w>>1),i.y+(i.h>>1));return Pa.toPos(i,b)}return null},gotoBounds:function(i,k){var h=Wa.getZoomLevel(i,g.getViewport());e(Wa.getCenter(i),h,k)},gotoPosition:e,panToPosition:c,syncXY:function(i,k){return(k?Pa.syncPos:Pa.sync)(i,b)}});g.bind("tap",function(i,k,h,s){i=Pa.toPos(s,b);var x=Pa.toPos(Ta.offset(s,-f,f),b);s=Pa.toPos(Ta.offset(s,
f,-f),b);g.trigger("geotap",k,h,i,Wa.init(x,s))});g.bind("refresh",function(i,k,h){if(d.x!=h.x||d.y!=h.y){g.trigger("boundsChange",g.getBoundingBox());d.x=h.x;d.y=h.y}});g.bind("zoomLevelChange",function(i,k){var h;b=ra(k);h=ja/b|0;g.setMaxOffset(h,h,true,false);g.resetScale();g.triggerAll("resync",g)});return g},Pos:K});var Cb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Fa=Math.PI/180,Ra=180/Math.PI,Db=pa,Ub=-Db,Vb=ja,sc=-Vb,hb=6371,jb=0.08181919084262157,
ib=null,Wb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ya=function(){function a(c){return!c||c.lat===0&&c.lon===0}function e(c,d){return new K(c,d)}return{calcDistance:function(c,d){if(a(c)||a(d))return 0;var b=(d.lat-c.lat)*Fa>>1,f=(d.lon-c.lon)*Fa>>1;b=ka(b)*ka(b)+va(c.lat*Fa)*va(d.lat*Fa)*ka(f)*ka(f);b=2*gc(F(b),F(1-b));return hb*b},copy:function(c){return c?e(c.lat,c.lon):null},empty:a,equal:function(c,d){return c&&d&&c.lat==d.lat&&c.lon==
d.lon},fromMercatorPixels:function(c,d){for(var b=ua(Math.E,-d),f=pa-2*Xa(b),g=Ia(f,b),i=0;i<12&&z(f-g)>1.0E-7;){f=g;g=Ia(f,b);i++}return e(g*Ra,c%360*Ra)},generalize:function(c,d,b){var f=c.length,g=[],i=null;b||(b=250);b/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");for(var k=f;k--;)if(k===0)g.unshift(c[k]);else{var h=!i||ya.inArray(c[k],d)?b:ya.calcDistance(i,c[k]);if(c[k]&&h>=b){g.unshift(c[k]);i=c[k]}}COG.info("generalized "+f+" positions into "+g.length+" positions");
return g},inArray:function(c,d){for(var b=ya.equal,f=d.length;f--;)if(b(c,d[f]))return true;return false},inBounds:function(c,d){var b=!(ya.empty(c)||ya.empty(d));return b=(b=b&&c.lat>=d.min.lat&&c.lat<=d.max.lat)&&c.lon>=d.min.lon&&c.lon<=d.max.lon},init:e,offset:function(c,d,b){return c.offset(d,b)},parse:function(c){return new K(c)},parseArray:function(c){var d=c.length,b=Array(d);for(d=d;d--;)b[d]=new K(c[d]);return b},toMercatorPixels:function(c){return T5.XY.init(parseFloat(c.lon)*Fa,ta(c.lat))},
toString:function(c){return c?c.toString():""},vectorize:function(c,d){function b(){for(var k=0,h=d.chunkSize,s=f;s--;){g[s]=T5.GeoXY.init(c[s]);k+=1;if(k>h)break}f=s;if(f<=0)d.callback&&d.callback(g);else animFrame(b)}var f=c.length,g=Array(f);d=COG.extend({chunkSize:500,async:true,callback:null},d);if(!d.async){for(var i=f;i--;)g[i]=T5.GeoXY.init(c[i]);return g}animFrame(b);return null}}}(),Wa=function(){function a(b,f,g){var i=new p(0,f.lat-b.lat);i.x=(g||u(g,xa))&&b.lon>f.lon?360-b.lon+f.lon:
f.lon-b.lon;return i}function e(b,f){return Wa.init(new K(b.min.lat-f,b.min.lon-f%360),new K(b.max.lat+f,b.max.lon+f%360))}function c(b){var f=a(b.min,b.max);return new K(b.min.lat+(f.y>>1),b.min.lon+(f.x>>1))}function d(b,f){return{min:new K(b),max:new K(f)}}return{calcSize:a,createBoundsFromCenter:function(b,f){var g=f/hb,i=b.lat*Fa,k=b.lon*Fa,h=i-g,s=i+g;if(h>Ub&&s<Db){i=wa(ka(g)/va(i));g=(k-i)%ja;k=(k+i)%ja}else{h=ma(h,Ub);s=X(s,Db);g=sc;k=Vb}return Wa.init(new K(h*Ra,g*Ra),new K(s*Ra,k*Ra))},
expand:e,forPositions:function(b,f){var g=null,i=T5.ticks();f||(f="auto");for(var k=b.length;k--;)if(g){var h=a(g.min,b[k],false),s=a(b[k],g.max,false);if(h.x<0)g.min.lon=b[k].lon;if(h.y<0)g.min.lat=b[k].lat;if(s.x<0)g.max.lon=b[k].lon;if(s.y<0)g.max.lat=b[k].lat}else g=d(b[k],b[k]);if(f){if(f=="auto"){k=a(g.min,g.max);f=ma(k.x,k.y)*0.3}g=e(g,f)}COG.trace("calculated bounds for "+b.length+" positions",i);return g},getCenter:c,getZoomLevel:function(b,f){var g=c(b);g=X(S(z(g.lat)*0.05),Cb.length);var i=
Cb[g],k=a(b.min,b.max);g=U(R(Cb[3]*f.h/k.y)/R(2));i=U(R(i*f.w/k.x)/R(2));return X(isNaN(g)?1E3:g,isNaN(i)?1E3:i)},init:d,isEmpty:function(b){return!b||ya.empty(b.min)||ya.empty(b.max)},toString:function(b){return"min: "+ya.toString(b.min)+", max: "+ya.toString(b.max)}}}();qb=function(){var a=/^(\d+).*$/,e=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(c,d){a.lastIndex=-1;if(a.test(c))for(var b=c.replace(a,"$1"),f=d.split(","),g=0;g<f.length;g++){e.lastIndex=-1;if(e.test(f[g])){var i=e.exec(f[g]);
if(b>=parseInt(i[1],10)&&b<=parseInt(i[2],10))return true}else if(b==f[g])return true}return false},normalize:function(c){if(!c)return"";c=c.toUpperCase();if(!ib){var d=[];for(var b in Wb)d.push(b);ib=RegExp("(\\s)("+d.join("|")+")(\\s|$)","i")}ib.lastIndex=-1;if(d=ib.exec(c))c=c.replace(ib,"$1"+Wb[d[2]]);return c},toString:function(c){return c.streetDetails+" "+c.location}}}();var Pa=C.GeoXY=function(){function a(d,b){if(d.length){for(var f,g,i,k,h=d.length;h--;){a(d[h],b);f=u(f,xa)||d.x<f?d.x:f;
g=u(g,xa)||d.y<g?d.y:g;i=u(i,xa)||d.x>i?d.x:i;k=u(k,xa)||d.y>k?d.y:k}return new l(f,g,i-f,k-g)}else if(d.mercXY){f=d.mercXY;d.x=(f.x+Math.PI)/b|0;d.y=(Math.PI-f.y)/b|0;d.rpp=b}return d}function e(d,b){if(d.length)for(var f=d.length;f--;)e(d[f],b);else{d.mercXY=new p(d.x*b-Math.PI,Math.PI-d.y*b);d.pos=ya.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function c(d,b,f){d.pos=b;d.mercXY=ya.toMercatorPixels(b);(f=u(f,hc)?f:d.rpp)&&a(d,f)}return{init:function(d,b){var f=new p;c(f,d,b);return f},sync:a,
syncPos:e,toPos:function(d,b){b=b||d.rpp;return ya.fromMercatorPixels(d.x*b-Math.PI,Math.PI-d.y*b)},updatePos:c}}(),tc="featurecollection",uc="feature",Hb={async:false};Ka={processor:null,group:"shapes",layerClass:ob};var vc={point:COG.extend({},Ka,{processor:function(a,e,c,d){e=Ea([e.coordinates],Hb);if(e.length>0)if(c=d.marker(e[0],c)){a.add(c);return e.length}},group:"markers",layerClass:ob}),linestring:COG.extend({},Ka,{processor:function(a,e,c,d){e=Ea(e&&e.coordinates?e.coordinates:[]);return sa(a,
e,c,d.line)}}),multilinestring:COG.extend({},Ka,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=e.length;f--;)b+=sa(a,e[f],c,d.line);return b}}),polygon:COG.extend({},Ka,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return sa(a,e[0],c,d.poly);return 0}}),multipolygon:COG.extend({},Ka,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=0;f<e.length;f++)b+=sa(a,e[f][0],c,d.poly);return b}})},Xb=function(a,e,c,
d){function b(E,H){var M=E.processor,V=h+E.group,ba=COG.extend({},E,c,{properties:H.properties});if(M){var t=Z[V];if(!t){t=new E.layerClass({id:V});Z[V]=t}return M(t,H.data,ba,d)}return 0}function f(E,H){var M=E&&E.type?E.type.toLowerCase():null;return M&&M===uc?f(E.geometry,E.properties):{type:M,isCollection:M?M===tc:false,definition:vc[M],data:E,properties:H?H:E.properties}}function g(E){var H=0,M=COG.extend({},c),V=s;E=E?E:(new Date).getTime();if(!I){for(;V<x;V++){E=f(k?k(a[V]):a[V]);var ba=null;
if(E.isCollection){M.layerPrefix=h+D++ +"-";I=new Xb(E.data.features,function(t){I=null;for(var L in t)Z[L]=t[L];s>=x&&e&&e(Z)},M);ba+=1}else if(E.definition)ba=b(E.definition,E);H+=ba?ba:1;if(H>=i)break}s=V+1;if(I||s<x)animFrame(g);else e&&e(Z)}}c=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},c);d=COG.extend({marker:function(E){return new n({xy:E})},line:function(E,H){return new v(E,COG.extend({},c,H))},poly:function(E,H){return new v(E,COG.extend({fill:true},c,H))}},d);var i=
500,k=c.rowPreParse,h=c.layerPrefix,s=0,x=0,I=null,D=0,Z={};if(a){u(a,"array")||(a=[a]);x=a.length;animFrame(g)}};Ka=C.GeoJSON={parse:function(a,e,c){return new Xb(a,e,c)}};C.GeoShape=function(a,e){e=COG.extend({autoParse:true},e);for(var c=Array(a.length),d=e.autoParse,b=T5.Geo.Position.parse,f=a.length;f--;)c[f]=T5.GeoXY.init(d?b(a[f]):a[f]);return new T5.Poly(c,e)};C.Geo={distanceToString:function(a){if(a>1E3)return~~(a/10)/100+" km";return a?a+" m":""},dist2rad:function(a){return a/hb},radsPerPixel:ra,
Position:ya,BoundingBox:Wa,Radius:function(a,e){return{distance:parseInt(a,10),uom:e}},Address:function(a){return a=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},a)},A:qb,GeoJSON:Ka}})(T5);
