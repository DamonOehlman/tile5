COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var B=arguments[0]||{},V,u=1,r=arguments.length;u<r;u++)if((V=arguments[u])!==null)for(var k in V){var l=V[k];if(B!==l)if(l!==undefined)B[k]=l}return B};
(function(){var B=Object.prototype.hasOwnProperty,V=0,u={};u.toID=function(r){return r.replace(/\s/g,"-")};u.objId=function(r){return(r?r:"obj")+V++};u.isFunction=function(r){return toString.call(r)==="[object Function]"};u.isArray=function(r){return toString.call(r)==="[object Array]"};u.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!B.call(r,"constructor")&&!B.call(r.constructor.prototype,"isPrototypeOf"))return false;
var k;for(k in r);return k===undefined||B.call(r,k)};u.isEmptyObject=function(r){for(var k in r)return false;return true};u.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};u.contains=function(r,k){var l=r,s=arguments,x=1;if(k&&module.isArray(k)){s=k;x=0}for(x=x;x<s;x++)l=l&&typeof foo[s[x]]!=="undefined";return l};u.formatStr=function(r){if(arguments.length<=1)return r;for(var k=arguments.length-2,l=0;l<=k;l++)r=r.replace(RegExp("\\{"+l+"\\}","gi"),arguments[l+1]);return r};
u.wordExists=function(r,k){var l="";if(k.toString)k=k.toString();for(var s=0;s<k.length;s++)l+=!/\w/.test(k[s])?"\\"+k[s]:k[s];return RegExp("(^|\\s|\\,)"+l+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,u)})();
(function(){function B(l){return typeof console!=="undefined"?function(){console[l](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var V=window.console&&window.console.markTimeline,u=B("error"),r=B("info"),k=function(){return V?function(l,s){console.markTimeline(l+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:k,debug:B("debug"),info:r,warn:B("warn"),error:u,exception:function(l){if(u)for(var s in l)r("ERROR DETAIL: "+s+
": "+l[s])}})})();
(function(){function B(u,r){var k=u.hasOwnProperty("obsHandlers")?u.obsHandlers:null;k[r]||(k[r]=[]);return k[r]}var V=0;COG.observable=function(u){if(!u)return null;if(!(u.hasOwnProperty("obsHandlers")?u.obsHandlers:null))u.obsHandlers={};if(!u.hasOwnProperty("bind")){u.bind=function(r,k){var l="callback"+V++;B(u,r).unshift({fn:k,id:l});return l};u.triggerCustom=function(r,k){var l=B(u,r),s={cancel:false,name:r,source:this},x;k&&COG.extend(s,k);if(!l)return null;x=Array.prototype.slice.call(arguments,2);
u.eventInterceptor&&u.eventInterceptor(r,s,x);x.unshift(s);for(var Q=l.length;Q--&&!s.cancel;)l[Q].fn.apply(this,x);return s};u.trigger=function(r){var k=Array.prototype.slice.call(arguments,1);k.splice(0,0,r,null);return u.triggerCustom.apply(this,k)};u.unbind=function(r,k){if(typeof r==="undefined")u.obsHandlers={};else for(var l=B(u,r),s=0;l&&s<l.length;s++)if(l[s].id===k){l.splice(s,1);break}return u}}return u}})();
(function(){function B(k,l){k[l]||(k[l]=function(s){return k.configure(l,s)})}function V(k){k.gtConfId="configurable"+r++;k.gtConfig={};k.gtConfigFns=[];return k.gtConfig}var u={},r=0;COG.paramTweaker=function(k,l,s){return function(x,Q){if(typeof Q!=="undefined"){if(x in k)k[x]=Q;s&&x in s&&s[x](x,Q)}else return l&&x in l?l[x](x):k[x]}};COG.configurable=function(k,l,s,x){if(k){k.gtConfId||V(k);var Q=k.gtConfId,ja=k.gtConfig,o=k.gtConfigFns;u[Q]=k;o.push(s);for(s=l.length;s--;){ja[l[s]]=true;x&&B(k,
l[s])}if(!k.configure)k.configure=function(A,i){if(ja[A]){for(var m=o.length;m--;){var v=o[m](A,i);if(typeof v!=="undefined")return v}return u[Q]}return null}}}})();
(function(){function B(k){var l=document.createElement("script"),s=false;l.src=k;l.async=true;l.onload=l.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;l.onload=l.onreadystatechange=null;l&&l.parentNode&&l.parentNode.removeChild(l)}};u||(u=document.getElementsByTagName("head")[0]);u.appendChild(l)}var V=0,u,r=this;COG.jsonp=function(k,l,s){k+=k.indexOf("?")>=0?"&":"?";var x="json"+ ++V;r[x]=function(Q){l(Q);r[x]=null;try{delete r[x]}catch(ja){}};
B(k+(s?s:"callback")+"="+x);return x}})();
(function(){var B=1.70158,V=Math.PI/2,u=Math.PI*2,r=1E3/60|0,k=Math.abs,l=Math.pow,s=Math.sin,x=Math.asin,Q=Math.cos,ja={linear:function(o,A,i,m){return i*o/m+A},backin:function(o,A,i,m){return i*(o/=m)*o*((B+1)*o-B)+A},backout:function(o,A,i,m){return i*((o=o/m-1)*o*((B+1)*o+B)+1)+A},backinout:function(o,A,i,m){return(o/=m/2)<1?i/2*o*o*(((B*=1.525)+1)*o-B)+A:i/2*((o-=2)*o*(((B*=1.525)+1)*o+B)+2)+A},bouncein:function(o,A,i,m){return i-ja.bounceout(m-o,0,i,m)+A},bounceout:function(o,A,i,m){return(o/=
m)<1/2.75?i*7.5625*o*o+A:o<2/2.75?i*(7.5625*(o-=1.5/2.75)*o+0.75)+A:o<2.5/2.75?i*(7.5625*(o-=2.25/2.75)*o+0.9375)+A:i*(7.5625*(o-=2.625/2.75)*o+0.984375)+A},bounceinout:function(o,A,i,m){return o<m/2?ja.bouncein(o*2,0,i,m)/2+A:ja.bounceout(o*2-m,0,i,m)/2+i/2+A},cubicin:function(o,A,i,m){return i*(o/=m)*o*o+A},cubicout:function(o,A,i,m){return i*((o=o/m-1)*o*o+1)+A},cubicinout:function(o,A,i,m){if((o/=m/2)<1)return i/2*o*o*o+A;return i/2*((o-=2)*o*o+2)+A},elasticin:function(o,A,i,m,v,N){if(o==0)return A;
if((o/=m)==1)return A+i;N||(N=m*0.3);if(!v||v<k(i)){v=i;i=N/4}else i=N/u*x(i/v);return-(v*l(2,10*(o-=1))*s((o*m-i)*u/N))+A},elasticout:function(o,A,i,m,v,N){var G;if(o==0)return A;if((o/=m)==1)return A+i;N||(N=m*0.3);if(!v||v<k(i)){v=i;G=N/4}else G=N/u*x(i/v);return v*l(2,-10*o)*s((o*m-G)*u/N)+i+A},elasticinout:function(o,A,i,m,v,N){var G;if(o==0)return A;if((o/=m/2)==2)return A+i;N||(N=m*0.3*1.5);if(!v||v<k(i)){v=i;G=N/4}else G=N/u*x(i/v);if(o<1)return-0.5*v*l(2,10*(o-=1))*s((o*m-G)*u/N)+A;return v*
l(2,-10*(o-=1))*s((o*m-G)*u/N)*0.5+i+A},quadin:function(o,A,i,m){return i*(o/=m)*o+A},quadout:function(o,A,i,m){return-i*(o/=m)*(o-2)+A},quadinout:function(o,A,i,m){if((o/=m/2)<1)return i/2*o*o+A;return-i/2*(--o*(o-2)-1)+A},sinein:function(o,A,i,m){return-i*Q(o/m*V)+i+A},sineout:function(o,A,i,m){return i*s(o/m*V)+A},sineinout:function(o,A,i,m){return-i/2*(Q(Math.PI*o/m)-1)+A}};COG.tweenValue=function(o,A,i,m,v){function N(F){F=F?F:(new Date).getTime();if(ma+r<F){var S=F-G,wa=i(S,o,pa,m),ta=G+m<=
F;F=!ta;if(v){S=v(wa,ta,S);F=typeof S!="undefined"?S&&F:F}F&&animFrame(N)}}var G=(new Date).getTime(),ma=0,pa=A-o;animFrame(N);return{}};COG.easing=function(o){return ja[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(o,A){ja[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]=A}})();
(function(){var B=/^P(\d+Y)?(\d+M)?(\d+D)?$/,V=/^(\d+H)?(\d+M)?(\d+S)?$/,u={8601:function(k){k=k.split("T");var l=null;l=null;var s=0,x=0;B.lastIndex=-1;l=B.exec(k[0]);s+=l[3]?parseInt(l[3].slice(0,-1),10):0;V.lastIndex=-1;l=V.exec(k[1]);x+=l[1]?parseInt(l[1].slice(0,-1),10)*3600:0;x+=l[2]?parseInt(l[2].slice(0,-1),10)*60:0;x+=l[3]?parseInt(l[3].slice(0,-1),10):0;return new r(s,x)}},r=COG.Duration=function(k,l){return{days:k?k:0,seconds:l?l:0}};COG.addDuration=function(){for(var k=new r,l=arguments.length;l--;){k.days+=
arguments[l].days;k.seconds+=arguments[l].seconds}if(k.seconds>=86400){k.days+=~~(k.seconds/86400);k.seconds%=86400}return k};COG.formatDuration=function(k){var l,s,x="";if(k.days)x=k.days+" days ";if(k.seconds){k=k.seconds;if(k>=3600){l=~~(k/3600);k-=l*3600}if(k>=60){s=Math.round(k/60);k-=s*60}if(l)x=x+l+(l>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)x=x+s+" min";else if(k>0)x=x+(k>10?k:"0"+k)+" sec"}return x};COG.parseDuration=function(k,l){var s=l?u[l]:null;if(s)return s(k);COG.Log.warn("Could not find duration parser for specified format: "+
l);return new r}})();COG.ObjectStore=function(){var B={},V={},u="obj_"+(new Date).getTime(),r=0,k=Object.prototype.hasOwnProperty;return{add:function(l,s){var x;s=s?s:"default";if(l&&l.constructor)if(!k.call(l,"id"))l.id=u+ ++r;x=V[s]?V[s]:V[s]=[];B[l.id]=x.length;x[l.length]=l}}};var CANI={};
(function(B){var V=[],u=0,r=false,k=B.register=function(l,s){V.push({section:l,run:s})};B.init=function(l){function s(){if(u<V.length){var Q=V[u++];x[Q.section]||(x[Q.section]={});Q.run(x[Q.section],s)}else{for(Q in x)B[Q]=x[Q];r=true;l&&l(B)}}var x={};if(r&&l)l(B);else{u=0;s()}};k("canvas",function(l,s){function x(){var A,i=Q.getContext("2d");i.save();try{i.translate(50,50);i.beginPath();i.rect(0,0,20,20);A=i.isPointInPath(10,10)}finally{i.restore()}return A}var Q=document.createElement("canvas"),
ja=typeof FlashCanvas!="undefined",o=typeof G_vmlCanvasManager!="undefnined";Q.width=200;Q.height=200;l.pipTransformed=ja||o?false:x();s()})})(CANI);
INTERACT=function(){function B(i){return function(m,v){i.addEventListener(m,v,false)}}function V(i){return function(m,v){i.removeEventListener(m,v,false)}}function u(i){return function(m,v){i.attachEvent("on"+m,v)}}function r(i,m){return{x:i?i:0,y:m?m:0,count:1}}function k(i,m){o.push(COG.extend({handler:null,checks:{},type:i},m))}function l(i){var m=0,v=0;if(i.offsetParent){do{m+=i.offsetLeft;v+=i.offsetTop;i=i.offsetParent}while(i)}return{left:m,top:v}}function s(i,m){return{source:i,target:m.target?
m.target:m.srcElement}}function x(i,m){for(var v=i.target?i.target:i.srcElement;v&&v!==m;)v=v.parentNode;return v&&v===m}function Q(i,m){return{x:i.x-(m?m.left:0),y:i.y-(m?m.top:0)}}function ja(i,m){if(i.preventDefault){i.preventDefault();i.stopPropagation()}else if(typeof i.cancelBubble!="undefined")i.cancelBubble=true;m&&i.stopImmediatePropagation&&i.stopImmediatePropagation()}var o=[],A=function(i,m,v){function N(da,ha,ca,M){var T=0,ea=0,y=0;COG.tweenValue(0,da,ca,M,function(E){y=T;T=E});COG.tweenValue(0,
ha,ca,M,function(E){G.trigger("pan",T-y,E-ea);ea=E})}v=COG.extend({binder:null,unbinder:null,observable:null},v);for(var G=v.observable,ma=null,pa=[],F=[],S,wa,ta={bind:function(){return G.bind.apply(null,arguments)},pannable:function(da){ma=COG.extend({inertia:true},da);return ta},unbind:function(){G.unbind();for(Ca=0;Ca<pa.length;Ca++)pa[Ca].unbind();return ta}},Ca=0;Ca<m.length;Ca++)pa.push(m[Ca](i,G,v));G.bind("pointerDown",function(){F=[];wa=S=0});G.bind("pointerMove",function(da,ha,ca,M){if(ma){F[F.length]=
{ticks:(new Date).getTime(),x:M.x,y:M.y};G.trigger("pan",M.x,M.y)}S+=M.x?M.x:0;wa+=M.y?M.y:0});G.bind("pointerUp",function(da,ha,ca){if(Math.abs(S)>20||Math.abs(wa)>20){if(ma){ca=F.length;var M,T;ha=0;for(T=F.length;--T>1&&ha<50;)ha+=F[T].ticks-F[T-1].ticks;if(ca-T>1){da=F[ca-1].x-F[T].x;M=F[ca-1].y-F[T].y;T=Math.sqrt(da*da+M*M)|0;if(T>15){da=F[ca-1].x-F[0].x;M=F[ca-1].y-F[0].y;T=Math.sqrt(da*da+M*M)|0;ca=Math.asin(M/T);ha=T*500/ha|0;ha=ha>300?300:ha;N(Math.cos(da>0?ca:Math.PI-ca)*ha,Math.sin(ca)*
ha,COG.easing("sine.out"),500)}}}}else G.triggerCustom("tap",da,ha,ca)});return ta};k("pointer",{handler:function(i,m,v){function N(y){if(y.pageX&&y.pageY)return r(y.pageX,y.pageY);else{var E=document.documentElement,fa=document.body;return r(y.clientX+(E&&E.scrollLeft||fa&&fa.scrollLeft||0)-(E&&E.clientLeft||fa&&fa.clientLeft||0),y.clientY+(E&&E.scrollTop||fa&&fa.scrollTop||0)-(E&&E.clientTop||fa&&fa.clientTop||0))}}function G(y){if(x(y,i))if(da=S(y)){var E=N(y);i.style.cursor="move";ja(y,true);
T=E.x;ea=E.y;ha=r(T,ea);m.triggerCustom("pointerDown",s("mouse",y),ha,Q(ha,l(i)))}}function ma(y){var E=N(y);ca=E.x;M=E.y;if(x(y,i))wa(y,da?"pointerMove":"pointerHover")}function pa(y){if(da&&S(y)){da=false;if(x(y,i)){i.style.cursor="default";wa(y,"pointerUp")}}}function F(y){if(x(y,i)){var E;y=y||window.event;if(y.detail)E=y.axis===2?-y.detail*ta:0;else{E=y.wheelDeltaY?y.wheelDeltaY:y.wheelDelta;if(window.opera)E=-E}if(E!==0){var fa=r(ca,M);m.triggerCustom("zoom",s("mouse",y),fa,Q(fa,l(i)),E/Ca,
"wheel");ja(y);y.returnValue=false}}}function S(y){y=y||window.event;return(y.which||y.button)==1}function wa(y,E,fa,qa,xa){fa=typeof fa!="undefined"?fa:ca;qa=typeof qa!="undefined"?qa:M;var C=fa-T,W=qa-ea,H=r(fa,qa);m.triggerCustom(E,s("mouse",y),H,Q(H,l(i)),r(C,W));if(typeof xa=="undefined"||xa){T=fa;ea=qa}}v=COG.extend({},v);var ta=120,Ca=ta*8,da=false,ha,ca,M,T,ea;v.binder("mousedown",G);v.binder("mousemove",ma);v.binder("mouseup",pa);v.binder("dblclick",function(y){COG.info("captured double click");
if(x(y,i)){var E=N(y);m.triggerCustom("doubleTap",s("mouse",y),E,Q(E,l(i)))}});v.binder("mousewheel",F);v.binder("DOMMouseScroll",F);return{unbind:function(){v.unbinder("mousedown",G);v.unbinder("mousemove",ma);v.unbinder("mouseup",pa);v.unbinder("mousewheel",F);v.unbinder("DOMMouseScroll",F)}}},checks:{touch:false}});k("pointer",{handler:function(i,m,v){function N(C){if(C.count<2)return 0;var W=C.x-C.next.x;C=C.y-C.next.y;return~~Math.sqrt(W*W+C*C)}function G(C,W,H){W=W?W:0;H=H?H:0;for(var Aa={x:C.x-
W,y:C.y-H,id:C.id,count:C.count},ra=Aa;C.next;){C=C.next;ra=ra.next={x:C.x-W,y:C.y-H,id:C.id}}return Aa}function ma(C,W){var H=C[W?W:"touches"],Aa,ra;if(H.length===0)return null;ra=Aa={x:H[0].pageX,y:H[0].pageY,id:H[0].identifier,count:H.length};for(var Da=1,Ka=H.length;Da<Ka;Da++)ra=ra.next={x:H[Da].pageX,y:H[Da].pageY,id:H[Da].identifier};return Aa}function pa(C){if(x(C,i)){M=l(i);var W=ma(C,"changedTouches"),H=G(W,M.left,M.top);if(!ea){T=da;m.triggerCustom("pointerDown",s("touch",C),W,H)}qa&&m.triggerCustom("pointerDownMulti",
s("touch",C),W,H);ea=ma(C);if(ea.count>1)E=N(ea);xa=1;fa=G(ea)}}function F(C){if(x(C,i)){ja(C);y=ma(C);if(T==da)T=Math.abs(ea.x-y.x)>ta||Math.abs(ea.y-y.y)>ta?Ca:da;if(T!=da){T=y.count>1?ca:ha;if(T==ca)if(ea.count===1){ea=G(y);E=N(ea)}else{var W=N(y);if(Math.abs(E-W)<wa)T=ha;else{var H;H=y.x;var Aa=y.next.x,ra=y.y,Da=y.next.y,Ka=ra<Da?ra:Da;H={x:(H<Aa?H:Aa)+(Math.abs(H-Aa)>>1),y:Ka+(Math.abs(ra-Da)>>1)};W=W/E;Aa=W-xa;m.triggerCustom("zoom",s("touch",C),H,Q(H,M),Aa,"pinch");xa=W}}T==ha&&m.triggerCustom("pointerMove",
s("touch",C),y,G(y,M.left,M.top),r(y.x-fa.x,y.y-fa.y));qa&&m.triggerCustom("pointerMoveMulti",s("touch",C),y,G(y,M.left,M.top))}fa=G(y)}}function S(C){if(x(C,i)){var W=ma(C,"changedTouches"),H=G(W,M.left,M.top);y=ma(C);if(!y){m.triggerCustom("pointerUp",s("touch",C),W,H);ea=null}qa&&m.triggerCustom("pointerUpMulti",s("touch",C),W,H)}}v=COG.extend({detailed:false,inertia:false},v);var wa=20,ta=7,Ca=0,da=1,ha=2,ca=3,M,T,ea,y,E,fa,qa=v.detailed,xa=1;v.binder("touchstart",pa);v.binder("touchmove",F);
v.binder("touchend",S);COG.info("initialized touch handler");return{unbind:function(){v.unbinder("touchstart",pa);v.unbinder("touchmove",F);v.unbinder("touchend",S)}}},checks:{touch:true}});return{register:k,watch:function(i,m,v){m=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},m);capabilities=COG.extend({touch:"ontouchstart"in window},v);if(!m.observable){COG.info("creating observable");m.observable=COG.observable({});globalOpts=m}m.binder=(m.isIE?
u:B)(m.bindTarget||document);m.unbinder=(m.isIE?u:V)(m.bindTarget||document);v=m.types;for(var N=capabilities,G=[],ma=o.length;ma--;){var pa=o[ma],F=!v||v.indexOf(pa.type)>=0,S=true;for(var wa in pa.checks){var ta=pa.checks[wa];COG.info("checking "+wa+" capability. require: "+ta+", capability = "+N[wa]);S=S&&ta===N[wa]}if(F&&S)G[G.length]=pa.handler}return new A(i,G,m)}}}();var T5={};
(function(B){function V(){return(new Date).getTime()}function u(b,e){e=Rb.call(e);if(e=="finite")return!Sb[Tb](+b);return e=="null"&&b===null||e==typeof b||e=="object"&&b===Object(b)||e=="array"&&Array.isArray&&Array.isArray(b)||Ub.call(b).slice(8,-1).toLowerCase()==e}function r(b,e){this.x=b||0;this.y=e||0}function k(b,e,c,d){this.x=b||0;this.y=e||0;this.w=c||0;this.h=d||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function l(b,e){var c=new vb(Math.sqrt(256<<b)|0);e&&e.zoomLevel===b&&e.copyInto(c);
c.zoomLevel=b;return c}function s(b){b=b||(new Date).getTime();for(var e=0;e<Ua.length;){var c=Ua[e],d=Qa[c],a=Qa[c].image&&(cb||Qa[c].image.complete&&Qa[c].image.width>0),f=b-d.start;f=a||f>=Vb;if(a){a=d.callbacks;wb[c]=d.image;for(var g=0;g<a.length;g++)a[g](d.image,true)}if(f){Ua.splice(e,1);delete Qa[c]}else e++}Ua.length>0&&animFrame(s)}function x(b,e){var c=b&&e?wb[b]:null;if(c&&c&&(cb||c.complete&&c.width>0))e(c);else{if(c=Qa[b])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++Wb;Qa[b]=
{start:(new Date).getTime(),image:c,callbacks:[e]};c.src=b;Ua[Ua.length]=b}animFrame(s)}}function Q(b,e,c,d,a,f){this.x=b;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=c;this.id=f||b+"_"+e;this.loaded=false;this.image=null}function ja(){for(var b=0,e=arguments.length;e--;){var c=Xb[arguments[e].toUpperCase()];if(c)b|=c}return b}function o(b){b=b?b:(new Date).getTime();if(b-xb>Yb){for(var e=Za.splice(0),c=e.length;c--;)e[c](b);xb=b}Za.length&&animFrame(o)}
function A(b){var e=Za.length==0;Za[Za.length]=b;e&&animFrame(o)}function i(b,e,c,d,a){a=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var f=(new Date).getTime(),g=b[e],h=e=="translate",j=a.autoInvalidate,n=c.length&&d.length&&c.length==d.length?c.length:0,p=Array(n),D=Array(n),R=COG.easing(a.easing),ka=a.duration,K=a.progress,J=function(I){var Z=I-f;I=f+ka<=I;for(var ga=b.layer?b.layer.view:null,la,ia=n;ia--;){la=R(Z,c[ia],p[ia],ka);D[ia]=h?la|0:la}g.apply(b,
D);j&&ga&&ga.invalidate();if(K){Z=[].concat(I?d:D);Z.unshift(I);K.apply(b,Z)}if(I){b.animations--;g.apply(b,d);a.complete&&a.complete.apply(b,d)}else A(J)};if(g&&g.apply&&n>0){ka=ka?ka:DEFAULT_DURATION;for(e=n;e--;)p[e]=d[e]-c[e];b.animations++;A(J)}}function m(b){b=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},b);Ga.call(this,b)}function v(b,e){e=COG.extend({simplify:false,fill:true,typeName:"Poly"},e);var c=e.simplify;Ga.call(this,e);COG.extend(this,
{getPoints:function(){return[].concat(b)},resync:function(d){var a,f,g,h,j,n;d.syncXY(b);n=this.points=Ra.floor(c?Ra.simplify(b):b);for(var p=n.length;p--;){d=n[p].x;a=n[p].y;h=u(h,ya)||d<h?d:h;j=u(j,ya)||a<j?a:j;f=u(f,ya)||d>f?d:f;g=u(g,ya)||a>g?a:g}this.updateBounds(new k(h,j,f-h,g-j),true)}});this.haveData=b&&b.length>=2}function N(b,e){e.fill=false;v.call(this,b,e)}function G(b){function e(){if(g&&g.width>0){if(!this.centerOffset)this.centerOffset=new r(-g.width>>1,-g.height>>1);this.updateBounds(new k(this.xy.x+
this.centerOffset.x,this.xy.y+this.centerOffset.y,g.width,g.height),false)}}function c(j){if(this.imageUrl=j){var n=this;x(this.imageUrl,function(p,D){g=p;if(D){var R=h.layer?h.layer.view:null;R&&R.invalidate()}e.apply(n)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var d=Ga.prototype.resync,a=0,f=0,g=b.image;Ga.call(this,b);var h=COG.extend(this,{changeImage:c,getProps:function(){this.bounds||e(this,g);return{image:g,x:this.xy.x+a,y:this.xy.y+f}},resync:function(j){d.call(this,
j);e.call(this)}});g||c.call(this,this.imageUrl);if(this.centerOffset){a=this.centerOffset.x;f=this.centerOffset.y}}function ma(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Ra.invert(b.imageAnchor);G.call(this,b)}function pa(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);Ga.call(this,b)}function F(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:ja("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=
null;this.visible=true;COG.observable(COG.extend(this,b))}function S(b,e){if(b&&b.split){var c=b.split(Zb);if(c.length>1){b=c[0];e=c[1]}}else if(b&&b.lat){e=b.lon;b=b.lat}this.lat=parseFloat(b||0);this.lon=parseFloat(e||0)}function wa(b){b=parseFloat(b)*Ha;b=ra(b);var e=db*b;return H((1+b)/(1-b)*C((1-e)/(1+e),db))/2}function ta(b){return ea/(256<<b)}function Ca(b,e){var c=null;for(var d in Sa)if(e){if(d==e&&Sa[d][b]){c=Sa[d];break}}else if(Sa[d][b]){c=Sa[d];break}return c}function da(b,e){var c=db*
ra(b);return y-2*yb(e*C((1-c)/(1+c),db/2))}function ha(b){for(var e=null,c=1;!e&&c<arguments.length;c++)e=Ca(b,arguments[c]);e=e?e:Ca(b);if(!e)throw Error("Unable to find GEO engine with "+b+" capability");return e}function ca(b,e,c,d){e=M(e);b.add(d(e,c));return e.length}function M(b){var e=b?b.length:0,c=Array(e);for(e=e;e--;)c[e]=new S(b[e][1],b[e][0]);return za.vectorize(c,zb)}COG.observable(B);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var T=Array.prototype.indexOf||function(b){for(var e=0;e<this.length;e++)if(this[e]===b)return e;return-1},ea=Math.PI*2,y=Math.PI/2,E=Math.abs,fa=Math.ceil,qa=Math.min,xa=Math.max,C=Math.pow,W=Math.sqrt,H=Math.log,Aa=Math.round,ra=Math.sin,Da=Math.asin,Ka=Math.cos,yb=Math.atan,$b=Math.atan2,Tb="hasOwnProperty",Sb={NaN:1,Infinity:1,"-Infinity":1},
Rb=String.prototype.toLowerCase,Ub=Object.prototype.toString,ya="undefined",ac="number",Zb=/[\,\s]/,bc=typeof G_vmlCanvasManager!=ya,cb=typeof FlashCanvas!=ya,cc=T5.newCanvas=function(b,e){var c=document.createElement("canvas");c.width=b?b:0;c.height=e?e:0;if(cb){document.body.appendChild(c);FlashCanvas.initElement(c)}bc&&G_vmlCanvasManager.initElement(c);return c},Ab=function(){var b={};return{init:function(e,c){var d=b[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(c)},
register:function(e,c){b[e]=c}}}();r.prototype={constructor:r,add:function(){for(var b=this.x,e=this.y,c=arguments.length;c--;){b+=arguments[c].x;e+=arguments[c].y}return new r(b,e)},equals:function(b){return this.x===b.x&&this.y===b.y}};k.prototype={constructor:k};var Ra=function(){function b(d,a){return c(d.x-a.x,d.y-a.y)}function e(d,a){a=a||d.length;if(a<=1)return null;for(var f=Array(a-1),g=Array(a-1),h=0,j,n=0;n<a-1;n++){j=b(d[n],d[n+1]);f[n]=W(j.x*j.x+j.y*j.y);g[n]=h+=f[n]}return{edges:f,accrued:g,
tota:h}}function c(d,a){return new r(d,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,a=0,f=arguments.length;f--;){d+=arguments[f].x;a+=arguments[f].y}return c(d,a)},absSize:function(d){return xa(E(d.x),E(d.y))},copy:function(d){return d?c(d.x,d.y):null},diff:b,distance:function(d,a){return e(d,a).total},edges:e,equals:function(d,a){return d.equals(a)},extendBy:function(d,a,f){var g=Ka(a)*f|0;a=ra(a)*f|0;return c(d.x-g,d.y-a)},floor:function(d){for(var a=
Array(d.length),f=d.length;f--;)a[f]=c(~~d[f].x,~~d[f].y);return a},getRect:function(d){for(var a,f,g,h,j=d.length;j--;){var n=d[j];a=u(a,ya)||n.x<a?n.x:a;f=u(f,ya)||n.y<f?n.y:f;g=u(g,ya)||n.x>g?n.x:g;h=u(h,ya)||n.y>h?n.y:h}return new k(a,f,g-a,h-f)},init:c,invert:function(d){return c(-d.x,-d.y)},min:function(d,a){return c(d.x<a.x?d.x:a.x,d.y<a.y?d.y:a.y)},max:function(d,a){return c(d.x>a.x?d.x:a.x,d.y>a.y?d.y:a.y)},offset:function(d,a,f){return c(d.x+a,d.y+(f||a))},scale:function(d,a){return c(d.x/
a|0,d.y/a|0)},simplify:function(d,a){if(!d)return null;a=a?a:Ra.VECTOR_SIMPLIFICATION;for(var f=[],g=null,h=d.length;h--;){var j=d[h];if(include=!g||h===0||E(j.x-g.x)+E(j.y-g.y)>a){f.unshift(j);g=j}}return f},theta:function(d,a,f){f=Da((d.y-a.y)/f);return d.x>a.x?f:Math.PI-f},toString:function(d){return d?d.x+", "+d.y:""}}}(),ib=function(){return{dotProduct:function(b,e){return b.x*e.x+b.y*e.y}}}(),Va=function(){function b(c){return e(c.x,c.y,c.x2,c.y2)}function e(c,d,a,f){return new k(c,d,(a||c)-
c,(f||d)-d)}return{buffer:function(c,d,a){return Va.init(c.x-d,c.y-(a||d),c.x2+d,c.y2+(a||d))},center:function(c){return new r(c.x+(c.w>>1),c.y+(c.h>>1))},copy:b,diagonalSize:function(c){return W(c.w*c.w+c.h*c.h)},fromCenter:function(c,d,a,f){a=a>>1;f=f>>1;return e(c-a,d-f,c+a,d+f)},init:e,intersect:function(c,d){var a=xa(c.x,d.x),f=xa(c.y,d.y),g=qa(c.x2,d.x2),h=qa(c.y2,d.y2);a=e(a,f,g,h);return a.w>0&&a.h>0?a:null},toString:function(c){return c?"["+c.x+", "+c.y+", "+c.x2+", "+c.y2+"]":""},union:function(c,
d){if(c.w===0||c.h===0)return b(d);else if(d.w===0||d.h===0)return b(c);else{var a=qa(c.x,d.x),f=qa(c.y,d.y),g=xa(c.x2,d.x2),h=xa(c.y2,d.y2);a=e(a,f,g,h);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,e){var c=[],d={},a;for(a=e.length;a--;)d[e[a].target.id]=true;for(a=b.length;a--;)d[b[a].target.id]||(c[c.length]=b[a]);return c},init:function(b,e,c,d){return{type:b,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:c}},initHit:function(b,e,c){return{type:b,target:e,drag:c}},triggerEvent:function(b,
e,c,d){e.triggerCustom(b.type+(c?c:"Hit"),{hitType:b.type},d?d:b.elements,b.absXY,b.relXY,new r(b.x,b.y))}}}();var vb=function(b){function e(a,f){var g=c[a],h;g||(g=c[a]=[]);(h=g[f])||(h=g[f]=[]);return h}b=b||128;var c=[],d={};return{copyInto:function(a){for(var f in d){var g=d[f];a.insert(g.bounds||g,g,f)}},insert:function(a,f,g){var h=a.x/b|0,j=a.y/b|0,n=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||f.id||COG.objId("spatial");d[g]=f;for(f=h;f<=n;f++)for(h=j;h<=a;h++)e(f,h).push(g)},remove:function(a,f,g){g=
g||f.id;if(d[g]){var h=a.x/b|0;f=a.y/b|0;var j=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;delete d[g];for(h=h;h<=j;h++)for(var n=f;n<=a;n++){var p=e(h,n),D=T.call(p,g);D>=0&&p.splice(D,1)}}},search:function(a){var f=a.y/b|0,g=(a.x+a.w)/b|0,h=(a.y+a.h)/b|0,j=[],n=[];for(a=a.x/b|0;a<=g;a++)for(var p=f;p<=h;p++)j=j.concat(e(a,p));j.sort();for(f=j.length;f--;){g=j[f];if(h=d[g])n[n.length]=h;for(;f>0&&j[f-1]==g;)f--}return n}}},Vb=3E4,wb={},Wb=0;(new Date).getTime();var Qa={},Ua=[];Q.prototype={constructor:Q,load:function(b){var e=
this;x(this.url,function(c){e.loaded=true;e.image=c;b&&b()})}};var dc=function(){return COG.observable({applyStyle:function(){},applyTransform:function(b,e,c){return{restore:null,x:e,y:c}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new r},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},reset:function(){}})},Bb={},Wa=B.registerRenderer=function(b,e){Bb[b]=e},ec=B.attachRenderer=
function(b,e,c,d){b=b.split("/");for(var a=new dc(e,c,d),f=0;f<b.length;f++){var g=Bb[b[f]];if(g)a=new g(e,c,d,a)}return a};Wa("canvas",function(b,e,c,d){function a(z,$,O){var aa,X;ka[$]=function(L){for(aa=la.length;aa--;)if(X=O[la[aa]])L[ia[aa]]=X}}function f(z,$,O,aa){var X=false;if($)X=p.isPointInPath(J?$.x-D:$.relXY.x,J?$.y-R:$.relXY.y);return{draw:aa||ga,viewport:z,state:O,hit:X,vpX:D,vpY:R,context:p}}c=COG.extend({},c);var g,h,j,n=false,p,D=0,R=0,ka={},K=null,J=CANI.canvas.pipTransformed,I=
{},Z=function(){},ga=function(){this.fill&&p.fill();this.stroke&&p.stroke()},la=["fill","stroke","lineWidth","opacity"],ia=["fillStyle","strokeStyle","lineWidth","globalAlpha"];(function(){if(e){var z=e.tagName=="CANVAS",$=z?e.parentNode:e;g=b.width=$.offsetWidth;h=b.height=$.offsetHeight;if(z){j=e;j.width=g;j.height=h;cb&&FlashCanvas.initElement(j)}else{j=cc(g,h);j.style.cssText="position: absolute; z-index: 1;";n=true;e.appendChild(j)}p=null}})();c=COG.extend(d,{applyStyle:function(z){var $=ka[z],
O=p&&p.canvas?p.canvas.id:"default",aa;I[O]||(I[O]=[]);aa=I[O].pop()||"basic";if($){I[O].push(z);$(p);return aa}},applyTransform:function(z){if(z.translateX!==0||z.translateY!==0||z.scaling!==1||z.rotation!==0){p.save();K={undo:function(){p.restore();K=null},x:z.xy.x,y:z.xy.y};p.translate(z.xy.x-D+z.translateX,z.xy.y-R+z.translateY);z.rotation!==0&&p.rotate(z.rotation);z.scaling!==1&&p.scale(z.scaling,z.scaling)}return K},drawTiles:function(z,$){for(var O,aa,X=D-256,L=R-256,U=z.x2,sa=z.y2,va=$.length;va--;){O=
$[va];if(aa=O.x>=X&&O.x<=U&&O.y>=L&&O.y<=sa)O.loaded?p.drawImage(O.image,O.x-D,O.y-R):O.load(b.invalidate)}},prepare:function(z,$){var O,aa=false,X=$.scaled||$,L=$.scaleFactor;if(p)p.restore();else p=j.getContext("2d");for(O=z.length;O--;)aa=aa||z[O].clip;D=X.x;R=X.y;if(p){aa||p.clearRect(0,0,g,h);p.save();p.scale(L,L)}p.globalCompositeOperation="source-over";return p},prepArc:function(z,$,O,aa){p.beginPath();p.arc(z.xy.x-(K?K.x:D),z.xy.y-(K?K.y:R),z.size>>1,z.startAngle,z.endAngle,false);return f($,
O,aa)},prepImage:function(z,$,O,aa,X){var L=(X.x||z.xy.x)-(K?K.x:D),U=(X.y||z.xy.y)-(K?K.y:R),sa=X.image||z.image;if(sa){p.beginPath();p.rect(L,U,X.width||sa.width,X.height||sa.height);return f($,O,aa,function(){p.drawImage(sa,L,U,X.width||sa.width,X.height||sa.height)})}},prepMarker:function(z,$,O,aa){var X=z.xy.x-(K?K.x:D),L=z.xy.y-(K?K.y:R),U=z.size,sa=undefined;p.beginPath();switch(z.markerStyle.toLowerCase()){case "image":sa=Z;p.rect(X-(U>>1),L-(U>>1),U,U);if(z.reset&&z.image){z.image=null;z.reset=
false}z.image?p.drawImage(z.image,X-(U>>1),L-(U>>1),U,U):x(z.imageUrl,function(va){z.image=va;p.drawImage(z.image,X-(U>>1),L-(U>>1),U,U)});break;default:p.moveTo(X,L);p.lineTo(X-(U>>1),L-U);p.lineTo(X+(U>>1),L-U);p.lineTo(X,L);break}return f($,O,aa,sa)},prepPoly:function(z,$,O,aa,X){var L=true;z=X.points||z.points;X=K?K.x:D;var U=K?K.y:R;p.beginPath();for(var sa=z.length;sa--;){var va=z[sa].x-X,eb=z[sa].y-U;if(L){p.moveTo(va,eb);L=false}else p.lineTo(va,eb)}return f($,O,aa)},getContext:function(){return p},
getDimensions:function(){return{width:g,height:h}},getOffset:function(){return new r(D,R)}});(function(){for(var z in T5.styles)a(null,z,T5.styles[z]);T5.bind("styleDefined",a)})();c.bind("detach",function(){n&&e.removeChild(j)});return c});var jb=B.styles={},fc=B.defineStyle=function(b,e){jb[b]=e;B.trigger("styleDefined",b,jb[b]);return b},Cb=B.defineStyles=function(b){for(var e in b)fc(e,b[e])};B.getStyle=function(b){return jb[b]};B.loadStyles=function(b){COG.jsonp(b,function(e){Cb(e)})};Cb({basic:{fill:"#ffffff"},
highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Xb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Lb=function(b){function e(q,t,w){if(!va){aa(na-t,oa-w);Y.trigger("pan",na,oa)}}function c(q,t,w,P){z(qa(xa(ua+C(2,P)-1,0.5),2))}function d(){var q=H(ua)/Math.LN2|0;if(q!==0){ua=C(2,q);$($a+q,gc,hc)}redraw=true}function a(q,t){var w=renderer&&renderer.projectXY?renderer.projectXY(q,t):null;if(!w){w=
Y.getViewport();var P=1/ua;w=new r(w?w.x+q*P:q,w?w.y+t*P:t)}return w}function f(q,t,w){O("doubleTap",t,w,a(w.x,w.y));b.scalable&&z(2,a(w.x,w.y),b.zoomEasing,null,b.zoomDuration)}function g(q,t,w){va=null;Z("down",t,w)}function h(q,t,w){Z("hover",t,w)}function j(q,t,w){J(t,w,false)}function n(q,t,w){J(t,w,true)}function p(){clearTimeout(Db);Db=setTimeout(function(){renderer.checkSize()},250)}function D(q,t,w){Z("tap",t,w);O("tap",t,w,a(w.x,w.y,true))}function R(q){renderer=ec(q||b.renderer,Y,sa,b);
Eb=!renderer.preventPartialScale;K()}function ka(q,t){t.id=q;t.added=V();t.view=Y;t.trigger("parentChange",Y,sa,ic);L.push(t);L.sort(function(w,P){var ba=P.zindex-w.zindex;if(ba===0)ba=P.added-w.added;return ba});U=L.length;return t}function K(){Ea&&Ea.unbind();if(renderer){Ea=INTERACT.watch(renderer.interactTarget||sa);b.pannable&&Ea.pannable().bind("pan",e);if(b.scalable){Ea.bind("zoom",c);Ea.bind("doubleTap",f)}Ea.bind("pointerDown",g);Ea.bind("pointerMove",j);Ea.bind("pointerUp",n);b.captureHover&&
Ea.bind("pointerHover",h);Ea.bind("tap",D)}}function J(q,t,w){if(va){q=a(t.x,t.y);va.drag.call(va.target,va,q.x,q.y,w)&&Ia++;if(w)va=null}}function I(q){var t,w,P=false;q=q||(new Date).getTime();if(P=q-Fb>jc){var ba=E(na-kb),Ba=E(oa-lb);t=na!==mb||oa!==nb;w=ua!==Gb;if(t||w)Ia++;if(ba>=Hb||Ba>=Hb)ia();w={index:eb++,draw:Ia};Y.trigger("enterFrame",q,w);Fb=q}if(renderer&&P&&w.draw){La=Ib|(ua!==1?Jb:0)|(t?ob:0)|(pb?Kb:0);qb=(t=(La&(Jb|ob))!==0)&&(La&Kb)===0;t=la();renderer.trigger("predraw",t,La);if(renderer.prepare(L,
t,La,q,Fa)){Ia=0;for(ii=U;ii--;){P=L[ii];if(P.visible&&(La&P.validStates)!==0){w=P.style?renderer.applyStyle(P.style,true):null;P.draw(renderer,t,La,Y,q,Fa);w&&renderer.applyStyle(w)}}renderer.render(t);Y.trigger("drawComplete",t,q);mb=na;nb=oa;Gb=ua}if(Fa){q=Fa?Fa.elements:[];if(ab&&ab.type==="hover"){t=Hits.diffHits(ab.elements,q);t.length>0&&Hits.triggerEvent(ab,Y,"Out",t)}if(q.length>0){P=Fa.x;w=Fa.y;for(t=q.length;t--;){ba=q[t];Ba=P;var Ma=w,Ja=ba&&ba.drag&&(!ba.canDrag||ba.canDrag(ba,Ba,Ma));
if(Ja){va=ba;va.startX=Ba;va.startY=Ma}if(Ja)break}Hits.triggerEvent(Fa,Y)}ab=q.length>0?COG.extend({},Fa):null;Fa=null}}animFrame(I)}function Z(q,t,w){Fa=Hits.init(q,t,w,a(w.x,w.y,true));for(q=U;q--;)rb=rb||(L[q].hitGuess?L[q].hitGuess(Fa.x,Fa.y,La,Y):false);rb&&Ia++}function ga(){Ia++}function la(){var q=new k(na,oa,Y.width,Y.height);q.scaleFactor=ua;if(ua!==1)q.scaled=Va.fromCenter(na+(Y.width>>1),oa+(Y.height>>1),Y.width/ua|0,Y.height/ua|0);return q}function ia(){var q=la();if(q){if(Xa||Ya)if(q){var t=
fb?na+(q.w>>1):na,w=gb?oa+(q.h>>1):oa,P=q.w,ba=q.h;if(Xa&&Xa>P)if(t+P>Xa)na=fb?na:Xa-P;else if(t<0)na=fb?na:0;if(Ya&&Ya>ba)if(w+ba>Ya)oa=gb?oa:Ya-ba;else if(w<0)oa=gb?oa:0}kb=na;lb=oa;O("refresh",Y,q);Ia++}}function z(q,t,w,P,ba){var Ba;if(!Eb){w=false;Ba=Aa(H(q)/Math.LN2);q=C(2,Ba)}if(w)COG.tweenValue(ua,q,w,ba,function(Ma,Ja){ua=Ma;if(Ja){Ba=Aa(H(ua)/Math.LN2);ua=C(2,Ba);P&&P()}d()});else{ua=q;d()}return Y}function $(q,t,w){q=xa(b.minZoom,qa(b.maxZoom,q));if(q!==$a){var P=C(2,q-$a),ba=Y.width>>
1,Ba=Y.height>>1,Ma=ba/P|0,Ja=Ba/P|0;$a=q;aa(((t?t:na+ba)-Ma)*P,((w?w:oa+Ba)-Ja)*P);mb=na;nb=oa;lb=kb=0;O("zoomLevelChange",q);ua=1;renderer.trigger("reset");ia()}}function O(){for(var q=Y.trigger.apply(null,arguments).cancel,t=L.length;t--;)q=L[t].trigger.apply(null,arguments).cancel||q;return!q}function aa(q,t,w,P,ba){function Ba(){Ma+=1;if(Ma>=2){pb=false;ba&&ba()}}var Ma=0;if(w){if((La&ob)===0){COG.tweenValue(na,q,w,P,function(Ja,sb){na=Ja|0;(sb?Ba:ga)();return!qb});COG.tweenValue(oa,t,w,P,function(Ja,
sb){oa=Ja|0;(sb?Ba:ga)();return!qb});pb=true}}else{na=q|0;oa=t|0;ba&&ba()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},b);var X=
{},L=[],U=0,sa=document.getElementById(b.container),va=null,eb=0,ic=null,kc=!u(window.attachEvent,ya),rb=false,Hb=b.refreshDistance,na=0,oa=0,kb=0,lb=0,mb=0,nb=0,Xa=null,Ya=null,fb=false,gb=false,Fa=null,qb=false,ab=null,Db=0,ua=1,Gb=1,Fb=0,Ea=null,Eb=true,pb=false,jc=1E3/b.fps|0,Ia=0,gc,hc,$a=b.zoomLevel,Ib=ja("ACTIVE"),ob=ja("PAN"),Jb=ja("ZOOM"),Kb=ja("ANIMATING"),La=Ib,Y={id:b.id,detach:function(){renderer&&renderer.trigger("detach");Ea&&Ea.unbind()},eachLayer:function(q){for(var t=U;t--;)q(L[t])},
getLayer:function(q){for(var t=0;t<U;t++)if(L[t].id===q)return L[t];return null},getZoomLevel:function(){return $a},setLayer:function(q,t){for(var w=0;w<U;w++)if(L[w].id===q){L.splice(w,1);break}if(t){ka(q,t);t.trigger("refresh",Y,la());Y.trigger("layerChange",Y,t)}Ia++;return t},invalidate:ga,refresh:ia,resetScale:function(){ua=1},scale:z,setZoomLevel:$,syncXY:function(){},triggerAll:O,removeLayer:function(q){a:{for(var t=U;t--;)if(L[t].id===q){q=t;break a}q=-1}if(q>=0&&q<U){Y.trigger("layerRemove",
Y,L[q]);L.splice(q,1);Ia++}U=L.length},getOffset:function(){return new r(na,oa)},getRenderer:function(){return renderer},getScaleFactor:function(){return ua},setMaxOffset:function(q,t,w,P){Xa=q;Ya=t;fb=w;gb=P},getViewport:la,updateOffset:aa,pan:function(q,t,w,P,ba){aa(na+q,oa+t,w,P,ba)}};COG.observable(Y);Y.bind("resync",function(){});COG.configurable(Y,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(b,null,{container:function(q,
t){sa=document.getElementById(t);R()},inertia:K,captureHover:K,scalable:K,pannable:K,renderer:function(q,t){if(renderer){renderer.trigger("detach");renderer=null}R(t);Ia++}}),true);CANI.init(function(q){Y.markers=ka("markers",new hb({zindex:20}));X=q;R();kc?window.attachEvent("onresize",p):window.addEventListener("resize",p,false)});animFrame(I);return Y},Ga=function(b){b=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},
b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Ga.prototype={constructor:Ga,animate:function(b,e,c,d){i(this,b,e,c,d)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds(Va.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=
b},translate:function(b,e){this.translateX=b;this.translateY=e},updateBounds:function(b,e){b&&(!this.bounds||b.x!=this.bounds.x||b.y!=this.bounds.y)&&this.trigger("move",this,b,this.bounds);this.bounds=b;if(e)this.xy=Va.center(this.bounds)}};var Yb=1E3/60|0,Za=[],xb=0;m.prototype=COG.extend(Ga.prototype,{constructor:m});v.prototype=COG.extend({},Ga.prototype,{constructor:v});N.prototype=COG.extend({},v.prototype);G.prototype=COG.extend({},Ga.prototype,{constructor:G});ma.prototype=COG.extend({},G.prototype,
{constructor:ma});pa.prototype=COG.extend(Ga.prototype,{constructor:pa});F.prototype={constructor:F,clip:null,cycle:function(){},draw:function(){},hitGuess:null};Wa=function(b,e){function c(h,j){var n=j&&j.getZoomLevel?j.getZoomLevel():0;f[n]||(f[n]=l(n));a=f[n]}e=COG.extend({imageLoadArgs:{}},e);var d=b?Ab.init(b,e).run:null,a=null,f=[],g=COG.extend(new F(e),{draw:function(h,j){h.drawTiles(j,a.search(Va.buffer(j,128)))}});g.bind("refresh",function(h,j,n){var p=(new Date).getTime();a&&d(j,n,a,function(){j.invalidate();
COG.info("GEN COMPLETED IN "+((new Date).getTime()-p)+" ms")})});g.bind("parentChange",c);g.bind("resync",c);return g};var Mb=function(b){function e(n,p,D,R){var ka=this.dragOffset;if(!ka)ka=this.dragOffset=new r(n.startX-this.xy.x,n.startY-this.xy.y);this.xy.x=p-ka.x;this.xy.y=D-ka.y;if(R){delete this.dragOffset;if(n=j.view){n.syncXY([this.xy],true);n.invalidate()}this.trigger("dragDrop")}return true}function c(n){clearTimeout(h);h=setTimeout(function(){f.sort(function(p,D){if(D.xy&&p.xy){var R=
D.xy.y-p.xy.y;return R!=0?R:D.xy.x-p.xy.x}});n&&n.invalidate()},50)}function d(n,p,D,R){R&&g.remove(R,p);g.insert(D,p)}function a(n,p){g=l(p.getZoomLevel(),g);for(var D=f.length;D--;)f[D].resync(p)}b=COG.extend({zindex:10},b);var f=[],g,h=0,j=COG.extend(new F(b),{itemCount:0,add:function(n,p){if(n){n.layer=j;if(p)f.unshift(n);else f[f.length]=n;var D=j.view;if(D){n.resync(D);g&&n.bounds&&g.insert(n.bounds,n);c(D)}n.bind("move",d)}j.itemCount=f.length},clear:function(){g=new vb;f=[];j.itemCount=0},
draw:function(n,p,D,R,ka,K){R={};ka=g&&p?g.search(p):[];for(var J=ka.length;J--;){var I=ka[J],Z=I.style||j.style,ga,la=n.applyTransform(I),ia=I.getProps?I.getProps(n,D):R;if(ia=(ga=n["prep"+I.typeName])?ga.call(n,I,p,K,D,ia):null){if(K&&ia.hit){K.elements.push(Hits.initHit(I.type,I,I.draggable?e:null));ga=K.type+"Style";Z=I[ga]||j[ga]||Z}Z=Z?n.applyStyle(Z,true):null;(ga=I.draw||ia.draw)&&ga.call(I,ia);Z&&n.applyStyle(Z)}la&&la.undo&&la.undo()}},find:function(){return[].concat(f)},hitGuess:function(n,
p){return g&&g.search({x:n-10,y:p-10,w:20,h:20}).length>0}});j.bind("parentChange",a);j.bind("resync",a);return j},hb=function(b){return new Mb(b)};S.prototype={constructor:S,toString:function(b){return this.lat+(b||" ")+this.lon}};COG.extend(B,{ex:COG.extend,is:u,ticks:V,userMessage:function(b,e,c){B.trigger("userMessage",b,e,c)},indexOf:T,Rect:k,XY:Ra,XYRect:Va,Vector:ib,Hits:Hits,Generator:Ab,tweenValue:COG.tweenValue,easing:COG.easing,Tile:Q,TileLayer:Wa,getImage:x,viewState:ja,View:Lb,ViewLayer:F,
ImageLayer:Wa,Drawable:Ga,Marker:m,Poly:v,Line:N,Arc:pa,ImageDrawable:G,ImageMarker:ma,DrawLayer:Mb,ShapeLayer:hb,Map:function(b){function e(h,j,n){g.setZoomLevel(j);c(h,n)}function c(h,j,n,p){h=Na.init(h,ta(g.getZoomLevel()));g.updateOffset(h.x-(g.width>>1),h.y-(g.height>>1),n,p,function(){j&&j(g)})}b=COG.extend({zoomLevel:1,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var d=new r,a=0,f=b.tapExtent;b.adjustScaleFactor=function(h){return Math.pow(2,(h<1?Math.floor:Math.ceil)(Math.log(h)))};
var g=COG.extend(new Lb(b),{getBoundingBox:function(){var h=g.getViewport();return h?Oa.init(Na.toPos(new r(h.x,h.y2),a),Na.toPos(new r(h.x2,h.y),a)):null},getCenterPosition:function(){var h=g.getViewport();if(h){h=new r(h.x+(h.w>>1),h.y+(h.h>>1));return Na.toPos(h,a)}return null},gotoBounds:function(h,j){var n=Oa.getZoomLevel(h,g.getViewport());e(Oa.getCenter(h),n,j)},gotoPosition:e,panToPosition:c,syncXY:function(h,j){return(j?Na.syncPos:Na.sync)(h,a)}});g.bind("tap",function(h,j,n,p){h=Na.toPos(p,
a);var D=Na.toPos(Ra.offset(p,-f,f),a);p=Na.toPos(Ra.offset(p,f,-f),a);g.trigger("geotap",j,n,h,Oa.init(D,p))});g.bind("refresh",function(h,j,n){if(d.x!=n.x||d.y!=n.y){g.trigger("boundsChange",g.getBoundingBox());d.x=n.x;d.y=n.y}});g.bind("zoomLevelChange",function(h,j){var n;a=ta(j);n=ea/a|0;g.setMaxOffset(n,n,true,false);g.resetScale();g.triggerAll("resync",g)});return g},Pos:S});var tb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ha=Math.PI/180,Pa=
180/Math.PI,ub=y,Nb=-ub,Ob=ea,lc=-Ob,db=0.08181919084262157,bb=null,Pb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},za=function(){function b(c){return!c||c.lat===0&&c.lon===0}function e(c,d){return new S(c,d)}return{calcDistance:function(c,d){if(b(c)||b(d))return 0;var a=(d.lat-c.lat)*Ha>>1,f=(d.lon-c.lon)*Ha>>1;a=ra(a)*ra(a)+Ka(c.lat*Ha)*Ka(d.lat*Ha)*ra(f)*ra(f);return 6371*2*$b(W(a),W(1-a))},copy:function(c){return c?e(c.lat,c.lon):null},
empty:b,equal:function(c,d){return c&&d&&c.lat==d.lat&&c.lon==d.lon},fromMercatorPixels:function(c,d){for(var a=C(Math.E,-d),f=y-2*yb(a),g=da(f,a),h=0;h<12&&E(f-g)>1.0E-7;){f=g;g=da(f,a);h++}return e(g*Pa,c%360*Pa)},generalize:function(c,d,a){var f=c.length,g=[],h=null;a||(a=250);a/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");for(var j=f;j--;)if(j===0)g.unshift(c[j]);else{var n=!h||za.inArray(c[j],d)?a:za.calcDistance(h,c[j]);if(c[j]&&n>=a){g.unshift(c[j]);h=c[j]}}COG.info("generalized "+
f+" positions into "+g.length+" positions");return g},inArray:function(c,d){for(var a=za.equal,f=d.length;f--;)if(a(c,d[f]))return true;return false},inBounds:function(c,d){var a=!(za.empty(c)||za.empty(d));return a=(a=a&&c.lat>=d.min.lat&&c.lat<=d.max.lat)&&c.lon>=d.min.lon&&c.lon<=d.max.lon},init:e,offset:function(c,d,a){var f=c.lat*Ha;c=c.lon*Ha;d=f+d/6371;a=Da(ra(a/6371)/Ka(f));a=c+a;d=(d+y)%Math.PI-y;a%=ea;return e(d*Pa,a*Pa)},parse:function(c){return new S(c)},parseArray:function(c){var d=c.length,
a=Array(d);for(d=d;d--;)a[d]=new S(c[d]);return a},toMercatorPixels:function(c){return T5.XY.init(parseFloat(c.lon)*Ha,wa(c.lat))},toString:function(c){return c?c.toString():""},vectorize:function(c,d){function a(){for(var j=0,n=d.chunkSize,p=f;p--;){g[p]=T5.GeoXY.init(c[p]);j+=1;if(j>n)break}f=p;if(f<=0)d.callback&&d.callback(g);else animFrame(a)}var f=c.length,g=Array(f);d=COG.extend({chunkSize:500,async:true,callback:null},d);if(!d.async){for(var h=f;h--;)g[h]=T5.GeoXY.init(c[h]);return g}animFrame(a);
return null}}}(),Oa=function(){function b(a,f,g){var h=new r(0,f.lat-a.lat);h.x=(g||u(g,ya))&&a.lon>f.lon?360-a.lon+f.lon:f.lon-a.lon;return h}function e(a,f){return Oa.init(new S(a.min.lat-f,a.min.lon-f%360),new S(a.max.lat+f,a.max.lon+f%360))}function c(a){var f=b(a.min,a.max);return new S(a.min.lat+(f.y>>1),a.min.lon+(f.x>>1))}function d(a,f){return{min:new S(a),max:new S(f)}}return{calcSize:b,createBoundsFromCenter:function(a,f){var g=f/6371,h=a.lat*Ha,j=a.lon*Ha,n=h-g,p=h+g;if(n>Nb&&p<ub){h=
Da(ra(g)/Ka(h));g=(j-h)%ea;j=(j+h)%ea}else{n=xa(n,Nb);p=qa(p,ub);g=lc;j=Ob}return Oa.init(new S(n*Pa,g*Pa),new S(p*Pa,j*Pa))},expand:e,forPositions:function(a,f){var g=null,h=T5.ticks();f||(f="auto");for(var j=a.length;j--;)if(g){var n=b(g.min,a[j],false),p=b(a[j],g.max,false);if(n.x<0)g.min.lon=a[j].lon;if(n.y<0)g.min.lat=a[j].lat;if(p.x<0)g.max.lon=a[j].lon;if(p.y<0)g.max.lat=a[j].lat}else g=d(a[j],a[j]);if(f){if(f=="auto"){j=b(g.min,g.max);f=xa(j.x,j.y)*0.3}g=e(g,f)}COG.trace("calculated bounds for "+
a.length+" positions",h);return g},getCenter:c,getZoomLevel:function(a,f){var g=c(a);g=qa(Aa(E(g.lat)*0.05),tb.length);var h=tb[g],j=b(a.min,a.max);g=fa(H(tb[3]*f.h/j.y)/H(2));h=fa(H(h*f.w/j.x)/H(2));return qa(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:d,isEmpty:function(a){return!a||za.empty(a.min)||za.empty(a.max)},toString:function(a){return"min: "+za.toString(a.min)+", max: "+za.toString(a.max)}}}();ib=function(){var b=/^(\d+).*$/,e=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(c,d){b.lastIndex=
-1;if(b.test(c))for(var a=c.replace(b,"$1"),f=d.split(","),g=0;g<f.length;g++){e.lastIndex=-1;if(e.test(f[g])){var h=e.exec(f[g]);if(a>=parseInt(h[1],10)&&a<=parseInt(h[2],10))return true}else if(a==f[g])return true}return false},normalize:function(c){if(!c)return"";c=c.toUpperCase();if(!bb){var d=[];for(var a in Pb)d.push(a);bb=RegExp("(\\s)("+d.join("|")+")(\\s|$)","i")}bb.lastIndex=-1;if(d=bb.exec(c))c=c.replace(bb,"$1"+Pb[d[2]]);return c},toString:function(c){return c.streetDetails+" "+c.location}}}();
var Na=B.GeoXY=function(){function b(d,a){if(d.length){for(var f,g,h,j,n=d.length;n--;){b(d[n],a);f=u(f,ya)||d.x<f?d.x:f;g=u(g,ya)||d.y<g?d.y:g;h=u(h,ya)||d.x>h?d.x:h;j=u(j,ya)||d.y>j?d.y:j}return new k(f,g,h-f,j-g)}else if(d.mercXY){f=d.mercXY;d.x=(f.x+Math.PI)/a|0;d.y=(Math.PI-f.y)/a|0;d.rpp=a}return d}function e(d,a){if(d.length)for(var f=d.length;f--;)e(d[f],a);else{d.mercXY=new r(d.x*a-Math.PI,Math.PI-d.y*a);d.pos=za.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function c(d,a,f){d.pos=
a;d.mercXY=za.toMercatorPixels(a);(f=u(f,ac)?f:d.rpp)&&b(d,f)}return{init:function(d,a){var f=new r;c(f,d,a);return f},sync:b,syncPos:e,toPos:function(d,a){a=a||d.rpp;return za.fromMercatorPixels(d.x*a-Math.PI,Math.PI-d.y*a)},updatePos:c}}(),Sa={};Wa=function(){function b(a,f){var g=new T5.ShapeLayer;f.geometry&&za.vectorize(f.geometry,{callback:function(h){g.add(new T5.Line(h,{style:"waypoints",simplify:true}));a.setLayer("route",g)}})}function e(a){for(var f=c.Unknown,g=d,h=0;h<g.length;h++){g[h].regex.lastIndex=
-1;var j=g[h].regex.exec(a);if(j){f=g[h].customCheck?g[h].customCheck(a,j):g[h].turnType;break}}return f}var c={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},
d=function(){var a=[];a.push({regex:/continue/i,turnType:c.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(f,g){return/bear/i.test(g[1])?c.TurnLeftSlight:c.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(f,g){return/bear/i.test(g[1])?c.TurnRightSlight:c.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:c.EnterRoundabout});a.push({regex:/take.*?ramp/i,turnType:c.Ramp});a.push({regex:/take.*?exit/i,turnType:c.RampExit});a.push({regex:/make(.*?)u\-turn/i,
customCheck:function(f,g){return/right/i.test(g[1])?c.UTurnRight:c.UTurnLeft}});a.push({regex:/proceed/i,turnType:c.Start});a.push({regex:/arrive/i,turnType:c.Arrive});a.push({regex:/fell\sthrough/i,turnType:c.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var f=ha("route");f&&f.route(a,function(g){if(a.generalize)g.geometry=za.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,
g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:e,TurnType:c,Instruction:function(a){var f=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");f.description=g;if(!a.turnType)a.turnType=e(a.description);return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Oa.forPositions(a.geometry);
return COG.extend({getInstructionPositions:function(){for(var f=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&f.push(a.instructions[g].position);return f}},a)}}}();var mc="featurecollection",nc="feature",zb={async:false},Ta={processor:null,group:"shapes",layerClass:hb},oc={point:COG.extend({},Ta,{processor:function(b,e,c,d){e=M([e.coordinates],zb);if(e.length>0)if(c=d.marker(e[0],c)){b.add(c);return e.length}},group:"markers",layerClass:hb}),linestring:COG.extend({},Ta,{processor:function(b,
e,c,d){e=M(e&&e.coordinates?e.coordinates:[]);return ca(b,e,c,d.line)}}),multilinestring:COG.extend({},Ta,{processor:function(b,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var a=0,f=e.length;f--;)a+=ca(b,e[f],c,d.line);return a}}),polygon:COG.extend({},Ta,{processor:function(b,e,c,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return ca(b,e[0],c,d.poly);return 0}}),multipolygon:COG.extend({},Ta,{processor:function(b,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var a=0,f=0;f<e.length;f++)a+=
ca(b,e[f][0],c,d.poly);return a}})},Qb=function(b,e,c,d){function a(J,I){var Z=J.processor,ga=n+J.group,la=COG.extend({},J,c,{properties:I.properties});if(Z){var ia=K[ga];if(!ia){ia=new J.layerClass({id:ga});K[ga]=ia}return Z(ia,I.data,la,d)}return 0}function f(J,I){var Z=J&&J.type?J.type.toLowerCase():null;return Z&&Z===nc?f(J.geometry,J.properties):{type:Z,isCollection:Z?Z===mc:false,definition:oc[Z],data:J,properties:I?I:J.properties}}function g(J){var I=0,Z=COG.extend({},c),ga=p;J=J?J:(new Date).getTime();
if(!R){for(;ga<D;ga++){J=f(j?j(b[ga]):b[ga]);var la=null;if(J.isCollection){Z.layerPrefix=n+ka++ +"-";R=new Qb(J.data.features,function(ia){R=null;for(var z in ia)K[z]=ia[z];p>=D&&e&&e(K)},Z);la+=1}else if(J.definition)la=a(J.definition,J);I+=la?la:1;if(I>=h)break}p=ga+1;if(R||p<D)animFrame(g);else e&&e(K)}}c=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},c);d=COG.extend({marker:function(J){return new m({xy:J})},line:function(J,I){return new v(J,COG.extend({},c,I))},poly:function(J,
I){return new v(J,COG.extend({fill:true},c,I))}},d);var h=500,j=c.rowPreParse,n=c.layerPrefix,p=0,D=0,R=null,ka=0,K={};if(b){u(b,"array")||(b=[b]);D=b.length;animFrame(g)}};Ta=B.GeoJSON={parse:function(b,e,c){return new Qb(b,e,c)}};B.GeoShape=function(b,e){e=COG.extend({autoParse:true},e);for(var c=Array(b.length),d=e.autoParse,a=T5.Geo.Position.parse,f=b.length;f--;)c[f]=T5.GeoXY.init(d?a(b[f]):b[f]);return new T5.Poly(c,e)};B.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?
b+" m":""},dist2rad:function(b){return b/6371},getEngine:ha,radsPerPixel:ta,Position:za,BoundingBox:Oa,Radius:function(b,e){return{distance:parseInt(b,10),uom:e}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:ib,Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");var e=COG.extend({remove:function(){delete Sa[e.id]}},b);return Sa[e.id]=e},Routing:Wa,GeoJSON:Ta}})(T5);
