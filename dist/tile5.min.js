COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var H=arguments[0]||{},V,u=1,y=arguments.length;u<y;u++)if((V=arguments[u])!==null)for(var k in V){var l=V[k];if(H!==l)if(l!==undefined)H[k]=l}return H};
(function(){var H=Object.prototype.hasOwnProperty,V=0,u={};u.toID=function(y){return y.replace(/\s/g,"-")};u.objId=function(y){return(y?y:"obj")+V++};u.isFunction=function(y){return toString.call(y)==="[object Function]"};u.isArray=function(y){return toString.call(y)==="[object Array]"};u.isPlainObject=function(y){if(!y||toString.call(y)!=="[object Object]"||y.nodeType||y.setInterval)return false;if(y.constructor&&!H.call(y,"constructor")&&!H.call(y.constructor.prototype,"isPrototypeOf"))return false;
var k;for(k in y);return k===undefined||H.call(y,k)};u.isEmptyObject=function(y){for(var k in y)return false;return true};u.isXmlDocument=function(y){return toString.call(y)==="[object Document]"};u.contains=function(y,k){var l=y,r=arguments,w=1;if(k&&module.isArray(k)){r=k;w=0}for(w=w;w<r;w++)l=l&&typeof foo[r[w]]!=="undefined";return l};u.formatStr=function(y){if(arguments.length<=1)return y;for(var k=arguments.length-2,l=0;l<=k;l++)y=y.replace(RegExp("\\{"+l+"\\}","gi"),arguments[l+1]);return y};
u.wordExists=function(y,k){var l="";if(k.toString)k=k.toString();for(var r=0;r<k.length;r++)l+=!/\w/.test(k[r])?"\\"+k[r]:k[r];return RegExp("(^|\\s|\\,)"+l+"(\\,|\\s|$)","i").test(y)};COG.extend(COG,u)})();
(function(){function H(l){return typeof console!=="undefined"?function(){console[l](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var V=window.console&&window.console.markTimeline,u=H("error"),y=H("info"),k=function(){return V?function(l,r){console.markTimeline(l+(r?": "+((new Date).getTime()-r)+"ms":""))}:function(){}}();COG.extend(COG,{trace:k,debug:H("debug"),info:y,warn:H("warn"),error:u,exception:function(l){if(u)for(var r in l)y("ERROR DETAIL: "+r+
": "+l[r])}})})();
(function(){function H(u,y){var k=u.hasOwnProperty("obsHandlers")?u.obsHandlers:null;k[y]||(k[y]=[]);return k[y]}var V=0;COG.observable=function(u){if(!u)return null;if(!(u.hasOwnProperty("obsHandlers")?u.obsHandlers:null))u.obsHandlers={};if(!u.hasOwnProperty("bind")){u.bind=function(y,k){var l="callback"+V++;H(u,y).unshift({fn:k,id:l});return l};u.triggerCustom=function(y,k){var l=H(u,y),r={cancel:false,name:y,source:this},w;k&&COG.extend(r,k);if(!l)return null;w=Array.prototype.slice.call(arguments,2);
u.eventInterceptor&&u.eventInterceptor(y,r,w);w.unshift(r);for(var M=l.length;M--&&!r.cancel;)l[M].fn.apply(this,w);return r};u.trigger=function(y){var k=Array.prototype.slice.call(arguments,1);k.splice(0,0,y,null);return u.triggerCustom.apply(this,k)};u.unbind=function(y,k){if(typeof y==="undefined")u.obsHandlers={};else for(var l=H(u,y),r=0;l&&r<l.length;r++)if(l[r].id===k){l.splice(r,1);break}return u}}return u}})();
(function(){function H(k,l){k[l]||(k[l]=function(r){return k.configure(l,r)})}function V(k){k.gtConfId="configurable"+y++;k.gtConfig={};k.gtConfigFns=[];return k.gtConfig}var u={},y=0;COG.paramTweaker=function(k,l,r){return function(w,M){if(typeof M!=="undefined"){if(w in k)k[w]=M;r&&w in r&&r[w](w,M)}else return l&&w in l?l[w](w):k[w]}};COG.configurable=function(k,l,r,w){if(k){k.gtConfId||V(k);var M=k.gtConfId,m=k.gtConfig,E=k.gtConfigFns;u[M]=k;E.push(r);for(r=l.length;r--;){m[l[r]]=true;w&&H(k,
l[r])}if(!k.configure)k.configure=function(v,C){if(m[v]){for(var s=E.length;s--;){var q=E[s](v,C);if(typeof q!=="undefined")return q}return u[M]}return null}}}})();
(function(){function H(k){var l=document.createElement("script"),r=false;l.src=k;l.async=true;l.onload=l.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){r=true;l.onload=l.onreadystatechange=null;l&&l.parentNode&&l.parentNode.removeChild(l)}};u||(u=document.getElementsByTagName("head")[0]);u.appendChild(l)}var V=0,u,y=this;COG.jsonp=function(k,l,r){k+=k.indexOf("?")>=0?"&":"?";var w="json"+ ++V;y[w]=function(M){l(M);y[w]=null;try{delete y[w]}catch(m){}};
H(k+(r?r:"callback")+"="+w);return w}})();
(function(){var H=1.70158,V=Math.PI/2,u=1E3/60|0,y=Math.abs,k=Math.pow,l=Math.sin,r=Math.asin,w=Math.cos,M={linear:function(m,E,v,C){return v*m/C+E},backin:function(m,E,v,C){return v*(m/=C)*m*((H+1)*m-H)+E},backout:function(m,E,v,C){return v*((m=m/C-1)*m*((H+1)*m+H)+1)+E},backinout:function(m,E,v,C){return(m/=C/2)<1?v/2*m*m*(((H*=1.525)+1)*m-H)+E:v/2*((m-=2)*m*(((H*=1.525)+1)*m+H)+2)+E},bouncein:function(m,E,v,C){return v-M.bounceout(C-m,0,v,C)+E},bounceout:function(m,E,v,C){return(m/=C)<1/2.75?v*
7.5625*m*m+E:m<2/2.75?v*(7.5625*(m-=1.5/2.75)*m+0.75)+E:m<2.5/2.75?v*(7.5625*(m-=2.25/2.75)*m+0.9375)+E:v*(7.5625*(m-=2.625/2.75)*m+0.984375)+E},bounceinout:function(m,E,v,C){return m<C/2?M.bouncein(m*2,0,v,C)/2+E:M.bounceout(m*2-C,0,v,C)/2+v/2+E},cubicin:function(m,E,v,C){return v*(m/=C)*m*m+E},cubicout:function(m,E,v,C){return v*((m=m/C-1)*m*m+1)+E},cubicinout:function(m,E,v,C){if((m/=C/2)<1)return v/2*m*m*m+E;return v/2*((m-=2)*m*m+2)+E},elasticin:function(m,E,v,C,s,q){if(m==0)return E;if((m/=
C)==1)return E+v;q||(q=C*0.3);if(!s||s<y(v)){s=v;v=q/4}else v=q/TWO_PI*r(v/s);return-(s*k(2,10*(m-=1))*l((m*C-v)*TWO_PI/q))+E},elasticout:function(m,E,v,C,s,q){var B;if(m==0)return E;if((m/=C)==1)return E+v;q||(q=C*0.3);if(!s||s<y(v)){s=v;B=q/4}else B=q/TWO_PI*r(v/s);return s*k(2,-10*m)*l((m*C-B)*TWO_PI/q)+v+E},elasticinout:function(m,E,v,C,s,q){var B;if(m==0)return E;if((m/=C/2)==2)return E+v;q||(q=C*0.3*1.5);if(!s||s<y(v)){s=v;B=q/4}else B=q/TWO_PI*r(v/s);if(m<1)return-0.5*s*k(2,10*(m-=1))*l((m*
C-B)*TWO_PI/q)+E;return s*k(2,-10*(m-=1))*l((m*C-B)*TWO_PI/q)*0.5+v+E},quadin:function(m,E,v,C){return v*(m/=C)*m+E},quadout:function(m,E,v,C){return-v*(m/=C)*(m-2)+E},quadinout:function(m,E,v,C){if((m/=C/2)<1)return v/2*m*m+E;return-v/2*(--m*(m-2)-1)+E},sinein:function(m,E,v,C){return-v*w(m/C*V)+v+E},sineout:function(m,E,v,C){return v*l(m/C*V)+E},sineinout:function(m,E,v,C){return-v/2*(w(Math.PI*m/C)-1)+E}};COG.tweenValue=function(m,E,v,C,s){function q($){$=$?$:(new Date).getTime();if(fa+u<$){var ia=
$-B,X=v(ia,m,W,C),la=B+C<=$;$=!la;if(s){ia=s(X,la,ia);$=typeof ia!="undefined"?ia&&$:$}$&&animFrame(q)}}var B=(new Date).getTime(),fa=0,W=E-m;animFrame(q);return{}};COG.easing=function(m){return M[m.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(m,E){M[m.replace(/[\-\_\s\.]/g,"").toLowerCase()]=E}})();
(function(){var H=/^P(\d+Y)?(\d+M)?(\d+D)?$/,V=/^(\d+H)?(\d+M)?(\d+S)?$/,u={8601:function(k){k=k.split("T");var l=null;l=null;var r=0,w=0;H.lastIndex=-1;l=H.exec(k[0]);r+=l[3]?parseInt(l[3].slice(0,-1),10):0;V.lastIndex=-1;l=V.exec(k[1]);w+=l[1]?parseInt(l[1].slice(0,-1),10)*3600:0;w+=l[2]?parseInt(l[2].slice(0,-1),10)*60:0;w+=l[3]?parseInt(l[3].slice(0,-1),10):0;return new y(r,w)}},y=COG.Duration=function(k,l){return{days:k?k:0,seconds:l?l:0}};COG.addDuration=function(){for(var k=new y,l=arguments.length;l--;){k.days+=
arguments[l].days;k.seconds+=arguments[l].seconds}if(k.seconds>=86400){k.days+=~~(k.seconds/86400);k.seconds%=86400}return k};COG.formatDuration=function(k){var l,r,w="";if(k.days)w=k.days+" days ";if(k.seconds){k=k.seconds;if(k>=3600){l=~~(k/3600);k-=l*3600}if(k>=60){r=Math.round(k/60);k-=r*60}if(l)w=w+l+(l>1?" hrs ":" hr ")+(r?(r>10?r:"0"+r)+" min ":"");else if(r)w=w+r+" min";else if(k>0)w=w+(k>10?k:"0"+k)+" sec"}return w};COG.parseDuration=function(k,l){var r=l?u[l]:null;if(r)return r(k);COG.Log.warn("Could not find duration parser for specified format: "+
l);return new y}})();COG.ObjectStore=function(){var H={},V={},u="obj_"+(new Date).getTime(),y=0,k=Object.prototype.hasOwnProperty;return{add:function(l,r){var w;r=r?r:"default";if(l&&l.constructor)if(!k.call(l,"id"))l.id=u+ ++y;w=V[r]?V[r]:V[r]=[];H[l.id]=w.length;w[l.length]=l}}};var CANI={};
(function(H){var V=[],u=0,y=false,k=H.register=function(l,r){V.push({section:l,run:r})};H.init=function(l){function r(){if(u<V.length){var M=V[u++];w[M.section]||(w[M.section]={});M.run(w[M.section],r)}else{for(M in w)H[M]=w[M];y=true;l&&l(H)}}var w={};if(y&&l)l(H);else{u=0;r()}};k("canvas",function(l,r){function w(){var v,C=M.getContext("2d");C.save();try{C.translate(50,50);C.beginPath();C.rect(0,0,20,20);v=C.isPointInPath(10,10)}finally{C.restore()}return v}var M=document.createElement("canvas"),
m=typeof FlashCanvas!="undefined",E=typeof G_vmlCanvasManager!="undefnined";M.width=200;M.height=200;l.pipTransformed=m||E?false:w();r()})})(CANI);
INTERACT=function(){function H(s){return function(q,B,fa){(fa?fa:s?document.body:document).addEventListener(q,B,false)}}function V(s){return function(q,B,fa){(fa?fa:s?document.body:document).removeEventListener(q,B,false)}}function u(s,q,B){(B?B:document).attachEvent("on"+s,q)}function y(s,q,B){(B?B:document).detachEvent("on"+s,q)}function k(s,q){return{x:s?s:0,y:q?q:0,count:1}}function l(s,q){v.push(COG.extend({handler:null,checks:{},type:s},q))}function r(s){var q=0,B=0;if(s.offsetParent){do{q+=
s.offsetLeft;B+=s.offsetTop;s=s.offsetParent}while(s)}return{left:q,top:B}}function w(s,q){return{source:s,target:q.target?q.target:q.srcElement}}function M(s,q){for(var B=s.target?s.target:s.srcElement;B&&B!==q&&B.nodeName&&B.nodeName.toUpperCase()!="CANVAS";)B=B.parentNode;return B&&B===q}function m(s,q){return{x:s.x-(q?q.left:0),y:s.y-(q?q.top:0)}}function E(s){if(s.preventDefault){s.preventDefault();s.stopPropagation()}else s.cancelBubble&&s.cancelBubble()}var v=[],C=function(s,q,B){function fa(T,
ba,Y,Q){var N=0,aa=0,x=0;COG.tweenValue(0,T,Y,Q,function(L){x=N;N=L});COG.tweenValue(0,ba,Y,Q,function(L){W.trigger("pan",N-x,L-aa);aa=L})}B=COG.extend({binder:null,unbinder:null,observable:null},B);for(var W=B.observable,$=null,ia=[],X=[],la,qa,pa={bind:function(){return W.bind.apply(null,arguments)},pannable:function(T){$=COG.extend({inertia:true},T);return pa},unbind:function(){W.unbind();for(var T=0;T<ia.length;T++)ia[T].unbind();return pa}},Ba=0;Ba<q.length;Ba++)ia.push(q[Ba](s,W,B));W.bind("pointerDown",
function(){X=[];qa=la=0});W.bind("pointerMove",function(T,ba,Y,Q){if($){X[X.length]={ticks:(new Date).getTime(),x:Q.x,y:Q.y};W.trigger("pan",Q.x,Q.y)}la+=Q.x?Q.x:0;qa+=Q.y?Q.y:0});W.bind("pointerUp",function(T,ba,Y){if(Math.abs(la)>20||Math.abs(qa)>20){if($){Y=X.length;var Q,N;ba=0;for(N=X.length;--N>1&&ba<50;)ba+=X[N].ticks-X[N-1].ticks;if(Y-N>1){T=X[Y-1].x-X[N].x;Q=X[Y-1].y-X[N].y;N=Math.sqrt(T*T+Q*Q)|0;if(N>15){T=X[Y-1].x-X[0].x;Q=X[Y-1].y-X[0].y;N=Math.sqrt(T*T+Q*Q)|0;Y=Math.asin(Q/N);ba=N*500/
ba|0;ba=ba>300?300:ba;fa(Math.cos(T>0?Y:Math.PI-Y)*ba,Math.sin(Y)*ba,COG.easing("sine.out"),500)}}}}else W.trigger("tap",ba,Y)});return pa};l("pointer",{handler:function(s,q,B){function fa(x){if(x.pageX&&x.pageY)return k(x.pageX,x.pageY);else{var L=document.documentElement,Z=document.body;return k(x.clientX+(L&&L.scrollLeft||Z&&Z.scrollLeft||0)-(L&&L.clientLeft||Z&&Z.clientLeft||0),x.clientY+(L&&L.scrollTop||Z&&Z.scrollTop||0)-(L&&L.clientTop||Z&&Z.clientTop||0))}}function W(x){if(M(x,s))if(T=la(x)){var L=
fa(x);s.style.cursor="move";E(x);N=L.x;aa=L.y;ba=k(N,aa);q.triggerCustom("pointerDown",w("mouse",x),ba,m(ba,r(s)))}}function $(x){var L=fa(x);Y=L.x;Q=L.y;if(M(x,s))qa(x,T?"pointerMove":"pointerHover")}function ia(x){if(T&&la(x)){T=false;if(M(x,s)){s.style.cursor="default";qa(x,"pointerUp")}}}function X(x){if(M(x,s)){var L;x=x||window.event;if(x.detail)L=x.axis===2?-x.detail*pa:0;else{L=x.wheelDeltaY?x.wheelDeltaY:x.wheelDelta;if(window.opera)L=-L}if(L!==0){var Z=k(Y,Q);q.triggerCustom("zoom",w("mouse",
x),Z,m(Z,r(s)),L/Ba,"wheel");E(x);x.returnValue=false}}}function la(x){x=x||window.event;return(x.which||x.button)==1}function qa(x,L,Z,ta,ra){Z=typeof Z!="undefined"?Z:Y;ta=typeof ta!="undefined"?ta:Q;var K=Z-N,U=ta-aa,R=k(Z,ta);q.triggerCustom(L,w("mouse",x),R,m(R,r(s)),k(K,U));if(typeof ra=="undefined"||ra){N=Z;aa=ta}}B=COG.extend({},B);var pa=120,Ba=pa*8,T=false,ba,Y,Q,N,aa;B.binder("mousedown",W,false);B.binder("mousemove",$,false);B.binder("mouseup",ia,false);B.binder("dblclick",function(x){COG.info("captured double click");
if(M(x,s)){var L=fa(x);q.triggerCustom("doubleTap",w("mouse",x),L,m(L,r(s)))}},false);B.binder("mousewheel",X,document);B.binder("DOMMouseScroll",X,document);return{unbind:function(){B.unbinder("mousedown",W,false);B.unbinder("mousemove",$,false);B.unbinder("mouseup",ia,false);B.unbinder("mousewheel",X,document);B.unbinder("DOMMouseScroll",X,document)}}},checks:{touch:false}});l("pointer",{handler:function(s,q,B){function fa(K){if(K.count<2)return 0;var U=K.x-K.next.x;K=K.y-K.next.y;return~~Math.sqrt(U*
U+K*K)}function W(K,U,R){U=U?U:0;R=R?R:0;for(var ua={x:K.x-U,y:K.y-R,id:K.id,count:K.count},xa=ua;K.next;){K=K.next;xa=xa.next={x:K.x-U,y:K.y-R,id:K.id}}return ua}function $(K,U){var R=K[U?U:"touches"],ua,xa;if(R.length===0)return null;xa=ua={x:R[0].pageX,y:R[0].pageY,id:R[0].identifier,count:R.length};for(var Ca=1,Wa=R.length;Ca<Wa;Ca++)xa=xa.next={x:R[Ca].pageX,y:R[Ca].pageY,id:R[Ca].identifier};return ua}function ia(K){if(M(K,s)){Q=r(s);var U=$(K,"changedTouches"),R=W(U,Q.left,Q.top);if(!aa){N=
T;q.triggerCustom("pointerDown",w("touch",K),U,R)}ta&&q.triggerCustom("pointerDownMulti",w("touch",K),U,R);aa=$(K);if(aa.count>1)L=fa(aa);ra=1;Z=W(aa)}}function X(K){if(M(K,s)){K.preventDefault();x=$(K);if(N==T)N=Math.abs(aa.x-x.x)>pa||Math.abs(aa.y-x.y)>pa?Ba:T;if(N!=T){N=x.count>1?Y:ba;if(N==Y)if(aa.count===1){aa=W(x);L=fa(aa)}else{var U=fa(x);if(Math.abs(L-U)<qa)N=ba;else{var R;R=x.x;var ua=x.next.x,xa=x.y,Ca=x.next.y,Wa=xa<Ca?xa:Ca;R={x:(R<ua?R:ua)+(Math.abs(R-ua)>>1),y:Wa+(Math.abs(xa-Ca)>>1)};
U=U/L;ua=U-ra;q.triggerCustom("zoom",w("touch",K),R,m(R,Q),ua,"pinch");ra=U}}N==ba&&q.triggerCustom("pointerMove",w("touch",K),x,W(x,Q.left,Q.top),k(x.x-Z.x,x.y-Z.y));ta&&q.triggerCustom("pointerMoveMulti",w("touch",K),x,W(x,Q.left,Q.top))}Z=W(x)}}function la(K){if(M(K,s)){var U=$(K,"changedTouches"),R=W(U,Q.left,Q.top);x=$(K);if(!x){q.triggerCustom("pointerUp",w("touch",K),U,R);aa=null}ta&&q.triggerCustom("pointerUpMulti",w("touch",K),U,R)}}B=COG.extend({detailed:false,inertia:false},B);var qa=20,
pa=7,Ba=0,T=1,ba=2,Y=3,Q,N,aa,x,L,Z,ta=B.detailed,ra=1;B.binder("touchstart",ia,false);B.binder("touchmove",X,false);B.binder("touchend",la,false);COG.info("initialized touch handler");return{unbind:function(){B.unbinder("touchstart",ia,false);B.unbinder("touchmove",X,false);B.unbinder("touchend",la,false)}}},checks:{touch:true}});return{register:l,watch:function(s,q,B){q=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},q);capabilities=COG.extend({touch:"ontouchstart"in
window},B);if(!q.observable){COG.info("creating observable");q.observable=COG.observable({});globalOpts=q}q.binder=q.isIE?u:H(q.bindToBody);q.unbinder=q.isIE?y:V(q.bindToBody);B=q.types;for(var fa=capabilities,W=[],$=v.length;$--;){var ia=v[$],X=!B||B.indexOf(ia.type)>=0,la=true;for(var qa in ia.checks){var pa=ia.checks[qa];COG.info("checking "+qa+" capability. require: "+pa+", capability = "+fa[qa]);la=la&&pa===fa[qa]}if(X&&la)W[W.length]=ia.handler}return new C(s,W,q)}}}();var T5={};
(function(H){function V(){return(new Date).getTime()}function u(b,e){e=Wa.call(e);if(e=="finite")return!Ca[xa](+b);return e=="null"&&b===null||e==typeof b||e=="object"&&b===Object(b)||e=="array"&&Array.isArray&&Array.isArray(b)||Sb.call(b).slice(8,-1).toLowerCase()==e}function y(b){b=b||(new Date).getTime();for(var e=0;e<Ta.length;){var f=Ta[e],d=Oa[f],a=Oa[f].image&&(ab||Oa[f].image.complete&&Oa[f].image.width>0),c=b-d.start;c=a||c>=Tb;if(a){a=d.callbacks;vb[f]=d.image;for(var g=0;g<a.length;g++)a[g](d.image,
true)}if(c){Ta.splice(e,1);delete Oa[f]}else e++}Ta.length>0&&animFrame(y)}function k(b,e){var f=b&&e?vb[b]:null;if(f&&f&&(ab||f.complete&&f.width>0))e(f);else{if(f=Oa[b])f.callbacks.push(e);else{f=new Image;f.id="_ldimg"+ ++Ub;Oa[b]={start:(new Date).getTime(),image:f,callbacks:[e]};f.src=b;Ta[Ta.length]=b}animFrame(y)}}function l(b,e,f,d,a,c){this.x=b;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+e;this.loaded=false;this.image=null}
function r(b){function e(c){var g=b[c];u(g,sa)||d.push(function(h){h[c]=g})}function f(){d=[];for(var c in b)e(c)}b=COG.extend({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},b);var d=[],a={applyToContext:function(c){for(var g=d.length;g--;)d[g](c)},update:function(c,g){b[c]=g;f()}};f();return a}function w(){for(var b=0,e=arguments.length;e--;){var f=Vb[arguments[e].toUpperCase()];
if(f)b|=f}return b}function M(b){b=b?b:(new Date).getTime();if(b-wb>Wb){for(var e=Xa.splice(0),f=e.length;f--;)e[f](b);wb=b}Xa.length&&animFrame(M)}function m(b){var e=Xa.length==0;Xa[Xa.length]=b;e&&animFrame(M)}function E(b,e,f,d,a){a=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),g=b[e],h=e=="translate",i=a.autoInvalidate,j=f.length&&d.length&&f.length==d.length?f.length:0,o=Array(j),I=Array(j),F=COG.easing(a.easing),z=
a.duration,J=a.progress,n=function(A){var G=A-c;A=c+z<=A;for(var O=b.layer?b.layer.view:null,P,ga=j;ga--;){P=F(G,f[ga],o[ga],z);I[ga]=h?P|0:P}g.apply(b,I);i&&O&&O.invalidate();if(J){G=[].concat(A?d:I);G.unshift(A);J.apply(b,G)}if(A){b.animations--;g.apply(b,d);a.complete&&a.complete.apply(b,d)}else m(n)};if(g&&g.apply&&j>0){z=z?z:DEFAULT_DURATION;for(e=j;e--;)o[e]=d[e]-f[e];b.animations++;m(n)}}function v(b){ya.call(this,b)}function C(b,e){e=COG.extend({simplify:false,typeName:"Poly"},e);var f=e.simplify;
ya.call(this,e);COG.extend(this,{resync:function(d){var a,c,g,h,i,j;d.syncXY(b);j=this.points=ha.floor(f?ha.simplify(b):b);for(var o=j.length;o--;){d=j[o].x;a=j[o].y;h=u(h,sa)||d<h?d:h;i=u(i,sa)||a<i?a:i;c=u(c,sa)||d>c?d:c;g=u(g,sa)||a>g?a:g}this.updateBounds(Da.init(h,i,c,g),true)}});this.haveData=b&&b.length>=2}function s(b,e){e.fill=false;C.call(this,b,e)}function q(b){function e(){var j,o;if(h&&h.width>0){if(!this.centerOffset)this.centerOffset=ha.init(-h.width>>1,-h.height>>1);j=this.xy.x+this.centerOffset.x;
o=this.xy.y+this.centerOffset.y;this.updateBounds(Da.init(j,o,j+h.width,o+h.height),false)}}function f(j){if(this.imageUrl=j){var o=this;k(this.imageUrl,function(I,F){h=I;if(F){var z=i.layer?i.layer.view:null;z&&z.invalidate()}e.apply(o)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var d=null,a=ya.prototype.resync,c=0,g=0,h=b.image;ya.call(this,b);var i=COG.extend(this,{changeImage:f,drag:function(j,o,I,F){d||(d=ha.init(j.startX-this.xy.x,j.startY-this.xy.y));this.xy.x=
o-d.x;this.xy.y=I-d.y;if(F){d=null;if(this.layer)if(j=this.layer.view){j.syncXY([this.xy],true);j.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||e(this,h);return{image:h,x:this.xy.x+c,y:this.xy.y+g}},resync:function(j){a.call(this,j);e.call(this)}});h||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;g=this.centerOffset.y}}function B(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=ha.invert(b.imageAnchor);q.call(this,
b)}function fa(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);ya.call(this,b)}function W(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:w("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;COG.observable(COG.extend(this,b))}function $(b){for(var e=null,f=1;!e&&f<arguments.length;f++)e=la(b,arguments[f]);e=e?e:la(b);if(!e)throw Error("Unable to find GEO engine with "+b+" capability");return e}function ia(b){b=parseFloat(b)*
Ea;b=ra(b);var e=bb*b;return Z((1+b)/(1-b)*x((1-e)/(1+e),bb))/2}function X(b){return T/(256<<b)}function la(b,e){var f=null;for(var d in Pa)if(e){if(d==e&&Pa[d][b]){f=Pa[d];break}}else if(Pa[d][b]){f=Pa[d];break}return f}function qa(b,e){var f=bb*ra(b);return ba-2*R(e*x((1-f)/(1+f),bb/2))}function pa(b,e,f,d){e=Ba(e);b.add(d(e,f));return e.length}function Ba(b){var e=b?b.length:0,f=Array(e);for(e=e;e--;)f[e]=ea.init(b[e][1],b[e][0]);return ea.vectorize(f,xb)}window.animFrame=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var T=Math.PI*2,ba=Math.PI/2,Y=Math.abs,Q=Math.ceil,N=Math.min,aa=Math.max,x=Math.pow,L=Math.sqrt,Z=Math.log,ta=Math.round,ra=Math.sin,K=Math.asin,U=Math.cos,R=Math.atan,ua=Math.atan2,xa="hasOwnProperty",Ca={NaN:1,Infinity:1,"-Infinity":1},Wa=String.prototype.toLowerCase,Sb=Object.prototype.toString,
sa="undefined",yb="number",Xb=typeof G_vmlCanvasManager!=sa,ab=typeof FlashCanvas!=sa,ha=function(){function b(d,a){return f(d.x-a.x,d.y-a.y)}function e(d,a){a=a||d.length;if(a<=1)return null;for(var c=Array(a-1),g=Array(a-1),h=0,i,j=0;j<a-1;j++){i=b(d[j],d[j+1]);c[j]=L(i.x*i.x+i.y*i.y);g[j]=h+=c[j]}return{edges:c,accrued:g,tota:h}}function f(d,a){return{x:d||0,y:a||0}}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,a=0,c=arguments.length;c--;){d+=arguments[c].x;
a+=arguments[c].y}return f(d,a)},absSize:function(d){return aa(Y(d.x),Y(d.y))},copy:function(d){return d?f(d.x,d.y):null},diff:b,distance:function(d,a){return e(d,a).total},edges:e,equals:function(d,a){return d.x===a.x&&d.y===a.y},extendBy:function(d,a,c){var g=U(a)*c|0;a=ra(a)*c|0;return f(d.x-g,d.y-a)},floor:function(d){for(var a=Array(d.length),c=d.length;c--;)a[c]=f(~~d[c].x,~~d[c].y);return a},getRect:function(d){for(var a,c,g,h,i=d.length;i--;){var j=d[i];a=u(a,sa)||j.x<a?j.x:a;c=u(c,sa)||j.y<
c?j.y:c;g=u(g,sa)||j.x>g?j.x:g;h=u(h,sa)||j.y>h?j.y:h}return Da.init(a,c,g,h)},init:f,invert:function(d){return f(-d.x,-d.y)},min:function(d,a){return f(d.x<a.x?d.x:a.x,d.y<a.y?d.y:a.y)},max:function(d,a){return f(d.x>a.x?d.x:a.x,d.y>a.y?d.y:a.y)},offset:function(d,a,c){return f(d.x+a,d.y+(c||a))},scale:function(d,a){return f(d.x/a|0,d.y/a|0)},simplify:function(d,a){if(!d)return null;a=a?a:ha.VECTOR_SIMPLIFICATION;for(var c=[],g=null,h=d.length;h--;){var i=d[h];if(include=!g||h===0||Y(i.x-g.x)+Y(i.y-
g.y)>a){c.unshift(i);g=i}}return c},theta:function(d,a,c){c=K((d.y-a.y)/c);return d.x>a.x?c:Math.PI-c},toString:function(d){return d?d.x+", "+d.y:""}}}(),hb=function(){return{dotProduct:function(b,e){return b.x*e.x+b.y*e.y}}}(),Da=function(){function b(f){return e(f.x,f.y,f.x2,f.y2)}function e(f,d,a,c){f=f||0;d=d||0;a=a||f;c=c||d;return{x:f,y:d,x2:a,y2:c,w:a-f,h:c-d}}return{buffer:function(f,d,a){return ha.init(f.x-d,f.y-(a||d),f.x+d,f.y+(a||d))},center:function(f){return ha.init(f.x+(f.w>>1),f.y+
(f.h>>1))},copy:b,diagonalSize:function(f){return L(f.w*f.w+f.h*f.h)},fromCenter:function(f,d,a,c){a=a>>1;c=c>>1;return e(f-a,d-c,f+a,d+c)},init:e,intersect:function(f,d){var a=aa(f.x,d.x),c=aa(f.y,d.y),g=N(f.x2,d.x2),h=N(f.y2,d.y2);a=e(a,c,g,h);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,d){if(f.w===0||f.h===0)return b(d);else if(d.w===0||d.h===0)return b(f);else{var a=N(f.x,d.x),c=N(f.y,d.y),g=aa(f.x2,d.x2),h=aa(f.y2,d.y2);
a=e(a,c,g,h);return a.w>0&&a.h>0?a:null}}}}(),ib=function(){return{getAspectRatio:function(b){return b.height!==0?b.width/b.height:1},getCenter:function(b){return ha.init(b.width>>1,b.height>>1)},getSize:function(b){return L(x(b.width,2)+x(b.height,2))},init:function(b,e){b=b?b:0;return{width:b,height:e?e:b}}}}();Hits=function(){return{diffHits:function(b,e){var f=[],d={},a;for(a=e.length;a--;)d[e[a].target.id]=true;for(a=b.length;a--;)d[b[a].target.id]||(f[f.length]=b[a]);return f},init:function(b,
e,f,d){return{type:b,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:f}},initHit:function(b,e,f){return{type:b,target:e,drag:f}},triggerEvent:function(b,e,f,d){e.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},d?d:b.elements,b.absXY,b.relXY,ha.init(b.x,b.y))}}}();var Yb=T5.newCanvas=function(b,e){var f=document.createElement("canvas");f.width=b?b:0;f.height=e?e:0;if(ab){document.body.appendChild(f);FlashCanvas.initElement(f)}Xb&&G_vmlCanvasManager.initElement(f);return f},zb=function(){var b={};return{init:function(e,
f){var d=b[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(f)},register:function(e,f){b[e]=f}}}(),jb=function(b){function e(a,c){var g=f[a],h;g||(g=f[a]=[]);(h=g[c])||(h=g[c]=[]);return h}b=b||64;var f=[],d={};return{insert:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,j=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id||COG.objId("spatial");d[g]=c;for(c=h;c<=j;c++)for(h=i;h<=a;h++)e(c,h).push(g)},remove:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,j=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;
delete d[g];for(c=h;c<=j;c++)for(h=i;h<=a;h++){var o=e(c,h),I=o.indexOf(g);I>=0&&o.splice(I,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,h=(a.y+a.h)/b|0,i=[],j=[];for(a=a.x/b|0;a<=g;a++)for(var o=c;o<=h;o++)i=i.concat(e(a,o));i.sort();for(c=i.length;c--;){g=i[c];if(h=d[g])j[j.length]=h;for(;c>0&&i[c-1]==g;)c--}return j}}},Tb=3E4,vb={},Ub=0;(new Date).getTime();var Oa={},Ta=[];l.prototype={constructor:l,load:function(b){var e=this;k(this.url,function(f){e.loaded=true;e.image=f;b&&b()})}};
var Zb=function(){return{applyStyle:function(){},applyTransform:function(b,e,f){return{restore:null,x:e,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return ha.init(0,0)},getViewport:function(){},hitTest:function(){return false},prepare:function(){},render:function(){},reset:function(){}}},Ab={},Qa=H.registerRenderer=function(b,e){Ab[b]=e},Bb=H.attachRenderer=function(b,e,f,d){b=b.split("/");for(var a=new Zb(e,f,d),c=0;c<b.length;c++){var g=Ab[b[c]];
if(g)a=new g(e,f,d,a)}return a};Qa("canvas",function(b,e,f,d){function a(n,A,G,O){var P=false;if(A)P=i.isPointInPath(F?A.x-j:A.relXY.x,F?A.y-o:A.relXY.y);return{draw:O||J,viewport:n,state:G,hit:P,vpX:j,vpY:o,context:i}}f=COG.extend({},f);var c,g,h,i,j=0,o=0,I=null,F=CANI.canvas.pipTransformed,z={},J=function(){this.fill&&i.fill();this.stroke&&i.stroke()};(function(){if(e){var n=e.tagName=="CANVAS",A=n?e.parentNode:e;c=b.width=A.offsetWidth;g=b.height=A.offsetHeight;if(n){h=e;h.width=c;h.height=g;
ab&&FlashCanvas.initElement(h)}else{h=Yb(c,g);h.style.cssText="position: absolute; z-index: 1;";e.appendChild(h)}i=null}})();return COG.extend(d,{interactTarget:h,applyStyle:function(n){var A=$b(n),G=A&&i&&i.canvas?z[i.canvas.id]:null;if(A){z[i.canvas.id]=n;A.applyToContext(i);return G}},applyTransform:function(n){if(n.translateX!==0||n.translateY!==0||n.scaling!==1||n.rotation!==0){i.save();I={undo:function(){i.restore();I=null},x:n.xy.x,y:n.xy.y};i.translate(n.xy.x-j+n.translateX,n.xy.y-o+n.translateY);
n.rotation!==0&&i.rotate(n.rotation);n.scaling!==1&&i.scale(n.scaling,n.scaling)}return I},drawTiles:function(n,A){for(var G,O,P=j-256,ga=o-256,za=n.x2,na=n.y2,Fa=A.length;Fa--;){G=A[Fa];if(O=G.x>=P&&G.x<=za&&G.y>=ga&&G.y<=na)G.loaded?i.drawImage(G.image,G.x-j,G.y-o):G.load(b.invalidate)}},hitTest:function(n,A,G){return i.isPointInPath(A,G)},prepare:function(n,A){var G,O=false;b.getOffset();var P=b.getScaleFactor();if(i)i.restore();else i=h.getContext("2d");for(G=n.length;G--;)O=O||n[G].clip;j=A.x;
o=A.y;if(i){O||i.clearRect(0,0,c,g);i.save();i.scale(P,P)}i.globalCompositeOperation="source-over";return i},prepArc:function(n,A,G,O){i.beginPath();i.arc(n.xy.x-(I?I.x:j),n.xy.y-(I?I.y:o),n.size>>1,n.startAngle,n.endAngle,false);return a(A,G,O)},prepImage:function(n,A,G,O,P){var ga=(P.x||n.xy.x)-(I?I.x:j),za=(P.y||n.xy.y)-(I?I.y:o),na=P.image||n.image;if(na){i.beginPath();i.rect(ga,za,P.width||na.width,P.height||na.height);return a(A,G,O,function(){i.drawImage(na,ga,za,P.width||na.width,P.height||
na.height)})}},prepPoly:function(n,A,G,O,P){var ga=true;n=P.points||n.points;P=I?I.x:j;var za=I?I.y:o;i.beginPath();for(var na=n.length;na--;){var Fa=n[na].x-P,cb=n[na].y-za;if(ga){i.moveTo(Fa,cb);ga=false}else i.lineTo(Fa,cb)}return a(A,G,O)},getContext:function(){return i},getDimensions:function(){return{width:c,height:g}},getOffset:function(){return ha.init(j,o)}})});Qa("dom",function(b,e,f,d){var a=typeof e.style["-webkit-transform"]!="undefined",c=null;c=document.createElement("div");c.id=COG.objId("domImages");
c.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",e.offsetWidth,e.offsetHeight);e.insertBefore(c,d.interactTarget);return COG.extend(d,{drawTiles:function(g,h){for(var i,j,o,I=g.x,F=g.y,z=I-256,J=F-256,n=I+g.w,A=F+g.h,G,O,P=h.length;P--;){i=h[P];j=i.image;o=i.x>=z&&i.x<=n&&i.y>=J&&i.y<=A;G=i.x-I;O=i.y-F;if(!j){j=i.image=new Image;j.src=i.url;c.appendChild(j);j.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;"}if(a)j.style["-webkit-transform"]=
"translate3d("+G+"px, "+O+"px, 0px)";else{j.style.left=G+"px";j.style.top=O+"px"}j.style.display=o?"block":"none"}},reset:function(){c.innerHTML=""}})});var Cb={},ac=H.defineStyle=function(b,e){Cb[b]=r(e);return b},Db=H.defineStyles=function(b){for(var e in b)ac(e,b[e])},$b=H.getStyle=function(b){return Cb[b]};H.loadStyles=function(b){COG.jsonp(b,function(e){Db(e)})};Db({basic:{lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"},
waypointsHover:{lineWidth:4,strokeStyle:"#f00",fillStyle:"#FFF"}});var Vb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Lb=function(b){function e(p,t,D){Ga||Fa(ja-t,ka-D)}function f(p,t,D,S){ga(N(aa(ma+x(2,S)-1,0.5),2))}function d(){var p=Z(ma)/Math.LN2|0;if(p!==0){ma=x(2,p);za(Ya+p,bc,cc)}redraw=true}function a(p,t){var D=da.getViewport(),S=1/ma;return ha.init(D?D.x+p*S:p,D?D.y+t*S:t)}function c(p,t,D){na("doubleTap",t,D,a(D.x,D.y));b.scalable&&ga(2,a(D.x,D.y),b.zoomEasing,null,b.zoomDuration)}
function g(p,t,D){Ga=null;A("down",t,D)}function h(p,t,D){A("hover",t,D)}function i(p,t,D){J(t,D,false)}function j(p,t,D){J(t,D,true)}function o(){clearTimeout(Eb);Eb=setTimeout(function(){renderer.checkSize()},250)}function I(p,t,D){A("tap",t,D);na("tap",t,D,a(D.x,D.y,true))}function F(p,t){t.id=p;t.added=V();t.view=da;t.trigger("parentChange",da,db,dc);oa.push(t);oa.sort(function(D,S){var ca=S.zindex-D.zindex;if(ca===0)ca=S.added-D.added;return ca});Ia=oa.length;return t}function z(){va&&va.unbind();
if(renderer){va=INTERACT.watch(renderer.interactTarget);b.pannable&&va.pannable().bind("pan",e);if(b.scalable){va.bind("zoom",f);va.bind("doubleTap",c)}va.bind("pointerDown",g);va.bind("pointerMove",i);va.bind("pointerUp",j);b.captureHover&&va.bind("pointerHover",h);va.bind("tap",I)}}function J(p,t,D){if(Ga){p=a(t.x,t.y);if(Ga.drag.call(Ga.target,Ga,p.x,p.y,D))redraw=true;if(D)Ga=null}}function n(p){var t,D,S=false;p=p||(new Date).getTime();if(S=p-Fb>ec){var ca=Y(ja-kb),Aa=Y(ka-lb);t=ja!==mb||ka!==
nb;D=ma!==Gb;if(t||D)Ra++;if(ca>=Hb||Aa>=Hb)P();da.trigger("enterFrame",p,fc++);Fb=p}if(S&&Ra){Ma=Ib|(ma!==1?Jb:0)|(t?ob:0)|(pb?Kb:0);qb=(t=(Ma&(Jb|ob))!==0)&&(Ma&Kb)===0;t=O();if(renderer.prepare(oa,t,Ma,p,wa)){Ra=0;for(ii=Ia;ii--;){D=oa[ii];if((Ma&D.validStates)!==0){S=D.style?renderer.applyStyle(D.style):null;D.draw(renderer,t,Ma,da,p,wa);S&&renderer.applyStyle(S)}}renderer.render(t);mb=ja;nb=ka;Gb=ma}if(wa){p=wa?wa.elements:[];if(Za&&Za.type==="hover"){t=Hits.diffHits(Za.elements,p);t.length>
0&&Hits.triggerEvent(Za,da,"Out",t)}if(p.length>0){D=wa.x;S=wa.y;for(t=p.length;t--;){ca=p[t];Aa=D;var Ja=S,Ha=ca&&ca.drag&&(!ca.canDrag||ca.canDrag(ca,Aa,Ja));if(Ha){Ga=ca;Ga.startX=Aa;Ga.startY=Ja}if(Ha)break}Hits.triggerEvent(wa,da)}Za=p.length>0?COG.extend({},wa):null;wa=null}}animFrame(n)}function A(p,t,D){wa=Hits.init(p,t,D,a(D.x,D.y,true));for(p=Ia;p--;)rb=rb||(oa[p].hitGuess?oa[p].hitGuess(wa.x,wa.y,Ma,da):false);rb&&Ra++}function G(){Ra++}function O(){var p;p=ma!==1?Da.fromCenter(ja+(da.width>>
1),ka+(da.height>>1),da.width/ma|0,da.height/ma|0):Da.init(ja,ka,ja+da.width,ka+da.height);p.scaleFactor=ma;return p}function P(){var p=O();if(p){if(Ua||Va)if(p){var t=eb?ja+(p.w>>1):ja,D=fb?ka+(p.h>>1):ka,S=p.w,ca=p.h;if(Ua&&Ua>S)if(t+S>Ua)ja=eb?ja:Ua-S;else if(t<0)ja=eb?ja:0;if(Va&&Va>ca)if(D+ca>Va)ka=fb?ka:Va-ca;else if(D<0)ka=fb?ka:0}kb=ja;lb=ka;na("refresh",da,p);Ra++}}function ga(p,t,D,S,ca){if(D)COG.tweenValue(ma,p,D,ca,function(Aa,Ja){ma=Aa;if(Ja){var Ha=ta(Z(ma)/Math.LN2);ma=x(2,Ha);S&&S()}d()});
else{ma=p;d()}return da}function za(p,t,D){p=aa(b.minZoom,N(b.maxZoom,p));if(p!==Ya){var S=x(2,p-Ya),ca=da.width>>1,Aa=da.height>>1,Ja=ca/S|0,Ha=Aa/S|0;Ya=p;Fa(((t?t:ja+ca)-Ja)*S,((D?D:ka+Aa)-Ha)*S);mb=ja;nb=ka;lb=kb=0;na("zoomLevelChange",p);ma=1;renderer.reset();P()}}function na(){for(var p=da.trigger.apply(null,arguments).cancel,t=oa.length;t--;)p=oa[t].trigger.apply(null,arguments).cancel||p;return!p}function Fa(p,t,D,S,ca){function Aa(){Ja+=1;if(Ja>=2){pb=false;ca&&ca()}}var Ja=0;if(D){if((Ma&
ob)===0){COG.tweenValue(ja,p,D,S,function(Ha,sb){ja=Ha|0;(sb?Aa:G)();return!qb});COG.tweenValue(ka,t,D,S,function(Ha,sb){ka=Ha|0;(sb?Aa:G)();return!qb});pb=true}}else{ja=p|0;ka=t|0;ca&&ca()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,
minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},b);var cb={},oa=[],Ia=0,db=document.getElementById(b.container),Ga=null,fc=0,dc=null,gc=u(window.attachEvent,"function"),rb=false,Hb=b.refreshDistance,ja=0,ka=0,kb=0,lb=0,mb=0,nb=0,Ua=null,Va=null,eb=false,fb=false,wa=null,qb=false,Za=null,Eb=0,ma=1,Gb=1,Fb=0,va=null,pb=false,ec=1E3/b.fps|0,Ra=0,bc,cc,Ya=b.zoomLevel,Ib=w("ACTIVE"),ob=w("PAN"),Jb=w("ZOOM"),Kb=w("ANIMATING"),Ma=Ib,da={id:b.id,detach:function(){va&&
va.unbind()},eachLayer:function(p){for(var t=Ia;t--;)p(oa[t])},getLayer:function(p){for(var t=0;t<Ia;t++)if(oa[t].id===p)return oa[t];return null},getZoomLevel:function(){return Ya},setLayer:function(p,t){for(var D=0;D<Ia;D++)if(oa[D].id===p){oa.splice(D,1);break}t&&F(p,t);P();return t},invalidate:G,refresh:P,resetScale:function(){ma=1},scale:ga,setZoomLevel:za,syncXY:function(){},triggerAll:na,removeLayer:function(p){a:{for(var t=Ia;t--;)if(oa[t].id===p){p=t;break a}p=-1}if(p>=0&&p<Ia){da.trigger("layerRemoved",
oa[p]);oa.splice(p,1);Ra++}Ia=oa.length},getOffset:function(){return ha.init(ja,ka)},getRenderer:function(){return renderer},getScaleFactor:function(){return ma},setMaxOffset:function(p,t,D,S){Ua=p;Va=t;eb=D;fb=S},getViewport:O,updateOffset:Fa,pan:function(p,t,D,S,ca){Fa(ja+p,ka+t,D,S,ca)}};COG.observable(da);da.bind("resync",function(){});COG.configurable(da,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(b,null,{container:function(p,
t){db=document.getElementById(t);renderer=Bb(b.renderer,da,db);z()},inertia:z,captureHover:z,scalable:z,pannable:z}),true);CANI.init(function(p){da.markers=F("markers",new gb({zindex:20}));cb=p;renderer=Bb(b.renderer,da,db);z();gc?window.attachEvent("onresize",o):window.addEventListener("resize",o,false)});animFrame(n);return da},ya=function(b){b=COG.extend({style:null,xy:null,size:null,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=
COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};ya.prototype={constructor:ya,animate:function(b,e,f,d){E(this,b,e,f,d)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds(Da.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=b},translate:function(b,
e){this.translateX=b;this.translateY=e},updateBounds:function(b,e){this.bounds=b;if(e)this.xy=Da.center(this.bounds)}};var Wb=1E3/60|0,Xa=[],wb=0;v.prototype=COG.extend(ya.prototype,{constructor:v,prep:function(b){return b.arc(this.xy.x,this.xy.y,this.size>>1,0,Math.PI*2)}});C.prototype=COG.extend({},ya.prototype,{constructor:C});s.prototype=COG.extend({},C.prototype);q.prototype=COG.extend({},ya.prototype,{constructor:q});B.prototype=COG.extend({},q.prototype,{constructor:B});fa.prototype=COG.extend(ya.prototype,
{constructor:fa});W.prototype={constructor:W,clip:null,cycle:function(){},draw:function(){},hitGuess:null};Qa=function(b,e){function f(j,o){if(a&&h){g=a.search(h);h=null}var I=o&&o.getZoomLevel?o.getZoomLevel():0;c[I]||(c[I]=new jb);a=c[I]}e=COG.extend({imageLoadArgs:{}},e);var d=b?zb.init(b,e).run:null,a=null,c=[],g=[],h=null,i=COG.extend(new W(e),{draw:function(j,o){j.drawTiles(o,a.search(o))}});i.bind("refresh",function(j,o,I){var F=(new Date).getTime();if(a){g=h?a.search(h):[];d(o,I,a,function(){o.invalidate();
COG.info("GEN COMPLETED IN "+((new Date).getTime()-F)+" ms")});h=Da.copy(I)}});i.bind("parentChange",f);i.bind("resync",f);return i};var Mb=function(b){function e(h){clearTimeout(c);c=setTimeout(function(){d.sort(function(i,j){if(j.xy&&i.xy){var o=j.xy.y-i.xy.y;return o!=0?o:j.xy.x-i.xy.x}});h&&h.invalidate()},50)}function f(h,i){a=new jb;for(var j=d.length;j--;){var o=d[j];o.resync(i);o.bounds&&a.insert(o.bounds,o)}}b=COG.extend({zindex:10},b);var d=[],a=null,c=0,g=COG.extend(new W(b),{add:function(h,
i){if(h){h.layer=g;if(i)d.unshift(h);else d[d.length]=h;var j=g.view;if(j){h.resync(j);a&&h.bounds&&a.insert(h.bounds,h);e(j)}}},clear:function(){a=new jb;d=[]},draw:function(h,i,j,o,I,F){o={};I=a&&i?a.search(i):[];for(var z=I.length;z--;){var J=I[z],n=J.style||g.style,A,G=h.applyTransform(J),O=J.getProps?J.getProps(h,j):o;if(O=(A=h["prep"+J.typeName])?A.call(h,J,i,F,j,O):null){if(O.hit){F.elements.push(Hits.initHit(J.type,J,J.draggable?J.drag:null));A=F.type+"Style";n=J[A]||g[A]||n}n=n?h.applyStyle(n):
null;(A=J.draw||O.draw)&&A.call(J,O);n&&h.applyStyle(n)}G&&G.undo&&G.undo()}},find:function(){return[].concat(d)},hitGuess:function(h,i){return a&&a.search({x:h-10,y:i-10,w:20,h:20}).length>0}});g.bind("parentChange",f);g.bind("resync",f);return g},gb=function(b){return new Mb(b)};COG.extend(H,{ex:COG.extend,is:u,ticks:V,userMessage:function(b,e,f){H.trigger("userMessage",b,e,f)},XY:ha,XYRect:Da,Dimensions:ib,Vector:hb,Hits:Hits,Generator:zb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:l,TileLayer:Qa,
getImage:k,viewState:w,View:Lb,ViewLayer:W,ImageLayer:Qa,Drawable:ya,Marker:v,Poly:C,Line:s,Arc:fa,ImageDrawable:q,ImageMarker:B,DrawLayer:Mb,ShapeLayer:gb});COG.observable(H);var tb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ea=Math.PI/180,Na=180/Math.PI,ub=ba,Nb=-ub,Ob=T,hc=-Ob,bb=0.08181919084262157,$a=null,Pb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ea=function(){function b(a){return a?
f(a.lat,a.lon):null}function e(a){return!a||a.lat===0&&a.lon===0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function d(a){if(a)if(u(a.lat,yb))return b(a);else{if(a.split)for(var c=[" ",","],g=0;g<c.length;g++){var h=a.split(c[g]);if(h.length===2)return f(h[0],h[1])}}else return f();return null}return{calcDistance:function(a,c){if(e(a)||e(c))return 0;var g=(c.lat-a.lat)*Ea>>1,h=(c.lon-a.lon)*Ea>>1;g=ra(g)*ra(g)+U(a.lat*Ea)*U(c.lat*Ea)*ra(h)*ra(h);return 6371*2*ua(L(g),L(1-
g))},copy:b,empty:e,equal:function(a,c){return a&&c&&a.lat==c.lat&&a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=x(Math.E,-c),h=ba-2*R(g),i=qa(h,g),j=0;j<12&&Y(h-i)>1.0E-7;){h=i;i=qa(h,g);j++}return f(i*Na,a%360*Na)},generalize:function(a,c,g){var h=a.length,i=[],j=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+c.length+" positions");for(var o=h;o--;)if(o===0)i.unshift(a[o]);else{var I=!j||ea.inArray(a[o],c)?g:ea.calcDistance(j,a[o]);if(a[o]&&I>=g){i.unshift(a[o]);
j=a[o]}}COG.info("generalized "+h+" positions into "+i.length+" positions");return i},inArray:function(a,c){for(var g=ea.equal,h=c.length;h--;)if(g(a,c[h]))return true;return false},inBounds:function(a,c){var g=!(ea.empty(a)||ea.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,c,g){var h=a.lat*Ea;a=a.lon*Ea;c=h+c/6371;g=K(ra(g/6371)/U(h));g=a+g;c=(c+ba)%Math.PI-ba;g%=T;return f(c*Na,g*Na)},parse:d,parseArray:function(a){var c=
a.length,g=Array(c);for(c=c;c--;)g[c]=d(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*Ea,ia(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var o=0,I=c.chunkSize,F=h;F--;){i[F]=T5.GeoXY.init(a[F]);o+=1;if(o>I)break}h=F;if(h<=0)c.callback&&c.callback(i);else animFrame(g)}var h=a.length,i=Array(h);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var j=h;j--;)i[j]=T5.GeoXY.init(a[j]);return i}animFrame(g);
return null}}}(),Ka=function(){function b(a,c,g){var h=T5.XY.init(0,c.lat-a.lat);h.x=(g||u(g,sa))&&a.lon>c.lon?360-a.lon+c.lon:c.lon-a.lon;return h}function e(a,c){return Ka.init(ea.init(a.min.lat-c,a.min.lon-c%360),ea.init(a.max.lat+c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ea.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function d(a,c){return{min:ea.parse(a),max:ea.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,h=a.lat*Ea,i=a.lon*Ea,j=h-g,o=h+g;
if(j>Nb&&o<ub){h=K(ra(g)/U(h));g=(i-h)%T;i=(i+h)%T}else{j=aa(j,Nb);o=N(o,ub);g=hc;i=Ob}return Ka.init(ea.init(j*Na,g*Na),ea.init(o*Na,i*Na))},expand:e,forPositions:function(a,c){var g=null,h=T5.ticks();c||(c="auto");for(var i=a.length;i--;)if(g){var j=b(g.min,a[i],false),o=b(a[i],g.max,false);if(j.x<0)g.min.lon=a[i].lon;if(j.y<0)g.min.lat=a[i].lat;if(o.x<0)g.max.lon=a[i].lon;if(o.y<0)g.max.lat=a[i].lat}else g=d(a[i],a[i]);if(c){if(c=="auto"){i=b(g.min,g.max);c=aa(i.x,i.y)*0.3}g=e(g,c)}COG.trace("calculated bounds for "+
a.length+" positions",h);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,c){var g=f(a);g=N(ta(Y(g.lat)*0.05),tb.length);var h=tb[g],i=b(a.min,a.max);g=Q(Z(tb[3]*c.h/i.y)/Z(2));h=Q(Z(h*c.w/i.x)/Z(2));return N(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:d,isEmpty:function(a){return!a||ea.empty(a.min)||ea.empty(a.max)},toString:function(a){return"min: "+
ea.toString(a.min)+", max: "+ea.toString(a.max)}}}();hb=function(){var b=/^(\d+).*$/,e=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(f,d){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=d.split(","),g=0;g<c.length;g++){e.lastIndex=-1;if(e.test(c[g])){var h=e.exec(c[g]);if(a>=parseInt(h[1],10)&&a<=parseInt(h[2],10))return true}else if(a==c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!$a){var d=[];for(var a in Pb)d.push(a);$a=RegExp("(\\s)("+
d.join("|")+")(\\s|$)","i")}$a.lastIndex=-1;if(d=$a.exec(f))f=f.replace($a,"$1"+Pb[d[2]]);return f},toString:function(f){return f.streetDetails+" "+f.location}}}();var La=H.GeoXY=function(){function b(d,a){if(d.length){for(var c,g,h,i,j=d.length;j--;){b(d[j],a);c=u(c,sa)||d.x<c?d.x:c;g=u(g,sa)||d.y<g?d.y:g;h=u(h,sa)||d.x>h?d.x:h;i=u(i,sa)||d.y>i?d.y:i}return Da.init(c,g,i,i)}else if(d.mercXY){c=d.mercXY;d.x=(c.x+Math.PI)/a|0;d.y=(Math.PI-c.y)/a|0;d.rpp=a}else COG.warn("Attempted to sync an XY composite, not a GeoXY");
return d}function e(d,a){if(d.length)for(var c=d.length;c--;)e(d[c],a);else{d.mercXY=ha.init(d.x*a-Math.PI,Math.PI-d.y*a);d.pos=ea.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function f(d,a,c){d.pos=a;d.mercXY=ea.toMercatorPixels(a);(c=u(c,yb)?c:d.rpp)&&b(d,c)}return{init:function(d,a){var c=ha.init();f(c,d,a);return c},sync:b,syncPos:e,toPos:function(d,a){a=a||d.rpp;return ea.fromMercatorPixels(d.x*a-Math.PI,Math.PI-d.y*a)},updatePos:f}}(),Pa={};ib=function(){return{bestResults:function(b,
e){e||(e=20);for(var f=b.length>0?b[0]:null,d=[],a=0;a<b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=e)d.push(b[a]);else break;return d}}}();var Qb=function(b){b=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})};Qa=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&ea.vectorize(c.geometry,{callback:function(h){g.add(new T5.Line(h,{style:"waypoints",
simplify:true}));a.setLayer("route",g)}})}function e(a){for(var c=f.Unknown,g=d,h=0;h<g.length;h++){g[h].regex.lastIndex=-1;var i=g[h].regex.exec(a);if(i){c=g[h].customCheck?g[h].customCheck(a,i):g[h].turnType;break}}return c}var f={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",
Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},d=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});
a.push({regex:/take.*?ramp/i,turnType:f.Ramp});a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=
$("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=ea.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:e,TurnType:f,Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=e(a.description);
return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Ka.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&c.push(a.instructions[g].position);return c}},a)}}}();var ic="featurecollection",jc="feature",xb={async:false},Sa={processor:null,group:"shapes",layerClass:gb},kc={point:COG.extend({},Sa,{processor:function(b,e,f,d){e=Ba([e.coordinates],
xb);if(e.length>0)if(f=d.marker(e[0],f)){b.add(f);return e.length}},group:"markers",layerClass:gb}),linestring:COG.extend({},Sa,{processor:function(b,e,f,d){e=Ba(e&&e.coordinates?e.coordinates:[]);return pa(b,e,f,d.line)}}),multilinestring:COG.extend({},Sa,{processor:function(b,e,f,d){e=e&&e.coordinates?e.coordinates:[];for(var a=0,c=e.length;c--;)a+=pa(b,e[c],f,d.line);return a}}),polygon:COG.extend({},Sa,{processor:function(b,e,f,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return pa(b,
e[0],f,d.poly);return 0}}),multipolygon:COG.extend({},Sa,{processor:function(b,e,f,d){e=e&&e.coordinates?e.coordinates:[];for(var a=0,c=0;c<e.length;c++)a+=pa(b,e[c][0],f,d.poly);return a}})},Rb=function(b,e,f,d){function a(n,A){var G=n.processor,O=j+n.group,P=COG.extend({},n,f,{properties:A.properties});if(G){var ga=J[O];if(!ga){ga=new n.layerClass({id:O});J[O]=ga}return G(ga,A.data,P,d)}return 0}function c(n,A){var G=n&&n.type?n.type.toLowerCase():null;return G&&G===jc?c(n.geometry,n.properties):
{type:G,isCollection:G?G===ic:false,definition:kc[G],data:n,properties:A?A:n.properties}}function g(n){var A=0,G=COG.extend({},f),O=o;n=n?n:(new Date).getTime();if(!F){for(;O<I;O++){n=c(i?i(b[O]):b[O]);var P=null;if(n.isCollection){G.layerPrefix=j+z++ +"-";F=new Rb(n.data.features,function(ga){F=null;for(var za in ga)J[za]=ga[za];o>=I&&e&&e(J)},G);P+=1}else if(n.definition)P=a(n.definition,n);A+=P?P:1;if(A>=h)break}o=O+1;if(F||o<I)animFrame(g);else e&&e(J)}}f=COG.extend({rowPreParse:null,simplify:false,
layerPrefix:"geojson-"},f);d=COG.extend({marker:function(n){return new v({xy:n})},line:function(n,A){return new C(n,COG.extend({},f,A))},poly:function(n,A){return new C(n,COG.extend({fill:true},f,A))}},d);var h=500,i=f.rowPreParse,j=f.layerPrefix,o=0,I=0,F=null,z=0,J={};if(b){u(b,"array")||(b=[b]);I=b.length;animFrame(g)}};Sa=H.GeoJSON={parse:function(b,e,f){return new Rb(b,e,f)}};H.Map=function(b){function e(z){try{var J=ea.init(z.coords.latitude,z.coords.longitude),n=z.coords.accuracy/1E3;F.trigger("locationUpdate",
z,n);if(j){if(!h){h=new UI.LocationOverlay({pos:J,accuracy:n});h.update(F.getTileLayer());F.setLayer("location",h)}var A=Ka.createBoundsFromCenter(J,Math.max(n,1));F.gotoBounds(A)}else{h.pos=J;h.accuracy=n;h.update(F.getTileLayer());a(J,null,COG.easing("sine.out"))}j=false}catch(G){COG.exception(G)}}function f(z){COG.info("caught location tracking error:",z)}function d(z,J,n){F.setZoomLevel(J);a(z,n)}function a(z,J,n,A){z=La.init(z,X(F.getZoomLevel()));F.updateOffset(z.x-(F.width>>1),z.y-(F.height>>
1),n,A,function(){J&&J(F)})}b=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2};ha.init();var g=c.NONE,h=null,i=0,j=true,o=0,I=b.tapExtent;b.adjustScaleFactor=function(z){return Math.pow(2,(z<1?Math.floor:Math.ceil)(Math.log(z)))};var F=COG.extend(new Lb(b),{getBoundingBox:function(){var z=F.getViewport();return z?Ka.init(La.toPos(ha.init(z.x,z.y2),o),La.toPos(ha.init(z.x2,z.y),o)):null},getCenterPosition:function(){var z=
F.getViewport();if(z){z=ha.init(z.x+(z.w>>1),z.y+(z.h>>1));return La.toPos(z,o)}return null},gotoBounds:function(z,J){var n=Ka.getZoomLevel(z,F.getViewport());d(Ka.getCenter(z),n,J)},gotoPosition:d,panToPosition:a,syncXY:function(z,J){return(J?La.syncPos:La.sync)(z,o)},locate:function(){F.trackStart(c.SINGLE);setTimeout(F.trackCancel,1E4)},trackStart:function(z){if(navigator.geolocation&&!i){g=z?z:c.WATCH;j=true;i=navigator.geolocation.watchPosition(e,f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},
trackCancel:function(){i&&navigator.geolocation&&navigator.geolocation.clearWatch(i);F.removeLayer("location");h=null;g=c.NONE;i=0},animateRoute:function(z,J,n,A){var G=F.getLayer("route");if(G)(z=G.getAnimation(z,J,n,A))&&z.addToView(F)}});F.bind("pan",function(){g===c.SINGLE&&F.trackCancel()});F.bind("tap",function(z,J,n,A){z=La.toPos(A,o);var G=La.toPos(ha.offset(A,-I,I),o);A=La.toPos(ha.offset(A,I,-I),o);F.trigger("geotap",J,n,z,Ka.init(G,A))});F.bind("refresh",function(){F.trigger("boundsChange",
F.getBoundingBox())});F.bind("zoomLevelChange",function(z,J){var n;o=X(J);n=T/o|0;F.setMaxOffset(n,n,true,false);F.resetScale();F.triggerAll("resync",F)});return F};H.GeoShape=function(b,e){e=COG.extend({autoParse:true},e);for(var f=Array(b.length),d=e.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(d?a(b[c]):b[c]);return new T5.Poly(f,e)};H.LocationOverlay=function(b){b=COG.extend({pos:null,accuracy:null,zindex:90},b);var e=new Image,f=T5.XY.init(),d=T5.XY.init(),a=null;e.src=
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
e.onload=function(){f=T5.XY.init(e.width>>1,e.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,h){var i=d.x-h.x,j=d.y-h.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(i,j,a,0,Math.PI*2,false);g.fill()}e.complete&&e.width>0&&g.drawImage(e,i-f.x,j-f.y,e.width,e.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;d=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,h){c.update(h)});
return c};H.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:$,radsPerPixel:X,Position:ea,BoundingBox:Ka,Radius:function(b,e){return{distance:parseInt(b,10),uom:e}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:hb,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var e=COG.extend({remove:function(){delete Pa[e.id]}},b);return Pa[e.id]=e},Search:ib,GeoSearchResult:Qb,LocationSearch:function(b){function e(g,h){navigator.geolocation.clearWatch(d);d=0;if(a){clearTimeout(a);a=0}h&&h([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var d=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,h){if(navigator.geolocation&&!d){d=navigator.geolocation.watchPosition(function(i){var j=
ea.init(i.coords.latitude,i.coords.longitude);i=new Qb({id:1,caption:"Current Location",pos:j,accuracy:i.coords.accuracy/1E3,matchWeight:100});if(!c||i.accuracy<c.accuracy)c=i;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)e(c,h)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&e(c,h)},b.searchTimeout)}}},b))},Routing:Qa,GeoJSON:Sa}})(T5);
