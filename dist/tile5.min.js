COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var C=arguments[0]||{},S,u=1,r=arguments.length;u<r;u++)if((S=arguments[u])!==null)for(var l in S){var n=S[l];if(C!==n)if(n!==undefined)C[l]=n}return C};
(function(){var C=Object.prototype.hasOwnProperty,S=0,u={};u.toID=function(r){return r.replace(/\s/g,"-")};u.objId=function(r){return(r?r:"obj")+S++};u.isFunction=function(r){return toString.call(r)==="[object Function]"};u.isArray=function(r){return toString.call(r)==="[object Array]"};u.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!C.call(r,"constructor")&&!C.call(r.constructor.prototype,"isPrototypeOf"))return false;
var l;for(l in r);return l===undefined||C.call(r,l)};u.isEmptyObject=function(r){for(var l in r)return false;return true};u.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};u.contains=function(r,l){var n=r,s=arguments,w=1;if(l&&module.isArray(l)){s=l;w=0}for(w=w;w<s;w++)n=n&&typeof foo[s[w]]!=="undefined";return n};u.formatStr=function(r){if(arguments.length<=1)return r;for(var l=arguments.length-2,n=0;n<=l;n++)r=r.replace(RegExp("\\{"+n+"\\}","gi"),arguments[n+1]);return r};
u.wordExists=function(r,l){var n="";if(l.toString)l=l.toString();for(var s=0;s<l.length;s++)n+=!/\w/.test(l[s])?"\\"+l[s]:l[s];return RegExp("(^|\\s|\\,)"+n+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,u)})();
(function(){function C(n){return typeof console!=="undefined"?function(){console[n](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var S=window.console&&window.console.markTimeline,u=C("error"),r=C("info"),l=function(){return S?function(n,s){console.markTimeline(n+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:l,debug:C("debug"),info:r,warn:C("warn"),error:u,exception:function(n){if(u)for(var s in n)r("ERROR DETAIL: "+s+
": "+n[s])}})})();
(function(){function C(u,r){var l=u.hasOwnProperty("obsHandlers")?u.obsHandlers:null;l[r]||(l[r]=[]);return l[r]}var S=0;COG.observable=function(u){if(!u)return null;if(!(u.hasOwnProperty("obsHandlers")?u.obsHandlers:null))u.obsHandlers={};if(!u.hasOwnProperty("bind")){u.bind=function(r,l){var n="callback"+S++;C(u,r).unshift({fn:l,id:n});return n};u.triggerCustom=function(r,l){var n=C(u,r),s={cancel:false,name:r,source:this},w;l&&COG.extend(s,l);if(!n)return null;w=Array.prototype.slice.call(arguments,2);
u.eventInterceptor&&u.eventInterceptor(r,s,w);w.unshift(s);for(var O=n.length;O--&&!s.cancel;)n[O].fn.apply(this,w);return s};u.trigger=function(r){var l=Array.prototype.slice.call(arguments,1);l.splice(0,0,r,null);return u.triggerCustom.apply(this,l)};u.unbind=function(r,l){if(typeof r==="undefined")u.obsHandlers={};else for(var n=C(u,r),s=0;n&&s<n.length;s++)if(n[s].id===l){n.splice(s,1);break}return u}}return u}})();
(function(){function C(l,n){l[n]||(l[n]=function(s){return l.configure(n,s)})}function S(l){l.gtConfId="configurable"+r++;l.gtConfig={};l.gtConfigFns=[];return l.gtConfig}var u={},r=0;COG.paramTweaker=function(l,n,s){return function(w,O){if(typeof O!=="undefined"){if(w in l)l[w]=O;s&&w in s&&s[w](w,O)}else return n&&w in n?n[w](w):l[w]}};COG.configurable=function(l,n,s,w){if(l){l.gtConfId||S(l);var O=l.gtConfId,ha=l.gtConfig,p=l.gtConfigFns;u[O]=l;p.push(s);for(s=n.length;s--;){ha[n[s]]=true;w&&C(l,
n[s])}if(!l.configure)l.configure=function(A,i){if(ha[A]){for(var o=p.length;o--;){var v=p[o](A,i);if(typeof v!=="undefined")return v}return u[O]}return null}}}})();
(function(){function C(l){var n=document.createElement("script"),s=false;n.src=l;n.async=true;n.onload=n.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;n.onload=n.onreadystatechange=null;n&&n.parentNode&&n.parentNode.removeChild(n)}};u||(u=document.getElementsByTagName("head")[0]);u.appendChild(n)}var S=0,u,r=this;COG.jsonp=function(l,n,s){l+=l.indexOf("?")>=0?"&":"?";var w="json"+ ++S;r[w]=function(O){n(O);r[w]=null;try{delete r[w]}catch(ha){}};
C(l+(s?s:"callback")+"="+w);return w}})();
(function(){var C=1.70158,S=Math.PI/2,u=Math.PI*2,r=1E3/60|0,l=Math.abs,n=Math.pow,s=Math.sin,w=Math.asin,O=Math.cos,ha={linear:function(p,A,i,o){return i*p/o+A},backin:function(p,A,i,o){return i*(p/=o)*p*((C+1)*p-C)+A},backout:function(p,A,i,o){return i*((p=p/o-1)*p*((C+1)*p+C)+1)+A},backinout:function(p,A,i,o){return(p/=o/2)<1?i/2*p*p*(((C*=1.525)+1)*p-C)+A:i/2*((p-=2)*p*(((C*=1.525)+1)*p+C)+2)+A},bouncein:function(p,A,i,o){return i-ha.bounceout(o-p,0,i,o)+A},bounceout:function(p,A,i,o){return(p/=
o)<1/2.75?i*7.5625*p*p+A:p<2/2.75?i*(7.5625*(p-=1.5/2.75)*p+0.75)+A:p<2.5/2.75?i*(7.5625*(p-=2.25/2.75)*p+0.9375)+A:i*(7.5625*(p-=2.625/2.75)*p+0.984375)+A},bounceinout:function(p,A,i,o){return p<o/2?ha.bouncein(p*2,0,i,o)/2+A:ha.bounceout(p*2-o,0,i,o)/2+i/2+A},cubicin:function(p,A,i,o){return i*(p/=o)*p*p+A},cubicout:function(p,A,i,o){return i*((p=p/o-1)*p*p+1)+A},cubicinout:function(p,A,i,o){if((p/=o/2)<1)return i/2*p*p*p+A;return i/2*((p-=2)*p*p+2)+A},elasticin:function(p,A,i,o,v,F){if(p==0)return A;
if((p/=o)==1)return A+i;F||(F=o*0.3);if(!v||v<l(i)){v=i;i=F/4}else i=F/u*w(i/v);return-(v*n(2,10*(p-=1))*s((p*o-i)*u/F))+A},elasticout:function(p,A,i,o,v,F){var Q;if(p==0)return A;if((p/=o)==1)return A+i;F||(F=o*0.3);if(!v||v<l(i)){v=i;Q=F/4}else Q=F/u*w(i/v);return v*n(2,-10*p)*s((p*o-Q)*u/F)+i+A},elasticinout:function(p,A,i,o,v,F){var Q;if(p==0)return A;if((p/=o/2)==2)return A+i;F||(F=o*0.3*1.5);if(!v||v<l(i)){v=i;Q=F/4}else Q=F/u*w(i/v);if(p<1)return-0.5*v*n(2,10*(p-=1))*s((p*o-Q)*u/F)+A;return v*
n(2,-10*(p-=1))*s((p*o-Q)*u/F)*0.5+i+A},quadin:function(p,A,i,o){return i*(p/=o)*p+A},quadout:function(p,A,i,o){return-i*(p/=o)*(p-2)+A},quadinout:function(p,A,i,o){if((p/=o/2)<1)return i/2*p*p+A;return-i/2*(--p*(p-2)-1)+A},sinein:function(p,A,i,o){return-i*O(p/o*S)+i+A},sineout:function(p,A,i,o){return i*s(p/o*S)+A},sineinout:function(p,A,i,o){return-i/2*(O(Math.PI*p/o)-1)+A}};COG.tweenValue=function(p,A,i,o,v){function F(X){X=X?X:(new Date).getTime();if(ba+r<X){var W=X-Q,U=i(W,p,ia,o),pa=Q+o<=X;
X=!pa;if(v){W=v(U,pa,W);X=typeof W!="undefined"?W&&X:X}X&&animFrame(F)}}var Q=(new Date).getTime(),ba=0,ia=A-p;animFrame(F);return{}};COG.easing=function(p){return ha[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(p,A){ha[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]=A}})();
(function(){var C=/^P(\d+Y)?(\d+M)?(\d+D)?$/,S=/^(\d+H)?(\d+M)?(\d+S)?$/,u={8601:function(l){l=l.split("T");var n=null;n=null;var s=0,w=0;C.lastIndex=-1;n=C.exec(l[0]);s+=n[3]?parseInt(n[3].slice(0,-1),10):0;S.lastIndex=-1;n=S.exec(l[1]);w+=n[1]?parseInt(n[1].slice(0,-1),10)*3600:0;w+=n[2]?parseInt(n[2].slice(0,-1),10)*60:0;w+=n[3]?parseInt(n[3].slice(0,-1),10):0;return new r(s,w)}},r=COG.Duration=function(l,n){return{days:l?l:0,seconds:n?n:0}};COG.addDuration=function(){for(var l=new r,n=arguments.length;n--;){l.days+=
arguments[n].days;l.seconds+=arguments[n].seconds}if(l.seconds>=86400){l.days+=~~(l.seconds/86400);l.seconds%=86400}return l};COG.formatDuration=function(l){var n,s,w="";if(l.days)w=l.days+" days ";if(l.seconds){l=l.seconds;if(l>=3600){n=~~(l/3600);l-=n*3600}if(l>=60){s=Math.round(l/60);l-=s*60}if(n)w=w+n+(n>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)w=w+s+" min";else if(l>0)w=w+(l>10?l:"0"+l)+" sec"}return w};COG.parseDuration=function(l,n){var s=n?u[n]:null;if(s)return s(l);COG.Log.warn("Could not find duration parser for specified format: "+
n);return new r}})();COG.ObjectStore=function(){var C={},S={},u="obj_"+(new Date).getTime(),r=0,l=Object.prototype.hasOwnProperty;return{add:function(n,s){var w;s=s?s:"default";if(n&&n.constructor)if(!l.call(n,"id"))n.id=u+ ++r;w=S[s]?S[s]:S[s]=[];C[n.id]=w.length;w[n.length]=n}}};var CANI={};
(function(C){var S=[],u=0,r=false,l=C.register=function(n,s){S.push({section:n,run:s})};C.init=function(n){function s(){if(u<S.length){var O=S[u++];w[O.section]||(w[O.section]={});O.run(w[O.section],s)}else{for(O in w)C[O]=w[O];r=true;n&&n(C)}}var w={};if(r&&n)n(C);else{u=0;s()}};l("canvas",function(n,s){function w(){var A,i=O.getContext("2d");i.save();try{i.translate(50,50);i.beginPath();i.rect(0,0,20,20);A=i.isPointInPath(10,10)}finally{i.restore()}return A}var O=document.createElement("canvas"),
ha=typeof FlashCanvas!="undefined",p=typeof G_vmlCanvasManager!="undefnined";O.width=200;O.height=200;n.pipTransformed=ha||p?false:w();s()})})(CANI);
INTERACT=function(){function C(i){return function(o,v){i.addEventListener(o,v,false)}}function S(i){return function(o,v){i.removeEventListener(o,v,false)}}function u(i){return function(o,v){i.attachEvent("on"+o,v)}}function r(i,o){return{x:i?i:0,y:o?o:0,count:1}}function l(i,o){p.push(COG.extend({handler:null,checks:{},type:i},o))}function n(i){var o=0,v=0;if(i.offsetParent){do{o+=i.offsetLeft;v+=i.offsetTop;i=i.offsetParent}while(i)}return{left:o,top:v}}function s(i,o){return{source:i,target:o.target?
o.target:o.srcElement}}function w(i,o){for(var v=i.target?i.target:i.srcElement;v&&v!==o;)v=v.parentNode;return v&&v===o}function O(i,o){return{x:i.x-(o?o.left:0),y:i.y-(o?o.top:0)}}function ha(i,o){if(i.preventDefault){i.preventDefault();i.stopPropagation()}else if(typeof i.cancelBubble!="undefined")i.cancelBubble=true;o&&i.stopImmediatePropagation&&i.stopImmediatePropagation()}var p=[],A=function(i,o,v){v=COG.extend({binder:null,unbinder:null,observable:null},v);for(var F=v.observable,Q=[],ba,ia,
X={bind:function(){return F.bind.apply(null,arguments)},unbind:function(){F.unbind();for(W=0;W<Q.length;W++)Q[W].unbind();return X}},W=0;W<o.length;W++)Q.push(o[W](i,F,v));F.bind("pointerDown",function(){ia=ba=0});F.bind("pointerMove",function(U,pa,Ga,ua){ba+=ua.x||0;ia+=ua.y||0});F.bind("pointerUp",function(U,pa,Ga){Math.abs(ba)>20||Math.abs(ia)>20||F.triggerCustom("tap",U,pa,Ga)});return X};l("pointer",{handler:function(i,o,v){function F(y){if(y.pageX&&y.pageY)return r(y.pageX,y.pageY);else{var H=
document.documentElement,Z=document.body;return r(y.clientX+(H&&H.scrollLeft||Z&&Z.scrollLeft||0)-(H&&H.clientLeft||Z&&Z.clientLeft||0),y.clientY+(H&&H.scrollTop||Z&&Z.scrollTop||0)-(H&&H.clientTop||Z&&Z.clientTop||0))}}function Q(y){if(w(y,i))if(ua=W(y)){var H=F(y);i.style.cursor="move";ha(y,true);ja=H.x;fa=H.y;Ba=r(ja,fa);o.triggerCustom("pointerDown",s("mouse",y),Ba,O(Ba,n(i)))}}function ba(y){var H=F(y);Ha=H.x;na=H.y;if(w(y,i))U(y,ua?"pointerMove":"pointerHover")}function ia(y){if(ua&&W(y)){ua=
false;if(w(y,i)){i.style.cursor="default";U(y,"pointerUp")}}}function X(y){if(w(y,i)){var H;y=y||window.event;if(y.detail)H=y.axis===2?-y.detail*pa:0;else{H=y.wheelDeltaY?y.wheelDeltaY:y.wheelDelta;if(window.opera)H=-H}if(H!==0){var Z=r(Ha,na);o.triggerCustom("zoom",s("mouse",y),Z,O(Z,n(i)),H/Ga,"wheel");ha(y);y.returnValue=false}}}function W(y){y=y||window.event;return(y.which||y.button)==1}function U(y,H,Z,qa,ra){Z=typeof Z!="undefined"?Z:Ha;qa=typeof qa!="undefined"?qa:na;var E=Z-ja,N=qa-fa,L=
r(Z,qa);o.triggerCustom(H,s("mouse",y),L,O(L,n(i)),r(E,N));if(typeof ra=="undefined"||ra){ja=Z;fa=qa}}v=COG.extend({},v);var pa=120,Ga=pa*8,ua=false,Ba,Ha,na,ja,fa;v.binder("mousedown",Q);v.binder("mousemove",ba);v.binder("mouseup",ia);v.binder("dblclick",function(y){COG.info("captured double click");if(w(y,i)){var H=F(y);o.triggerCustom("doubleTap",s("mouse",y),H,O(H,n(i)))}});v.binder("mousewheel",X);v.binder("DOMMouseScroll",X);return{unbind:function(){v.unbinder("mousedown",Q);v.unbinder("mousemove",
ba);v.unbinder("mouseup",ia);v.unbinder("mousewheel",X);v.unbinder("DOMMouseScroll",X)}}},checks:{touch:false}});l("pointer",{handler:function(i,o,v){function F(E){if(E.count<2)return 0;var N=E.x-E.next.x;E=E.y-E.next.y;return~~Math.sqrt(N*N+E*E)}function Q(E,N,L){N=N?N:0;L=L?L:0;for(var ka={x:E.x-N,y:E.y-L,id:E.id,count:E.count},la=ka;E.next;){E=E.next;la=la.next={x:E.x-N,y:E.y-L,id:E.id}}return ka}function ba(E,N){var L=E[N?N:"touches"],ka,la;if(L.length===0)return null;la=ka={x:L[0].pageX,y:L[0].pageY,
id:L[0].identifier,count:L.length};for(var za=1,Ka=L.length;za<Ka;za++)la=la.next={x:L[za].pageX,y:L[za].pageY,id:L[za].identifier};return ka}function ia(E){if(w(E,i)){na=n(i);var N=ba(E,"changedTouches"),L=Q(N,na.left,na.top);if(!fa){ja=ua;o.triggerCustom("pointerDown",s("touch",E),N,L)}qa&&o.triggerCustom("pointerDownMulti",s("touch",E),N,L);fa=ba(E);if(fa.count>1)H=F(fa);ra=1;Z=Q(fa)}}function X(E){if(w(E,i)){ha(E);y=ba(E);if(ja==ua)ja=Math.abs(fa.x-y.x)>pa||Math.abs(fa.y-y.y)>pa?Ga:ua;if(ja!=
ua){ja=y.count>1?Ha:Ba;if(ja==Ha)if(fa.count===1){fa=Q(y);H=F(fa)}else{var N=F(y);if(Math.abs(H-N)<U)ja=Ba;else{var L;L=y.x;var ka=y.next.x,la=y.y,za=y.next.y,Ka=la<za?la:za;L={x:(L<ka?L:ka)+(Math.abs(L-ka)>>1),y:Ka+(Math.abs(la-za)>>1)};N=N/H;ka=N-ra;o.triggerCustom("zoom",s("touch",E),L,O(L,na),ka,"pinch");ra=N}}ja==Ba&&o.triggerCustom("pointerMove",s("touch",E),y,Q(y,na.left,na.top),r(y.x-Z.x,y.y-Z.y));qa&&o.triggerCustom("pointerMoveMulti",s("touch",E),y,Q(y,na.left,na.top))}Z=Q(y)}}function W(E){if(w(E,
i)){var N=ba(E,"changedTouches"),L=Q(N,na.left,na.top);y=ba(E);if(!y){o.triggerCustom("pointerUp",s("touch",E),N,L);fa=null}qa&&o.triggerCustom("pointerUpMulti",s("touch",E),N,L)}}v=COG.extend({detailed:false,inertia:false},v);var U=20,pa=7,Ga=0,ua=1,Ba=2,Ha=3,na,ja,fa,y,H,Z,qa=v.detailed,ra=1;v.binder("touchstart",ia);v.binder("touchmove",X);v.binder("touchend",W);COG.info("initialized touch handler");return{unbind:function(){v.unbinder("touchstart",ia);v.unbinder("touchmove",X);v.unbinder("touchend",
W)}}},checks:{touch:true}});return{register:l,watch:function(i,o,v){o=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},o);capabilities=COG.extend({touch:"ontouchstart"in window},v);if(!o.observable){COG.info("creating observable");o.observable=COG.observable({});globalOpts=o}o.binder=(o.isIE?u:C)(o.bindTarget||document);o.unbinder=(o.isIE?u:S)(o.bindTarget||document);v=o.types;for(var F=capabilities,Q=[],ba=p.length;ba--;){var ia=p[ba],X=!v||v.indexOf(ia.type)>=
0,W=true;for(var U in ia.checks){var pa=ia.checks[U];COG.info("checking "+U+" capability. require: "+pa+", capability = "+F[U]);W=W&&pa===F[U]}if(X&&W)Q[Q.length]=ia.handler}return new A(i,Q,o)}}}();var T5={};
(function(C){function S(){return(new Date).getTime()}function u(a,e){e=Xb.call(e);if(e=="finite")return!Yb[Zb](+a);return e=="null"&&a===null||e==typeof a||e=="object"&&a===Object(a)||e=="array"&&Array.isArray&&Array.isArray(a)||$b.call(a).slice(8,-1).toLowerCase()==e}function r(a,e){this.x=a||0;this.y=e||0}function l(a,e,c,d){this.x=a||0;this.y=e||0;this.w=c||0;this.h=d||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function n(a,e){var c=new Db(Math.sqrt(256<<a)|0);e&&e.zoomLevel===a&&e.copyInto(c);
c.zoomLevel=a;return c}function s(a,e,c){a=document.createElement(a);a.id=e;a.style.cssText=c||"";return a}function w(a,e,c){if(ac)a.style[y]="translate3d("+e+"px, "+c+"px, 0px)";else{a.style.left=e+"px";a.style.top=c+"px"}}function O(a){a=a||(new Date).getTime();for(var e=0;e<Xa.length;){var c=Xa[e],d=Sa[c],b=Sa[c].image&&Sa[c].image.complete&&Sa[c].image.width>0,f=a-d.start;f=b||f>=bc;if(b){b=d.callbacks;Eb[c]=d.image;for(var g=0;g<b.length;g++)b[g](d.image,true)}if(f){Xa.splice(e,1);delete Sa[c]}else e++}Xa.length>
0&&animFrame(O)}function ha(a,e){var c=a&&e?Eb[a]:null;if(c&&c&&c.complete&&c.width>0)e(c);else{if(c=Sa[a])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++cc;Sa[a]={start:(new Date).getTime(),image:c,callbacks:[e]};c.src=a;Xa[Xa.length]=a}animFrame(O)}}function p(a,e,c,d,b,f){this.x=a;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=c;this.id=f||a+"_"+e;this.loaded=false;this.image=null}function A(a){a=a?a:(new Date).getTime();if(a-Fb>dc){for(var e=ab.splice(0),
c=e.length;c--;)e[c](a);Fb=a}ab.length&&animFrame(A)}function i(a){var e=ab.length==0;ab[ab.length]=a;e&&animFrame(A)}function o(a,e,c,d,b){b=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},b);var f=(new Date).getTime(),g=a[e],h=e=="translate",k=b.autoInvalidate,j=c.length&&d.length&&c.length==d.length?c.length:0,m=Array(j),B=Array(j),G=COG.easing(b.easing),R=b.duration,I=b.progress,D=function(K){var T=K-f;K=f+R<=K;for(var ga=a.layer?a.layer.view:null,aa,
ma=j;ma--;){aa=G(T,c[ma],m[ma],R);B[ma]=h?aa|0:aa}g.apply(a,B);k&&ga&&ga.invalidate();if(I){T=[].concat(K?d:B);T.unshift(K);I.apply(a,T)}if(K){a.animations--;g.apply(a,d);b.complete&&b.complete.apply(a,d)}else i(D)};if(g&&g.apply&&j>0){R=R?R:DEFAULT_DURATION;for(e=j;e--;)m[e]=d[e]-c[e];a.animations++;i(D)}}function v(a){a=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},a);Ca.call(this,a)}function F(a,e){e=COG.extend({simplify:false,fill:true,typeName:"Poly"},
e);var c=e.simplify;Ca.call(this,e);COG.extend(this,{getPoints:function(){return[].concat(a)},resync:function(d){var b,f,g,h,k,j;d.syncXY(a);j=this.points=Ta.floor(c?Ta.simplify(a):a);for(var m=j.length;m--;){d=j[m].x;b=j[m].y;h=u(h,xa)||d<h?d:h;k=u(k,xa)||b<k?b:k;f=u(f,xa)||d>f?d:f;g=u(g,xa)||b>g?b:g}this.updateBounds(new l(h,k,f-h,g-k),true)}});this.haveData=a&&a.length>=2}function Q(a,e){e.fill=false;F.call(this,a,e)}function ba(a){function e(){if(g&&g.width>0){if(!this.centerOffset)this.centerOffset=
new r(-g.width>>1,-g.height>>1);this.updateBounds(new l(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,g.width,g.height),false)}}function c(k){if(this.imageUrl=k){var j=this;ha(this.imageUrl,function(m,B){g=m;if(B){var G=h.layer?h.layer.view:null;G&&G.invalidate()}e.apply(j)})}}a=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},a);var d=Ca.prototype.resync,b=0,f=0,g=a.image;Ca.call(this,a);var h=COG.extend(this,{changeImage:c,getProps:function(){this.bounds||e(this,
g);return{image:g,x:this.xy.x+b,y:this.xy.y+f}},resync:function(k){d.call(this,k);e.call(this)}});g||c.call(this,this.imageUrl);if(this.centerOffset){b=this.centerOffset.x;f=this.centerOffset.y}}function ia(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.centerOffset=Ta.invert(a.imageAnchor);ba.call(this,a)}function X(a){a=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},a);Ca.call(this,a)}function W(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,style:null,minXY:null,
maxXY:null},a);this.view=null;this.visible=true;COG.observable(COG.extend(this,a))}function U(a,e){if(a&&a.split){var c=a.split(ec);if(c.length>1){a=c[0];e=c[1]}}else if(a&&a.lat){e=a.lon;a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(e||0)}function pa(a){a=parseFloat(a)*Ia;a=la(a);var e=hb*a;return ka((1+a)/(1-a)*N((1-e)/(1+e),hb))/2}function Ga(a){return ja/(256<<a)}function ua(a,e){var c=hb*la(a);return fa-2*Gb(e*N((1-c)/(1+c),hb/2))}function Ba(a,e,c,d){e=Ha(e);a.add(d(e,c));return e.length}
function Ha(a){var e=a?a.length:0,c=Array(e);for(e=e;e--;)c[e]=new U(a[e][1],a[e][0]);return ya.vectorize(c,Hb)}COG.observable(C);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();var na=Array.prototype.indexOf||function(a){for(var e=0;e<this.length;e++)if(this[e]===a)return e;return-1},
ja=Math.PI*2,fa=Math.PI/2,y="-webkit-transform",H=Math.abs,Z=Math.ceil,qa=Math.round,ra=Math.min,E=Math.max,N=Math.pow,L=Math.sqrt,ka=Math.log,la=Math.sin,za=Math.asin,Ka=Math.cos,Gb=Math.atan,fc=Math.atan2,Zb="hasOwnProperty",Yb={NaN:1,Infinity:1,"-Infinity":1},Xb=String.prototype.toLowerCase,$b=Object.prototype.toString,xa="undefined",gc="number",ac=typeof document.body.style[y]!="undefined",ec=/[\,\s]/,hc=T5.newCanvas=function(a,e){var c=document.createElement("canvas");c.width=a?a:0;c.height=
e?e:0;T5.trigger("createCanvas",c);return c},Ib=function(){var a={};return{init:function(e,c){var d=a[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(c)},register:function(e,c){a[e]=c}}}(),rb=function(){var a={};return{find:function(e){return(a[e]||[])[0]},register:function(e,c){a[e]||(a[e]=[]);a[e].push(c())}}}();r.prototype={constructor:r,add:function(){for(var a=this.x,e=this.y,c=arguments.length;c--;){a+=arguments[c].x;e+=arguments[c].y}return new r(a,e)},equals:function(a){return this.x===
a.x&&this.y===a.y}};l.prototype={constructor:l};var Ta=function(){function a(d,b){return c(d.x-b.x,d.y-b.y)}function e(d,b){b=b||d.length;if(b<=1)return null;for(var f=Array(b-1),g=Array(b-1),h=0,k,j=0;j<b-1;j++){k=a(d[j],d[j+1]);f[j]=L(k.x*k.x+k.y*k.y);g[j]=h+=f[j]}return{edges:f,accrued:g,tota:h}}function c(d,b){return new r(d,b)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,b=0,f=arguments.length;f--;){d+=arguments[f].x;b+=arguments[f].y}return c(d,b)},
absSize:function(d){return E(H(d.x),H(d.y))},copy:function(d){return d?c(d.x,d.y):null},diff:a,distance:function(d,b){return e(d,b).total},edges:e,equals:function(d,b){return d.equals(b)},extendBy:function(d,b,f){var g=Ka(b)*f|0;b=la(b)*f|0;return c(d.x-g,d.y-b)},floor:function(d){for(var b=Array(d.length),f=d.length;f--;)b[f]=c(d[f].x|0,d[f].y|0);return b},getRect:function(d){for(var b,f,g,h,k=d.length;k--;){var j=d[k];b=u(b,xa)||j.x<b?j.x:b;f=u(f,xa)||j.y<f?j.y:f;g=u(g,xa)||j.x>g?j.x:g;h=u(h,xa)||
j.y>h?j.y:h}return new l(b,f,g-b,h-f)},init:c,invert:function(d){return c(-d.x,-d.y)},min:function(d,b){return c(d.x<b.x?d.x:b.x,d.y<b.y?d.y:b.y)},max:function(d,b){return c(d.x>b.x?d.x:b.x,d.y>b.y?d.y:b.y)},offset:function(d,b,f){return c(d.x+b,d.y+(f||b))},scale:function(d,b){return c(d.x/b|0,d.y/b|0)},simplify:function(d,b){if(!d)return null;b=b?b:Ta.VECTOR_SIMPLIFICATION;for(var f=[],g=null,h=d.length;h--;){var k=d[h];if(include=!g||h===0||H(k.x-g.x)+H(k.y-g.y)>b){f.unshift(k);g=k}}return f},
theta:function(d,b,f){f=za((d.y-b.y)/f);return d.x>b.x?f:Math.PI-f},toString:function(d){return d?d.x+", "+d.y:""}}}(),La=function(){return{dotProduct:function(a,e){return a.x*e.x+a.y*e.y}}}(),bb=function(){function a(c){return e(c.x,c.y,c.x2,c.y2)}function e(c,d,b,f){return new l(c,d,(b||c)-c,(f||d)-d)}return{buffer:function(c,d,b){return bb.init(c.x-d,c.y-(b||d),c.x2+d,c.y2+(b||d))},center:function(c){return new r(c.x+(c.w>>1),c.y+(c.h>>1))},copy:a,diagonalSize:function(c){return L(c.w*c.w+c.h*
c.h)},fromCenter:function(c,d,b,f){b=b>>1;f=f>>1;return e(c-b,d-f,c+b,d+f)},init:e,intersect:function(c,d){var b=E(c.x,d.x),f=E(c.y,d.y),g=ra(c.x2,d.x2),h=ra(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null},toString:function(c){return c?"["+c.x+", "+c.y+", "+c.x2+", "+c.y2+"]":""},union:function(c,d){if(c.w===0||c.h===0)return a(d);else if(d.w===0||d.h===0)return a(c);else{var b=ra(c.x,d.x),f=ra(c.y,d.y),g=E(c.x2,d.x2),h=E(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null}}}}();Hits=function(){return{diffHits:function(a,
e){var c=[],d={},b;for(b=e.length;b--;)d[e[b].target.id]=true;for(b=a.length;b--;)d[a[b].target.id]||(c[c.length]=a[b]);return c},init:function(a,e,c,d){return{type:a,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:c}},initHit:function(a,e,c){return{type:a,target:e,drag:c}},triggerEvent:function(a,e,c,d){e.triggerCustom(a.type+(c?c:"Hit"),{hitType:a.type},d?d:a.elements,a.absXY,a.relXY,new r(a.x,a.y))}}}();var Db=function(a){function e(b,f){var g=c[b],h;g||(g=c[b]=[]);(h=g[f])||(h=g[f]=[]);return h}a=a||
128;var c=[],d={};return{copyInto:function(b){for(var f in d){var g=d[f];b.insert(g.bounds||g,g,f)}},insert:function(b,f,g){var h=b.x/a|0,k=b.y/a|0,j=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;g=g||f.id||COG.objId("spatial");d[g]=f;for(f=h;f<=j;f++)for(h=k;h<=b;h++)e(f,h).push(g)},remove:function(b,f,g){g=g||f.id;if(d[g]){var h=b.x/a|0;f=b.y/a|0;var k=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;delete d[g];for(h=h;h<=k;h++)for(var j=f;j<=b;j++){var m=e(h,j),B=na.call(m,g);B>=0&&m.splice(B,1)}}},search:function(b){var f=b.y/
a|0,g=(b.x+b.w)/a|0,h=(b.y+b.h)/a|0,k=[],j=[];for(b=b.x/a|0;b<=g;b++)for(var m=f;m<=h;m++)k=k.concat(e(b,m));k.sort();for(f=k.length;f--;){g=k[f];if(h=d[g])j[j.length]=h;for(;f>0&&k[f-1]==g;)f--}return j}}},bc=3E4,Eb={},cc=0;(new Date).getTime();var Sa={},Xa=[];p.prototype={constructor:p,load:function(a){var e=this;ha(this.url,function(c){e.loaded=true;e.image=c;a&&a()})}};var ic=function(){return COG.observable({fastpan:true,applyStyle:function(){},applyTransform:function(a,e,c){return{restore:null,
x:e,y:c}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new r},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,reset:function(){}})},Jb={},cb=C.registerRenderer=function(a,e){Jb[a]=e},jc=C.attachRenderer=function(a,e,c,d,b){a=a.split("/");for(var f=new ic(e,c,d,b),g=0;g<a.length;g++){var h=Jb[a[g]];if(h)f=new h(e,c,d,b,f)}return f};cb("canvas",function(a,e,c,d,b){function f(z,Y,M){var J,ca;R[Y]=function(V){for(J=
aa.length;J--;)if(ca=M[aa[J]])V[ma[J]]=ca}}function g(z,Y,M){var J=false;if(Y)J=m.isPointInPath(D?Y.x-B:Y.relXY.x,D?Y.y-G:Y.relXY.y);return{draw:M||ga,viewport:z,hit:J,vpX:B,vpY:G,context:m}}d=COG.extend({},d);var h,k,j,m,B=0,G=0,R={},I=null,D=CANI.canvas.pipTransformed,K={},T=function(){},ga=function(){this.fill&&m.fill();this.stroke&&m.stroke()},aa=["fill","stroke","lineWidth","opacity"],ma=["fillStyle","strokeStyle","lineWidth","globalAlpha"];if(e){h=e.offsetWidth;k=e.offsetHeight;j=hc(h,k);j.style.cssText=
"position: absolute; z-index: 1;";a.attachFrame(j,true);m=null}c=COG.extend(b,{applyStyle:function(z){var Y=R[z],M=m&&m.canvas?m.canvas.id:"default",J;K[M]||(K[M]=[]);J=K[M].pop()||"basic";if(Y){K[M].push(z);Y(m);return J}},applyTransform:function(z){if(z.translateX!==0||z.translateY!==0||z.scaling!==1||z.rotation!==0){m.save();I={undo:function(){m.restore();I=null},x:z.xy.x,y:z.xy.y};m.translate(z.xy.x-B+z.translateX,z.xy.y-G+z.translateY);z.rotation!==0&&m.rotate(z.rotation);z.scaling!==1&&m.scale(z.scaling,
z.scaling)}return I},drawTiles:function(z,Y){for(var M,J,ca=B-256,V=G-256,oa=z.x2,$=z.y2,va=Y.length;va--;){M=Y[va];if(J=M.x>=ca&&M.x<=oa&&M.y>=V&&M.y<=$)M.loaded?m.drawImage(M.image,M.x-B,M.y-G):M.load(a.invalidate)}},prepare:function(z,Y){var M,J=false,ca=Y.scaled||Y,V=Y.scaleFactor;if(m)m.restore();else m=j.getContext("2d");for(M=z.length;M--;)J=J||z[M].clip;B=ca.x;G=ca.y;if(m){J||m.clearRect(0,0,h,k);m.save();m.scale(V,V)}m.globalCompositeOperation="source-over";return m},prepArc:function(z,Y,
M){m.beginPath();m.arc(z.xy.x-(I?I.x:B),z.xy.y-(I?I.y:G),z.size>>1,z.startAngle,z.endAngle,false);return g(Y,M)},prepImage:function(z,Y,M,J){var ca=(J.x||z.xy.x)-(I?I.x:B),V=(J.y||z.xy.y)-(I?I.y:G),oa=J.image||z.image;if(oa){m.beginPath();m.rect(ca,V,J.width||oa.width,J.height||oa.height);return g(Y,M,function(){m.drawImage(oa,ca,V,J.width||oa.width,J.height||oa.height)})}},prepMarker:function(z,Y,M){var J=z.xy.x-(I?I.x:B),ca=z.xy.y-(I?I.y:G),V=z.size,oa=undefined;m.beginPath();switch(z.markerStyle.toLowerCase()){case "image":oa=
T;m.rect(J-(V>>1),ca-(V>>1),V,V);if(z.reset&&z.image){z.image=null;z.reset=false}z.image?m.drawImage(z.image,J-(V>>1),ca-(V>>1),V,V):ha(z.imageUrl,function($){z.image=$;m.drawImage(z.image,J-(V>>1),ca-(V>>1),V,V)});break;default:m.moveTo(J,ca);m.lineTo(J-(V>>1),ca-V);m.lineTo(J+(V>>1),ca-V);m.lineTo(J,ca);break}return g(Y,M,oa)},prepPoly:function(z,Y,M,J){var ca=true;z=J.points||z.points;J=I?I.x:B;var V=I?I.y:G;m.beginPath();for(var oa=z.length;oa--;){var $=z[oa].x-J,va=z[oa].y-V;if(ca){m.moveTo($,
va);ca=false}else m.lineTo($,va)}return g(Y,M)},getContext:function(){return m}});(function(){for(var z in T5.styles)f(null,z,T5.styles[z]);T5.bind("styleDefined",f)})();c.bind("detach",function(){e.removeChild(j)});return c});cb("dom",function(a,e,c,d,b){function f(m){var B=m.image=new Image;k[m.id]=m;B.src=m.url;B.onload=function(){if(j[m.id])h.appendChild(this);else m.image=null};B.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";
return B}function g(m,B,G){var R=[];for(var I in m){var D=m[I];if(G?D[G]:!B[I]){if(D.image&&D.image.parentNode){h.removeChild(D.image);D.image=null}R[R.length]=I}}for(B=R.length;B--;)delete m[R[B]]}var h=null,k={},j={};h=s("div",COG.objId("domImages"),COG.formatStr("-webkit-user-select: none; position: absolute; overflow: hidden; width: {0}px; height: {1}px;",e.offsetWidth,e.offsetHeight));e.childNodes.length>0?e.insertBefore(h,e.childNodes[0]):e.appendChild(h);a.attachFrame(h);a=COG.extend(b,{drawTiles:function(m,
B){for(var G,R,I=m.x,D=m.y,K=B.length;K--;){G=B[K];if(G.url){R=G.image||f(G);w(R,G.x-I,G.y-D);j[G.id]=G}}}});a.bind("predraw",function(){g(k,j);j={}});a.bind("detach",function(){e.removeChild(h)});a.bind("reset",function(){for(g(k,j={});h.childNodes.length>0;)h.removeChild(h.childNodes[0])});return a});var sb=C.styles={},kc=C.defineStyle=function(a,e){sb[a]=e;C.trigger("styleDefined",a,sb[a]);return a},Kb=C.defineStyles=function(a){for(var e in a)kc(e,a[e])};C.getStyle=function(a){return sb[a]};C.loadStyles=
function(a){COG.jsonp(a,function(e){Kb(e)})};Kb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Rb=function(a){function e(q,t,x,P){z(ra(E(wa+N(2,P)-1,0.5),2))}function c(){var q=ka(wa)/Math.LN2|0;if(q!==0){wa=N(2,q);Y(db+q,lc,mc)}redraw=true}function d(q,t){var x=renderer&&renderer.projectXY?renderer.projectXY(q,t):null;if(!x){x=da.getViewport();var P=1/wa;x=new r(x?x.x+q*
P:q,x?x.y+t*P:t)}return x}function b(q,t,x){M("doubleTap",t,x,d(x.x,x.y));a.scalable&&z(2,d(x.x,x.y),nc,null,oc)}function f(q,t,x){Ja=null;tb=true;T("down",t,x)}function g(q,t,x){T("hover",t,x)}function h(q,t,x,P){I(t,x,false);if(!Ja){Ma=P.x;Na=P.y}}function k(q,t,x){I(t,x,true);tb=false}function j(){clearTimeout(Lb);Lb=setTimeout(function(){renderer.checkSize()},250)}function m(q,t,x){T("tap",t,x);M("tap",t,x,d(x.x,x.y,true))}function B(q){renderer=jc(q||a.renderer,da,Ua,Ya,a);Mb=a.fastpan&&renderer.fastpan;
R()}function G(q,t){t.id=q;t.added=S();t.view=da;t.trigger("parentChange",da,Ua,pc);$.push(t);$.sort(function(x,P){var ea=P.zindex-x.zindex;if(ea===0)ea=P.added-x.added;return ea});va=$.length;return t}function R(){Da&&Da.unbind();if(renderer){Da=INTERACT.watch(renderer.interactTarget||Ya);if(a.scalable){Da.bind("zoom",e);Da.bind("doubleTap",b)}Da.bind("pointerDown",f);Da.bind("pointerMove",h);Da.bind("pointerUp",k);a.captureHover&&Da.bind("pointerHover",g);Da.bind("tap",m)}}function I(q,t,x){if(Ja){q=
d(t.x,t.y);Ja.drag.call(Ja.target,Ja,q.x,q.y,x)&&Fa++;if(x)Ja=null}}function D(q,t){Ya=document.getElementById(t);Ya.appendChild(Pa=s("div",COG.objId("t5_container"),COG.formatStr("-webkit-user-select: none; position: absolute; overflow: hidden; width: {0}px; height: {1}px;",Ya.offsetWidth,Ya.offsetHeight)));ib=Pa.offsetWidth+jb*2;kb=Pa.offsetHeight+jb*2;ub=ib/2;vb=kb/2;Pa.appendChild(Ua=s("div",COG.objId("t5_view"),COG.formatStr("-webkit-user-select: none; position: absolute; width: {0}px; height: {1}px; margin: {2}px 0 0 {2}px;",
ib,kb,-jb)));B()}function K(q){var t,x=false,P;q=q||(new Date).getTime();if(x=q-Nb>qc){panSpeed=H(Ma)+H(Na);P=H(sa-wb)>=Ob||H(ta-xb)>=Ob;t=wa!==Pb;if(panSpeed>0||t)Fa++;P&&panSpeed<ca&&ma();lb.index++;lb.draw=Fa||panSpeed||rc||sc;da.trigger("enterFrame",q,lb);Nb=q}if(renderer&&x&&lb.draw){mb+=Ma;nb+=Na;if(!Mb||panSpeed<V){sa=sa-mb|0;ta=ta-nb|0;t=aa();t.panSpeed=panSpeed;renderer.trigger("predraw",t);if(renderer.prepare($,t,q,Aa)){Fa=0;for(ii=va;ii--;){x=$[ii];if(x.visible){P=x.style?renderer.applyStyle(x.style,
true):null;x.draw(renderer,t,da,q,Aa);P&&renderer.applyStyle(P)}}renderer.trigger("render",t);da.trigger("drawComplete",t,q);Pb=wa;w(Ua,mb=0,nb=0)}}else w(Ua,mb,nb);if(tb||!a.inertia)Na=Ma=0;else if(Ma!=0||Na!=0){Ma*=0.8;Na*=0.8;if(H(Ma)<0.5)Ma=0;if(H(Na)<0.5)Na=0}if(Aa){q=Aa?Aa.elements:[];if(eb&&eb.type==="hover"){t=Hits.diffHits(eb.elements,q);t.length>0&&Hits.triggerEvent(eb,da,"Out",t)}if(q.length>0){x=Aa.x;P=Aa.y;for(t=q.length;t--;){var ea=q[t],Ea=x,Va=P,Qa=ea&&ea.drag&&(!ea.canDrag||ea.canDrag(ea,
Ea,Va));if(Qa){Ja=ea;Ja.startX=Ea;Ja.startY=Va}if(Qa)break}Hits.triggerEvent(Aa,da)}eb=q.length>0?COG.extend({},Aa):null;Aa=null}}animFrame(K)}function T(q,t,x){Aa=Hits.init(q,t,x,d(x.x,x.y,true));for(q=va;q--;)yb=yb||($[q].hitGuess?$[q].hitGuess(Aa.x,Aa.y,da):false);yb&&Fa++}function ga(){Fa++}function aa(){var q=new l(sa,ta,ib,kb);q.scaleFactor=wa;return q}function ma(){var q=aa();if(q){if(Za||$a)if(q){var t=ob?sa+(q.w>>1):sa,x=pb?ta+(q.h>>1):ta,P=q.w,ea=q.h;if(Za&&Za>P)if(t+P>Za)sa=ob?sa:Za-P;
else if(t<0)sa=ob?sa:0;if($a&&$a>ea)if(x+ea>$a)ta=pb?ta:$a-ea;else if(x<0)ta=pb?ta:0}wb=sa;xb=ta;M("refresh",da,q);Fa++}}function z(q,t,x,P,ea){var Ea;if(!tc){x=false;Ea=qa(ka(q)/Math.LN2);q=N(2,Ea)}if(x)COG.tweenValue(wa,q,x,ea,function(Va,Qa){wa=Va;if(Qa){Ea=qa(ka(wa)/Math.LN2);wa=N(2,Ea);P&&P()}c()});else{wa=q;c()}return da}function Y(q,t,x){q=E(a.minZoom,ra(a.maxZoom,q));if(q!==db){var P=N(2,q-db),ea=ub/P|0,Ea=vb/P|0;db=q;J(((t?t:sa+ub)-ea)*P,((x?x:ta+vb)-Ea)*P);xb=wb=0;M("zoomLevelChange",q);
wa=1;renderer.trigger("reset");ma()}}function M(){for(var q=da.trigger.apply(null,arguments).cancel,t=$.length;t--;)q=$[t].trigger.apply(null,arguments).cancel||q;return!q}function J(q,t,x,P,ea){function Ea(){Va+=1;if(Va>=2){Qb=false;ea&&ea()}}var Va=0;if(x&&panSpeed===0){COG.tweenValue(sa,q,x,P,function(Qa,zb){sa=Qa|0;(zb?Ea:ga)();return panSpeed===0});COG.tweenValue(ta,t,x,P,function(Qa,zb){ta=Qa|0;(zb?Ea:ga)();return panSpeed===0});Qb=true}else{sa=q|0;ta=t|0;ea&&ea()}}a=COG.extend({id:COG.objId("view"),
container:"",captureHover:true,fastpan:false,fastpanPadding:128,inertia:true,refreshDistance:256,pannable:false,scalable:false,fps:60,minZoom:1,maxZoom:1,renderer:"canvas",zoomLevel:1},a);var ca=2,V=5,oa={},$=[],va=0,Ua=null,Pa=null,Ya,Ja=null,pc=null,uc=!u(window.attachEvent,xa),yb=false,Mb=true,tb=false,Ma=0,Na=0,rc=0,sc=0,Ob=a.refreshDistance,sa=0,ta=0,mb=0,nb=0,wb=0,xb=0,Za=null,$a=null,ob=false,pb=false,jb=a.fastpan?a.fastpanPadding:0,Ab=[],Aa=null,eb=null,Lb=0,wa=1,Pb=1,Nb=0,Da=null,lb={index:0,
draw:false},tc=true,Qb=false,qc=1E3/a.fps|0,Fa=0,ib,kb,ub,vb,lc,mc,db=a.zoomLevel,nc=COG.easing("quad.out"),oc=300,da={id:a.id,padding:jb,attachFrame:function(q,t){Ab[Ab.length]=q;t&&Ua.appendChild(q)},detach:function(){renderer&&renderer.trigger("detach");Da&&Da.unbind();if(Pa){document.getElementById(Pa).removeChild(Pa);Ua=Pa=null}Ab=[]},eachLayer:function(q){for(var t=va;t--;)q($[t])},getLayer:function(q){for(var t=0;t<va;t++)if($[t].id===q)return $[t];return null},getZoomLevel:function(){return db},
setLayer:function(q,t){for(var x=0;x<va;x++)if($[x].id===q){$.splice(x,1);break}if(t){G(q,t);t.trigger("refresh",da,aa());da.trigger("layerChange",da,t)}Fa++;return t},invalidate:ga,refresh:ma,resetScale:function(){wa=1},scale:z,setZoomLevel:Y,syncXY:function(){},triggerAll:M,removeLayer:function(q){a:{for(var t=va;t--;)if($[t].id===q){q=t;break a}q=-1}if(q>=0&&q<va){da.trigger("layerRemove",da,$[q]);$.splice(q,1);Fa++}va=$.length},getOffset:function(){return new r(sa,ta)},getRenderer:function(){return renderer},
getScaleFactor:function(){return wa},setMaxOffset:function(q,t,x,P){Za=q;$a=t;ob=x;pb=P},getViewport:aa,updateOffset:J,pan:function(q,t){Ma=q;Na=t;Fa++}};COG.observable(da);da.bind("resync",function(){});COG.configurable(da,["container","captureHover","scalable","pannable","inertia","minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(a,null,{container:D,captureHover:R,scalable:R,pannable:R,renderer:function(q,t){if(renderer){renderer.trigger("detach");renderer=null}B(t);Fa++}}),true);CANI.init(function(q){da.markers=
G("markers",new qb({zindex:20}));oa=q;D(null,a.container);uc?window.attachEvent("onresize",j):window.addEventListener("resize",j,false)});animFrame(K);return da},Ca=function(a){a=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},a);COG.extend(this,a);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};
Ca.prototype={constructor:Ca,animate:function(a,e,c,d){o(this,a,e,c,d)},drag:null,draw:null,getProps:null,resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(bb.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=a},translate:function(a,e){this.translateX=a;this.translateY=e},updateBounds:function(a,e){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);
this.bounds=a;if(e)this.xy=bb.center(this.bounds)}};var dc=1E3/60|0,ab=[],Fb=0;v.prototype=COG.extend(Ca.prototype,{constructor:v});F.prototype=COG.extend({},Ca.prototype,{constructor:F});Q.prototype=COG.extend({},F.prototype);ba.prototype=COG.extend({},Ca.prototype,{constructor:ba});ia.prototype=COG.extend({},ba.prototype,{constructor:ia});X.prototype=COG.extend(Ca.prototype,{constructor:X});W.prototype={constructor:W,clip:null,cycle:function(){},draw:function(){},hitGuess:null};cb=function(a,e){function c(h,
k){var j=k&&k.getZoomLevel?k.getZoomLevel():0;f[j]||(f[j]=n(j));b=f[j]}e=COG.extend({imageLoadArgs:{}},e);var d=a?Ib.init(a,e).run:null,b=null,f=[],g=COG.extend(new W(e),{draw:function(h,k){h.drawTiles&&h.drawTiles(k,b.search(bb.buffer(k,128)))}});g.bind("refresh",function(h,k,j){var m=(new Date).getTime();b&&d(k,j,b,function(){k.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-m)+" ms")})});g.bind("parentChange",c);g.bind("resync",c);return g};var Sb=function(a){function e(j,m,B,G){var R=
this.dragOffset;if(!R)R=this.dragOffset=new r(j.startX-this.xy.x,j.startY-this.xy.y);this.xy.x=m-R.x;this.xy.y=B-R.y;if(G){delete this.dragOffset;if(j=k.view){j.syncXY([this.xy],true);j.invalidate()}this.trigger("dragDrop")}return true}function c(j){clearTimeout(h);h=setTimeout(function(){f.sort(function(m,B){if(B.xy&&m.xy){var G=B.xy.y-m.xy.y;return G!=0?G:B.xy.x-m.xy.x}});j&&j.invalidate()},50)}function d(j,m,B,G){G&&g.remove(G,m);g.insert(B,m)}function b(j,m){g=n(m.getZoomLevel(),g);for(var B=
f.length;B--;)f[B].resync(m)}a=COG.extend({zindex:10},a);var f=[],g,h=0,k=COG.extend(new W(a),{itemCount:0,add:function(j,m){if(j){j.layer=k;if(m)f.unshift(j);else f[f.length]=j;var B=k.view;if(B){j.resync(B);g&&j.bounds&&g.insert(j.bounds,j);c(B)}j.bind("move",d)}k.itemCount=f.length},clear:function(){g=new Db;f=[];k.itemCount=0},draw:function(j,m,B,G,R){B={};G=g&&m?g.search(m):[];for(var I=G.length;I--;){var D=G[I],K=D.style||k.style,T,ga=j.applyTransform(D),aa=D.getProps?D.getProps(j):B;if(aa=
(T=j["prep"+D.typeName])?T.call(j,D,m,R,aa):null){if(R&&aa.hit){R.elements.push(Hits.initHit(D.type,D,D.draggable?e:null));T=R.type+"Style";K=D[T]||k[T]||K}K=K?j.applyStyle(K,true):null;(T=D.draw||aa.draw)&&T.call(D,aa);K&&j.applyStyle(K)}ga&&ga.undo&&ga.undo()}},find:function(){return[].concat(f)},hitGuess:function(j,m){return g&&g.search({x:j-10,y:m-10,w:20,h:20}).length>0}});k.bind("parentChange",b);k.bind("resync",b);return k},qb=function(a){return new Sb(a)};U.prototype={constructor:U,offset:function(a,
e){var c=this.lat*Ia,d=this.lon*Ia,b=c+a/fb;c=za(la(e/fb)/Ka(c));d=d+c;b=(b+fa)%Math.PI-fa;d%=ja;return new U(b*Ra,d*Ra)},toString:function(a){return this.lat+(a||" ")+this.lon}};COG.extend(C,{ex:COG.extend,is:u,ticks:S,userMessage:function(a,e,c){C.trigger("userMessage",a,e,c)},indexOf:na,Rect:l,XY:Ta,XYRect:bb,Vector:La,Hits:Hits,Generator:Ib,Service:rb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:p,TileLayer:cb,getImage:ha,View:Rb,ViewLayer:W,ImageLayer:cb,Drawable:Ca,Marker:v,Poly:F,Line:Q,
Arc:X,ImageDrawable:ba,ImageMarker:ia,DrawLayer:Sb,ShapeLayer:qb,Map:function(a){function e(h,k,j){g.setZoomLevel(k);c(h,j)}function c(h,k,j,m){h=Oa.init(h,Ga(g.getZoomLevel()));var B=g.getViewport();g.updateOffset(h.x-(B.w>>1),h.y-(B.h>>1),j,m,function(){k&&k(g)})}a=COG.extend({zoomLevel:1,minZoom:1,maxZoom:18,pannable:true,scalable:true},a);var d=new r,b=0,f=a.tapExtent;a.adjustScaleFactor=function(h){return Math.pow(2,(h<1?Math.floor:Math.ceil)(Math.log(h)))};var g=COG.extend(new Rb(a),{getBoundingBox:function(){var h=
g.getViewport();return h?Wa.init(Oa.toPos(new r(h.x,h.y2),b),Oa.toPos(new r(h.x2,h.y),b)):null},getCenterPosition:function(){var h=g.getViewport();if(h){h=new r(h.x+(h.w>>1),h.y+(h.h>>1));return Oa.toPos(h,b)}return null},gotoBounds:function(h,k){var j=Wa.getZoomLevel(h,g.getViewport());e(Wa.getCenter(h),j,k)},gotoPosition:e,panToPosition:c,syncXY:function(h,k){return(k?Oa.syncPos:Oa.sync)(h,b)}});g.bind("tap",function(h,k,j,m){h=Oa.toPos(m,b);var B=Oa.toPos(Ta.offset(m,-f,f),b);m=Oa.toPos(Ta.offset(m,
f,-f),b);g.trigger("geotap",k,j,h,Wa.init(B,m))});g.bind("refresh",function(h,k,j){if(d.x!=j.x||d.y!=j.y){g.trigger("boundsChange",g.getBoundingBox());d.x=j.x;d.y=j.y}});g.bind("zoomLevelChange",function(h,k){var j;b=Ga(k);j=ja/b|0;g.setMaxOffset(j,j,true,false);g.resetScale();g.triggerAll("resync",g)});return g},Pos:U});var Bb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ia=Math.PI/180,Ra=180/Math.PI,Cb=fa,Tb=-Cb,Ub=ja,vc=-Ub,fb=6371,hb=0.08181919084262157,
gb=null,Vb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ya=function(){function a(c){return!c||c.lat===0&&c.lon===0}function e(c,d){return new U(c,d)}return{calcDistance:function(c,d){if(a(c)||a(d))return 0;var b=(d.lat-c.lat)*Ia>>1,f=(d.lon-c.lon)*Ia>>1;b=la(b)*la(b)+Ka(c.lat*Ia)*Ka(d.lat*Ia)*la(f)*la(f);b=2*fc(L(b),L(1-b));return fb*b},copy:function(c){return c?e(c.lat,c.lon):null},empty:a,equal:function(c,d){return c&&d&&c.lat==d.lat&&c.lon==
d.lon},fromMercatorPixels:function(c,d){for(var b=N(Math.E,-d),f=fa-2*Gb(b),g=ua(f,b),h=0;h<12&&H(f-g)>1.0E-7;){f=g;g=ua(f,b);h++}return e(g*Ra,c%360*Ra)},generalize:function(c,d,b){var f=c.length,g=[],h=null;b||(b=250);b/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");for(var k=f;k--;)if(k===0)g.unshift(c[k]);else{var j=!h||ya.inArray(c[k],d)?b:ya.calcDistance(h,c[k]);if(c[k]&&j>=b){g.unshift(c[k]);h=c[k]}}COG.info("generalized "+f+" positions into "+g.length+" positions");
return g},inArray:function(c,d){for(var b=ya.equal,f=d.length;f--;)if(b(c,d[f]))return true;return false},inBounds:function(c,d){var b=!(ya.empty(c)||ya.empty(d));return b=(b=b&&c.lat>=d.min.lat&&c.lat<=d.max.lat)&&c.lon>=d.min.lon&&c.lon<=d.max.lon},init:e,offset:function(c,d,b){return c.offset(d,b)},parse:function(c){return new U(c)},parseArray:function(c){var d=c.length,b=Array(d);for(d=d;d--;)b[d]=new U(c[d]);return b},toMercatorPixels:function(c){return T5.XY.init(parseFloat(c.lon)*Ia,pa(c.lat))},
toString:function(c){return c?c.toString():""},vectorize:function(c,d){function b(){for(var k=0,j=d.chunkSize,m=f;m--;){g[m]=T5.GeoXY.init(c[m]);k+=1;if(k>j)break}f=m;if(f<=0)d.callback&&d.callback(g);else animFrame(b)}var f=c.length,g=Array(f);d=COG.extend({chunkSize:500,async:true,callback:null},d);if(!d.async){for(var h=f;h--;)g[h]=T5.GeoXY.init(c[h]);return g}animFrame(b);return null}}}(),Wa=function(){function a(b,f,g){var h=new r(0,f.lat-b.lat);h.x=(g||u(g,xa))&&b.lon>f.lon?360-b.lon+f.lon:
f.lon-b.lon;return h}function e(b,f){return Wa.init(new U(b.min.lat-f,b.min.lon-f%360),new U(b.max.lat+f,b.max.lon+f%360))}function c(b){var f=a(b.min,b.max);return new U(b.min.lat+(f.y>>1),b.min.lon+(f.x>>1))}function d(b,f){return{min:new U(b),max:new U(f)}}return{calcSize:a,createBoundsFromCenter:function(b,f){var g=f/fb,h=b.lat*Ia,k=b.lon*Ia,j=h-g,m=h+g;if(j>Tb&&m<Cb){h=za(la(g)/Ka(h));g=(k-h)%ja;k=(k+h)%ja}else{j=E(j,Tb);m=ra(m,Cb);g=vc;k=Ub}return Wa.init(new U(j*Ra,g*Ra),new U(m*Ra,k*Ra))},
expand:e,forPositions:function(b,f){var g=null,h=T5.ticks();f||(f="auto");for(var k=b.length;k--;)if(g){var j=a(g.min,b[k],false),m=a(b[k],g.max,false);if(j.x<0)g.min.lon=b[k].lon;if(j.y<0)g.min.lat=b[k].lat;if(m.x<0)g.max.lon=b[k].lon;if(m.y<0)g.max.lat=b[k].lat}else g=d(b[k],b[k]);if(f){if(f=="auto"){k=a(g.min,g.max);f=E(k.x,k.y)*0.3}g=e(g,f)}COG.trace("calculated bounds for "+b.length+" positions",h);return g},getCenter:c,getZoomLevel:function(b,f){var g=c(b);g=ra(qa(H(g.lat)*0.05),Bb.length);
var h=Bb[g],k=a(b.min,b.max);g=Z(ka(Bb[3]*f.h/k.y)/ka(2));h=Z(ka(h*f.w/k.x)/ka(2));return ra(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:d,isEmpty:function(b){return!b||ya.empty(b.min)||ya.empty(b.max)},toString:function(b){return"min: "+ya.toString(b.min)+", max: "+ya.toString(b.max)}}}();rb=function(){var a=/^(\d+).*$/,e=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(c,d){a.lastIndex=-1;if(a.test(c))for(var b=c.replace(a,"$1"),f=d.split(","),g=0;g<f.length;g++){e.lastIndex=-1;if(e.test(f[g])){var h=
e.exec(f[g]);if(b>=parseInt(h[1],10)&&b<=parseInt(h[2],10))return true}else if(b==f[g])return true}return false},normalize:function(c){if(!c)return"";c=c.toUpperCase();if(!gb){var d=[];for(var b in Vb)d.push(b);gb=RegExp("(\\s)("+d.join("|")+")(\\s|$)","i")}gb.lastIndex=-1;if(d=gb.exec(c))c=c.replace(gb,"$1"+Vb[d[2]]);return c},toString:function(c){return c.streetDetails+" "+c.location}}}();var Oa=C.GeoXY=function(){function a(d,b){if(d.length){for(var f,g,h,k,j=d.length;j--;){a(d[j],b);f=u(f,xa)||
d.x<f?d.x:f;g=u(g,xa)||d.y<g?d.y:g;h=u(h,xa)||d.x>h?d.x:h;k=u(k,xa)||d.y>k?d.y:k}return new l(f,g,h-f,k-g)}else if(d.mercXY){f=d.mercXY;d.x=qa((f.x+Math.PI)/b);d.y=qa((Math.PI-f.y)/b);d.rpp=b}return d}function e(d,b){if(d.length)for(var f=d.length;f--;)e(d[f],b);else{d.mercXY=new r(d.x*b-Math.PI,Math.PI-d.y*b);d.pos=ya.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function c(d,b,f){d.pos=b;d.mercXY=ya.toMercatorPixels(b);(f=u(f,gc)?f:d.rpp)&&a(d,f)}return{init:function(d,b){var f=new r;c(f,d,
b);return f},sync:a,syncPos:e,toPos:function(d,b){b=b||d.rpp;return ya.fromMercatorPixels(d.x*b-Math.PI,Math.PI-d.y*b)},updatePos:c}}(),wc="featurecollection",xc="feature",Hb={async:false};La={processor:null,group:"shapes",layerClass:qb};var yc={point:COG.extend({},La,{processor:function(a,e,c,d){e=Ha([e.coordinates],Hb);if(e.length>0)if(c=d.marker(e[0],c)){a.add(c);return e.length}},group:"markers",layerClass:qb}),linestring:COG.extend({},La,{processor:function(a,e,c,d){e=Ha(e&&e.coordinates?e.coordinates:
[]);return Ba(a,e,c,d.line)}}),multilinestring:COG.extend({},La,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=e.length;f--;)b+=Ba(a,e[f],c,d.line);return b}}),polygon:COG.extend({},La,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return Ba(a,e[0],c,d.poly);return 0}}),multipolygon:COG.extend({},La,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=0;f<e.length;f++)b+=Ba(a,e[f][0],c,d.poly);return b}})},Wb=
function(a,e,c,d){function b(D,K){var T=D.processor,ga=j+D.group,aa=COG.extend({},D,c,{properties:K.properties});if(T){var ma=I[ga];if(!ma){ma=new D.layerClass({id:ga});I[ga]=ma}return T(ma,K.data,aa,d)}return 0}function f(D,K){var T=D&&D.type?D.type.toLowerCase():null;return T&&T===xc?f(D.geometry,D.properties):{type:T,isCollection:T?T===wc:false,definition:yc[T],data:D,properties:K?K:D.properties}}function g(D){var K=0,T=COG.extend({},c),ga=m;D=D?D:(new Date).getTime();if(!G){for(;ga<B;ga++){D=
f(k?k(a[ga]):a[ga]);var aa=null;if(D.isCollection){T.layerPrefix=j+R++ +"-";G=new Wb(D.data.features,function(ma){G=null;for(var z in ma)I[z]=ma[z];m>=B&&e&&e(I)},T);aa+=1}else if(D.definition)aa=b(D.definition,D);K+=aa?aa:1;if(K>=h)break}m=ga+1;if(G||m<B)animFrame(g);else e&&e(I)}}c=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},c);d=COG.extend({marker:function(D){return new v({xy:D})},line:function(D,K){return new F(D,COG.extend({},c,K))},poly:function(D,K){return new F(D,COG.extend({fill:true},
c,K))}},d);var h=500,k=c.rowPreParse,j=c.layerPrefix,m=0,B=0,G=null,R=0,I={};if(a){u(a,"array")||(a=[a]);B=a.length;animFrame(g)}};La=C.GeoJSON={parse:function(a,e,c){return new Wb(a,e,c)}};C.GeoShape=function(a,e){e=COG.extend({autoParse:true},e);for(var c=Array(a.length),d=e.autoParse,b=T5.Geo.Position.parse,f=a.length;f--;)c[f]=T5.GeoXY.init(d?b(a[f]):a[f]);return new T5.Poly(c,e)};C.Geo={distanceToString:function(a){if(a>1E3)return~~(a/10)/100+" km";return a?a+" m":""},dist2rad:function(a){return a/
fb},radsPerPixel:Ga,Position:ya,BoundingBox:Wa,Radius:function(a,e){return{distance:parseInt(a,10),uom:e}},Address:function(a){return a=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},a)},A:rb,GeoJSON:La}})(T5);
