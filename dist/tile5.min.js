COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var F=arguments[0]||{},X,t=1,q=arguments.length;t<q;t++)if((X=arguments[t])!==null)for(var k in X){var l=X[k];if(F!==l)if(l!==undefined)F[k]=l}return F};
(function(){var F=Object.prototype.hasOwnProperty,X=0,t={};t.toID=function(q){return q.replace(/\s/g,"-")};t.objId=function(q){return(q?q:"obj")+X++};t.isFunction=function(q){return toString.call(q)==="[object Function]"};t.isArray=function(q){return toString.call(q)==="[object Array]"};t.isPlainObject=function(q){if(!q||toString.call(q)!=="[object Object]"||q.nodeType||q.setInterval)return false;if(q.constructor&&!F.call(q,"constructor")&&!F.call(q.constructor.prototype,"isPrototypeOf"))return false;
var k;for(k in q);return k===undefined||F.call(q,k)};t.isEmptyObject=function(q){for(var k in q)return false;return true};t.isXmlDocument=function(q){return toString.call(q)==="[object Document]"};t.contains=function(q,k){var l=q,p=arguments,z=1;if(k&&module.isArray(k)){p=k;z=0}for(z=z;z<p;z++)l=l&&typeof foo[p[z]]!=="undefined";return l};t.formatStr=function(q){if(arguments.length<=1)return q;for(var k=arguments.length-2,l=0;l<=k;l++)q=q.replace(RegExp("\\{"+l+"\\}","gi"),arguments[l+1]);return q};
t.wordExists=function(q,k){var l="";if(k.toString)k=k.toString();for(var p=0;p<k.length;p++)l+=!/\w/.test(k[p])?"\\"+k[p]:k[p];return RegExp("(^|\\s|\\,)"+l+"(\\,|\\s|$)","i").test(q)};COG.extend(COG,t)})();
(function(){function F(l){return typeof console!=="undefined"?function(){console[l](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var X=window.console&&window.console.markTimeline,t=F("error"),q=F("info"),k=function(){return X?function(l,p){console.markTimeline(l+(p?": "+((new Date).getTime()-p)+"ms":""))}:function(){}}();COG.extend(COG,{trace:k,debug:F("debug"),info:q,warn:F("warn"),error:t,exception:function(l){if(t)for(var p in l)q("ERROR DETAIL: "+p+
": "+l[p])}})})();
(function(){function F(t,q){var k=t.hasOwnProperty("obsHandlers")?t.obsHandlers:null;k[q]||(k[q]=[]);return k[q]}var X=0;COG.observable=function(t){if(!t)return null;if(!(t.hasOwnProperty("obsHandlers")?t.obsHandlers:null))t.obsHandlers={};if(!t.hasOwnProperty("bind")){t.bind=function(q,k){var l="callback"+X++;F(t,q).unshift({fn:k,id:l});return l};t.triggerCustom=function(q,k){var l=F(t,q),p={cancel:false,name:q,source:this},z;k&&COG.extend(p,k);if(!l)return null;z=Array.prototype.slice.call(arguments,2);
t.eventInterceptor&&t.eventInterceptor(q,p,z);z.unshift(p);for(var L=l.length;L--&&!p.cancel;)l[L].fn.apply(this,z);return p};t.trigger=function(q){var k=Array.prototype.slice.call(arguments,1);k.splice(0,0,q,null);return t.triggerCustom.apply(this,k)};t.unbind=function(q,k){if(typeof q==="undefined")t.obsHandlers={};else for(var l=F(t,q),p=0;l&&p<l.length;p++)if(l[p].id===k){l.splice(p,1);break}return t}}return t}})();
(function(){function F(k,l){k[l]||(k[l]=function(p){return k.configure(l,p)})}function X(k){k.gtConfId="configurable"+q++;k.gtConfig={};k.gtConfigFns=[];return k.gtConfig}var t={},q=0;COG.paramTweaker=function(k,l,p){return function(z,L){if(typeof L!=="undefined"){if(z in k)k[z]=L;p&&z in p&&p[z](z,L)}else return l&&z in l?l[z](z):k[z]}};COG.configurable=function(k,l,p,z){if(k){k.gtConfId||X(k);var L=k.gtConfId,qa=k.gtConfig,n=k.gtConfigFns;t[L]=k;n.push(p);for(p=l.length;p--;){qa[l[p]]=true;z&&F(k,
l[p])}if(!k.configure)k.configure=function(E,w){if(qa[E]){for(var m=n.length;m--;){var r=n[m](E,w);if(typeof r!=="undefined")return r}return t[L]}return null}}}})();
(function(){function F(k){var l=document.createElement("script"),p=false;l.src=k;l.async=true;l.onload=l.onreadystatechange=function(){if(!p&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){p=true;l.onload=l.onreadystatechange=null;l&&l.parentNode&&l.parentNode.removeChild(l)}};t||(t=document.getElementsByTagName("head")[0]);t.appendChild(l)}var X=0,t,q=this;COG.jsonp=function(k,l,p){k+=k.indexOf("?")>=0?"&":"?";var z="json"+ ++X;q[z]=function(L){l(L);q[z]=null;try{delete q[z]}catch(qa){}};
F(k+(p?p:"callback")+"="+z);return z}})();
(function(){var F=1.70158,X=Math.PI/2,t=Math.PI*2,q=1E3/60|0,k=Math.abs,l=Math.pow,p=Math.sin,z=Math.asin,L=Math.cos,qa={linear:function(n,E,w,m){return w*n/m+E},backin:function(n,E,w,m){return w*(n/=m)*n*((F+1)*n-F)+E},backout:function(n,E,w,m){return w*((n=n/m-1)*n*((F+1)*n+F)+1)+E},backinout:function(n,E,w,m){return(n/=m/2)<1?w/2*n*n*(((F*=1.525)+1)*n-F)+E:w/2*((n-=2)*n*(((F*=1.525)+1)*n+F)+2)+E},bouncein:function(n,E,w,m){return w-qa.bounceout(m-n,0,w,m)+E},bounceout:function(n,E,w,m){return(n/=
m)<1/2.75?w*7.5625*n*n+E:n<2/2.75?w*(7.5625*(n-=1.5/2.75)*n+0.75)+E:n<2.5/2.75?w*(7.5625*(n-=2.25/2.75)*n+0.9375)+E:w*(7.5625*(n-=2.625/2.75)*n+0.984375)+E},bounceinout:function(n,E,w,m){return n<m/2?qa.bouncein(n*2,0,w,m)/2+E:qa.bounceout(n*2-m,0,w,m)/2+w/2+E},cubicin:function(n,E,w,m){return w*(n/=m)*n*n+E},cubicout:function(n,E,w,m){return w*((n=n/m-1)*n*n+1)+E},cubicinout:function(n,E,w,m){if((n/=m/2)<1)return w/2*n*n*n+E;return w/2*((n-=2)*n*n+2)+E},elasticin:function(n,E,w,m,r,u){if(n==0)return E;
if((n/=m)==1)return E+w;u||(u=m*0.3);if(!r||r<k(w)){r=w;w=u/4}else w=u/t*z(w/r);return-(r*l(2,10*(n-=1))*p((n*m-w)*t/u))+E},elasticout:function(n,E,w,m,r,u){var U;if(n==0)return E;if((n/=m)==1)return E+w;u||(u=m*0.3);if(!r||r<k(w)){r=w;U=u/4}else U=u/t*z(w/r);return r*l(2,-10*n)*p((n*m-U)*t/u)+w+E},elasticinout:function(n,E,w,m,r,u){var U;if(n==0)return E;if((n/=m/2)==2)return E+w;u||(u=m*0.3*1.5);if(!r||r<k(w)){r=w;U=u/4}else U=u/t*z(w/r);if(n<1)return-0.5*r*l(2,10*(n-=1))*p((n*m-U)*t/u)+E;return r*
l(2,-10*(n-=1))*p((n*m-U)*t/u)*0.5+w+E},quadin:function(n,E,w,m){return w*(n/=m)*n+E},quadout:function(n,E,w,m){return-w*(n/=m)*(n-2)+E},quadinout:function(n,E,w,m){if((n/=m/2)<1)return w/2*n*n+E;return-w/2*(--n*(n-2)-1)+E},sinein:function(n,E,w,m){return-w*L(n/m*X)+w+E},sineout:function(n,E,w,m){return w*p(n/m*X)+E},sineinout:function(n,E,w,m){return-w/2*(L(Math.PI*n/m)-1)+E}};COG.tweenValue=function(n,E,w,m,r){function u(da){da=da?da:(new Date).getTime();if($+q<da){var W=da-U,ra=w(W,n,ka,m),sa=
U+m<=da;da=!sa;if(r){W=r(ra,sa,W);da=typeof W!="undefined"?W&&da:da}da&&animFrame(u)}}var U=(new Date).getTime(),$=0,ka=E-n;animFrame(u);return{}};COG.easing=function(n){return qa[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(n,E){qa[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]=E}})();
(function(){var F=/^P(\d+Y)?(\d+M)?(\d+D)?$/,X=/^(\d+H)?(\d+M)?(\d+S)?$/,t={8601:function(k){k=k.split("T");var l=null;l=null;var p=0,z=0;F.lastIndex=-1;l=F.exec(k[0]);p+=l[3]?parseInt(l[3].slice(0,-1),10):0;X.lastIndex=-1;l=X.exec(k[1]);z+=l[1]?parseInt(l[1].slice(0,-1),10)*3600:0;z+=l[2]?parseInt(l[2].slice(0,-1),10)*60:0;z+=l[3]?parseInt(l[3].slice(0,-1),10):0;return new q(p,z)}},q=COG.Duration=function(k,l){return{days:k?k:0,seconds:l?l:0}};COG.addDuration=function(){for(var k=new q,l=arguments.length;l--;){k.days+=
arguments[l].days;k.seconds+=arguments[l].seconds}if(k.seconds>=86400){k.days+=~~(k.seconds/86400);k.seconds%=86400}return k};COG.formatDuration=function(k){var l,p,z="";if(k.days)z=k.days+" days ";if(k.seconds){k=k.seconds;if(k>=3600){l=~~(k/3600);k-=l*3600}if(k>=60){p=Math.round(k/60);k-=p*60}if(l)z=z+l+(l>1?" hrs ":" hr ")+(p?(p>10?p:"0"+p)+" min ":"");else if(p)z=z+p+" min";else if(k>0)z=z+(k>10?k:"0"+k)+" sec"}return z};COG.parseDuration=function(k,l){var p=l?t[l]:null;if(p)return p(k);COG.Log.warn("Could not find duration parser for specified format: "+
l);return new q}})();COG.ObjectStore=function(){var F={},X={},t="obj_"+(new Date).getTime(),q=0,k=Object.prototype.hasOwnProperty;return{add:function(l,p){var z;p=p?p:"default";if(l&&l.constructor)if(!k.call(l,"id"))l.id=t+ ++q;z=X[p]?X[p]:X[p]=[];F[l.id]=z.length;z[l.length]=l}}};var CANI={};
(function(F){var X=[],t=0,q=false,k=F.register=function(l,p){X.push({section:l,run:p})};F.init=function(l){function p(){if(t<X.length){var L=X[t++];z[L.section]||(z[L.section]={});L.run(z[L.section],p)}else{for(L in z)F[L]=z[L];q=true;l&&l(F)}}var z={};if(q&&l)l(F);else{t=0;p()}};k("canvas",function(l,p){function z(){var E,w=L.getContext("2d");w.save();try{w.translate(50,50);w.beginPath();w.rect(0,0,20,20);E=w.isPointInPath(10,10)}finally{w.restore()}return E}var L=document.createElement("canvas"),
qa=typeof FlashCanvas!="undefined",n=typeof G_vmlCanvasManager!="undefnined";L.width=200;L.height=200;l.pipTransformed=qa||n?false:z();p()})})(CANI);
INTERACT=function(){function F(m){return function(r,u,U){(U?U:m?document.body:document).addEventListener(r,u,false)}}function X(m){return function(r,u,U){(U?U:m?document.body:document).removeEventListener(r,u,false)}}function t(m,r,u){(u?u:document).attachEvent("on"+m,r)}function q(m,r,u){(u?u:document).detachEvent("on"+m,r)}function k(m,r){return{x:m?m:0,y:r?r:0,count:1}}function l(m,r){E.push(COG.extend({handler:null,checks:{},type:m},r))}function p(m){var r=0,u=0;if(m.offsetParent){do{r+=m.offsetLeft;
u+=m.offsetTop;m=m.offsetParent}while(m)}return{left:r,top:u}}function z(m,r){return{source:m,target:r.target?r.target:r.srcElement}}function L(m,r){for(var u=m.target?m.target:m.srcElement;u&&u!==r&&u.nodeName;)u=u.parentNode;return u&&u===r}function qa(m,r){return{x:m.x-(r?r.left:0),y:m.y-(r?r.top:0)}}function n(m){if(m.preventDefault){m.preventDefault();m.stopPropagation()}else m.cancelBubble&&m.cancelBubble()}var E=[],w=function(m,r,u){function U(aa,ia,ea,N){var O=0,ma=0,y=0;COG.tweenValue(0,
aa,ea,N,function(I){y=O;O=I});COG.tweenValue(0,ia,ea,N,function(I){$.trigger("pan",O-y,I-ma);ma=I})}u=COG.extend({binder:null,unbinder:null,observable:null},u);for(var $=u.observable,ka=null,da=[],W=[],ra,sa,wa={bind:function(){return $.bind.apply(null,arguments)},pannable:function(aa){ka=COG.extend({inertia:true},aa);return wa},unbind:function(){$.unbind();for(var aa=0;aa<da.length;aa++)da[aa].unbind();return wa}},Ea=0;Ea<r.length;Ea++)da.push(r[Ea](m,$,u));$.bind("pointerDown",function(){W=[];sa=
ra=0});$.bind("pointerMove",function(aa,ia,ea,N){if(ka){W[W.length]={ticks:(new Date).getTime(),x:N.x,y:N.y};$.trigger("pan",N.x,N.y)}ra+=N.x?N.x:0;sa+=N.y?N.y:0});$.bind("pointerUp",function(aa,ia,ea){if(Math.abs(ra)>20||Math.abs(sa)>20){if(ka){ea=W.length;var N,O;ia=0;for(O=W.length;--O>1&&ia<50;)ia+=W[O].ticks-W[O-1].ticks;if(ea-O>1){aa=W[ea-1].x-W[O].x;N=W[ea-1].y-W[O].y;O=Math.sqrt(aa*aa+N*N)|0;if(O>15){aa=W[ea-1].x-W[0].x;N=W[ea-1].y-W[0].y;O=Math.sqrt(aa*aa+N*N)|0;ea=Math.asin(N/O);ia=O*500/
ia|0;ia=ia>300?300:ia;U(Math.cos(aa>0?ea:Math.PI-ea)*ia,Math.sin(ea)*ia,COG.easing("sine.out"),500)}}}}else $.trigger("tap",ia,ea)});return wa};l("pointer",{handler:function(m,r,u){function U(y){if(y.pageX&&y.pageY)return k(y.pageX,y.pageY);else{var I=document.documentElement,Y=document.body;return k(y.clientX+(I&&I.scrollLeft||Y&&Y.scrollLeft||0)-(I&&I.clientLeft||Y&&Y.clientLeft||0),y.clientY+(I&&I.scrollTop||Y&&Y.scrollTop||0)-(I&&I.clientTop||Y&&Y.clientTop||0))}}function $(y){if(L(y,m))if(aa=
ra(y)){var I=U(y);m.style.cursor="move";n(y);O=I.x;ma=I.y;ia=k(O,ma);r.triggerCustom("pointerDown",z("mouse",y),ia,qa(ia,p(m)))}}function ka(y){var I=U(y);ea=I.x;N=I.y;if(L(y,m))sa(y,aa?"pointerMove":"pointerHover")}function da(y){if(aa&&ra(y)){aa=false;if(L(y,m)){m.style.cursor="default";sa(y,"pointerUp")}}}function W(y){if(L(y,m)){var I;y=y||window.event;if(y.detail)I=y.axis===2?-y.detail*wa:0;else{I=y.wheelDeltaY?y.wheelDeltaY:y.wheelDelta;if(window.opera)I=-I}if(I!==0){var Y=k(ea,N);r.triggerCustom("zoom",
z("mouse",y),Y,qa(Y,p(m)),I/Ea,"wheel");n(y);y.returnValue=false}}}function ra(y){y=y||window.event;return(y.which||y.button)==1}function sa(y,I,Y,xa,ya){Y=typeof Y!="undefined"?Y:ea;xa=typeof xa!="undefined"?xa:N;var J=Y-O,P=xa-ma,R=k(Y,xa);r.triggerCustom(I,z("mouse",y),R,qa(R,p(m)),k(J,P));if(typeof ya=="undefined"||ya){O=Y;ma=xa}}u=COG.extend({},u);var wa=120,Ea=wa*8,aa=false,ia,ea,N,O,ma;u.binder("mousedown",$,false);u.binder("mousemove",ka,false);u.binder("mouseup",da,false);u.binder("dblclick",
function(y){COG.info("captured double click");if(L(y,m)){var I=U(y);r.triggerCustom("doubleTap",z("mouse",y),I,qa(I,p(m)))}},false);u.binder("mousewheel",W,document);u.binder("DOMMouseScroll",W,document);return{unbind:function(){u.unbinder("mousedown",$,false);u.unbinder("mousemove",ka,false);u.unbinder("mouseup",da,false);u.unbinder("mousewheel",W,document);u.unbinder("DOMMouseScroll",W,document)}}},checks:{touch:false}});l("pointer",{handler:function(m,r,u){function U(J){if(J.count<2)return 0;var P=
J.x-J.next.x;J=J.y-J.next.y;return~~Math.sqrt(P*P+J*J)}function $(J,P,R){P=P?P:0;R=R?R:0;for(var ua={x:J.x-P,y:J.y-R,id:J.id,count:J.count},Aa=ua;J.next;){J=J.next;Aa=Aa.next={x:J.x-P,y:J.y-R,id:J.id}}return ua}function ka(J,P){var R=J[P?P:"touches"],ua,Aa;if(R.length===0)return null;Aa=ua={x:R[0].pageX,y:R[0].pageY,id:R[0].identifier,count:R.length};for(var Ga=1,Ya=R.length;Ga<Ya;Ga++)Aa=Aa.next={x:R[Ga].pageX,y:R[Ga].pageY,id:R[Ga].identifier};return ua}function da(J){if(L(J,m)){N=p(m);var P=ka(J,
"changedTouches"),R=$(P,N.left,N.top);if(!ma){O=aa;r.triggerCustom("pointerDown",z("touch",J),P,R)}xa&&r.triggerCustom("pointerDownMulti",z("touch",J),P,R);ma=ka(J);if(ma.count>1)I=U(ma);ya=1;Y=$(ma)}}function W(J){if(L(J,m)){J.preventDefault();y=ka(J);if(O==aa)O=Math.abs(ma.x-y.x)>wa||Math.abs(ma.y-y.y)>wa?Ea:aa;if(O!=aa){O=y.count>1?ea:ia;if(O==ea)if(ma.count===1){ma=$(y);I=U(ma)}else{var P=U(y);if(Math.abs(I-P)<sa)O=ia;else{var R;R=y.x;var ua=y.next.x,Aa=y.y,Ga=y.next.y,Ya=Aa<Ga?Aa:Ga;R={x:(R<
ua?R:ua)+(Math.abs(R-ua)>>1),y:Ya+(Math.abs(Aa-Ga)>>1)};P=P/I;ua=P-ya;r.triggerCustom("zoom",z("touch",J),R,qa(R,N),ua,"pinch");ya=P}}O==ia&&r.triggerCustom("pointerMove",z("touch",J),y,$(y,N.left,N.top),k(y.x-Y.x,y.y-Y.y));xa&&r.triggerCustom("pointerMoveMulti",z("touch",J),y,$(y,N.left,N.top))}Y=$(y)}}function ra(J){if(L(J,m)){var P=ka(J,"changedTouches"),R=$(P,N.left,N.top);y=ka(J);if(!y){r.triggerCustom("pointerUp",z("touch",J),P,R);ma=null}xa&&r.triggerCustom("pointerUpMulti",z("touch",J),P,
R)}}u=COG.extend({detailed:false,inertia:false},u);var sa=20,wa=7,Ea=0,aa=1,ia=2,ea=3,N,O,ma,y,I,Y,xa=u.detailed,ya=1;u.binder("touchstart",da,false);u.binder("touchmove",W,false);u.binder("touchend",ra,false);COG.info("initialized touch handler");return{unbind:function(){u.unbinder("touchstart",da,false);u.unbinder("touchmove",W,false);u.unbinder("touchend",ra,false)}}},checks:{touch:true}});return{register:l,watch:function(m,r,u){r=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!=
"undefined",types:null},r);capabilities=COG.extend({touch:"ontouchstart"in window},u);if(!r.observable){COG.info("creating observable");r.observable=COG.observable({});globalOpts=r}r.binder=r.isIE?t:F(r.bindToBody);r.unbinder=r.isIE?q:X(r.bindToBody);u=r.types;for(var U=capabilities,$=[],ka=E.length;ka--;){var da=E[ka],W=!u||u.indexOf(da.type)>=0,ra=true;for(var sa in da.checks){var wa=da.checks[sa];COG.info("checking "+sa+" capability. require: "+wa+", capability = "+U[sa]);ra=ra&&wa===U[sa]}if(W&&
ra)$[$.length]=da.handler}return new w(m,$,r)}}}();var T5={};
(function(F){function X(){return(new Date).getTime()}function t(b,d){d=Sb.call(d);if(d=="finite")return!Tb[Ya](+b);return d=="null"&&b===null||d==typeof b||d=="object"&&b===Object(b)||d=="array"&&Array.isArray&&Array.isArray(b)||Ub.call(b).slice(8,-1).toLowerCase()==d}function q(b,d){this.x=b||0;this.y=d||0}function k(b,d,f,e){this.x=b||0;this.y=d||0;this.w=f||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function l(b){b=b||(new Date).getTime();for(var d=0;d<Ua.length;){var f=Ua[d],e=
Qa[f],a=Qa[f].image&&(db||Qa[f].image.complete&&Qa[f].image.width>0),c=b-e.start;c=a||c>=Vb;if(a){a=e.callbacks;wb[f]=e.image;for(var g=0;g<a.length;g++)a[g](e.image,true)}if(c){Ua.splice(d,1);delete Qa[f]}else d++}Ua.length>0&&animFrame(l)}function p(b,d){var f=b&&d?wb[b]:null;if(f&&f&&(db||f.complete&&f.width>0))d(f);else{if(f=Qa[b])f.callbacks.push(d);else{f=new Image;f.id="_ldimg"+ ++Wb;Qa[b]={start:(new Date).getTime(),image:f,callbacks:[d]};f.src=b;Ua[Ua.length]=b}animFrame(l)}}function z(b,
d,f,e,a,c){this.x=b;this.y=d;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+d;this.loaded=false;this.image=null}function L(){for(var b=0,d=arguments.length;d--;){var f=Xb[arguments[d].toUpperCase()];if(f)b|=f}return b}function qa(b){b=b?b:(new Date).getTime();if(b-xb>Yb){for(var d=Za.splice(0),f=d.length;f--;)d[f](b);xb=b}Za.length&&animFrame(qa)}function n(b){var d=Za.length==0;Za[Za.length]=b;d&&animFrame(qa)}function E(b,d,f,e,a){a=COG.extend({easing:"sine.out",
duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),g=b[d],h=d=="translate",i=a.autoInvalidate,j=f.length&&e.length&&f.length==e.length?f.length:0,x=Array(j),H=Array(j),ba=COG.easing(a.easing),C=a.duration,D=a.progress,A=function(G){var K=G-c;G=c+C<=G;for(var ca=b.layer?b.layer.view:null,la,v=j;v--;){la=ba(K,f[v],x[v],C);H[v]=h?la|0:la}g.apply(b,H);i&&ca&&ca.invalidate();if(D){K=[].concat(G?e:H);K.unshift(G);D.apply(b,K)}if(G){b.animations--;g.apply(b,e);a.complete&&
a.complete.apply(b,e)}else n(A)};if(g&&g.apply&&j>0){C=C?C:DEFAULT_DURATION;for(d=j;d--;)x[d]=e[d]-f[d];b.animations++;n(A)}}function w(b){b=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},b);Fa.call(this,b)}function m(b,d){d=COG.extend({simplify:false,fill:true,typeName:"Poly"},d);var f=d.simplify;Fa.call(this,d);COG.extend(this,{resync:function(e){var a,c,g,h,i,j;e.syncXY(b);j=this.points=Ra.floor(f?Ra.simplify(b):b);for(var x=j.length;x--;){e=j[x].x;
a=j[x].y;h=t(h,va)||e<h?e:h;i=t(i,va)||a<i?a:i;c=t(c,va)||e>c?e:c;g=t(g,va)||a>g?a:g}this.updateBounds(new k(h,i,c-h,g-i),true)}});this.haveData=b&&b.length>=2}function r(b,d){d.fill=false;m.call(this,b,d)}function u(b){function d(){if(h&&h.width>0){if(!this.centerOffset)this.centerOffset=new q(-h.width>>1,-h.height>>1);this.updateBounds(new k(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,h.width,h.height),false)}}function f(j){if(this.imageUrl=j){var x=this;p(this.imageUrl,function(H,
ba){h=H;if(ba){var C=i.layer?i.layer.view:null;C&&C.invalidate()}d.apply(x)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var e=null,a=Fa.prototype.resync,c=0,g=0,h=b.image;Fa.call(this,b);var i=COG.extend(this,{changeImage:f,drag:function(j,x,H,ba){e||(e=new q(j.startX-this.xy.x,j.startY-this.xy.y));this.xy.x=x-e.x;this.xy.y=H-e.y;if(ba){e=null;if(this.layer)if(j=this.layer.view){j.syncXY([this.xy],true);j.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||
d(this,h);return{image:h,x:this.xy.x+c,y:this.xy.y+g}},resync:function(j){a.call(this,j);d.call(this)}});h||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;g=this.centerOffset.y}}function U(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Ra.invert(b.imageAnchor);u.call(this,b)}function $(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);Fa.call(this,b)}function ka(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:L("ACTIVE",
"ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;this.visible=true;COG.observable(COG.extend(this,b))}function da(b){for(var d=null,f=1;!d&&f<arguments.length;f++)d=sa(b,arguments[f]);d=d?d:sa(b);if(!d)throw Error("Unable to find GEO engine with "+b+" capability");return d}function W(b){b=parseFloat(b)*Ia;b=P(b);var d=eb*b;return ya((1+b)/(1-b)*Y((1-d)/(1+d),eb))/2}function ra(b){return ea/(256<<b)}function sa(b,d){var f=null;for(var e in Sa)if(d){if(e==d&&Sa[e][b]){f=
Sa[e];break}}else if(Sa[e][b]){f=Sa[e];break}return f}function wa(b,d){var f=eb*P(b);return N-2*Aa(d*Y((1-f)/(1+f),eb/2))}function Ea(b,d,f,e){d=aa(d);b.add(e(d,f));return d.length}function aa(b){var d=b?b.length:0,f=Array(d);for(d=d;d--;)f[d]=ha.init(b[d][1],b[d][0]);return ha.vectorize(f,yb)}COG.observable(F);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var ia=Array.prototype.indexOf||function(b){for(var d=0;d<this.length;d++)if(this[d]===b)return d;return-1},ea=Math.PI*2,N=Math.PI/2,O=Math.abs,ma=Math.ceil,y=Math.min,I=Math.max,Y=Math.pow,xa=Math.sqrt,ya=Math.log,J=Math.round,P=Math.sin,R=Math.asin,ua=Math.cos,Aa=Math.atan,Ga=Math.atan2,Ya="hasOwnProperty",Tb={NaN:1,Infinity:1,"-Infinity":1},Sb=String.prototype.toLowerCase,Ub=Object.prototype.toString,va="undefined",zb="number",
Zb=typeof G_vmlCanvasManager!=va,db=typeof FlashCanvas!=va,$b=T5.newCanvas=function(b,d){var f=document.createElement("canvas");f.width=b?b:0;f.height=d?d:0;if(db){document.body.appendChild(f);FlashCanvas.initElement(f)}Zb&&G_vmlCanvasManager.initElement(f);return f},Ab=function(){var b={};return{init:function(d,f){var e=b[d];if(!e)throw Error("Unable to locate requested generator: "+d);return new e(f)},register:function(d,f){b[d]=f}}}();q.prototype={constructor:q};k.prototype={constructor:k};var Ra=
function(){function b(e,a){return f(e.x-a.x,e.y-a.y)}function d(e,a){a=a||e.length;if(a<=1)return null;for(var c=Array(a-1),g=Array(a-1),h=0,i,j=0;j<a-1;j++){i=b(e[j],e[j+1]);c[j]=xa(i.x*i.x+i.y*i.y);g[j]=h+=c[j]}return{edges:c,accrued:g,tota:h}}function f(e,a){return new q(e,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var e=0,a=0,c=arguments.length;c--;){e+=arguments[c].x;a+=arguments[c].y}return f(e,a)},absSize:function(e){return I(O(e.x),O(e.y))},copy:function(e){return e?
f(e.x,e.y):null},diff:b,distance:function(e,a){return d(e,a).total},edges:d,equals:function(e,a){return e.x===a.x&&e.y===a.y},extendBy:function(e,a,c){var g=ua(a)*c|0;a=P(a)*c|0;return f(e.x-g,e.y-a)},floor:function(e){for(var a=Array(e.length),c=e.length;c--;)a[c]=f(~~e[c].x,~~e[c].y);return a},getRect:function(e){for(var a,c,g,h,i=e.length;i--;){var j=e[i];a=t(a,va)||j.x<a?j.x:a;c=t(c,va)||j.y<c?j.y:c;g=t(g,va)||j.x>g?j.x:g;h=t(h,va)||j.y>h?j.y:h}return new k(a,c,g-a,h-c)},init:f,invert:function(e){return f(-e.x,
-e.y)},min:function(e,a){return f(e.x<a.x?e.x:a.x,e.y<a.y?e.y:a.y)},max:function(e,a){return f(e.x>a.x?e.x:a.x,e.y>a.y?e.y:a.y)},offset:function(e,a,c){return f(e.x+a,e.y+(c||a))},scale:function(e,a){return f(e.x/a|0,e.y/a|0)},simplify:function(e,a){if(!e)return null;a=a?a:Ra.VECTOR_SIMPLIFICATION;for(var c=[],g=null,h=e.length;h--;){var i=e[h];if(include=!g||h===0||O(i.x-g.x)+O(i.y-g.y)>a){c.unshift(i);g=i}}return c},theta:function(e,a,c){c=R((e.y-a.y)/c);return e.x>a.x?c:Math.PI-c},toString:function(e){return e?
e.x+", "+e.y:""}}}(),ib=function(){return{dotProduct:function(b,d){return b.x*d.x+b.y*d.y}}}(),$a=function(){function b(f){return d(f.x,f.y,f.x2,f.y2)}function d(f,e,a,c){return new k(f,e,(a||f)-f,(c||e)-e)}return{buffer:function(f,e,a){return $a.init(f.x-e,f.y-(a||e),f.x+e,f.y+(a||e))},center:function(f){return new q(f.x+(f.w>>1),f.y+(f.h>>1))},copy:b,diagonalSize:function(f){return xa(f.w*f.w+f.h*f.h)},fromCenter:function(f,e,a,c){a=a>>1;c=c>>1;return d(f-a,e-c,f+a,e+c)},init:d,intersect:function(f,
e){var a=I(f.x,e.x),c=I(f.y,e.y),g=y(f.x2,e.x2),h=y(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,e){if(f.w===0||f.h===0)return b(e);else if(e.w===0||e.h===0)return b(f);else{var a=y(f.x,e.x),c=y(f.y,e.y),g=I(f.x2,e.x2),h=I(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,d){var f=[],e={},a;for(a=d.length;a--;)e[d[a].target.id]=true;for(a=b.length;a--;)e[b[a].target.id]||
(f[f.length]=b[a]);return f},init:function(b,d,f,e){return{type:b,x:e.x|0,y:e.y|0,elements:[],absXY:d,relXY:f}},initHit:function(b,d,f){return{type:b,target:d,drag:f}},triggerEvent:function(b,d,f,e){d.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},e?e:b.elements,b.absXY,b.relXY,new q(b.x,b.y))}}}();var jb=function(b){function d(a,c){var g=f[a],h;g||(g=f[a]=[]);(h=g[c])||(h=g[c]=[]);return h}b=b||128;var f=[],e={};return{insert:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,j=(a.x+a.w)/b|0;a=(a.y+a.h)/
b|0;g=g||c.id||COG.objId("spatial");e[g]=c;for(c=h;c<=j;c++)for(h=i;h<=a;h++)d(c,h).push(g)},remove:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,j=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;delete e[g];for(c=h;c<=j;c++)for(h=i;h<=a;h++){var x=d(c,h),H=ia.call(x,g);H>=0&&x.splice(H,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,h=(a.y+a.h)/b|0,i=[],j=[];for(a=a.x/b|0;a<=g;a++)for(var x=c;x<=h;x++)i=i.concat(d(a,x));i.sort();for(c=i.length;c--;){g=i[c];if(h=e[g])j[j.length]=h;for(;c>0&&i[c-1]==g;)c--}return j}}},
Vb=3E4,wb={},Wb=0;(new Date).getTime();var Qa={},Ua=[];z.prototype={constructor:z,load:function(b){var d=this;p(this.url,function(f){d.loaded=true;d.image=f;b&&b()})}};var ac=function(){return COG.observable({applyStyle:function(){},applyTransform:function(b,d,f){return{restore:null,x:d,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new q},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},
resetDrawable:null,reset:function(){}})},Bb={},Va=F.registerRenderer=function(b,d){Bb[b]=d},bc=F.attachRenderer=function(b,d,f,e){b=b.split("/");for(var a=new ac(d,f,e),c=0;c<b.length;c++){var g=Bb[b[c]];if(g)a=new g(d,f,e,a)}return a};Va("canvas",function(b,d,f,e){function a(v,S,V){var fa,T;ba[S]=function(na){for(fa=ca.length;fa--;)if(T=V[ca[fa]])na[la[fa]]=T}}function c(v,S,V,fa){var T=false;if(S)T=j.isPointInPath(D?S.x-x:S.relXY.x,D?S.y-H:S.relXY.y);return{draw:fa||K,viewport:v,state:V,hit:T,vpX:x,
vpY:H,context:j}}f=COG.extend({},f);var g,h,i,j,x=0,H=0,ba={},C=null,D=CANI.canvas.pipTransformed,A={},G=function(){},K=function(){this.fill&&j.fill();this.stroke&&j.stroke()},ca=["fill","stroke","lineWidth","opacity"],la=["fillStyle","strokeStyle","lineWidth","globalAlpha"];(function(){if(d){var v=d.tagName=="CANVAS",S=v?d.parentNode:d;g=b.width=S.offsetWidth;h=b.height=S.offsetHeight;if(v){i=d;i.width=g;i.height=h;db&&FlashCanvas.initElement(i)}else{i=$b(g,h);i.style.cssText="position: absolute; z-index: 1;";
d.appendChild(i)}j=null}})();f=COG.extend(e,{interactTarget:i,applyStyle:function(v){var S=ba[v],V=j&&j.canvas?j.canvas.id:"default",fa;A[V]||(A[V]=[]);fa=A[V].pop()||"basic";if(S){A[V].push(v);S(j);return fa}},applyTransform:function(v){if(v.translateX!==0||v.translateY!==0||v.scaling!==1||v.rotation!==0){j.save();C={undo:function(){j.restore();C=null},x:v.xy.x,y:v.xy.y};j.translate(v.xy.x-x+v.translateX,v.xy.y-H+v.translateY);v.rotation!==0&&j.rotate(v.rotation);v.scaling!==1&&j.scale(v.scaling,
v.scaling)}return C},drawTiles:function(v,S){for(var V,fa,T=x-256,na=H-256,M=v.x2,ja=v.y2,Ha=S.length;Ha--;){V=S[Ha];if(fa=V.x>=T&&V.x<=M&&V.y>=na&&V.y<=ja)V.loaded?j.drawImage(V.image,V.x-x,V.y-H):V.load(b.invalidate)}},prepare:function(v,S){var V,fa=false,T=S.scaled||S,na=S.scaleFactor;if(j)j.restore();else j=i.getContext("2d");for(V=v.length;V--;)fa=fa||v[V].clip;x=T.x;H=T.y;if(j){fa||j.clearRect(0,0,g,h);j.save();j.scale(na,na)}j.globalCompositeOperation="source-over";return j},prepArc:function(v,
S,V,fa){j.beginPath();j.arc(v.xy.x-(C?C.x:x),v.xy.y-(C?C.y:H),v.size>>1,v.startAngle,v.endAngle,false);return c(S,V,fa)},prepImage:function(v,S,V,fa,T){var na=(T.x||v.xy.x)-(C?C.x:x),M=(T.y||v.xy.y)-(C?C.y:H),ja=T.image||v.image;if(ja){j.beginPath();j.rect(na,M,T.width||ja.width,T.height||ja.height);return c(S,V,fa,function(){j.drawImage(ja,na,M,T.width||ja.width,T.height||ja.height)})}},prepMarker:function(v,S,V,fa){var T=v.xy.x-(C?C.x:x),na=v.xy.y-(C?C.y:H),M=v.size,ja=undefined;j.beginPath();switch(v.markerStyle.toLowerCase()){case "image":ja=
G;j.rect(T-(M>>1),na-(M>>1),M,M);if(v.reset&&v.image){v.image=null;v.reset=false}v.image?j.drawImage(v.image,T-(M>>1),na-(M>>1),M,M):p(v.imageUrl,function(Ha){v.image=Ha;j.drawImage(v.image,T-(M>>1),na-(M>>1),M,M)});break;default:j.moveTo(T,na);j.lineTo(T-(M>>1),na-M);j.lineTo(T+(M>>1),na-M);j.lineTo(T,na);break}return c(S,V,fa,ja)},prepPoly:function(v,S,V,fa,T){var na=true;v=T.points||v.points;T=C?C.x:x;var M=C?C.y:H;j.beginPath();for(var ja=v.length;ja--;){var Ha=v[ja].x-T,Ba=v[ja].y-M;if(na){j.moveTo(Ha,
Ba);na=false}else j.lineTo(Ha,Ba)}return c(S,V,fa)},getContext:function(){return j},getDimensions:function(){return{width:g,height:h}},getOffset:function(){return new q(x,H)}});(function(){for(var v in T5.styles)a(null,v,T5.styles[v]);T5.bind("styleDefined",a)})();return f});var kb=F.styles={},cc=F.defineStyle=function(b,d){kb[b]=d;F.trigger("styleDefined",b,kb[b]);return b},Cb=F.defineStyles=function(b){for(var d in b)cc(d,b[d])};F.getStyle=function(b){return kb[b]};F.loadStyles=function(b){COG.jsonp(b,
function(d){Cb(d)})};Cb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Xb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Lb=function(b){function d(o,s,B){if(!Ba){T(oa-s,pa-B);Z.trigger("pan",oa,pa)}}function f(o,s,B,Q){S(y(I(ta+Y(2,Q)-1,0.5),2))}function e(){var o=ya(ta)/Math.LN2|0;if(o!==0){ta=Y(2,o);V(ab+o,dc,ec)}redraw=true}function a(o,s){var B=renderer&&renderer.projectXY?
renderer.projectXY(o,s):null;if(!B){B=Z.getViewport();var Q=1/ta;B=new q(B?B.x+o*Q:o,B?B.y+s*Q:s)}return B}function c(o,s,B){fa("doubleTap",s,B,a(B.x,B.y));b.scalable&&S(2,a(B.x,B.y),b.zoomEasing,null,b.zoomDuration)}function g(o,s,B){Ba=null;K("down",s,B)}function h(o,s,B){K("hover",s,B)}function i(o,s,B){A(s,B,false)}function j(o,s,B){A(s,B,true)}function x(){clearTimeout(Db);Db=setTimeout(function(){renderer.checkSize()},250)}function H(o,s,B){K("tap",s,B);fa("tap",s,B,a(B.x,B.y,true))}function ba(){renderer=
bc(b.renderer,Z,Ha);Eb=!renderer.preventPartialScale;D()}function C(o,s){s.id=o;s.added=X();s.view=Z;s.trigger("parentChange",Z,Ha,fc);M.push(s);M.sort(function(B,Q){var ga=Q.zindex-B.zindex;if(ga===0)ga=Q.added-B.added;return ga});ja=M.length;return s}function D(){Ca&&Ca.unbind();if(renderer){Ca=INTERACT.watch(renderer.interactTarget);b.pannable&&Ca.pannable().bind("pan",d);if(b.scalable){Ca.bind("zoom",f);Ca.bind("doubleTap",c)}Ca.bind("pointerDown",g);Ca.bind("pointerMove",i);Ca.bind("pointerUp",
j);b.captureHover&&Ca.bind("pointerHover",h);Ca.bind("tap",H)}}function A(o,s,B){if(Ba){o=a(s.x,s.y);if(Ba.drag.call(Ba.target,Ba,o.x,o.y,B))redraw=true;if(B)Ba=null}}function G(o){var s,B,Q=false;o=o||(new Date).getTime();if(Q=o-Fb>gc){var ga=O(oa-lb),za=O(pa-mb);s=oa!==nb||pa!==ob;B=ta!==Gb;if(s||B)Oa++;if(ga>=Hb||za>=Hb)v();B={index:hc++,draw:Oa};Z.trigger("enterFrame",o,B);Fb=o}if(Q&&B.draw){Ka=Ib|(ta!==1?Jb:0)|(s?pb:0)|(qb?Kb:0);rb=(s=(Ka&(Jb|pb))!==0)&&(Ka&Kb)===0;s=la();renderer.trigger("predraw",
s,Ka);if(renderer.prepare(M,s,Ka,o,Da)){Oa=0;for(ii=ja;ii--;){Q=M[ii];if(Q.visible&&(Ka&Q.validStates)!==0){B=Q.style?renderer.applyStyle(Q.style,true):null;Q.draw(renderer,s,Ka,Z,o,Da);B&&renderer.applyStyle(B)}}renderer.render(s);Z.trigger("drawComplete",s,o);nb=oa;ob=pa;Gb=ta}if(Da){o=Da?Da.elements:[];if(bb&&bb.type==="hover"){s=Hits.diffHits(bb.elements,o);s.length>0&&Hits.triggerEvent(bb,Z,"Out",s)}if(o.length>0){Q=Da.x;B=Da.y;for(s=o.length;s--;){ga=o[s];za=Q;var La=B,Ja=ga&&ga.drag&&(!ga.canDrag||
ga.canDrag(ga,za,La));if(Ja){Ba=ga;Ba.startX=za;Ba.startY=La}if(Ja)break}Hits.triggerEvent(Da,Z)}bb=o.length>0?COG.extend({},Da):null;Da=null}}animFrame(G)}function K(o,s,B){Da=Hits.init(o,s,B,a(B.x,B.y,true));for(o=ja;o--;)sb=sb||(M[o].hitGuess?M[o].hitGuess(Da.x,Da.y,Ka,Z):false);sb&&Oa++}function ca(){Oa++}function la(){var o=new k(oa,pa,Z.width,Z.height);o.scaleFactor=ta;if(ta!==1)o.scaled=$a.fromCenter(oa+(Z.width>>1),pa+(Z.height>>1),Z.width/ta|0,Z.height/ta|0);return o}function v(){var o=la();
if(o){if(Wa||Xa)if(o){var s=fb?oa+(o.w>>1):oa,B=gb?pa+(o.h>>1):pa,Q=o.w,ga=o.h;if(Wa&&Wa>Q)if(s+Q>Wa)oa=fb?oa:Wa-Q;else if(s<0)oa=fb?oa:0;if(Xa&&Xa>ga)if(B+ga>Xa)pa=gb?pa:Xa-ga;else if(B<0)pa=gb?pa:0}lb=oa;mb=pa;fa("refresh",Z,o);Oa++}}function S(o,s,B,Q,ga){var za;if(!Eb){B=false;za=J(ya(o)/Math.LN2);o=Y(2,za)}if(B)COG.tweenValue(ta,o,B,ga,function(La,Ja){ta=La;if(Ja){za=J(ya(ta)/Math.LN2);ta=Y(2,za);Q&&Q()}e()});else{ta=o;e()}return Z}function V(o,s,B){o=I(b.minZoom,y(b.maxZoom,o));if(o!==ab){var Q=
Y(2,o-ab),ga=Z.width>>1,za=Z.height>>1,La=ga/Q|0,Ja=za/Q|0;ab=o;T(((s?s:oa+ga)-La)*Q,((B?B:pa+za)-Ja)*Q);nb=oa;ob=pa;mb=lb=0;fa("zoomLevelChange",o);ta=1;renderer.reset();v()}}function fa(){for(var o=Z.trigger.apply(null,arguments).cancel,s=M.length;s--;)o=M[s].trigger.apply(null,arguments).cancel||o;return!o}function T(o,s,B,Q,ga){function za(){La+=1;if(La>=2){qb=false;ga&&ga()}}var La=0;if(B){if((Ka&pb)===0){COG.tweenValue(oa,o,B,Q,function(Ja,tb){oa=Ja|0;(tb?za:ca)();return!rb});COG.tweenValue(pa,
s,B,Q,function(Ja,tb){pa=Ja|0;(tb?za:ca)();return!rb});qb=true}}else{oa=o|0;pa=s|0;ga&&ga()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},
b);var na={},M=[],ja=0,Ha=document.getElementById(b.container),Ba=null,hc=0,fc=null,ic=!t(window.attachEvent,va),sb=false,Hb=b.refreshDistance,oa=0,pa=0,lb=0,mb=0,nb=0,ob=0,Wa=null,Xa=null,fb=false,gb=false,Da=null,rb=false,bb=null,Db=0,ta=1,Gb=1,Fb=0,Ca=null,Eb=true,qb=false,gc=1E3/b.fps|0,Oa=0,dc,ec,ab=b.zoomLevel,Ib=L("ACTIVE"),pb=L("PAN"),Jb=L("ZOOM"),Kb=L("ANIMATING"),Ka=Ib,Z={id:b.id,detach:function(){Ca&&Ca.unbind()},eachLayer:function(o){for(var s=ja;s--;)o(M[s])},getLayer:function(o){for(var s=
0;s<ja;s++)if(M[s].id===o)return M[s];return null},getZoomLevel:function(){return ab},setLayer:function(o,s){for(var B=0;B<ja;B++)if(M[B].id===o){M.splice(B,1);break}if(s){C(o,s);s.trigger("refresh",Z,la());Z.trigger("layerChange",Z,s)}Oa++;return s},invalidate:ca,refresh:v,resetScale:function(){ta=1},scale:S,setZoomLevel:V,syncXY:function(){},triggerAll:fa,removeLayer:function(o){a:{for(var s=ja;s--;)if(M[s].id===o){o=s;break a}o=-1}if(o>=0&&o<ja){Z.trigger("layerRemove",Z,M[o]);M.splice(o,1);Oa++}ja=
M.length},getOffset:function(){return new q(oa,pa)},getRenderer:function(){return renderer},getScaleFactor:function(){return ta},setMaxOffset:function(o,s,B,Q){Wa=o;Xa=s;fb=B;gb=Q},getViewport:la,updateOffset:T,pan:function(o,s,B,Q,ga){T(oa+o,pa+s,B,Q,ga)}};COG.observable(Z);Z.bind("resync",function(){});COG.configurable(Z,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(b,null,{container:function(o,s){Ha=document.getElementById(s);
ba()},inertia:D,captureHover:D,scalable:D,pannable:D}),true);CANI.init(function(o){Z.markers=C("markers",new hb({zindex:20}));na=o;ba();ic?window.attachEvent("onresize",x):window.addEventListener("resize",x,false)});animFrame(G);return Z},Fa=function(b){b=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=
1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Fa.prototype={constructor:Fa,animate:function(b,d,f,e){E(this,b,d,f,e)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds($a.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=b},translate:function(b,d){this.translateX=b;this.translateY=d},updateBounds:function(b,d){b&&(!this.bounds||b.x!=this.bounds.x||
b.y!=this.bounds.y)&&this.trigger("move",this,b,this.bounds);this.bounds=b;if(d)this.xy=$a.center(this.bounds)}};var Yb=1E3/60|0,Za=[],xb=0;w.prototype=COG.extend(Fa.prototype,{constructor:w});m.prototype=COG.extend({},Fa.prototype,{constructor:m});r.prototype=COG.extend({},m.prototype);u.prototype=COG.extend({},Fa.prototype,{constructor:u});U.prototype=COG.extend({},u.prototype,{constructor:U});$.prototype=COG.extend(Fa.prototype,{constructor:$});ka.prototype={constructor:ka,clip:null,cycle:function(){},
draw:function(){},hitGuess:null};Va=function(b,d){function f(h,i){var j=i&&i.getZoomLevel?i.getZoomLevel():0;c[j]||(c[j]=new jb);a=c[j]}d=COG.extend({imageLoadArgs:{}},d);var e=b?Ab.init(b,d).run:null,a=null,c=[],g=COG.extend(new ka(d),{draw:function(h,i){h.drawTiles(i,a.search(i))}});g.bind("refresh",function(h,i,j){var x=(new Date).getTime();a&&e(i,j,a,function(){i.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-x)+" ms")})});g.bind("parentChange",f);g.bind("resync",f);return g};
var Mb=function(b){function d(i){clearTimeout(g);g=setTimeout(function(){a.sort(function(j,x){if(x.xy&&j.xy){var H=x.xy.y-j.xy.y;return H!=0?H:x.xy.x-j.xy.x}});i&&i.invalidate()},50)}function f(i,j,x,H){H&&c.remove(H,j);c.insert(x,j)}function e(i,j){for(var x=a.length;x--;)a[x].resync(j)}b=COG.extend({zindex:10},b);var a=[],c=new jb,g=0,h=COG.extend(new ka(b),{itemCount:0,add:function(i,j){if(i){i.layer=h;if(j)a.unshift(i);else a[a.length]=i;var x=h.view;if(x){i.resync(x);c&&i.bounds&&c.insert(i.bounds,
i);d(x)}i.bind("move",f)}h.itemCount=a.length},clear:function(){c=new jb;a=[];h.itemCount=0},draw:function(i,j,x,H,ba,C){H={};ba=c&&j?c.search(j):[];for(var D=ba.length;D--;){var A=ba[D],G=A.style||h.style,K,ca=i.applyTransform(A),la=A.getProps?A.getProps(i,x):H;if(la=(K=i["prep"+A.typeName])?K.call(i,A,j,C,x,la):null){if(C&&la.hit){C.elements.push(Hits.initHit(A.type,A,A.draggable?A.drag:null));K=C.type+"Style";G=A[K]||h[K]||G}G=G?i.applyStyle(G,true):null;(K=A.draw||la.draw)&&K.call(A,la);G&&i.applyStyle(G)}ca&&
ca.undo&&ca.undo()}},find:function(){return[].concat(a)},hitGuess:function(i,j){return c&&c.search({x:i-10,y:j-10,w:20,h:20}).length>0}});h.bind("parentChange",e);h.bind("resync",e);return h},hb=function(b){return new Mb(b)};COG.extend(F,{ex:COG.extend,is:t,ticks:X,userMessage:function(b,d,f){F.trigger("userMessage",b,d,f)},indexOf:ia,Rect:k,XY:Ra,XYRect:$a,Vector:ib,Hits:Hits,Generator:Ab,tweenValue:COG.tweenValue,easing:COG.easing,Tile:z,TileLayer:Va,getImage:p,viewState:L,View:Lb,ViewLayer:ka,
ImageLayer:Va,Drawable:Fa,Marker:w,Poly:m,Line:r,Arc:$,ImageDrawable:u,ImageMarker:U,DrawLayer:Mb,ShapeLayer:hb});var ub=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ia=Math.PI/180,Pa=180/Math.PI,vb=N,Nb=-vb,Ob=ea,jc=-Ob,eb=0.08181919084262157,cb=null,Pb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ha=function(){function b(a){return a?f(a.lat,a.lon):null}function d(a){return!a||a.lat===0&&a.lon===
0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function e(a){if(a)if(t(a.lat,zb))return b(a);else{if(a.split)for(var c=[" ",","],g=0;g<c.length;g++){var h=a.split(c[g]);if(h.length===2)return f(h[0],h[1])}}else return f();return null}return{calcDistance:function(a,c){if(d(a)||d(c))return 0;var g=(c.lat-a.lat)*Ia>>1,h=(c.lon-a.lon)*Ia>>1;g=P(g)*P(g)+ua(a.lat*Ia)*ua(c.lat*Ia)*P(h)*P(h);return 6371*2*Ga(xa(g),xa(1-g))},copy:b,empty:d,equal:function(a,c){return a&&c&&a.lat==c.lat&&
a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=Y(Math.E,-c),h=N-2*Aa(g),i=wa(h,g),j=0;j<12&&O(h-i)>1.0E-7;){h=i;i=wa(h,g);j++}return f(i*Pa,a%360*Pa)},generalize:function(a,c,g){var h=a.length,i=[],j=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+c.length+" positions");for(var x=h;x--;)if(x===0)i.unshift(a[x]);else{var H=!j||ha.inArray(a[x],c)?g:ha.calcDistance(j,a[x]);if(a[x]&&H>=g){i.unshift(a[x]);j=a[x]}}COG.info("generalized "+h+" positions into "+i.length+" positions");
return i},inArray:function(a,c){for(var g=ha.equal,h=c.length;h--;)if(g(a,c[h]))return true;return false},inBounds:function(a,c){var g=!(ha.empty(a)||ha.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,c,g){var h=a.lat*Ia;a=a.lon*Ia;c=h+c/6371;g=R(P(g/6371)/ua(h));g=a+g;c=(c+N)%Math.PI-N;g%=ea;return f(c*Pa,g*Pa)},parse:e,parseArray:function(a){var c=a.length,g=Array(c);for(c=c;c--;)g[c]=e(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*
Ia,W(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var x=0,H=c.chunkSize,ba=h;ba--;){i[ba]=T5.GeoXY.init(a[ba]);x+=1;if(x>H)break}h=ba;if(h<=0)c.callback&&c.callback(i);else animFrame(g)}var h=a.length,i=Array(h);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var j=h;j--;)i[j]=T5.GeoXY.init(a[j]);return i}animFrame(g);return null}}}(),Ma=function(){function b(a,c,g){var h=new q(0,c.lat-a.lat);h.x=(g||t(g,va))&&a.lon>
c.lon?360-a.lon+c.lon:c.lon-a.lon;return h}function d(a,c){return Ma.init(ha.init(a.min.lat-c,a.min.lon-c%360),ha.init(a.max.lat+c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ha.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function e(a,c){return{min:ha.parse(a),max:ha.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,h=a.lat*Ia,i=a.lon*Ia,j=h-g,x=h+g;if(j>Nb&&x<vb){h=R(P(g)/ua(h));g=(i-h)%ea;i=(i+h)%ea}else{j=I(j,Nb);x=y(x,vb);g=jc;i=Ob}return Ma.init(ha.init(j*
Pa,g*Pa),ha.init(x*Pa,i*Pa))},expand:d,forPositions:function(a,c){var g=null,h=T5.ticks();c||(c="auto");for(var i=a.length;i--;)if(g){var j=b(g.min,a[i],false),x=b(a[i],g.max,false);if(j.x<0)g.min.lon=a[i].lon;if(j.y<0)g.min.lat=a[i].lat;if(x.x<0)g.max.lon=a[i].lon;if(x.y<0)g.max.lat=a[i].lat}else g=e(a[i],a[i]);if(c){if(c=="auto"){i=b(g.min,g.max);c=I(i.x,i.y)*0.3}g=d(g,c)}COG.trace("calculated bounds for "+a.length+" positions",h);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,
a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,c){var g=f(a);g=y(J(O(g.lat)*0.05),ub.length);var h=ub[g],i=b(a.min,a.max);g=ma(ya(ub[3]*c.h/i.y)/ya(2));h=ma(ya(h*c.w/i.x)/ya(2));return y(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:e,isEmpty:function(a){return!a||ha.empty(a.min)||ha.empty(a.max)},toString:function(a){return"min: "+ha.toString(a.min)+", max: "+ha.toString(a.max)}}}();ib=function(){var b=/^(\d+).*$/,d=/(\d+)\s?\-\s?(\d+)/;
return{buildingMatch:function(f,e){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=e.split(","),g=0;g<c.length;g++){d.lastIndex=-1;if(d.test(c[g])){var h=d.exec(c[g]);if(a>=parseInt(h[1],10)&&a<=parseInt(h[2],10))return true}else if(a==c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!cb){var e=[];for(var a in Pb)e.push(a);cb=RegExp("(\\s)("+e.join("|")+")(\\s|$)","i")}cb.lastIndex=-1;if(e=cb.exec(f))f=f.replace(cb,"$1"+Pb[e[2]]);return f},toString:function(f){return f.streetDetails+
" "+f.location}}}();var Na=F.GeoXY=function(){function b(e,a){if(e.length){for(var c,g,h,i,j=e.length;j--;){b(e[j],a);c=t(c,va)||e.x<c?e.x:c;g=t(g,va)||e.y<g?e.y:g;h=t(h,va)||e.x>h?e.x:h;i=t(i,va)||e.y>i?e.y:i}return new k(c,g,h-c,i-g)}else if(e.mercXY){c=e.mercXY;e.x=(c.x+Math.PI)/a|0;e.y=(Math.PI-c.y)/a|0;e.rpp=a}return e}function d(e,a){if(e.length)for(var c=e.length;c--;)d(e[c],a);else{e.mercXY=new q(e.x*a-Math.PI,Math.PI-e.y*a);e.pos=ha.fromMercatorPixels(e.mercXY.x,e.mercXY.y)}return e}function f(e,
a,c){e.pos=a;e.mercXY=ha.toMercatorPixels(a);(c=t(c,zb)?c:e.rpp)&&b(e,c)}return{init:function(e,a){var c=new q;f(c,e,a);return c},sync:b,syncPos:d,toPos:function(e,a){a=a||e.rpp;return ha.fromMercatorPixels(e.x*a-Math.PI,Math.PI-e.y*a)},updatePos:f}}(),Sa={};Va=function(){return{bestResults:function(b,d){d||(d=20);for(var f=b.length>0?b[0]:null,e=[],a=0;a<b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=d)e.push(b[a]);else break;return e}}}();var Qb=function(b){b=COG.extend({id:null,caption:"",
resultType:"",data:null,pos:null,matchWeight:0},b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})},kc=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&ha.vectorize(c.geometry,{callback:function(h){g.add(new T5.Line(h,{style:"waypoints",simplify:true}));a.setLayer("route",g)}})}function d(a){for(var c=f.Unknown,g=e,h=0;h<g.length;h++){g[h].regex.lastIndex=-1;var i=g[h].regex.exec(a);if(i){c=g[h].customCheck?g[h].customCheck(a,i):
g[h].turnType;break}}return c}var f={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},e=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});
a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});a.push({regex:/take.*?ramp/i,turnType:f.Ramp});a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?
f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=da("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=ha.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&
a.success(g)})},createMapOverlay:b,parseTurnType:d,TurnType:f,Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=d(a.description);return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Ma.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=
[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&c.push(a.instructions[g].position);return c}},a)}}}(),lc="featurecollection",mc="feature",yb={async:false},Ta={processor:null,group:"shapes",layerClass:hb},nc={point:COG.extend({},Ta,{processor:function(b,d,f,e){d=aa([d.coordinates],yb);if(d.length>0)if(f=e.marker(d[0],f)){b.add(f);return d.length}},group:"markers",layerClass:hb}),linestring:COG.extend({},Ta,{processor:function(b,d,f,e){d=aa(d&&d.coordinates?d.coordinates:[]);return Ea(b,
d,f,e.line)}}),multilinestring:COG.extend({},Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=d.length;c--;)a+=Ea(b,d[c],f,e.line);return a}}),polygon:COG.extend({},Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];if(d.length>0)return Ea(b,d[0],f,e.poly);return 0}}),multipolygon:COG.extend({},Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=0;c<d.length;c++)a+=Ea(b,d[c][0],f,e.poly);return a}})},Rb=function(b,d,f,
e){function a(A,G){var K=A.processor,ca=j+A.group,la=COG.extend({},A,f,{properties:G.properties});if(K){var v=D[ca];if(!v){v=new A.layerClass({id:ca});D[ca]=v}return K(v,G.data,la,e)}return 0}function c(A,G){var K=A&&A.type?A.type.toLowerCase():null;return K&&K===mc?c(A.geometry,A.properties):{type:K,isCollection:K?K===lc:false,definition:nc[K],data:A,properties:G?G:A.properties}}function g(A){var G=0,K=COG.extend({},f),ca=x;A=A?A:(new Date).getTime();if(!ba){for(;ca<H;ca++){A=c(i?i(b[ca]):b[ca]);
var la=null;if(A.isCollection){K.layerPrefix=j+C++ +"-";ba=new Rb(A.data.features,function(v){ba=null;for(var S in v)D[S]=v[S];x>=H&&d&&d(D)},K);la+=1}else if(A.definition)la=a(A.definition,A);G+=la?la:1;if(G>=h)break}x=ca+1;if(ba||x<H)animFrame(g);else d&&d(D)}}f=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},f);e=COG.extend({marker:function(A){return new w({xy:A})},line:function(A,G){return new m(A,COG.extend({},f,G))},poly:function(A,G){return new m(A,COG.extend({fill:true},
f,G))}},e);var h=500,i=f.rowPreParse,j=f.layerPrefix,x=0,H=0,ba=null,C=0,D={};if(b){t(b,"array")||(b=[b]);H=b.length;animFrame(g)}};Ta=F.GeoJSON={parse:function(b,d,f){return new Rb(b,d,f)}};F.Map=function(b){function d(D){try{var A=ha.init(D.coords.latitude,D.coords.longitude),G=D.coords.accuracy/1E3;C.trigger("locationUpdate",D,G);if(x){if(!i){i=new UI.LocationOverlay({pos:A,accuracy:G});i.update(C.getTileLayer());C.setLayer("location",i)}var K=Ma.createBoundsFromCenter(A,Math.max(G,1));C.gotoBounds(K)}else{i.pos=
A;i.accuracy=G;i.update(C.getTileLayer());a(A,null,COG.easing("sine.out"))}x=false}catch(ca){COG.exception(ca)}}function f(D){COG.info("caught location tracking error:",D)}function e(D,A,G){C.setZoomLevel(A);a(D,G)}function a(D,A,G,K){D=Na.init(D,ra(C.getZoomLevel()));C.updateOffset(D.x-(C.width>>1),D.y-(C.height>>1),G,K,function(){A&&A(C)})}b=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2},g=new q,h=c.NONE,
i=null,j=0,x=true,H=0,ba=b.tapExtent;b.adjustScaleFactor=function(D){return Math.pow(2,(D<1?Math.floor:Math.ceil)(Math.log(D)))};var C=COG.extend(new Lb(b),{getBoundingBox:function(){var D=C.getViewport();return D?Ma.init(Na.toPos(new q(D.x,D.y2),H),Na.toPos(new q(D.x2,D.y),H)):null},getCenterPosition:function(){var D=C.getViewport();if(D){D=new q(D.x+(D.w>>1),D.y+(D.h>>1));return Na.toPos(D,H)}return null},gotoBounds:function(D,A){var G=Ma.getZoomLevel(D,C.getViewport());e(Ma.getCenter(D),G,A)},
gotoPosition:e,panToPosition:a,syncXY:function(D,A){return(A?Na.syncPos:Na.sync)(D,H)},locate:function(){C.trackStart(c.SINGLE);setTimeout(C.trackCancel,1E4)},trackStart:function(D){if(navigator.geolocation&&!j){h=D?D:c.WATCH;x=true;j=navigator.geolocation.watchPosition(d,f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},trackCancel:function(){j&&navigator.geolocation&&navigator.geolocation.clearWatch(j);C.removeLayer("location");i=null;h=c.NONE;j=0},animateRoute:function(D,A,G,K){var ca=
C.getLayer("route");if(ca)(D=ca.getAnimation(D,A,G,K))&&D.addToView(C)}});C.bind("pan",function(){h===c.SINGLE&&C.trackCancel()});C.bind("tap",function(D,A,G,K){D=Na.toPos(K,H);var ca=Na.toPos(Ra.offset(K,-ba,ba),H);K=Na.toPos(Ra.offset(K,ba,-ba),H);C.trigger("geotap",A,G,D,Ma.init(ca,K))});C.bind("refresh",function(D,A,G){if(g.x!=G.x||g.y!=G.y){C.trigger("boundsChange",C.getBoundingBox());g.x=G.x;g.y=G.y}});C.bind("zoomLevelChange",function(D,A){var G;H=ra(A);G=ea/H|0;C.setMaxOffset(G,G,true,false);
C.resetScale();C.triggerAll("resync",C)});return C};F.GeoShape=function(b,d){d=COG.extend({autoParse:true},d);for(var f=Array(b.length),e=d.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(e?a(b[c]):b[c]);return new T5.Poly(f,d)};F.LocationOverlay=function(b){b=COG.extend({pos:null,accuracy:null,zindex:90},b);var d=new Image,f=T5.XY.init(),e=T5.XY.init(),a=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
d.onload=function(){f=T5.XY.init(d.width>>1,d.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,h){var i=e.x-h.x,j=e.y-h.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(i,j,a,0,Math.PI*2,false);g.fill()}d.complete&&d.width>0&&g.drawImage(d,i-f.x,j-f.y,d.width,d.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;e=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,h){c.update(h)});
return c};F.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:da,radsPerPixel:ra,Position:ha,BoundingBox:Ma,Radius:function(b,d){return{distance:parseInt(b,10),uom:d}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:ib,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var d=COG.extend({remove:function(){delete Sa[d.id]}},b);return Sa[d.id]=d},Search:Va,GeoSearchResult:Qb,LocationSearch:function(b){function d(g,h){navigator.geolocation.clearWatch(e);e=0;if(a){clearTimeout(a);a=0}h&&h([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var e=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,h){if(navigator.geolocation&&!e){e=navigator.geolocation.watchPosition(function(i){var j=
ha.init(i.coords.latitude,i.coords.longitude);i=new Qb({id:1,caption:"Current Location",pos:j,accuracy:i.coords.accuracy/1E3,matchWeight:100});if(!c||i.accuracy<c.accuracy)c=i;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)d(c,h)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&d(c,h)},b.searchTimeout)}}},b))},Routing:kc,GeoJSON:Ta}})(T5);
