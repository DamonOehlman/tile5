COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var E=arguments[0]||{},X,v=1,r=arguments.length;v<r;v++)if((X=arguments[v])!==null)for(var j in X){var k=X[j];if(E!==k)if(k!==undefined)E[j]=k}return E};
(function(){var E=Object.prototype.hasOwnProperty,X=0,v={};v.toID=function(r){return r.replace(/\s/g,"-")};v.objId=function(r){return(r?r:"obj")+X++};v.isFunction=function(r){return toString.call(r)==="[object Function]"};v.isArray=function(r){return toString.call(r)==="[object Array]"};v.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!E.call(r,"constructor")&&!E.call(r.constructor.prototype,"isPrototypeOf"))return false;
var j;for(j in r);return j===undefined||E.call(r,j)};v.isEmptyObject=function(r){for(var j in r)return false;return true};v.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};v.contains=function(r,j){var k=r,q=arguments,z=1;if(j&&module.isArray(j)){q=j;z=0}for(z=z;z<q;z++)k=k&&typeof foo[q[z]]!=="undefined";return k};v.formatStr=function(r){if(arguments.length<=1)return r;for(var j=arguments.length-2,k=0;k<=j;k++)r=r.replace(RegExp("\\{"+k+"\\}","gi"),arguments[k+1]);return r};
v.wordExists=function(r,j){var k="";if(j.toString)j=j.toString();for(var q=0;q<j.length;q++)k+=!/\w/.test(j[q])?"\\"+j[q]:j[q];return RegExp("(^|\\s|\\,)"+k+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,v)})();
(function(){function E(k){return typeof console!=="undefined"?function(){console[k](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var X=window.console&&window.console.markTimeline,v=E("error"),r=E("info"),j=function(){return X?function(k,q){console.markTimeline(k+(q?": "+((new Date).getTime()-q)+"ms":""))}:function(){}}();COG.extend(COG,{trace:j,debug:E("debug"),info:r,warn:E("warn"),error:v,exception:function(k){if(v)for(var q in k)r("ERROR DETAIL: "+q+
": "+k[q])}})})();
(function(){function E(v,r){var j=v.hasOwnProperty("obsHandlers")?v.obsHandlers:null;j[r]||(j[r]=[]);return j[r]}var X=0;COG.observable=function(v){if(!v)return null;if(!(v.hasOwnProperty("obsHandlers")?v.obsHandlers:null))v.obsHandlers={};if(!v.hasOwnProperty("bind")){v.bind=function(r,j){var k="callback"+X++;E(v,r).unshift({fn:j,id:k});return k};v.triggerCustom=function(r,j){var k=E(v,r),q={cancel:false,name:r,source:this},z;j&&COG.extend(q,j);if(!k)return null;z=Array.prototype.slice.call(arguments,2);
v.eventInterceptor&&v.eventInterceptor(r,q,z);z.unshift(q);for(var L=k.length;L--&&!q.cancel;)k[L].fn.apply(this,z);return q};v.trigger=function(r){var j=Array.prototype.slice.call(arguments,1);j.splice(0,0,r,null);return v.triggerCustom.apply(this,j)};v.unbind=function(r,j){if(typeof r==="undefined")v.obsHandlers={};else for(var k=E(v,r),q=0;k&&q<k.length;q++)if(k[q].id===j){k.splice(q,1);break}return v}}return v}})();
(function(){function E(j,k){j[k]||(j[k]=function(q){return j.configure(k,q)})}function X(j){j.gtConfId="configurable"+r++;j.gtConfig={};j.gtConfigFns=[];return j.gtConfig}var v={},r=0;COG.paramTweaker=function(j,k,q){return function(z,L){if(typeof L!=="undefined"){if(z in j)j[z]=L;q&&z in q&&q[z](z,L)}else return k&&z in k?k[z](z):j[z]}};COG.configurable=function(j,k,q,z){if(j){j.gtConfId||X(j);var L=j.gtConfId,pa=j.gtConfig,o=j.gtConfigFns;v[L]=j;o.push(q);for(q=k.length;q--;){pa[k[q]]=true;z&&E(j,
k[q])}if(!j.configure)j.configure=function(D,x){if(pa[D]){for(var l=o.length;l--;){var t=o[l](D,x);if(typeof t!=="undefined")return t}return v[L]}return null}}}})();
(function(){function E(j){var k=document.createElement("script"),q=false;k.src=j;k.async=true;k.onload=k.onreadystatechange=function(){if(!q&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){q=true;k.onload=k.onreadystatechange=null;k&&k.parentNode&&k.parentNode.removeChild(k)}};v||(v=document.getElementsByTagName("head")[0]);v.appendChild(k)}var X=0,v,r=this;COG.jsonp=function(j,k,q){j+=j.indexOf("?")>=0?"&":"?";var z="json"+ ++X;r[z]=function(L){k(L);r[z]=null;try{delete r[z]}catch(pa){}};
E(j+(q?q:"callback")+"="+z);return z}})();
(function(){var E=1.70158,X=Math.PI/2,v=Math.PI*2,r=1E3/60|0,j=Math.abs,k=Math.pow,q=Math.sin,z=Math.asin,L=Math.cos,pa={linear:function(o,D,x,l){return x*o/l+D},backin:function(o,D,x,l){return x*(o/=l)*o*((E+1)*o-E)+D},backout:function(o,D,x,l){return x*((o=o/l-1)*o*((E+1)*o+E)+1)+D},backinout:function(o,D,x,l){return(o/=l/2)<1?x/2*o*o*(((E*=1.525)+1)*o-E)+D:x/2*((o-=2)*o*(((E*=1.525)+1)*o+E)+2)+D},bouncein:function(o,D,x,l){return x-pa.bounceout(l-o,0,x,l)+D},bounceout:function(o,D,x,l){return(o/=
l)<1/2.75?x*7.5625*o*o+D:o<2/2.75?x*(7.5625*(o-=1.5/2.75)*o+0.75)+D:o<2.5/2.75?x*(7.5625*(o-=2.25/2.75)*o+0.9375)+D:x*(7.5625*(o-=2.625/2.75)*o+0.984375)+D},bounceinout:function(o,D,x,l){return o<l/2?pa.bouncein(o*2,0,x,l)/2+D:pa.bounceout(o*2-l,0,x,l)/2+x/2+D},cubicin:function(o,D,x,l){return x*(o/=l)*o*o+D},cubicout:function(o,D,x,l){return x*((o=o/l-1)*o*o+1)+D},cubicinout:function(o,D,x,l){if((o/=l/2)<1)return x/2*o*o*o+D;return x/2*((o-=2)*o*o+2)+D},elasticin:function(o,D,x,l,t,w){if(o==0)return D;
if((o/=l)==1)return D+x;w||(w=l*0.3);if(!t||t<j(x)){t=x;x=w/4}else x=w/v*z(x/t);return-(t*k(2,10*(o-=1))*q((o*l-x)*v/w))+D},elasticout:function(o,D,x,l,t,w){var U;if(o==0)return D;if((o/=l)==1)return D+x;w||(w=l*0.3);if(!t||t<j(x)){t=x;U=w/4}else U=w/v*z(x/t);return t*k(2,-10*o)*q((o*l-U)*v/w)+x+D},elasticinout:function(o,D,x,l,t,w){var U;if(o==0)return D;if((o/=l/2)==2)return D+x;w||(w=l*0.3*1.5);if(!t||t<j(x)){t=x;U=w/4}else U=w/v*z(x/t);if(o<1)return-0.5*t*k(2,10*(o-=1))*q((o*l-U)*v/w)+D;return t*
k(2,-10*(o-=1))*q((o*l-U)*v/w)*0.5+x+D},quadin:function(o,D,x,l){return x*(o/=l)*o+D},quadout:function(o,D,x,l){return-x*(o/=l)*(o-2)+D},quadinout:function(o,D,x,l){if((o/=l/2)<1)return x/2*o*o+D;return-x/2*(--o*(o-2)-1)+D},sinein:function(o,D,x,l){return-x*L(o/l*X)+x+D},sineout:function(o,D,x,l){return x*q(o/l*X)+D},sineinout:function(o,D,x,l){return-x/2*(L(Math.PI*o/l)-1)+D}};COG.tweenValue=function(o,D,x,l,t){function w(da){da=da?da:(new Date).getTime();if(ba+r<da){var V=da-U,qa=x(V,o,la,l),ra=
U+l<=da;da=!ra;if(t){V=t(qa,ra,V);da=typeof V!="undefined"?V&&da:da}da&&animFrame(w)}}var U=(new Date).getTime(),ba=0,la=D-o;animFrame(w);return{}};COG.easing=function(o){return pa[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(o,D){pa[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]=D}})();
(function(){var E=/^P(\d+Y)?(\d+M)?(\d+D)?$/,X=/^(\d+H)?(\d+M)?(\d+S)?$/,v={8601:function(j){j=j.split("T");var k=null;k=null;var q=0,z=0;E.lastIndex=-1;k=E.exec(j[0]);q+=k[3]?parseInt(k[3].slice(0,-1),10):0;X.lastIndex=-1;k=X.exec(j[1]);z+=k[1]?parseInt(k[1].slice(0,-1),10)*3600:0;z+=k[2]?parseInt(k[2].slice(0,-1),10)*60:0;z+=k[3]?parseInt(k[3].slice(0,-1),10):0;return new r(q,z)}},r=COG.Duration=function(j,k){return{days:j?j:0,seconds:k?k:0}};COG.addDuration=function(){for(var j=new r,k=arguments.length;k--;){j.days+=
arguments[k].days;j.seconds+=arguments[k].seconds}if(j.seconds>=86400){j.days+=~~(j.seconds/86400);j.seconds%=86400}return j};COG.formatDuration=function(j){var k,q,z="";if(j.days)z=j.days+" days ";if(j.seconds){j=j.seconds;if(j>=3600){k=~~(j/3600);j-=k*3600}if(j>=60){q=Math.round(j/60);j-=q*60}if(k)z=z+k+(k>1?" hrs ":" hr ")+(q?(q>10?q:"0"+q)+" min ":"");else if(q)z=z+q+" min";else if(j>0)z=z+(j>10?j:"0"+j)+" sec"}return z};COG.parseDuration=function(j,k){var q=k?v[k]:null;if(q)return q(j);COG.Log.warn("Could not find duration parser for specified format: "+
k);return new r}})();COG.ObjectStore=function(){var E={},X={},v="obj_"+(new Date).getTime(),r=0,j=Object.prototype.hasOwnProperty;return{add:function(k,q){var z;q=q?q:"default";if(k&&k.constructor)if(!j.call(k,"id"))k.id=v+ ++r;z=X[q]?X[q]:X[q]=[];E[k.id]=z.length;z[k.length]=k}}};var CANI={};
(function(E){var X=[],v=0,r=false,j=E.register=function(k,q){X.push({section:k,run:q})};E.init=function(k){function q(){if(v<X.length){var L=X[v++];z[L.section]||(z[L.section]={});L.run(z[L.section],q)}else{for(L in z)E[L]=z[L];r=true;k&&k(E)}}var z={};if(r&&k)k(E);else{v=0;q()}};j("canvas",function(k,q){function z(){var D,x=L.getContext("2d");x.save();try{x.translate(50,50);x.beginPath();x.rect(0,0,20,20);D=x.isPointInPath(10,10)}finally{x.restore()}return D}var L=document.createElement("canvas"),
pa=typeof FlashCanvas!="undefined",o=typeof G_vmlCanvasManager!="undefnined";L.width=200;L.height=200;k.pipTransformed=pa||o?false:z();q()})})(CANI);
INTERACT=function(){function E(l){return function(t,w,U){(U?U:l?document.body:document).addEventListener(t,w,false)}}function X(l){return function(t,w,U){(U?U:l?document.body:document).removeEventListener(t,w,false)}}function v(l,t,w){(w?w:document).attachEvent("on"+l,t)}function r(l,t,w){(w?w:document).detachEvent("on"+l,t)}function j(l,t){return{x:l?l:0,y:t?t:0,count:1}}function k(l,t){D.push(COG.extend({handler:null,checks:{},type:l},t))}function q(l){var t=0,w=0;if(l.offsetParent){do{t+=l.offsetLeft;
w+=l.offsetTop;l=l.offsetParent}while(l)}return{left:t,top:w}}function z(l,t){return{source:l,target:t.target?t.target:t.srcElement}}function L(l,t){for(var w=l.target?l.target:l.srcElement;w&&w!==t&&w.nodeName;)w=w.parentNode;return w&&w===t}function pa(l,t){return{x:l.x-(t?t.left:0),y:l.y-(t?t.top:0)}}function o(l){if(l.preventDefault){l.preventDefault();l.stopPropagation()}else l.cancelBubble&&l.cancelBubble()}var D=[],x=function(l,t,w){function U(ca,ja,ea,M){var O=0,ma=0,y=0;COG.tweenValue(0,
ca,ea,M,function(I){y=O;O=I});COG.tweenValue(0,ja,ea,M,function(I){ba.trigger("pan",O-y,I-ma);ma=I})}w=COG.extend({binder:null,unbinder:null,observable:null},w);for(var ba=w.observable,la=null,da=[],V=[],qa,ra,ya={bind:function(){return ba.bind.apply(null,arguments)},pannable:function(ca){la=COG.extend({inertia:true},ca);return ya},unbind:function(){ba.unbind();for(var ca=0;ca<da.length;ca++)da[ca].unbind();return ya}},Fa=0;Fa<t.length;Fa++)da.push(t[Fa](l,ba,w));ba.bind("pointerDown",function(){V=
[];ra=qa=0});ba.bind("pointerMove",function(ca,ja,ea,M){if(la){V[V.length]={ticks:(new Date).getTime(),x:M.x,y:M.y};ba.trigger("pan",M.x,M.y)}qa+=M.x?M.x:0;ra+=M.y?M.y:0});ba.bind("pointerUp",function(ca,ja,ea){if(Math.abs(qa)>20||Math.abs(ra)>20){if(la){ea=V.length;var M,O;ja=0;for(O=V.length;--O>1&&ja<50;)ja+=V[O].ticks-V[O-1].ticks;if(ea-O>1){ca=V[ea-1].x-V[O].x;M=V[ea-1].y-V[O].y;O=Math.sqrt(ca*ca+M*M)|0;if(O>15){ca=V[ea-1].x-V[0].x;M=V[ea-1].y-V[0].y;O=Math.sqrt(ca*ca+M*M)|0;ea=Math.asin(M/O);
ja=O*500/ja|0;ja=ja>300?300:ja;U(Math.cos(ca>0?ea:Math.PI-ea)*ja,Math.sin(ea)*ja,COG.easing("sine.out"),500)}}}}else ba.trigger("tap",ja,ea)});return ya};k("pointer",{handler:function(l,t,w){function U(y){if(y.pageX&&y.pageY)return j(y.pageX,y.pageY);else{var I=document.documentElement,Y=document.body;return j(y.clientX+(I&&I.scrollLeft||Y&&Y.scrollLeft||0)-(I&&I.clientLeft||Y&&Y.clientLeft||0),y.clientY+(I&&I.scrollTop||Y&&Y.scrollTop||0)-(I&&I.clientTop||Y&&Y.clientTop||0))}}function ba(y){if(L(y,
l))if(ca=qa(y)){var I=U(y);l.style.cursor="move";o(y);O=I.x;ma=I.y;ja=j(O,ma);t.triggerCustom("pointerDown",z("mouse",y),ja,pa(ja,q(l)))}}function la(y){var I=U(y);ea=I.x;M=I.y;if(L(y,l))ra(y,ca?"pointerMove":"pointerHover")}function da(y){if(ca&&qa(y)){ca=false;if(L(y,l)){l.style.cursor="default";ra(y,"pointerUp")}}}function V(y){if(L(y,l)){var I;y=y||window.event;if(y.detail)I=y.axis===2?-y.detail*ya:0;else{I=y.wheelDeltaY?y.wheelDeltaY:y.wheelDelta;if(window.opera)I=-I}if(I!==0){var Y=j(ea,M);
t.triggerCustom("zoom",z("mouse",y),Y,pa(Y,q(l)),I/Fa,"wheel");o(y);y.returnValue=false}}}function qa(y){y=y||window.event;return(y.which||y.button)==1}function ra(y,I,Y,za,Aa){Y=typeof Y!="undefined"?Y:ea;za=typeof za!="undefined"?za:M;var J=Y-O,Q=za-ma,T=j(Y,za);t.triggerCustom(I,z("mouse",y),T,pa(T,q(l)),j(J,Q));if(typeof Aa=="undefined"||Aa){O=Y;ma=za}}w=COG.extend({},w);var ya=120,Fa=ya*8,ca=false,ja,ea,M,O,ma;w.binder("mousedown",ba,false);w.binder("mousemove",la,false);w.binder("mouseup",da,
false);w.binder("dblclick",function(y){COG.info("captured double click");if(L(y,l)){var I=U(y);t.triggerCustom("doubleTap",z("mouse",y),I,pa(I,q(l)))}},false);w.binder("mousewheel",V,document);w.binder("DOMMouseScroll",V,document);return{unbind:function(){w.unbinder("mousedown",ba,false);w.unbinder("mousemove",la,false);w.unbinder("mouseup",da,false);w.unbinder("mousewheel",V,document);w.unbinder("DOMMouseScroll",V,document)}}},checks:{touch:false}});k("pointer",{handler:function(l,t,w){function U(J){if(J.count<
2)return 0;var Q=J.x-J.next.x;J=J.y-J.next.y;return~~Math.sqrt(Q*Q+J*J)}function ba(J,Q,T){Q=Q?Q:0;T=T?T:0;for(var wa={x:J.x-Q,y:J.y-T,id:J.id,count:J.count},Ca=wa;J.next;){J=J.next;Ca=Ca.next={x:J.x-Q,y:J.y-T,id:J.id}}return wa}function la(J,Q){var T=J[Q?Q:"touches"],wa,Ca;if(T.length===0)return null;Ca=wa={x:T[0].pageX,y:T[0].pageY,id:T[0].identifier,count:T.length};for(var Ha=1,Za=T.length;Ha<Za;Ha++)Ca=Ca.next={x:T[Ha].pageX,y:T[Ha].pageY,id:T[Ha].identifier};return wa}function da(J){if(L(J,l)){M=
q(l);var Q=la(J,"changedTouches"),T=ba(Q,M.left,M.top);if(!ma){O=ca;t.triggerCustom("pointerDown",z("touch",J),Q,T)}za&&t.triggerCustom("pointerDownMulti",z("touch",J),Q,T);ma=la(J);if(ma.count>1)I=U(ma);Aa=1;Y=ba(ma)}}function V(J){if(L(J,l)){J.preventDefault();y=la(J);if(O==ca)O=Math.abs(ma.x-y.x)>ya||Math.abs(ma.y-y.y)>ya?Fa:ca;if(O!=ca){O=y.count>1?ea:ja;if(O==ea)if(ma.count===1){ma=ba(y);I=U(ma)}else{var Q=U(y);if(Math.abs(I-Q)<ra)O=ja;else{var T;T=y.x;var wa=y.next.x,Ca=y.y,Ha=y.next.y,Za=Ca<
Ha?Ca:Ha;T={x:(T<wa?T:wa)+(Math.abs(T-wa)>>1),y:Za+(Math.abs(Ca-Ha)>>1)};Q=Q/I;wa=Q-Aa;t.triggerCustom("zoom",z("touch",J),T,pa(T,M),wa,"pinch");Aa=Q}}O==ja&&t.triggerCustom("pointerMove",z("touch",J),y,ba(y,M.left,M.top),j(y.x-Y.x,y.y-Y.y));za&&t.triggerCustom("pointerMoveMulti",z("touch",J),y,ba(y,M.left,M.top))}Y=ba(y)}}function qa(J){if(L(J,l)){var Q=la(J,"changedTouches"),T=ba(Q,M.left,M.top);y=la(J);if(!y){t.triggerCustom("pointerUp",z("touch",J),Q,T);ma=null}za&&t.triggerCustom("pointerUpMulti",
z("touch",J),Q,T)}}w=COG.extend({detailed:false,inertia:false},w);var ra=20,ya=7,Fa=0,ca=1,ja=2,ea=3,M,O,ma,y,I,Y,za=w.detailed,Aa=1;w.binder("touchstart",da,false);w.binder("touchmove",V,false);w.binder("touchend",qa,false);COG.info("initialized touch handler");return{unbind:function(){w.unbinder("touchstart",da,false);w.unbinder("touchmove",V,false);w.unbinder("touchend",qa,false)}}},checks:{touch:true}});return{register:k,watch:function(l,t,w){t=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!=
"undefined",types:null},t);capabilities=COG.extend({touch:"ontouchstart"in window},w);if(!t.observable){COG.info("creating observable");t.observable=COG.observable({});globalOpts=t}t.binder=t.isIE?v:E(t.bindToBody);t.unbinder=t.isIE?r:X(t.bindToBody);w=t.types;for(var U=capabilities,ba=[],la=D.length;la--;){var da=D[la],V=!w||w.indexOf(da.type)>=0,qa=true;for(var ra in da.checks){var ya=da.checks[ra];COG.info("checking "+ra+" capability. require: "+ya+", capability = "+U[ra]);qa=qa&&ya===U[ra]}if(V&&
qa)ba[ba.length]=da.handler}return new x(l,ba,t)}}}();var T5={};
(function(E){function X(){return(new Date).getTime()}function v(b,d){d=Tb.call(d);if(d=="finite")return!Ub[Za](+b);return d=="null"&&b===null||d==typeof b||d=="object"&&b===Object(b)||d=="array"&&Array.isArray&&Array.isArray(b)||Vb.call(b).slice(8,-1).toLowerCase()==d}function r(b,d){this.x=b||0;this.y=d||0}function j(b,d,f,e){this.x=b||0;this.y=d||0;this.w=f||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function k(b){b=b||(new Date).getTime();for(var d=0;d<Ua.length;){var f=Ua[d],e=
Qa[f],a=Qa[f].image&&(db||Qa[f].image.complete&&Qa[f].image.width>0),c=b-e.start;c=a||c>=Wb;if(a){a=e.callbacks;xb[f]=e.image;for(var g=0;g<a.length;g++)a[g](e.image,true)}if(c){Ua.splice(d,1);delete Qa[f]}else d++}Ua.length>0&&animFrame(k)}function q(b,d){var f=b&&d?xb[b]:null;if(f&&f&&(db||f.complete&&f.width>0))d(f);else{if(f=Qa[b])f.callbacks.push(d);else{f=new Image;f.id="_ldimg"+ ++Xb;Qa[b]={start:(new Date).getTime(),image:f,callbacks:[d]};f.src=b;Ua[Ua.length]=b}animFrame(k)}}function z(b,
d,f,e,a,c){this.x=b;this.y=d;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+d;this.loaded=false;this.image=null}function L(){for(var b=0,d=arguments.length;d--;){var f=Yb[arguments[d].toUpperCase()];if(f)b|=f}return b}function pa(b){b=b?b:(new Date).getTime();if(b-yb>Zb){for(var d=$a.splice(0),f=d.length;f--;)d[f](b);yb=b}$a.length&&animFrame(pa)}function o(b){var d=$a.length==0;$a[$a.length]=b;d&&animFrame(pa)}function D(b,d,f,e,a){a=COG.extend({easing:"sine.out",
duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),g=b[d],h=d=="translate",i=a.autoInvalidate,m=f.length&&e.length&&f.length==e.length?f.length:0,n=Array(m),H=Array(m),N=COG.easing(a.easing),G=a.duration,u=a.progress,B=function(F){var K=F-c;F=c+G<=F;for(var fa=b.layer?b.layer.view:null,ka,ua=m;ua--;){ka=N(K,f[ua],n[ua],G);H[ua]=h?ka|0:ka}g.apply(b,H);i&&fa&&fa.invalidate();if(u){K=[].concat(F?e:H);K.unshift(F);u.apply(b,K)}if(F){b.animations--;g.apply(b,e);
a.complete&&a.complete.apply(b,e)}else o(B)};if(g&&g.apply&&m>0){G=G?G:DEFAULT_DURATION;for(d=m;d--;)n[d]=e[d]-f[d];b.animations++;o(B)}}function x(b){b=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},b);Ga.call(this,b)}function l(b,d){d=COG.extend({simplify:false,fill:true,typeName:"Poly"},d);var f=d.simplify;Ga.call(this,d);COG.extend(this,{resync:function(e){var a,c,g,h,i,m;e.syncXY(b);m=this.points=Ra.floor(f?Ra.simplify(b):b);for(var n=m.length;n--;){e=
m[n].x;a=m[n].y;h=v(h,xa)||e<h?e:h;i=v(i,xa)||a<i?a:i;c=v(c,xa)||e>c?e:c;g=v(g,xa)||a>g?a:g}this.updateBounds(new j(h,i,c-h,g-i),true)}});this.haveData=b&&b.length>=2}function t(b,d){d.fill=false;l.call(this,b,d)}function w(b){function d(){if(h&&h.width>0){if(!this.centerOffset)this.centerOffset=new r(-h.width>>1,-h.height>>1);this.updateBounds(new j(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,h.width,h.height),false)}}function f(m){if(this.imageUrl=m){var n=this;q(this.imageUrl,function(H,
N){h=H;if(N){var G=i.layer?i.layer.view:null;G&&G.invalidate()}d.apply(n)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var e=null,a=Ga.prototype.resync,c=0,g=0,h=b.image;Ga.call(this,b);var i=COG.extend(this,{changeImage:f,drag:function(m,n,H,N){e||(e=new r(m.startX-this.xy.x,m.startY-this.xy.y));this.xy.x=n-e.x;this.xy.y=H-e.y;if(N){e=null;if(this.layer)if(m=this.layer.view){m.syncXY([this.xy],true);m.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||
d(this,h);return{image:h,x:this.xy.x+c,y:this.xy.y+g}},resync:function(m){a.call(this,m);d.call(this)}});h||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;g=this.centerOffset.y}}function U(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Ra.invert(b.imageAnchor);w.call(this,b)}function ba(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);Ga.call(this,b)}function la(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:L("ACTIVE",
"ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;this.visible=true;COG.observable(COG.extend(this,b))}function da(b){for(var d=null,f=1;!d&&f<arguments.length;f++)d=ra(b,arguments[f]);d=d?d:ra(b);if(!d)throw Error("Unable to find GEO engine with "+b+" capability");return d}function V(b){b=parseFloat(b)*Ia;b=Q(b);var d=eb*b;return Aa((1+b)/(1-b)*Y((1-d)/(1+d),eb))/2}function qa(b){return ea/(256<<b)}function ra(b,d){var f=null;for(var e in Sa)if(d){if(e==d&&Sa[e][b]){f=
Sa[e];break}}else if(Sa[e][b]){f=Sa[e];break}return f}function ya(b,d){var f=eb*Q(b);return M-2*Ca(d*Y((1-f)/(1+f),eb/2))}function Fa(b,d,f,e){d=ca(d);b.add(e(d,f));return d.length}function ca(b){var d=b?b.length:0,f=Array(d);for(d=d;d--;)f[d]=ia.init(b[d][1],b[d][0]);return ia.vectorize(f,zb)}COG.observable(E);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var ja=Array.prototype.indexOf||function(b){for(var d=0;d<this.length;d++)if(this[d]===b)return d;return-1},ea=Math.PI*2,M=Math.PI/2,O=Math.abs,ma=Math.ceil,y=Math.min,I=Math.max,Y=Math.pow,za=Math.sqrt,Aa=Math.log,J=Math.round,Q=Math.sin,T=Math.asin,wa=Math.cos,Ca=Math.atan,Ha=Math.atan2,Za="hasOwnProperty",Ub={NaN:1,Infinity:1,"-Infinity":1},Tb=String.prototype.toLowerCase,Vb=Object.prototype.toString,xa="undefined",Ab="number",
$b=typeof G_vmlCanvasManager!=xa,db=typeof FlashCanvas!=xa,ac=T5.newCanvas=function(b,d){var f=document.createElement("canvas");f.width=b?b:0;f.height=d?d:0;if(db){document.body.appendChild(f);FlashCanvas.initElement(f)}$b&&G_vmlCanvasManager.initElement(f);return f},Bb=function(){var b={};return{init:function(d,f){var e=b[d];if(!e)throw Error("Unable to locate requested generator: "+d);return new e(f)},register:function(d,f){b[d]=f}}}();r.prototype={constructor:r};j.prototype={constructor:j};var Ra=
function(){function b(e,a){return f(e.x-a.x,e.y-a.y)}function d(e,a){a=a||e.length;if(a<=1)return null;for(var c=Array(a-1),g=Array(a-1),h=0,i,m=0;m<a-1;m++){i=b(e[m],e[m+1]);c[m]=za(i.x*i.x+i.y*i.y);g[m]=h+=c[m]}return{edges:c,accrued:g,tota:h}}function f(e,a){return new r(e,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var e=0,a=0,c=arguments.length;c--;){e+=arguments[c].x;a+=arguments[c].y}return f(e,a)},absSize:function(e){return I(O(e.x),O(e.y))},copy:function(e){return e?
f(e.x,e.y):null},diff:b,distance:function(e,a){return d(e,a).total},edges:d,equals:function(e,a){return e.x===a.x&&e.y===a.y},extendBy:function(e,a,c){var g=wa(a)*c|0;a=Q(a)*c|0;return f(e.x-g,e.y-a)},floor:function(e){for(var a=Array(e.length),c=e.length;c--;)a[c]=f(~~e[c].x,~~e[c].y);return a},getRect:function(e){for(var a,c,g,h,i=e.length;i--;){var m=e[i];a=v(a,xa)||m.x<a?m.x:a;c=v(c,xa)||m.y<c?m.y:c;g=v(g,xa)||m.x>g?m.x:g;h=v(h,xa)||m.y>h?m.y:h}return new j(a,c,g-a,h-c)},init:f,invert:function(e){return f(-e.x,
-e.y)},min:function(e,a){return f(e.x<a.x?e.x:a.x,e.y<a.y?e.y:a.y)},max:function(e,a){return f(e.x>a.x?e.x:a.x,e.y>a.y?e.y:a.y)},offset:function(e,a,c){return f(e.x+a,e.y+(c||a))},scale:function(e,a){return f(e.x/a|0,e.y/a|0)},simplify:function(e,a){if(!e)return null;a=a?a:Ra.VECTOR_SIMPLIFICATION;for(var c=[],g=null,h=e.length;h--;){var i=e[h];if(include=!g||h===0||O(i.x-g.x)+O(i.y-g.y)>a){c.unshift(i);g=i}}return c},theta:function(e,a,c){c=T((e.y-a.y)/c);return e.x>a.x?c:Math.PI-c},toString:function(e){return e?
e.x+", "+e.y:""}}}(),jb=function(){return{dotProduct:function(b,d){return b.x*d.x+b.y*d.y}}}(),Va=function(){function b(f){return d(f.x,f.y,f.x2,f.y2)}function d(f,e,a,c){return new j(f,e,(a||f)-f,(c||e)-e)}return{buffer:function(f,e,a){return Va.init(f.x-e,f.y-(a||e),f.x2+e,f.y2+(a||e))},center:function(f){return new r(f.x+(f.w>>1),f.y+(f.h>>1))},copy:b,diagonalSize:function(f){return za(f.w*f.w+f.h*f.h)},fromCenter:function(f,e,a,c){a=a>>1;c=c>>1;return d(f-a,e-c,f+a,e+c)},init:d,intersect:function(f,
e){var a=I(f.x,e.x),c=I(f.y,e.y),g=y(f.x2,e.x2),h=y(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,e){if(f.w===0||f.h===0)return b(e);else if(e.w===0||e.h===0)return b(f);else{var a=y(f.x,e.x),c=y(f.y,e.y),g=I(f.x2,e.x2),h=I(f.y2,e.y2);a=d(a,c,g,h);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,d){var f=[],e={},a;for(a=d.length;a--;)e[d[a].target.id]=true;for(a=b.length;a--;)e[b[a].target.id]||
(f[f.length]=b[a]);return f},init:function(b,d,f,e){return{type:b,x:e.x|0,y:e.y|0,elements:[],absXY:d,relXY:f}},initHit:function(b,d,f){return{type:b,target:d,drag:f}},triggerEvent:function(b,d,f,e){d.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},e?e:b.elements,b.absXY,b.relXY,new r(b.x,b.y))}}}();var kb=function(b){function d(a,c){var g=f[a],h;g||(g=f[a]=[]);(h=g[c])||(h=g[c]=[]);return h}b=b||128;var f=[],e={};return{insert:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,m=(a.x+a.w)/b|0;a=(a.y+a.h)/
b|0;g=g||c.id||COG.objId("spatial");e[g]=c;for(c=h;c<=m;c++)for(h=i;h<=a;h++)d(c,h).push(g)},remove:function(a,c,g){var h=a.x/b|0,i=a.y/b|0,m=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;delete e[g];for(c=h;c<=m;c++)for(h=i;h<=a;h++){var n=d(c,h),H=ja.call(n,g);H>=0&&n.splice(H,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,h=(a.y+a.h)/b|0,i=[],m=[];for(a=a.x/b|0;a<=g;a++)for(var n=c;n<=h;n++)i=i.concat(d(a,n));i.sort();for(c=i.length;c--;){g=i[c];if(h=e[g])m[m.length]=h;for(;c>0&&i[c-1]==g;)c--}return m}}},
Wb=3E4,xb={},Xb=0;(new Date).getTime();var Qa={},Ua=[];z.prototype={constructor:z,load:function(b){var d=this;q(this.url,function(f){d.loaded=true;d.image=f;b&&b()})}};var bc=function(){return COG.observable({applyStyle:function(){},applyTransform:function(b,d,f){return{restore:null,x:d,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new r},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},
reset:function(){}})},Cb={},Wa=E.registerRenderer=function(b,d){Cb[b]=d},cc=E.attachRenderer=function(b,d,f,e){b=b.split("/");for(var a=new bc(d,f,e),c=0;c<b.length;c++){var g=Cb[b[c]];if(g)a=new g(d,f,e,a)}return a};Wa("canvas",function(b,d,f,e){function a(C,aa,R){var ga,Z;G[aa]=function(P){for(ga=ka.length;ga--;)if(Z=R[ka[ga]])P[ua[ga]]=Z}}function c(C,aa,R,ga){var Z=false;if(aa)Z=n.isPointInPath(B?aa.x-H:aa.relXY.x,B?aa.y-N:aa.relXY.y);return{draw:ga||fa,viewport:C,state:R,hit:Z,vpX:H,vpY:N,context:n}}
f=COG.extend({},f);var g,h,i,m=false,n,H=0,N=0,G={},u=null,B=CANI.canvas.pipTransformed,F={},K=function(){},fa=function(){this.fill&&n.fill();this.stroke&&n.stroke()},ka=["fill","stroke","lineWidth","opacity"],ua=["fillStyle","strokeStyle","lineWidth","globalAlpha"];(function(){if(d){var C=d.tagName=="CANVAS",aa=C?d.parentNode:d;g=b.width=aa.offsetWidth;h=b.height=aa.offsetHeight;if(C){i=d;i.width=g;i.height=h;db&&FlashCanvas.initElement(i)}else{i=ac(g,h);i.style.cssText="position: absolute; z-index: 1;";
m=true;d.appendChild(i)}n=null}})();f=COG.extend(e,{interactTarget:i,applyStyle:function(C){var aa=G[C],R=n&&n.canvas?n.canvas.id:"default",ga;F[R]||(F[R]=[]);ga=F[R].pop()||"basic";if(aa){F[R].push(C);aa(n);return ga}},applyTransform:function(C){if(C.translateX!==0||C.translateY!==0||C.scaling!==1||C.rotation!==0){n.save();u={undo:function(){n.restore();u=null},x:C.xy.x,y:C.xy.y};n.translate(C.xy.x-H+C.translateX,C.xy.y-N+C.translateY);C.rotation!==0&&n.rotate(C.rotation);C.scaling!==1&&n.scale(C.scaling,
C.scaling)}return u},drawTiles:function(C,aa){for(var R,ga,Z=H-256,P=N-256,W=C.x2,sa=C.y2,va=aa.length;va--;){R=aa[va];if(ga=R.x>=Z&&R.x<=W&&R.y>=P&&R.y<=sa)R.loaded?n.drawImage(R.image,R.x-H,R.y-N):R.load(b.invalidate)}},prepare:function(C,aa){var R,ga=false,Z=aa.scaled||aa,P=aa.scaleFactor;if(n)n.restore();else n=i.getContext("2d");for(R=C.length;R--;)ga=ga||C[R].clip;H=Z.x;N=Z.y;if(n){ga||n.clearRect(0,0,g,h);n.save();n.scale(P,P)}n.globalCompositeOperation="source-over";return n},prepArc:function(C,
aa,R,ga){n.beginPath();n.arc(C.xy.x-(u?u.x:H),C.xy.y-(u?u.y:N),C.size>>1,C.startAngle,C.endAngle,false);return c(aa,R,ga)},prepImage:function(C,aa,R,ga,Z){var P=(Z.x||C.xy.x)-(u?u.x:H),W=(Z.y||C.xy.y)-(u?u.y:N),sa=Z.image||C.image;if(sa){n.beginPath();n.rect(P,W,Z.width||sa.width,Z.height||sa.height);return c(aa,R,ga,function(){n.drawImage(sa,P,W,Z.width||sa.width,Z.height||sa.height)})}},prepMarker:function(C,aa,R,ga){var Z=C.xy.x-(u?u.x:H),P=C.xy.y-(u?u.y:N),W=C.size,sa=undefined;n.beginPath();
switch(C.markerStyle.toLowerCase()){case "image":sa=K;n.rect(Z-(W>>1),P-(W>>1),W,W);if(C.reset&&C.image){C.image=null;C.reset=false}C.image?n.drawImage(C.image,Z-(W>>1),P-(W>>1),W,W):q(C.imageUrl,function(va){C.image=va;n.drawImage(C.image,Z-(W>>1),P-(W>>1),W,W)});break;default:n.moveTo(Z,P);n.lineTo(Z-(W>>1),P-W);n.lineTo(Z+(W>>1),P-W);n.lineTo(Z,P);break}return c(aa,R,ga,sa)},prepPoly:function(C,aa,R,ga,Z){var P=true;C=Z.points||C.points;Z=u?u.x:H;var W=u?u.y:N;n.beginPath();for(var sa=C.length;sa--;){var va=
C[sa].x-Z,fb=C[sa].y-W;if(P){n.moveTo(va,fb);P=false}else n.lineTo(va,fb)}return c(aa,R,ga)},getContext:function(){return n},getDimensions:function(){return{width:g,height:h}},getOffset:function(){return new r(H,N)}});(function(){for(var C in T5.styles)a(null,C,T5.styles[C]);T5.bind("styleDefined",a)})();f.bind("detach",function(){m&&d.removeChild(i)});return f});var lb=E.styles={},dc=E.defineStyle=function(b,d){lb[b]=d;E.trigger("styleDefined",b,lb[b]);return b},Db=E.defineStyles=function(b){for(var d in b)dc(d,
b[d])};E.getStyle=function(b){return lb[b]};E.loadStyles=function(b){COG.jsonp(b,function(d){Db(d)})};Db({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Yb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Mb=function(b){function d(p,s,A){if(!va){ga(na-s,oa-A);$.trigger("pan",na,oa)}}function f(p,s,A,S){C(y(I(ta+Y(2,S)-1,0.5),2))}function e(){var p=Aa(ta)/Math.LN2|0;if(p!==
0){ta=Y(2,p);aa(ab+p,ec,fc)}redraw=true}function a(p,s){var A=renderer&&renderer.projectXY?renderer.projectXY(p,s):null;if(!A){A=$.getViewport();var S=1/ta;A=new r(A?A.x+p*S:p,A?A.y+s*S:s)}return A}function c(p,s,A){R("doubleTap",s,A,a(A.x,A.y));b.scalable&&C(2,a(A.x,A.y),b.zoomEasing,null,b.zoomDuration)}function g(p,s,A){va=null;K("down",s,A)}function h(p,s,A){K("hover",s,A)}function i(p,s,A){B(s,A,false)}function m(p,s,A){B(s,A,true)}function n(){clearTimeout(Eb);Eb=setTimeout(function(){renderer.checkSize()},
250)}function H(p,s,A){K("tap",s,A);R("tap",s,A,a(A.x,A.y,true))}function N(p){renderer=cc(p||b.renderer,$,sa);Fb=!renderer.preventPartialScale;u()}function G(p,s){s.id=p;s.added=X();s.view=$;s.trigger("parentChange",$,sa,gc);P.push(s);P.sort(function(A,S){var ha=S.zindex-A.zindex;if(ha===0)ha=S.added-A.added;return ha});W=P.length;return s}function u(){Da&&Da.unbind();if(renderer){Da=INTERACT.watch(renderer.interactTarget);b.pannable&&Da.pannable().bind("pan",d);if(b.scalable){Da.bind("zoom",f);
Da.bind("doubleTap",c)}Da.bind("pointerDown",g);Da.bind("pointerMove",i);Da.bind("pointerUp",m);b.captureHover&&Da.bind("pointerHover",h);Da.bind("tap",H)}}function B(p,s,A){if(va){p=a(s.x,s.y);if(va.drag.call(va.target,va,p.x,p.y,A))redraw=true;if(A)va=null}}function F(p){var s,A,S=false;p=p||(new Date).getTime();if(S=p-Gb>hc){var ha=O(na-mb),Ba=O(oa-nb);s=na!==ob||oa!==pb;A=ta!==Hb;if(s||A)Ka++;if(ha>=Ib||Ba>=Ib)ua();A={index:fb++,draw:Ka};$.trigger("enterFrame",p,A);Gb=p}if(renderer&&S&&A.draw){La=
Jb|(ta!==1?Kb:0)|(s?qb:0)|(rb?Lb:0);sb=(s=(La&(Kb|qb))!==0)&&(La&Lb)===0;s=ka();renderer.trigger("predraw",s,La);if(renderer.prepare(P,s,La,p,Ea)){Ka=0;for(ii=W;ii--;){S=P[ii];if(S.visible&&(La&S.validStates)!==0){A=S.style?renderer.applyStyle(S.style,true):null;S.draw(renderer,s,La,$,p,Ea);A&&renderer.applyStyle(A)}}renderer.render(s);$.trigger("drawComplete",s,p);ob=na;pb=oa;Hb=ta}if(Ea){p=Ea?Ea.elements:[];if(bb&&bb.type==="hover"){s=Hits.diffHits(bb.elements,p);s.length>0&&Hits.triggerEvent(bb,
$,"Out",s)}if(p.length>0){S=Ea.x;A=Ea.y;for(s=p.length;s--;){ha=p[s];Ba=S;var Ma=A,Ja=ha&&ha.drag&&(!ha.canDrag||ha.canDrag(ha,Ba,Ma));if(Ja){va=ha;va.startX=Ba;va.startY=Ma}if(Ja)break}Hits.triggerEvent(Ea,$)}bb=p.length>0?COG.extend({},Ea):null;Ea=null}}animFrame(F)}function K(p,s,A){Ea=Hits.init(p,s,A,a(A.x,A.y,true));for(p=W;p--;)tb=tb||(P[p].hitGuess?P[p].hitGuess(Ea.x,Ea.y,La,$):false);tb&&Ka++}function fa(){Ka++}function ka(){var p=new j(na,oa,$.width,$.height);p.scaleFactor=ta;if(ta!==1)p.scaled=
Va.fromCenter(na+($.width>>1),oa+($.height>>1),$.width/ta|0,$.height/ta|0);return p}function ua(){var p=ka();if(p){if(Xa||Ya)if(p){var s=gb?na+(p.w>>1):na,A=hb?oa+(p.h>>1):oa,S=p.w,ha=p.h;if(Xa&&Xa>S)if(s+S>Xa)na=gb?na:Xa-S;else if(s<0)na=gb?na:0;if(Ya&&Ya>ha)if(A+ha>Ya)oa=hb?oa:Ya-ha;else if(A<0)oa=hb?oa:0}mb=na;nb=oa;R("refresh",$,p);Ka++}}function C(p,s,A,S,ha){var Ba;if(!Fb){A=false;Ba=J(Aa(p)/Math.LN2);p=Y(2,Ba)}if(A)COG.tweenValue(ta,p,A,ha,function(Ma,Ja){ta=Ma;if(Ja){Ba=J(Aa(ta)/Math.LN2);
ta=Y(2,Ba);S&&S()}e()});else{ta=p;e()}return $}function aa(p,s,A){p=I(b.minZoom,y(b.maxZoom,p));if(p!==ab){var S=Y(2,p-ab),ha=$.width>>1,Ba=$.height>>1,Ma=ha/S|0,Ja=Ba/S|0;ab=p;ga(((s?s:na+ha)-Ma)*S,((A?A:oa+Ba)-Ja)*S);ob=na;pb=oa;nb=mb=0;R("zoomLevelChange",p);ta=1;renderer.reset();ua()}}function R(){for(var p=$.trigger.apply(null,arguments).cancel,s=P.length;s--;)p=P[s].trigger.apply(null,arguments).cancel||p;return!p}function ga(p,s,A,S,ha){function Ba(){Ma+=1;if(Ma>=2){rb=false;ha&&ha()}}var Ma=
0;if(A){if((La&qb)===0){COG.tweenValue(na,p,A,S,function(Ja,ub){na=Ja|0;(ub?Ba:fa)();return!sb});COG.tweenValue(oa,s,A,S,function(Ja,ub){oa=Ja|0;(ub?Ba:fa)();return!sb});rb=true}}else{na=p|0;oa=s|0;ha&&ha()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,
turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},b);var Z={},P=[],W=0,sa=document.getElementById(b.container),va=null,fb=0,gc=null,ic=!v(window.attachEvent,xa),tb=false,Ib=b.refreshDistance,na=0,oa=0,mb=0,nb=0,ob=0,pb=0,Xa=null,Ya=null,gb=false,hb=false,Ea=null,sb=false,bb=null,Eb=0,ta=1,Hb=1,Gb=0,Da=null,Fb=true,rb=false,hc=1E3/b.fps|0,Ka=0,ec,fc,ab=b.zoomLevel,Jb=L("ACTIVE"),qb=L("PAN"),Kb=L("ZOOM"),Lb=L("ANIMATING"),La=Jb,
$={id:b.id,detach:function(){renderer&&renderer.trigger("detach");Da&&Da.unbind()},eachLayer:function(p){for(var s=W;s--;)p(P[s])},getLayer:function(p){for(var s=0;s<W;s++)if(P[s].id===p)return P[s];return null},getZoomLevel:function(){return ab},setLayer:function(p,s){for(var A=0;A<W;A++)if(P[A].id===p){P.splice(A,1);break}if(s){G(p,s);s.trigger("refresh",$,ka());$.trigger("layerChange",$,s)}Ka++;return s},invalidate:fa,refresh:ua,resetScale:function(){ta=1},scale:C,setZoomLevel:aa,syncXY:function(){},
triggerAll:R,removeLayer:function(p){a:{for(var s=W;s--;)if(P[s].id===p){p=s;break a}p=-1}if(p>=0&&p<W){$.trigger("layerRemove",$,P[p]);P.splice(p,1);Ka++}W=P.length},getOffset:function(){return new r(na,oa)},getRenderer:function(){return renderer},getScaleFactor:function(){return ta},setMaxOffset:function(p,s,A,S){Xa=p;Ya=s;gb=A;hb=S},getViewport:ka,updateOffset:ga,pan:function(p,s,A,S,ha){ga(na+p,oa+s,A,S,ha)}};COG.observable($);$.bind("resync",function(){});COG.configurable($,["container","captureHover",
"captureDrag","scalable","pannable","inertia","minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(b,null,{container:function(p,s){sa=document.getElementById(s);N()},inertia:u,captureHover:u,scalable:u,pannable:u,renderer:function(p,s){if(renderer){renderer.trigger("detach");renderer=null}N(s);Ka++}}),true);CANI.init(function(p){$.markers=G("markers",new ib({zindex:20}));Z=p;N();ic?window.attachEvent("onresize",n):window.addEventListener("resize",n,false)});animFrame(F);return $},Ga=function(b){b=
COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Ga.prototype={constructor:Ga,animate:function(b,d,f,e){D(this,b,d,f,e)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds(Va.fromCenter(this.xy.x,
this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=b},translate:function(b,d){this.translateX=b;this.translateY=d},updateBounds:function(b,d){b&&(!this.bounds||b.x!=this.bounds.x||b.y!=this.bounds.y)&&this.trigger("move",this,b,this.bounds);this.bounds=b;if(d)this.xy=Va.center(this.bounds)}};var Zb=1E3/60|0,$a=[],yb=0;x.prototype=COG.extend(Ga.prototype,{constructor:x});l.prototype=COG.extend({},Ga.prototype,{constructor:l});t.prototype=COG.extend({},
l.prototype);w.prototype=COG.extend({},Ga.prototype,{constructor:w});U.prototype=COG.extend({},w.prototype,{constructor:U});ba.prototype=COG.extend(Ga.prototype,{constructor:ba});la.prototype={constructor:la,clip:null,cycle:function(){},draw:function(){},hitGuess:null};Wa=function(b,d){function f(h,i){var m=i&&i.getZoomLevel?i.getZoomLevel():0;c[m]||(c[m]=new kb);a=c[m]}d=COG.extend({imageLoadArgs:{}},d);var e=b?Bb.init(b,d).run:null,a=null,c=[],g=COG.extend(new la(d),{draw:function(h,i){h.drawTiles(i,
a.search(Va.buffer(i,128)))}});g.bind("refresh",function(h,i,m){var n=(new Date).getTime();a&&e(i,m,a,function(){i.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-n)+" ms")})});g.bind("parentChange",f);g.bind("resync",f);return g};var Nb=function(b){function d(i){clearTimeout(g);g=setTimeout(function(){a.sort(function(m,n){if(n.xy&&m.xy){var H=n.xy.y-m.xy.y;return H!=0?H:n.xy.x-m.xy.x}});i&&i.invalidate()},50)}function f(i,m,n,H){H&&c.remove(H,m);c.insert(n,m)}function e(i,m){for(var n=
a.length;n--;)a[n].resync(m)}b=COG.extend({zindex:10},b);var a=[],c=new kb,g=0,h=COG.extend(new la(b),{itemCount:0,add:function(i,m){if(i){i.layer=h;if(m)a.unshift(i);else a[a.length]=i;var n=h.view;if(n){i.resync(n);c&&i.bounds&&c.insert(i.bounds,i);d(n)}i.bind("move",f)}h.itemCount=a.length},clear:function(){c=new kb;a=[];h.itemCount=0},draw:function(i,m,n,H,N,G){H={};N=c&&m?c.search(m):[];for(var u=N.length;u--;){var B=N[u],F=B.style||h.style,K,fa=i.applyTransform(B),ka=B.getProps?B.getProps(i,
n):H;if(ka=(K=i["prep"+B.typeName])?K.call(i,B,m,G,n,ka):null){if(G&&ka.hit){G.elements.push(Hits.initHit(B.type,B,B.draggable?B.drag:null));K=G.type+"Style";F=B[K]||h[K]||F}F=F?i.applyStyle(F,true):null;(K=B.draw||ka.draw)&&K.call(B,ka);F&&i.applyStyle(F)}fa&&fa.undo&&fa.undo()}},find:function(){return[].concat(a)},hitGuess:function(i,m){return c&&c.search({x:i-10,y:m-10,w:20,h:20}).length>0}});h.bind("parentChange",e);h.bind("resync",e);return h},ib=function(b){return new Nb(b)};COG.extend(E,{ex:COG.extend,
is:v,ticks:X,userMessage:function(b,d,f){E.trigger("userMessage",b,d,f)},indexOf:ja,Rect:j,XY:Ra,XYRect:Va,Vector:jb,Hits:Hits,Generator:Bb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:z,TileLayer:Wa,getImage:q,viewState:L,View:Mb,ViewLayer:la,ImageLayer:Wa,Drawable:Ga,Marker:x,Poly:l,Line:t,Arc:ba,ImageDrawable:w,ImageMarker:U,DrawLayer:Nb,ShapeLayer:ib});var vb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ia=Math.PI/180,Pa=180/Math.PI,wb=M,Ob=-wb,
Pb=ea,jc=-Pb,eb=0.08181919084262157,cb=null,Qb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ia=function(){function b(a){return a?f(a.lat,a.lon):null}function d(a){return!a||a.lat===0&&a.lon===0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function e(a){if(a)if(v(a.lat,Ab))return b(a);else{if(a.split)for(var c=[" ",","],g=0;g<c.length;g++){var h=a.split(c[g]);if(h.length===2)return f(h[0],h[1])}}else return f();return null}
return{calcDistance:function(a,c){if(d(a)||d(c))return 0;var g=(c.lat-a.lat)*Ia>>1,h=(c.lon-a.lon)*Ia>>1;g=Q(g)*Q(g)+wa(a.lat*Ia)*wa(c.lat*Ia)*Q(h)*Q(h);return 6371*2*Ha(za(g),za(1-g))},copy:b,empty:d,equal:function(a,c){return a&&c&&a.lat==c.lat&&a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=Y(Math.E,-c),h=M-2*Ca(g),i=ya(h,g),m=0;m<12&&O(h-i)>1.0E-7;){h=i;i=ya(h,g);m++}return f(i*Pa,a%360*Pa)},generalize:function(a,c,g){var h=a.length,i=[],m=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+
c.length+" positions");for(var n=h;n--;)if(n===0)i.unshift(a[n]);else{var H=!m||ia.inArray(a[n],c)?g:ia.calcDistance(m,a[n]);if(a[n]&&H>=g){i.unshift(a[n]);m=a[n]}}COG.info("generalized "+h+" positions into "+i.length+" positions");return i},inArray:function(a,c){for(var g=ia.equal,h=c.length;h--;)if(g(a,c[h]))return true;return false},inBounds:function(a,c){var g=!(ia.empty(a)||ia.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,
c,g){var h=a.lat*Ia;a=a.lon*Ia;c=h+c/6371;g=T(Q(g/6371)/wa(h));g=a+g;c=(c+M)%Math.PI-M;g%=ea;return f(c*Pa,g*Pa)},parse:e,parseArray:function(a){var c=a.length,g=Array(c);for(c=c;c--;)g[c]=e(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*Ia,V(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var n=0,H=c.chunkSize,N=h;N--;){i[N]=T5.GeoXY.init(a[N]);n+=1;if(n>H)break}h=N;if(h<=0)c.callback&&c.callback(i);else animFrame(g)}
var h=a.length,i=Array(h);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var m=h;m--;)i[m]=T5.GeoXY.init(a[m]);return i}animFrame(g);return null}}}(),Na=function(){function b(a,c,g){var h=new r(0,c.lat-a.lat);h.x=(g||v(g,xa))&&a.lon>c.lon?360-a.lon+c.lon:c.lon-a.lon;return h}function d(a,c){return Na.init(ia.init(a.min.lat-c,a.min.lon-c%360),ia.init(a.max.lat+c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ia.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function e(a,
c){return{min:ia.parse(a),max:ia.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,h=a.lat*Ia,i=a.lon*Ia,m=h-g,n=h+g;if(m>Ob&&n<wb){h=T(Q(g)/wa(h));g=(i-h)%ea;i=(i+h)%ea}else{m=I(m,Ob);n=y(n,wb);g=jc;i=Pb}return Na.init(ia.init(m*Pa,g*Pa),ia.init(n*Pa,i*Pa))},expand:d,forPositions:function(a,c){var g=null,h=T5.ticks();c||(c="auto");for(var i=a.length;i--;)if(g){var m=b(g.min,a[i],false),n=b(a[i],g.max,false);if(m.x<0)g.min.lon=a[i].lon;if(m.y<0)g.min.lat=a[i].lat;if(n.x<
0)g.max.lon=a[i].lon;if(n.y<0)g.max.lat=a[i].lat}else g=e(a[i],a[i]);if(c){if(c=="auto"){i=b(g.min,g.max);c=I(i.x,i.y)*0.3}g=d(g,c)}COG.trace("calculated bounds for "+a.length+" positions",h);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,c){var g=f(a);g=y(J(O(g.lat)*0.05),vb.length);var h=vb[g],i=b(a.min,a.max);g=ma(Aa(vb[3]*c.h/i.y)/Aa(2));
h=ma(Aa(h*c.w/i.x)/Aa(2));return y(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:e,isEmpty:function(a){return!a||ia.empty(a.min)||ia.empty(a.max)},toString:function(a){return"min: "+ia.toString(a.min)+", max: "+ia.toString(a.max)}}}();jb=function(){var b=/^(\d+).*$/,d=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(f,e){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=e.split(","),g=0;g<c.length;g++){d.lastIndex=-1;if(d.test(c[g])){var h=d.exec(c[g]);if(a>=parseInt(h[1],10)&&a<=parseInt(h[2],10))return true}else if(a==
c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!cb){var e=[];for(var a in Qb)e.push(a);cb=RegExp("(\\s)("+e.join("|")+")(\\s|$)","i")}cb.lastIndex=-1;if(e=cb.exec(f))f=f.replace(cb,"$1"+Qb[e[2]]);return f},toString:function(f){return f.streetDetails+" "+f.location}}}();var Oa=E.GeoXY=function(){function b(e,a){if(e.length){for(var c,g,h,i,m=e.length;m--;){b(e[m],a);c=v(c,xa)||e.x<c?e.x:c;g=v(g,xa)||e.y<g?e.y:g;h=v(h,xa)||e.x>h?e.x:h;i=v(i,xa)||e.y>i?e.y:i}return new j(c,
g,h-c,i-g)}else if(e.mercXY){c=e.mercXY;e.x=(c.x+Math.PI)/a|0;e.y=(Math.PI-c.y)/a|0;e.rpp=a}return e}function d(e,a){if(e.length)for(var c=e.length;c--;)d(e[c],a);else{e.mercXY=new r(e.x*a-Math.PI,Math.PI-e.y*a);e.pos=ia.fromMercatorPixels(e.mercXY.x,e.mercXY.y)}return e}function f(e,a,c){e.pos=a;e.mercXY=ia.toMercatorPixels(a);(c=v(c,Ab)?c:e.rpp)&&b(e,c)}return{init:function(e,a){var c=new r;f(c,e,a);return c},sync:b,syncPos:d,toPos:function(e,a){a=a||e.rpp;return ia.fromMercatorPixels(e.x*a-Math.PI,
Math.PI-e.y*a)},updatePos:f}}(),Sa={};Wa=function(){return{bestResults:function(b,d){d||(d=20);for(var f=b.length>0?b[0]:null,e=[],a=0;a<b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=d)e.push(b[a]);else break;return e}}}();var Rb=function(b){b=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})},kc=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&
ia.vectorize(c.geometry,{callback:function(h){g.add(new T5.Line(h,{style:"waypoints",simplify:true}));a.setLayer("route",g)}})}function d(a){for(var c=f.Unknown,g=e,h=0;h<g.length;h++){g[h].regex.lastIndex=-1;var i=g[h].regex.exec(a);if(i){c=g[h].customCheck?g[h].customCheck(a,i):g[h].turnType;break}}return c}var f={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",
TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},e=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:
f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});a.push({regex:/take.*?ramp/i,turnType:f.Ramp});a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",
waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=da("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=ia.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:d,TurnType:f,Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,
"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=d(a.description);return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Na.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&c.push(a.instructions[g].position);return c}},a)}}}(),lc="featurecollection",mc="feature",zb={async:false},Ta={processor:null,group:"shapes",layerClass:ib},
nc={point:COG.extend({},Ta,{processor:function(b,d,f,e){d=ca([d.coordinates],zb);if(d.length>0)if(f=e.marker(d[0],f)){b.add(f);return d.length}},group:"markers",layerClass:ib}),linestring:COG.extend({},Ta,{processor:function(b,d,f,e){d=ca(d&&d.coordinates?d.coordinates:[]);return Fa(b,d,f,e.line)}}),multilinestring:COG.extend({},Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=d.length;c--;)a+=Fa(b,d[c],f,e.line);return a}}),polygon:COG.extend({},Ta,{processor:function(b,
d,f,e){d=d&&d.coordinates?d.coordinates:[];if(d.length>0)return Fa(b,d[0],f,e.poly);return 0}}),multipolygon:COG.extend({},Ta,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=0;c<d.length;c++)a+=Fa(b,d[c][0],f,e.poly);return a}})},Sb=function(b,d,f,e){function a(B,F){var K=B.processor,fa=m+B.group,ka=COG.extend({},B,f,{properties:F.properties});if(K){var ua=u[fa];if(!ua){ua=new B.layerClass({id:fa});u[fa]=ua}return K(ua,F.data,ka,e)}return 0}function c(B,F){var K=B&&
B.type?B.type.toLowerCase():null;return K&&K===mc?c(B.geometry,B.properties):{type:K,isCollection:K?K===lc:false,definition:nc[K],data:B,properties:F?F:B.properties}}function g(B){var F=0,K=COG.extend({},f),fa=n;B=B?B:(new Date).getTime();if(!N){for(;fa<H;fa++){B=c(i?i(b[fa]):b[fa]);var ka=null;if(B.isCollection){K.layerPrefix=m+G++ +"-";N=new Sb(B.data.features,function(ua){N=null;for(var C in ua)u[C]=ua[C];n>=H&&d&&d(u)},K);ka+=1}else if(B.definition)ka=a(B.definition,B);F+=ka?ka:1;if(F>=h)break}n=
fa+1;if(N||n<H)animFrame(g);else d&&d(u)}}f=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},f);e=COG.extend({marker:function(B){return new x({xy:B})},line:function(B,F){return new l(B,COG.extend({},f,F))},poly:function(B,F){return new l(B,COG.extend({fill:true},f,F))}},e);var h=500,i=f.rowPreParse,m=f.layerPrefix,n=0,H=0,N=null,G=0,u={};if(b){v(b,"array")||(b=[b]);H=b.length;animFrame(g)}};Ta=E.GeoJSON={parse:function(b,d,f){return new Sb(b,d,f)}};E.Map=function(b){function d(u){try{var B=
ia.init(u.coords.latitude,u.coords.longitude),F=u.coords.accuracy/1E3;G.trigger("locationUpdate",u,F);if(n){if(!i){i=new UI.LocationOverlay({pos:B,accuracy:F});i.update(G.getTileLayer());G.setLayer("location",i)}var K=Na.createBoundsFromCenter(B,Math.max(F,1));G.gotoBounds(K)}else{i.pos=B;i.accuracy=F;i.update(G.getTileLayer());a(B,null,COG.easing("sine.out"))}n=false}catch(fa){COG.exception(fa)}}function f(u){COG.info("caught location tracking error:",u)}function e(u,B,F){G.setZoomLevel(B);a(u,F)}
function a(u,B,F,K){u=Oa.init(u,qa(G.getZoomLevel()));G.updateOffset(u.x-(G.width>>1),u.y-(G.height>>1),F,K,function(){B&&B(G)})}b=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2},g=new r,h=c.NONE,i=null,m=0,n=true,H=0,N=b.tapExtent;b.adjustScaleFactor=function(u){return Math.pow(2,(u<1?Math.floor:Math.ceil)(Math.log(u)))};var G=COG.extend(new Mb(b),{getBoundingBox:function(){var u=G.getViewport();return u?Na.init(Oa.toPos(new r(u.x,
u.y2),H),Oa.toPos(new r(u.x2,u.y),H)):null},getCenterPosition:function(){var u=G.getViewport();if(u){u=new r(u.x+(u.w>>1),u.y+(u.h>>1));return Oa.toPos(u,H)}return null},gotoBounds:function(u,B){var F=Na.getZoomLevel(u,G.getViewport());e(Na.getCenter(u),F,B)},gotoPosition:e,panToPosition:a,syncXY:function(u,B){return(B?Oa.syncPos:Oa.sync)(u,H)},locate:function(){G.trackStart(c.SINGLE);setTimeout(G.trackCancel,1E4)},trackStart:function(u){if(navigator.geolocation&&!m){h=u?u:c.WATCH;n=true;m=navigator.geolocation.watchPosition(d,
f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},trackCancel:function(){m&&navigator.geolocation&&navigator.geolocation.clearWatch(m);G.removeLayer("location");i=null;h=c.NONE;m=0},animateRoute:function(u,B,F,K){var fa=G.getLayer("route");if(fa)(u=fa.getAnimation(u,B,F,K))&&u.addToView(G)}});G.bind("pan",function(){h===c.SINGLE&&G.trackCancel()});G.bind("tap",function(u,B,F,K){u=Oa.toPos(K,H);var fa=Oa.toPos(Ra.offset(K,-N,N),H);K=Oa.toPos(Ra.offset(K,N,-N),H);G.trigger("geotap",B,F,u,Na.init(fa,
K))});G.bind("refresh",function(u,B,F){if(g.x!=F.x||g.y!=F.y){G.trigger("boundsChange",G.getBoundingBox());g.x=F.x;g.y=F.y}});G.bind("zoomLevelChange",function(u,B){var F;H=qa(B);F=ea/H|0;G.setMaxOffset(F,F,true,false);G.resetScale();G.triggerAll("resync",G)});return G};E.GeoShape=function(b,d){d=COG.extend({autoParse:true},d);for(var f=Array(b.length),e=d.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(e?a(b[c]):b[c]);return new T5.Poly(f,d)};E.LocationOverlay=function(b){b=
COG.extend({pos:null,accuracy:null,zindex:90},b);var d=new Image,f=T5.XY.init(),e=T5.XY.init(),a=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
d.onload=function(){f=T5.XY.init(d.width>>1,d.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,h){var i=e.x-h.x,m=e.y-h.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(i,m,a,0,Math.PI*2,false);g.fill()}d.complete&&d.width>0&&g.drawImage(d,i-f.x,m-f.y,d.width,d.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;e=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,h){c.update(h)});
return c};E.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:da,radsPerPixel:qa,Position:ia,BoundingBox:Na,Radius:function(b,d){return{distance:parseInt(b,10),uom:d}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:jb,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var d=COG.extend({remove:function(){delete Sa[d.id]}},b);return Sa[d.id]=d},Search:Wa,GeoSearchResult:Rb,LocationSearch:function(b){function d(g,h){navigator.geolocation.clearWatch(e);e=0;if(a){clearTimeout(a);a=0}h&&h([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var e=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,h){if(navigator.geolocation&&!e){e=navigator.geolocation.watchPosition(function(i){var m=
ia.init(i.coords.latitude,i.coords.longitude);i=new Rb({id:1,caption:"Current Location",pos:m,accuracy:i.coords.accuracy/1E3,matchWeight:100});if(!c||i.accuracy<c.accuracy)c=i;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)d(c,h)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&d(c,h)},b.searchTimeout)}}},b))},Routing:kc,GeoJSON:Ta}})(T5);
