COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var D=arguments[0]||{},Y,t=1,q=arguments.length;t<q;t++)if((Y=arguments[t])!==null)for(var l in Y){var n=Y[l];if(D!==n)if(n!==undefined)D[l]=n}return D};
(function(){var D=Object.prototype.hasOwnProperty,Y=0,t={};t.toID=function(q){return q.replace(/\s/g,"-")};t.objId=function(q){return(q?q:"obj")+Y++};t.isFunction=function(q){return toString.call(q)==="[object Function]"};t.isArray=function(q){return toString.call(q)==="[object Array]"};t.isPlainObject=function(q){if(!q||toString.call(q)!=="[object Object]"||q.nodeType||q.setInterval)return false;if(q.constructor&&!D.call(q,"constructor")&&!D.call(q.constructor.prototype,"isPrototypeOf"))return false;
var l;for(l in q);return l===undefined||D.call(q,l)};t.isEmptyObject=function(q){for(var l in q)return false;return true};t.isXmlDocument=function(q){return toString.call(q)==="[object Document]"};t.contains=function(q,l){var n=q,s=arguments,y=1;if(l&&module.isArray(l)){s=l;y=0}for(y=y;y<s;y++)n=n&&typeof foo[s[y]]!=="undefined";return n};t.formatStr=function(q){if(arguments.length<=1)return q;for(var l=arguments.length-2,n=0;n<=l;n++)q=q.replace(RegExp("\\{"+n+"\\}","gi"),arguments[n+1]);return q};
t.wordExists=function(q,l){var n="";if(l.toString)l=l.toString();for(var s=0;s<l.length;s++)n+=!/\w/.test(l[s])?"\\"+l[s]:l[s];return RegExp("(^|\\s|\\,)"+n+"(\\,|\\s|$)","i").test(q)};COG.extend(COG,t)})();
(function(){function D(n){return typeof console!=="undefined"?function(){console[n](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var Y=window.console&&window.console.markTimeline,t=D("error"),q=D("info"),l=function(){return Y?function(n,s){console.markTimeline(n+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:l,debug:D("debug"),info:q,warn:D("warn"),error:t,exception:function(n){if(t)for(var s in n)q("ERROR DETAIL: "+s+
": "+n[s])}})})();
(function(){function D(t,q){var l=t.hasOwnProperty("obsHandlers")?t.obsHandlers:null;l[q]||(l[q]=[]);return l[q]}var Y=0;COG.observable=function(t){if(!t)return null;if(!(t.hasOwnProperty("obsHandlers")?t.obsHandlers:null))t.obsHandlers={};if(!t.hasOwnProperty("bind")){t.bind=function(q,l){var n="callback"+Y++;D(t,q).unshift({fn:l,id:n});return n};t.triggerCustom=function(q,l){var n=D(t,q),s={cancel:false,name:q,source:this},y;l&&COG.extend(s,l);if(!n)return null;y=Array.prototype.slice.call(arguments,2);
t.eventInterceptor&&t.eventInterceptor(q,s,y);y.unshift(s);for(var P=n.length;P--&&!s.cancel;)n[P].fn.apply(this,y);return s};t.trigger=function(q){var l=Array.prototype.slice.call(arguments,1);l.splice(0,0,q,null);return t.triggerCustom.apply(this,l)};t.unbind=function(q,l){if(typeof q==="undefined")t.obsHandlers={};else for(var n=D(t,q),s=0;n&&s<n.length;s++)if(n[s].id===l){n.splice(s,1);break}return t}}return t}})();
(function(){function D(l,n){l[n]||(l[n]=function(s){return l.configure(n,s)})}function Y(l){l.gtConfId="configurable"+q++;l.gtConfig={};l.gtConfigFns=[];return l.gtConfig}var t={},q=0;COG.paramTweaker=function(l,n,s){return function(y,P){if(typeof P!=="undefined"){if(y in l)l[y]=P;s&&y in s&&s[y](y,P)}else return n&&y in n?n[y](y):l[y]}};COG.configurable=function(l,n,s,y){if(l){l.gtConfId||Y(l);var P=l.gtConfId,ga=l.gtConfig,p=l.gtConfigFns;t[P]=l;p.push(s);for(s=n.length;s--;){ga[n[s]]=true;y&&D(l,
n[s])}if(!l.configure)l.configure=function(A,i){if(ga[A]){for(var o=p.length;o--;){var u=p[o](A,i);if(typeof u!=="undefined")return u}return t[P]}return null}}}})();
(function(){function D(l){var n=document.createElement("script"),s=false;n.src=l;n.async=true;n.onload=n.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;n.onload=n.onreadystatechange=null;n&&n.parentNode&&n.parentNode.removeChild(n)}};t||(t=document.getElementsByTagName("head")[0]);t.appendChild(n)}var Y=0,t,q=this;COG.jsonp=function(l,n,s){l+=l.indexOf("?")>=0?"&":"?";var y="json"+ ++Y;q[y]=function(P){n(P);q[y]=null;try{delete q[y]}catch(ga){}};
D(l+(s?s:"callback")+"="+y);return y}})();
(function(){var D=1.70158,Y=Math.PI/2,t=Math.PI*2,q=1E3/60|0,l=Math.abs,n=Math.pow,s=Math.sin,y=Math.asin,P=Math.cos,ga={linear:function(p,A,i,o){return i*p/o+A},backin:function(p,A,i,o){return i*(p/=o)*p*((D+1)*p-D)+A},backout:function(p,A,i,o){return i*((p=p/o-1)*p*((D+1)*p+D)+1)+A},backinout:function(p,A,i,o){return(p/=o/2)<1?i/2*p*p*(((D*=1.525)+1)*p-D)+A:i/2*((p-=2)*p*(((D*=1.525)+1)*p+D)+2)+A},bouncein:function(p,A,i,o){return i-ga.bounceout(o-p,0,i,o)+A},bounceout:function(p,A,i,o){return(p/=
o)<1/2.75?i*7.5625*p*p+A:p<2/2.75?i*(7.5625*(p-=1.5/2.75)*p+0.75)+A:p<2.5/2.75?i*(7.5625*(p-=2.25/2.75)*p+0.9375)+A:i*(7.5625*(p-=2.625/2.75)*p+0.984375)+A},bounceinout:function(p,A,i,o){return p<o/2?ga.bouncein(p*2,0,i,o)/2+A:ga.bounceout(p*2-o,0,i,o)/2+i/2+A},cubicin:function(p,A,i,o){return i*(p/=o)*p*p+A},cubicout:function(p,A,i,o){return i*((p=p/o-1)*p*p+1)+A},cubicinout:function(p,A,i,o){if((p/=o/2)<1)return i/2*p*p*p+A;return i/2*((p-=2)*p*p+2)+A},elasticin:function(p,A,i,o,u,H){if(p==0)return A;
if((p/=o)==1)return A+i;H||(H=o*0.3);if(!u||u<l(i)){u=i;i=H/4}else i=H/t*y(i/u);return-(u*n(2,10*(p-=1))*s((p*o-i)*t/H))+A},elasticout:function(p,A,i,o,u,H){var Q;if(p==0)return A;if((p/=o)==1)return A+i;H||(H=o*0.3);if(!u||u<l(i)){u=i;Q=H/4}else Q=H/t*y(i/u);return u*n(2,-10*p)*s((p*o-Q)*t/H)+i+A},elasticinout:function(p,A,i,o,u,H){var Q;if(p==0)return A;if((p/=o/2)==2)return A+i;H||(H=o*0.3*1.5);if(!u||u<l(i)){u=i;Q=H/4}else Q=H/t*y(i/u);if(p<1)return-0.5*u*n(2,10*(p-=1))*s((p*o-Q)*t/H)+A;return u*
n(2,-10*(p-=1))*s((p*o-Q)*t/H)*0.5+i+A},quadin:function(p,A,i,o){return i*(p/=o)*p+A},quadout:function(p,A,i,o){return-i*(p/=o)*(p-2)+A},quadinout:function(p,A,i,o){if((p/=o/2)<1)return i/2*p*p+A;return-i/2*(--p*(p-2)-1)+A},sinein:function(p,A,i,o){return-i*P(p/o*Y)+i+A},sineout:function(p,A,i,o){return i*s(p/o*Y)+A},sineinout:function(p,A,i,o){return-i/2*(P(Math.PI*p/o)-1)+A}};COG.tweenValue=function(p,A,i,o,u){function H(aa){aa=aa?aa:(new Date).getTime();if(ha+q<aa){var L=aa-Q,ua=i(L,p,la,o),sa=
Q+o<=aa;aa=!sa;if(u){L=u(ua,sa,L);aa=typeof L!="undefined"?L&&aa:aa}aa&&animFrame(H)}}var Q=(new Date).getTime(),ha=0,la=A-p;animFrame(H);return{}};COG.easing=function(p){return ga[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(p,A){ga[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]=A}})();
(function(){var D=/^P(\d+Y)?(\d+M)?(\d+D)?$/,Y=/^(\d+H)?(\d+M)?(\d+S)?$/,t={8601:function(l){l=l.split("T");var n=null;n=null;var s=0,y=0;D.lastIndex=-1;n=D.exec(l[0]);s+=n[3]?parseInt(n[3].slice(0,-1),10):0;Y.lastIndex=-1;n=Y.exec(l[1]);y+=n[1]?parseInt(n[1].slice(0,-1),10)*3600:0;y+=n[2]?parseInt(n[2].slice(0,-1),10)*60:0;y+=n[3]?parseInt(n[3].slice(0,-1),10):0;return new q(s,y)}},q=COG.Duration=function(l,n){return{days:l?l:0,seconds:n?n:0}};COG.addDuration=function(){for(var l=new q,n=arguments.length;n--;){l.days+=
arguments[n].days;l.seconds+=arguments[n].seconds}if(l.seconds>=86400){l.days+=~~(l.seconds/86400);l.seconds%=86400}return l};COG.formatDuration=function(l){var n,s,y="";if(l.days)y=l.days+" days ";if(l.seconds){l=l.seconds;if(l>=3600){n=~~(l/3600);l-=n*3600}if(l>=60){s=Math.round(l/60);l-=s*60}if(n)y=y+n+(n>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)y=y+s+" min";else if(l>0)y=y+(l>10?l:"0"+l)+" sec"}return y};COG.parseDuration=function(l,n){var s=n?t[n]:null;if(s)return s(l);COG.Log.warn("Could not find duration parser for specified format: "+
n);return new q}})();COG.ObjectStore=function(){var D={},Y={},t="obj_"+(new Date).getTime(),q=0,l=Object.prototype.hasOwnProperty;return{add:function(n,s){var y;s=s?s:"default";if(n&&n.constructor)if(!l.call(n,"id"))n.id=t+ ++q;y=Y[s]?Y[s]:Y[s]=[];D[n.id]=y.length;y[n.length]=n}}};var CANI={};
(function(D){var Y=[],t=0,q=false,l=D.register=function(n,s){Y.push({section:n,run:s})};D.init=function(n){function s(){if(t<Y.length){var P=Y[t++];y[P.section]||(y[P.section]={});P.run(y[P.section],s)}else{for(P in y)D[P]=y[P];q=true;n&&n(D)}}var y={};if(q&&n)n(D);else{t=0;s()}};l("canvas",function(n,s){function y(){var A,i=P.getContext("2d");i.save();try{i.translate(50,50);i.beginPath();i.rect(0,0,20,20);A=i.isPointInPath(10,10)}finally{i.restore()}return A}var P=document.createElement("canvas"),
ga=typeof FlashCanvas!="undefined",p=typeof G_vmlCanvasManager!="undefnined";P.width=200;P.height=200;n.pipTransformed=ga||p?false:y();s()})})(CANI);
INTERACT=function(){function D(i){return function(o,u){i.addEventListener(o,u,false)}}function Y(i){return function(o,u){i.removeEventListener(o,u,false)}}function t(i){return function(o,u){i.attachEvent("on"+o,u)}}function q(i,o){return{x:i?i:0,y:o?o:0,count:1}}function l(i,o){p.push(COG.extend({handler:null,checks:{},type:i},o))}function n(i){var o=0,u=0;if(i.offsetParent){do{o+=i.offsetLeft;u+=i.offsetTop;i=i.offsetParent}while(i)}return{left:o,top:u}}function s(i,o){return{source:i,target:o.target?
o.target:o.srcElement}}function y(i,o){for(var u=i.target?i.target:i.srcElement;u&&u!==o;)u=u.parentNode;return u&&u===o}function P(i,o){return{x:i.x-(o?o.left:0),y:i.y-(o?o.top:0)}}function ga(i,o){if(i.preventDefault){i.preventDefault();i.stopPropagation()}else if(typeof i.cancelBubble!="undefined")i.cancelBubble=true;o&&i.stopImmediatePropagation&&i.stopImmediatePropagation()}var p=[],A=function(i,o,u){u=COG.extend({binder:null,unbinder:null,observable:null},u);for(var H=u.observable,Q=[],ha,la,
aa={bind:function(){return H.bind.apply(null,arguments)},unbind:function(){H.unbind();for(L=0;L<Q.length;L++)Q[L].unbind();return aa}},L=0;L<o.length;L++)Q.push(o[L](i,H,u));H.bind("pointerDown",function(){la=ha=0});H.bind("pointerMove",function(ua,sa,Ia,ta){ha+=ta.x||0;la+=ta.y||0});H.bind("pointerUp",function(ua,sa,Ia){Math.abs(ha)>20||Math.abs(la)>20||H.triggerCustom("tap",ua,sa,Ia)});return aa};l("pointer",{handler:function(i,o,u){function H(w){if(w.pageX&&w.pageY)return q(w.pageX,w.pageY);else{var V=
document.documentElement,W=document.body;return q(w.clientX+(V&&V.scrollLeft||W&&W.scrollLeft||0)-(V&&V.clientLeft||W&&W.clientLeft||0),w.clientY+(V&&V.scrollTop||W&&W.scrollTop||0)-(V&&V.clientTop||W&&W.clientTop||0))}}function Q(w){if(y(w,i))if(ta=L(w)){var V=H(w);i.style.cursor="move";ga(w,true);pa=V.x;ia=V.y;Ea=q(pa,ia);o.triggerCustom("pointerDown",s("mouse",w),Ea,P(Ea,n(i)))}}function ha(w){var V=H(w);Ja=V.x;ja=V.y;if(y(w,i))ua(w,ta?"pointerMove":"pointerHover")}function la(w){if(ta&&L(w)){ta=
false;if(y(w,i)){i.style.cursor="default";ua(w,"pointerUp")}}}function aa(w){if(y(w,i)){var V;w=w||window.event;if(w.detail)V=w.axis===2?-w.detail*sa:0;else{V=w.wheelDeltaY?w.wheelDeltaY:w.wheelDelta;if(window.opera)V=-V}if(V!==0){var W=q(Ja,ja);o.triggerCustom("zoom",s("mouse",w),W,P(W,n(i)),V/Ia,"wheel");ga(w);w.returnValue=false}}}function L(w){w=w||window.event;return(w.which||w.button)==1}function ua(w,V,W,ma,va){W=typeof W!="undefined"?W:Ja;ma=typeof ma!="undefined"?ma:ja;var F=W-pa,R=ma-ia,
S=q(W,ma);o.triggerCustom(V,s("mouse",w),S,P(S,n(i)),q(F,R));if(typeof va=="undefined"||va){pa=W;ia=ma}}u=COG.extend({},u);var sa=120,Ia=sa*8,ta=false,Ea,Ja,ja,pa,ia;u.binder("mousedown",Q);u.binder("mousemove",ha);u.binder("mouseup",la);u.binder("dblclick",function(w){COG.info("captured double click");if(y(w,i)){var V=H(w);o.triggerCustom("doubleTap",s("mouse",w),V,P(V,n(i)))}});u.binder("mousewheel",aa);u.binder("DOMMouseScroll",aa);return{unbind:function(){u.unbinder("mousedown",Q);u.unbinder("mousemove",
ha);u.unbinder("mouseup",la);u.unbinder("mousewheel",aa);u.unbinder("DOMMouseScroll",aa)}}},checks:{touch:false}});l("pointer",{handler:function(i,o,u){function H(F){if(F.count<2)return 0;var R=F.x-F.next.x;F=F.y-F.next.y;return~~Math.sqrt(R*R+F*F)}function Q(F,R,S){R=R?R:0;S=S?S:0;for(var ka={x:F.x-R,y:F.y-S,id:F.id,count:F.count},xa=ka;F.next;){F=F.next;xa=xa.next={x:F.x-R,y:F.y-S,id:F.id}}return ka}function ha(F,R){var S=F[R?R:"touches"],ka,xa;if(S.length===0)return null;xa=ka={x:S[0].pageX,y:S[0].pageY,
id:S[0].identifier,count:S.length};for(var wa=1,Ya=S.length;wa<Ya;wa++)xa=xa.next={x:S[wa].pageX,y:S[wa].pageY,id:S[wa].identifier};return ka}function la(F){if(y(F,i)){ja=n(i);var R=ha(F,"changedTouches"),S=Q(R,ja.left,ja.top);if(!ia){pa=ta;o.triggerCustom("pointerDown",s("touch",F),R,S)}ma&&o.triggerCustom("pointerDownMulti",s("touch",F),R,S);ia=ha(F);if(ia.count>1)V=H(ia);va=1;W=Q(ia)}}function aa(F){if(y(F,i)){ga(F);w=ha(F);if(pa==ta)pa=Math.abs(ia.x-w.x)>sa||Math.abs(ia.y-w.y)>sa?Ia:ta;if(pa!=
ta){pa=w.count>1?Ja:Ea;if(pa==Ja)if(ia.count===1){ia=Q(w);V=H(ia)}else{var R=H(w);if(Math.abs(V-R)<ua)pa=Ea;else{var S;S=w.x;var ka=w.next.x,xa=w.y,wa=w.next.y,Ya=xa<wa?xa:wa;S={x:(S<ka?S:ka)+(Math.abs(S-ka)>>1),y:Ya+(Math.abs(xa-wa)>>1)};R=R/V;ka=R-va;o.triggerCustom("zoom",s("touch",F),S,P(S,ja),ka,"pinch");va=R}}pa==Ea&&o.triggerCustom("pointerMove",s("touch",F),w,Q(w,ja.left,ja.top),q(w.x-W.x,w.y-W.y));ma&&o.triggerCustom("pointerMoveMulti",s("touch",F),w,Q(w,ja.left,ja.top))}W=Q(w)}}function L(F){if(y(F,
i)){var R=ha(F,"changedTouches"),S=Q(R,ja.left,ja.top);w=ha(F);if(!w){o.triggerCustom("pointerUp",s("touch",F),R,S);ia=null}ma&&o.triggerCustom("pointerUpMulti",s("touch",F),R,S)}}u=COG.extend({detailed:false,inertia:false},u);var ua=20,sa=7,Ia=0,ta=1,Ea=2,Ja=3,ja,pa,ia,w,V,W,ma=u.detailed,va=1;u.binder("touchstart",la);u.binder("touchmove",aa);u.binder("touchend",L);COG.info("initialized touch handler");return{unbind:function(){u.unbinder("touchstart",la);u.unbinder("touchmove",aa);u.unbinder("touchend",
L)}}},checks:{touch:true}});return{register:l,watch:function(i,o,u){o=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},o);capabilities=COG.extend({touch:"ontouchstart"in window},u);if(!o.observable){COG.info("creating observable");o.observable=COG.observable({});globalOpts=o}o.binder=(o.isIE?t:D)(o.bindTarget||document);o.unbinder=(o.isIE?t:Y)(o.bindTarget||document);u=o.types;for(var H=capabilities,Q=[],ha=p.length;ha--;){var la=p[ha],aa=!u||u.indexOf(la.type)>=
0,L=true;for(var ua in la.checks){var sa=la.checks[ua];COG.info("checking "+ua+" capability. require: "+sa+", capability = "+H[ua]);L=L&&sa===H[ua]}if(aa&&L)Q[Q.length]=la.handler}return new A(i,Q,o)}}}();var T5={};
(function(D){function Y(){return(new Date).getTime()}function t(a,e){e=$b.call(e);if(e=="finite")return!ac[bc](+a);return e=="null"&&a===null||e==typeof a||e=="object"&&a===Object(a)||e=="array"&&Array.isArray&&Array.isArray(a)||cc.call(a).slice(8,-1).toLowerCase()==e}function q(a,e){this.x=a||0;this.y=e||0}function l(a,e,c,d){this.x=a||0;this.y=e||0;this.w=c||0;this.h=d||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function n(a,e){var c=new Fb(Math.sqrt(256<<a)|0);e&&e.zoomLevel===a&&e.copyInto(c);
c.zoomLevel=a;return c}function s(a){a=a||(new Date).getTime();for(var e=0;e<Za.length;){var c=Za[e],d=Ta[c],b=Ta[c].image&&Ta[c].image.complete&&Ta[c].image.width>0,f=a-d.start;f=b||f>=dc;if(b){b=d.callbacks;Gb[c]=d.image;for(var g=0;g<b.length;g++)b[g](d.image,true)}if(f){Za.splice(e,1);delete Ta[c]}else e++}Za.length>0&&animFrame(s)}function y(a,e){var c=a&&e?Gb[a]:null;if(c&&c&&c.complete&&c.width>0)e(c);else{if(c=Ta[a])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++ec;Ta[a]={start:(new Date).getTime(),
image:c,callbacks:[e]};c.src=a;Za[Za.length]=a}animFrame(s)}}function P(a,e,c,d,b,f){this.x=a;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=c;this.id=f||a+"_"+e;this.loaded=false;this.image=null}function ga(){for(var a=0,e=arguments.length;e--;){var c=fc[arguments[e].toUpperCase()];if(c)a|=c}return a}function p(a){a=a?a:(new Date).getTime();if(a-Hb>gc){for(var e=cb.splice(0),c=e.length;c--;)e[c](a);Hb=a}cb.length&&animFrame(p)}function A(a){var e=cb.length==
0;cb[cb.length]=a;e&&animFrame(p)}function i(a,e,c,d,b){b=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},b);var f=(new Date).getTime(),g=a[e],h=e=="translate",j=b.autoInvalidate,k=c.length&&d.length&&c.length==d.length?c.length:0,m=Array(k),B=Array(k),C=COG.easing(b.easing),J=b.duration,I=b.progress,E=function(G){var N=G-f;G=f+J<=G;for(var Z=a.layer?a.layer.view:null,da,ba=k;ba--;){da=C(N,c[ba],m[ba],J);B[ba]=h?da|0:da}g.apply(a,B);j&&Z&&Z.invalidate();
if(I){N=[].concat(G?d:B);N.unshift(G);I.apply(a,N)}if(G){a.animations--;g.apply(a,d);b.complete&&b.complete.apply(a,d)}else A(E)};if(g&&g.apply&&k>0){J=J?J:DEFAULT_DURATION;for(e=k;e--;)m[e]=d[e]-c[e];a.animations++;A(E)}}function o(a){a=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},a);Ca.call(this,a)}function u(a,e){e=COG.extend({simplify:false,fill:true,typeName:"Poly"},e);var c=e.simplify;Ca.call(this,e);COG.extend(this,{getPoints:function(){return[].concat(a)},
resync:function(d){var b,f,g,h,j,k;d.syncXY(a);k=this.points=Ua.floor(c?Ua.simplify(a):a);for(var m=k.length;m--;){d=k[m].x;b=k[m].y;h=t(h,ya)||d<h?d:h;j=t(j,ya)||b<j?b:j;f=t(f,ya)||d>f?d:f;g=t(g,ya)||b>g?b:g}this.updateBounds(new l(h,j,f-h,g-j),true)}});this.haveData=a&&a.length>=2}function H(a,e){e.fill=false;u.call(this,a,e)}function Q(a){function e(){if(g&&g.width>0){if(!this.centerOffset)this.centerOffset=new q(-g.width>>1,-g.height>>1);this.updateBounds(new l(this.xy.x+this.centerOffset.x,this.xy.y+
this.centerOffset.y,g.width,g.height),false)}}function c(j){if(this.imageUrl=j){var k=this;y(this.imageUrl,function(m,B){g=m;if(B){var C=h.layer?h.layer.view:null;C&&C.invalidate()}e.apply(k)})}}a=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},a);var d=Ca.prototype.resync,b=0,f=0,g=a.image;Ca.call(this,a);var h=COG.extend(this,{changeImage:c,getProps:function(){this.bounds||e(this,g);return{image:g,x:this.xy.x+b,y:this.xy.y+f}},resync:function(j){d.call(this,j);e.call(this)}});
g||c.call(this,this.imageUrl);if(this.centerOffset){b=this.centerOffset.x;f=this.centerOffset.y}}function ha(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.centerOffset=Ua.invert(a.imageAnchor);Q.call(this,a)}function la(a){a=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},a);Ca.call(this,a)}function aa(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:ga("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},a);this.view=null;this.visible=
true;COG.observable(COG.extend(this,a))}function L(a,e){if(a&&a.split){var c=a.split(hc);if(c.length>1){a=c[0];e=c[1]}}else if(a&&a.lat){e=a.lon;a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(e||0)}function ua(a){a=parseFloat(a)*Fa;a=ka(a);var e=kb*a;return R((1+a)/(1-a)*va((1-e)/(1+e),kb))/2}function sa(a){return ja/(256<<a)}function Ia(a,e){var c=kb*ka(a);return pa-2*Ya(e*va((1-c)/(1+c),kb/2))}function ta(a,e,c,d){e=Ea(e);a.add(d(e,c));return e.length}function Ea(a){var e=a?a.length:0,c=
Array(e);for(e=e;e--;)c[e]=new L(a[e][1],a[e][0]);return za.vectorize(c,Ib)}COG.observable(D);window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();var Ja=Array.prototype.indexOf||function(a){for(var e=0;e<this.length;e++)if(this[e]===a)return e;return-1},ja=Math.PI*2,pa=Math.PI/2,ia="-webkit-transform",
w=Math.abs,V=Math.ceil,W=Math.min,ma=Math.max,va=Math.pow,F=Math.sqrt,R=Math.log,S=Math.round,ka=Math.sin,xa=Math.asin,wa=Math.cos,Ya=Math.atan,ic=Math.atan2,bc="hasOwnProperty",ac={NaN:1,Infinity:1,"-Infinity":1},$b=String.prototype.toLowerCase,cc=Object.prototype.toString,ya="undefined",jc="number",qb=typeof document.body.style[ia]!="undefined",hc=/[\,\s]/,kc=T5.newCanvas=function(a,e){var c=document.createElement("canvas");c.width=a?a:0;c.height=e?e:0;T5.trigger("createCanvas",c);return c},Jb=
function(){var a={};return{init:function(e,c){var d=a[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(c)},register:function(e,c){a[e]=c}}}(),rb=function(){var a={};return{find:function(e){return(a[e]||[])[0]},register:function(e,c){a[e]||(a[e]=[]);a[e].push(c())}}}();q.prototype={constructor:q,add:function(){for(var a=this.x,e=this.y,c=arguments.length;c--;){a+=arguments[c].x;e+=arguments[c].y}return new q(a,e)},equals:function(a){return this.x===a.x&&this.y===a.y}};
l.prototype={constructor:l};var Ua=function(){function a(d,b){return c(d.x-b.x,d.y-b.y)}function e(d,b){b=b||d.length;if(b<=1)return null;for(var f=Array(b-1),g=Array(b-1),h=0,j,k=0;k<b-1;k++){j=a(d[k],d[k+1]);f[k]=F(j.x*j.x+j.y*j.y);g[k]=h+=f[k]}return{edges:f,accrued:g,tota:h}}function c(d,b){return new q(d,b)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,b=0,f=arguments.length;f--;){d+=arguments[f].x;b+=arguments[f].y}return c(d,b)},absSize:function(d){return ma(w(d.x),
w(d.y))},copy:function(d){return d?c(d.x,d.y):null},diff:a,distance:function(d,b){return e(d,b).total},edges:e,equals:function(d,b){return d.equals(b)},extendBy:function(d,b,f){var g=wa(b)*f|0;b=ka(b)*f|0;return c(d.x-g,d.y-b)},floor:function(d){for(var b=Array(d.length),f=d.length;f--;)b[f]=c(~~d[f].x,~~d[f].y);return b},getRect:function(d){for(var b,f,g,h,j=d.length;j--;){var k=d[j];b=t(b,ya)||k.x<b?k.x:b;f=t(f,ya)||k.y<f?k.y:f;g=t(g,ya)||k.x>g?k.x:g;h=t(h,ya)||k.y>h?k.y:h}return new l(b,f,g-b,
h-f)},init:c,invert:function(d){return c(-d.x,-d.y)},min:function(d,b){return c(d.x<b.x?d.x:b.x,d.y<b.y?d.y:b.y)},max:function(d,b){return c(d.x>b.x?d.x:b.x,d.y>b.y?d.y:b.y)},offset:function(d,b,f){return c(d.x+b,d.y+(f||b))},scale:function(d,b){return c(d.x/b|0,d.y/b|0)},simplify:function(d,b){if(!d)return null;b=b?b:Ua.VECTOR_SIMPLIFICATION;for(var f=[],g=null,h=d.length;h--;){var j=d[h];if(include=!g||h===0||w(j.x-g.x)+w(j.y-g.y)>b){f.unshift(j);g=j}}return f},theta:function(d,b,f){f=xa((d.y-b.y)/
f);return d.x>b.x?f:Math.PI-f},toString:function(d){return d?d.x+", "+d.y:""}}}(),Ka=function(){return{dotProduct:function(a,e){return a.x*e.x+a.y*e.y}}}(),$a=function(){function a(c){return e(c.x,c.y,c.x2,c.y2)}function e(c,d,b,f){return new l(c,d,(b||c)-c,(f||d)-d)}return{buffer:function(c,d,b){return $a.init(c.x-d,c.y-(b||d),c.x2+d,c.y2+(b||d))},center:function(c){return new q(c.x+(c.w>>1),c.y+(c.h>>1))},copy:a,diagonalSize:function(c){return F(c.w*c.w+c.h*c.h)},fromCenter:function(c,d,b,f){b=
b>>1;f=f>>1;return e(c-b,d-f,c+b,d+f)},init:e,intersect:function(c,d){var b=ma(c.x,d.x),f=ma(c.y,d.y),g=W(c.x2,d.x2),h=W(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null},toString:function(c){return c?"["+c.x+", "+c.y+", "+c.x2+", "+c.y2+"]":""},union:function(c,d){if(c.w===0||c.h===0)return a(d);else if(d.w===0||d.h===0)return a(c);else{var b=W(c.x,d.x),f=W(c.y,d.y),g=ma(c.x2,d.x2),h=ma(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null}}}}();Hits=function(){return{diffHits:function(a,e){var c=
[],d={},b;for(b=e.length;b--;)d[e[b].target.id]=true;for(b=a.length;b--;)d[a[b].target.id]||(c[c.length]=a[b]);return c},init:function(a,e,c,d){return{type:a,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:c}},initHit:function(a,e,c){return{type:a,target:e,drag:c}},triggerEvent:function(a,e,c,d){e.triggerCustom(a.type+(c?c:"Hit"),{hitType:a.type},d?d:a.elements,a.absXY,a.relXY,new q(a.x,a.y))}}}();var Fb=function(a){function e(b,f){var g=c[b],h;g||(g=c[b]=[]);(h=g[f])||(h=g[f]=[]);return h}a=a||128;var c=
[],d={};return{copyInto:function(b){for(var f in d){var g=d[f];b.insert(g.bounds||g,g,f)}},insert:function(b,f,g){var h=b.x/a|0,j=b.y/a|0,k=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;g=g||f.id||COG.objId("spatial");d[g]=f;for(f=h;f<=k;f++)for(h=j;h<=b;h++)e(f,h).push(g)},remove:function(b,f,g){g=g||f.id;if(d[g]){var h=b.x/a|0;f=b.y/a|0;var j=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;delete d[g];for(h=h;h<=j;h++)for(var k=f;k<=b;k++){var m=e(h,k),B=Ja.call(m,g);B>=0&&m.splice(B,1)}}},search:function(b){var f=b.y/a|0,g=(b.x+
b.w)/a|0,h=(b.y+b.h)/a|0,j=[],k=[];for(b=b.x/a|0;b<=g;b++)for(var m=f;m<=h;m++)j=j.concat(e(b,m));j.sort();for(f=j.length;f--;){g=j[f];if(h=d[g])k[k.length]=h;for(;f>0&&j[f-1]==g;)f--}return k}}},dc=3E4,Gb={},ec=0;(new Date).getTime();var Ta={},Za=[];P.prototype={constructor:P,load:function(a){var e=this;y(this.url,function(c){e.loaded=true;e.image=c;a&&a()})}};var lc=function(){return COG.observable({fastpan:true,applyStyle:function(){},applyTransform:function(a,e,c){return{restore:null,x:e,y:c}},
checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new q},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},reset:function(){}})},Kb={},db=D.registerRenderer=function(a,e){Kb[a]=e},mc=D.attachRenderer=function(a,e,c,d,b){a=a.split("/");for(var f=new lc(e,c,d,b),g=0;g<a.length;g++){var h=Kb[a[g]];if(h)f=new h(e,c,d,b,f)}return f};db("canvas",function(a,e,c,d,b){function f(z,T,K){var ea,
$;J[T]=function(M){for(ea=da.length;ea--;)if($=K[da[ea]])M[ba[ea]]=$}}function g(z,T,K,ea){var $=false;if(T)$=m.isPointInPath(E?T.x-B:T.relXY.x,E?T.y-C:T.relXY.y);return{draw:ea||Z,viewport:z,state:K,hit:$,vpX:B,vpY:C,context:m}}d=COG.extend({},d);var h,j,k,m,B=0,C=0,J={},I=null,E=CANI.canvas.pipTransformed,G={},N=function(){},Z=function(){this.fill&&m.fill();this.stroke&&m.stroke()},da=["fill","stroke","lineWidth","opacity"],ba=["fillStyle","strokeStyle","lineWidth","globalAlpha"];if(e){h=e.offsetWidth;
j=e.offsetHeight;k=kc(h,j);k.style.cssText="position: absolute; z-index: 1;";e.appendChild(k);m=null}c=COG.extend(b,{applyStyle:function(z){var T=J[z],K=m&&m.canvas?m.canvas.id:"default",ea;G[K]||(G[K]=[]);ea=G[K].pop()||"basic";if(T){G[K].push(z);T(m);return ea}},applyTransform:function(z){if(z.translateX!==0||z.translateY!==0||z.scaling!==1||z.rotation!==0){m.save();I={undo:function(){m.restore();I=null},x:z.xy.x,y:z.xy.y};m.translate(z.xy.x-B+z.translateX,z.xy.y-C+z.translateY);z.rotation!==0&&
m.rotate(z.rotation);z.scaling!==1&&m.scale(z.scaling,z.scaling)}return I},drawTiles:function(z,T){for(var K,ea,$=B-256,M=C-256,X=z.x2,ca=z.y2,qa=T.length;qa--;){K=T[qa];if(ea=K.x>=$&&K.x<=X&&K.y>=M&&K.y<=ca)K.loaded?m.drawImage(K.image,K.x-B,K.y-C):K.load(a.invalidate)}},prepare:function(z,T){var K,ea=false,$=T.scaled||T,M=T.scaleFactor;if(m)m.restore();else m=k.getContext("2d");for(K=z.length;K--;)ea=ea||z[K].clip;B=$.x;C=$.y;if(m){ea||m.clearRect(0,0,h,j);m.save();m.scale(M,M)}m.globalCompositeOperation=
"source-over";return m},prepArc:function(z,T,K,ea){m.beginPath();m.arc(z.xy.x-(I?I.x:B),z.xy.y-(I?I.y:C),z.size>>1,z.startAngle,z.endAngle,false);return g(T,K,ea)},prepImage:function(z,T,K,ea,$){var M=($.x||z.xy.x)-(I?I.x:B),X=($.y||z.xy.y)-(I?I.y:C),ca=$.image||z.image;if(ca){m.beginPath();m.rect(M,X,$.width||ca.width,$.height||ca.height);return g(T,K,ea,function(){m.drawImage(ca,M,X,$.width||ca.width,$.height||ca.height)})}},prepMarker:function(z,T,K,ea){var $=z.xy.x-(I?I.x:B),M=z.xy.y-(I?I.y:C),
X=z.size,ca=undefined;m.beginPath();switch(z.markerStyle.toLowerCase()){case "image":ca=N;m.rect($-(X>>1),M-(X>>1),X,X);if(z.reset&&z.image){z.image=null;z.reset=false}z.image?m.drawImage(z.image,$-(X>>1),M-(X>>1),X,X):y(z.imageUrl,function(qa){z.image=qa;m.drawImage(z.image,$-(X>>1),M-(X>>1),X,X)});break;default:m.moveTo($,M);m.lineTo($-(X>>1),M-X);m.lineTo($+(X>>1),M-X);m.lineTo($,M);break}return g(T,K,ea,ca)},prepPoly:function(z,T,K,ea,$){var M=true;z=$.points||z.points;$=I?I.x:B;var X=I?I.y:C;
m.beginPath();for(var ca=z.length;ca--;){var qa=z[ca].x-$,Qa=z[ca].y-X;if(M){m.moveTo(qa,Qa);M=false}else m.lineTo(qa,Qa)}return g(T,K,ea)},getContext:function(){return m},getDimensions:function(){return{width:h,height:j}},getOffset:function(){return new q(B,C)}});(function(){for(var z in T5.styles)f(null,z,T5.styles[z]);T5.bind("styleDefined",f)})();c.bind("detach",function(){e.removeChild(k)});return c});db("dom",function(a,e,c,d,b){function f(m){var B=m.image=new Image;j[m.id]=m;B.src=m.url;B.onload=
function(){if(k[m.id]){h.appendChild(this);m.indom=true}else m.image=null};B.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";
return B}function g(m,B,C){var J=[];for(var I in m){var E=m[I];if(C?E[C]:!B[I]){if(E.indom){COG.info("attemping to remove tile "+E.id+" from the dom");try{h.removeChild(E.image)}catch(G){COG.warn("could not remove tile "+E.id+" from the DOM")}E.image=null}J[J.length]=I}}for(B=J.length;B--;)delete m[J[B]]}var h=null,j={},k={};h=document.createElement("div");h.id=COG.objId("domImages");h.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",e.offsetWidth,e.offsetHeight);
e.childNodes.length>0?e.insertBefore(h,e.childNodes[0]):e.appendChild(h);a=COG.extend(b,{preventPartialScale:true,drawTiles:function(m,B){var C,J,I=m.scaleFactor,E,G,N,Z,da,ba,z,T,K;for(T=B.length;T--;){C=B[T];G=G||C.w;da=da||C.h;N=N?Math.min(C.x,N):C.x;Z=Z?Math.min(C.y,Z):C.y;J=J?Math.max(C.x,J):C.x;E=E?Math.max(C.y,E):C.y}E=N-m.x;G=Z-m.y;for(T=B.length;T--;){C=B[T];if(C.url){(J=C.image)||(J=f(C));ba=(C.x-N)/C.w;z=(C.y-Z)/C.h;da=C.w*I|0;K=C.h*I|0;ba=E+ba*da;z=G+z*da;if(qb)J.style[ia]="translate3d("+
ba+"px, "+z+"px, 0px)";else{J.style.left=ba+"px";J.style.top=z+"px"}J.style.width=da+"px";J.style.height=K+"px";k[C.id]=C}}}});a.bind("predraw",function(){g(j,k);k={}});a.bind("detach",function(){e.removeChild(h)});a.bind("reset",function(){for(g(j,k={});h.childNodes.length>0;)h.removeChild(h.childNodes[0])});return a});var sb=D.styles={},nc=D.defineStyle=function(a,e){sb[a]=e;D.trigger("styleDefined",a,sb[a]);return a},Lb=D.defineStyles=function(a){for(var e in a)nc(e,a[e])};D.getStyle=function(a){return sb[a]};
D.loadStyles=function(a){COG.jsonp(a,function(e){Lb(e)})};Lb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var fc={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Ub=function(a){function e(r,v,x,O){z(W(ma(ra+va(2,O)-1,0.5),2))}function c(){var r=R(ra)/Math.LN2|0;if(r!==0){ra=va(2,r);T(eb+r,oc,pc)}redraw=true}function d(r,v){var x=renderer&&renderer.projectXY?renderer.projectXY(r,
v):null;if(!x){x=fa.getViewport();var O=1/ra;x=new q(x?x.x+r*O:r,x?x.y+v*O:v)}return x}function b(r,v,x){K("doubleTap",v,x,d(x.x,x.y));a.scalable&&z(2,d(x.x,x.y),a.zoomEasing,null,a.zoomDuration)}function f(r,v,x){Ga=null;tb=true;N("down",v,x)}function g(r,v,x){N("hover",v,x)}function h(r,v,x,O){I(v,x,false);if(!Ga){La=O.x;Ma=O.y}}function j(r,v,x){I(v,x,true);tb=false}function k(){clearTimeout(Mb);Mb=setTimeout(function(){renderer.checkSize()},250)}function m(r,v,x){N("tap",v,x);K("tap",v,x,d(x.x,
x.y,true))}function B(r){renderer=mc(r||a.renderer,fa,ca,Qa,a);Nb=!renderer.preventPartialScale;Ob=renderer.fastpan;J()}function C(r,v){v.id=r;v.added=Y();v.view=fa;v.trigger("parentChange",fa,ca,qc);M.push(v);M.sort(function(x,O){var U=O.zindex-x.zindex;if(U===0)U=O.added-x.added;return U});X=M.length;return v}function J(){Da&&Da.unbind();if(renderer){Da=INTERACT.watch(renderer.interactTarget||ca);if(a.scalable){Da.bind("zoom",e);Da.bind("doubleTap",b)}Da.bind("pointerDown",f);Da.bind("pointerMove",
h);Da.bind("pointerUp",j);a.captureHover&&Da.bind("pointerHover",g);Da.bind("tap",m)}}function I(r,v,x){if(Ga){r=d(v.x,v.y);Ga.drag.call(Ga.target,Ga,r.x,r.y,x)&&Ha++;if(x)Ga=null}}function E(r,v){Qa=document.getElementById(v);qa=document.createElement("div");qa.id=COG.objId("t5_container");qa.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",Qa.offsetWidth,Qa.offsetHeight);Qa.appendChild(qa);fb=qa.offsetWidth+a.padding*2;gb=qa.offsetHeight+a.padding*
2;lb=fb/2;mb=gb/2;ca=document.createElement("div");ca.id=COG.objId("t5_view");ca.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px; margin: {2}px 0 0 {2}px;",fb,gb,-a.padding);qa.appendChild(ca);B()}function G(r){var v,x,O=false,U;U=w(La)+w(Ma);r=r||(new Date).getTime();if(O=true){var Aa=w(na-ub),Na=w(oa-vb);v=na!==wb||oa!==xb;x=ra!==Pb;if(v||x)Ha++;if(U<10&&(Aa>=Qb||Na>=Qb))ba();x={index:rc++,draw:Ha||U||Va||Wa};fa.trigger("enterFrame",r,x);sc=r}if(renderer&&
O&&x.draw){Oa=Rb|(ra!==1?Sb:0)|(v?yb:0)|(zb?Tb:0);Ab=(v=(Oa&(Sb|yb))!==0)&&(Oa&Tb)===0;if(Ob&&U>5){Va+=La;Wa+=Ma;if(qb)ca.style[ia]="translate3d("+(Va|0)+"px, "+(Wa|0)+"px, 0px)";else{ca.style.left=Va+"px";ca.style.top=Wa+"px"}}else{na-=La+Va|0;oa-=Ma+Wa|0;if(Va||Wa){if(qb)ca.style[ia]="translate3d(0px, 0px, 0px)";else{ca.style.left=0;ca.style.top=0}Wa=Va=0}U=da();renderer.trigger("predraw",U,Oa);if(renderer.prepare(M,U,Oa,r,Ba)){Ha=0;for(ii=X;ii--;){v=M[ii];if(v.visible&&(Oa&v.validStates)!==0){O=
v.style?renderer.applyStyle(v.style,true):null;v.draw(renderer,U,Oa,fa,r,Ba);O&&renderer.applyStyle(O)}}renderer.render(U);fa.trigger("drawComplete",U,r);wb=na;xb=oa;Pb=ra}}if(tb)Ma=La=0;else if(La!=0||Ma!=0){La*=0.8;Ma*=0.8;if(w(La)<0.5)La=0;if(w(Ma)<0.5)Ma=0}if(Ba){r=Ba?Ba.elements:[];if(hb&&hb.type==="hover"){U=Hits.diffHits(hb.elements,r);U.length>0&&Hits.triggerEvent(hb,fa,"Out",U)}if(r.length>0){v=Ba.x;O=Ba.y;for(U=r.length;U--;){x=r[U];Aa=v;Na=O;var Ra=x&&x.drag&&(!x.canDrag||x.canDrag(x,Aa,
Na));if(Ra){Ga=x;Ga.startX=Aa;Ga.startY=Na}if(Ra)break}Hits.triggerEvent(Ba,fa)}hb=r.length>0?COG.extend({},Ba):null;Ba=null}}animFrame(G)}function N(r,v,x){Ba=Hits.init(r,v,x,d(x.x,x.y,true));for(r=X;r--;)Bb=Bb||(M[r].hitGuess?M[r].hitGuess(Ba.x,Ba.y,Oa,fa):false);Bb&&Ha++}function Z(){Ha++}function da(){var r=new l(na,oa,fb,gb);r.scaleFactor=ra;if(ra!==1)r.scaled=$a.fromCenter(na+lb|0,oa+mb|0,fb/ra|0,gb/ra|0);return r}function ba(){var r=da();if(r){if(ab||bb)if(r){var v=nb?na+(r.w>>1):na,x=ob?oa+
(r.h>>1):oa,O=r.w,U=r.h;if(ab&&ab>O)if(v+O>ab)na=nb?na:ab-O;else if(v<0)na=nb?na:0;if(bb&&bb>U)if(x+U>bb)oa=ob?oa:bb-U;else if(x<0)oa=ob?oa:0}ub=na;vb=oa;K("refresh",fa,r);Ha++}}function z(r,v,x,O,U){var Aa;if(!Nb){x=false;Aa=S(R(r)/Math.LN2);r=va(2,Aa)}if(x)COG.tweenValue(ra,r,x,U,function(Na,Ra){ra=Na;if(Ra){Aa=S(R(ra)/Math.LN2);ra=va(2,Aa);O&&O()}c()});else{ra=r;c()}return fa}function T(r,v,x){r=ma(a.minZoom,W(a.maxZoom,r));if(r!==eb){var O=va(2,r-eb),U=lb/O|0,Aa=mb/O|0;eb=r;ea(((v?v:na+lb)-U)*
O,((x?x:oa+mb)-Aa)*O);wb=na;xb=oa;vb=ub=0;K("zoomLevelChange",r);ra=1;renderer.trigger("reset");ba()}}function K(){for(var r=fa.trigger.apply(null,arguments).cancel,v=M.length;v--;)r=M[v].trigger.apply(null,arguments).cancel||r;return!r}function ea(r,v,x,O,U){function Aa(){Na+=1;if(Na>=2){zb=false;U&&U()}}var Na=0;if(x){if((Oa&yb)===0){COG.tweenValue(na,r,x,O,function(Ra,Cb){na=Ra|0;(Cb?Aa:Z)();return!Ab});COG.tweenValue(oa,v,x,O,function(Ra,Cb){oa=Ra|0;(Cb?Aa:Z)();return!Ab});zb=true}}else{na=r|
0;oa=v|0;U&&U()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,padding:128,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:60,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},a);var $={},M=[],X=0,ca=null,qa=null,Qa,Ga=null,rc=0,qc=
null,tc=!t(window.attachEvent,ya),Bb=false,Ob=true,tb=false,La=0,Ma=0,Va=0,Wa=0,Qb=a.refreshDistance,na=0,oa=0,ub=0,vb=0,wb=0,xb=0,ab=null,bb=null,nb=false,ob=false,Ba=null,Ab=false,hb=null,Mb=0,ra=1,Pb=1,sc=0,Da=null,Nb=true,zb=false,Ha=0,fb,gb,lb,mb,oc,pc,eb=a.zoomLevel,Rb=ga("ACTIVE"),yb=ga("PAN"),Sb=ga("ZOOM"),Tb=ga("ANIMATING"),Oa=Rb,fa={id:a.id,padding:a.padding,detach:function(){renderer&&renderer.trigger("detach");Da&&Da.unbind();if(qa){document.getElementById(qa).removeChild(qa);ca=qa=null}},
eachLayer:function(r){for(var v=X;v--;)r(M[v])},getLayer:function(r){for(var v=0;v<X;v++)if(M[v].id===r)return M[v];return null},getZoomLevel:function(){return eb},setLayer:function(r,v){for(var x=0;x<X;x++)if(M[x].id===r){M.splice(x,1);break}if(v){C(r,v);v.trigger("refresh",fa,da());fa.trigger("layerChange",fa,v)}Ha++;return v},invalidate:Z,refresh:ba,resetScale:function(){ra=1},scale:z,setZoomLevel:T,syncXY:function(){},triggerAll:K,removeLayer:function(r){a:{for(var v=X;v--;)if(M[v].id===r){r=
v;break a}r=-1}if(r>=0&&r<X){fa.trigger("layerRemove",fa,M[r]);M.splice(r,1);Ha++}X=M.length},getOffset:function(){return new q(na,oa)},getRenderer:function(){return renderer},getScaleFactor:function(){return ra},setMaxOffset:function(r,v,x,O){ab=r;bb=v;nb=x;ob=O},getViewport:da,updateOffset:ea,pan:function(r,v,x,O,U){ea(na+r,oa+v,x,O,U)}};COG.observable(fa);fa.bind("resync",function(){});COG.configurable(fa,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom",
"renderer","zoom"],COG.paramTweaker(a,null,{container:E,inertia:J,captureHover:J,scalable:J,pannable:J,renderer:function(r,v){if(renderer){renderer.trigger("detach");renderer=null}B(v);Ha++}}),true);CANI.init(function(r){fa.markers=C("markers",new pb({zindex:20}));$=r;E(null,a.container);tc?window.attachEvent("onresize",k):window.addEventListener("resize",k,false)});animFrame(G);return fa},Ca=function(a){a=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,
properties:{},typeName:"Shape"},a);COG.extend(this,a);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Ca.prototype={constructor:Ca,animate:function(a,e,c,d){i(this,a,e,c,d)},drag:null,draw:null,getProps:null,resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds($a.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=
a},scale:function(a){this.scaling=a},translate:function(a,e){this.translateX=a;this.translateY=e},updateBounds:function(a,e){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);this.bounds=a;if(e)this.xy=$a.center(this.bounds)}};var gc=1E3/60|0,cb=[],Hb=0;o.prototype=COG.extend(Ca.prototype,{constructor:o});u.prototype=COG.extend({},Ca.prototype,{constructor:u});H.prototype=COG.extend({},u.prototype);Q.prototype=COG.extend({},Ca.prototype,{constructor:Q});
ha.prototype=COG.extend({},Q.prototype,{constructor:ha});la.prototype=COG.extend(Ca.prototype,{constructor:la});aa.prototype={constructor:aa,clip:null,cycle:function(){},draw:function(){},hitGuess:null};db=function(a,e){function c(h,j){var k=j&&j.getZoomLevel?j.getZoomLevel():0;f[k]||(f[k]=n(k));b=f[k]}e=COG.extend({imageLoadArgs:{}},e);var d=a?Jb.init(a,e).run:null,b=null,f=[],g=COG.extend(new aa(e),{draw:function(h,j){h.drawTiles(j,b.search($a.buffer(j,128)))}});g.bind("refresh",function(h,j,k){var m=
(new Date).getTime();b&&d(j,k,b,function(){j.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-m)+" ms")})});g.bind("parentChange",c);g.bind("resync",c);return g};var Vb=function(a){function e(k,m,B,C){var J=this.dragOffset;if(!J)J=this.dragOffset=new q(k.startX-this.xy.x,k.startY-this.xy.y);this.xy.x=m-J.x;this.xy.y=B-J.y;if(C){delete this.dragOffset;if(k=j.view){k.syncXY([this.xy],true);k.invalidate()}this.trigger("dragDrop")}return true}function c(k){clearTimeout(h);h=setTimeout(function(){f.sort(function(m,
B){if(B.xy&&m.xy){var C=B.xy.y-m.xy.y;return C!=0?C:B.xy.x-m.xy.x}});k&&k.invalidate()},50)}function d(k,m,B,C){C&&g.remove(C,m);g.insert(B,m)}function b(k,m){g=n(m.getZoomLevel(),g);for(var B=f.length;B--;)f[B].resync(m)}a=COG.extend({zindex:10},a);var f=[],g,h=0,j=COG.extend(new aa(a),{itemCount:0,add:function(k,m){if(k){k.layer=j;if(m)f.unshift(k);else f[f.length]=k;var B=j.view;if(B){k.resync(B);g&&k.bounds&&g.insert(k.bounds,k);c(B)}k.bind("move",d)}j.itemCount=f.length},clear:function(){g=new Fb;
f=[];j.itemCount=0},draw:function(k,m,B,C,J,I){C={};J=g&&m?g.search(m):[];for(var E=J.length;E--;){var G=J[E],N=G.style||j.style,Z,da=k.applyTransform(G),ba=G.getProps?G.getProps(k,B):C;if(ba=(Z=k["prep"+G.typeName])?Z.call(k,G,m,I,B,ba):null){if(I&&ba.hit){I.elements.push(Hits.initHit(G.type,G,G.draggable?e:null));Z=I.type+"Style";N=G[Z]||j[Z]||N}N=N?k.applyStyle(N,true):null;(Z=G.draw||ba.draw)&&Z.call(G,ba);N&&k.applyStyle(N)}da&&da.undo&&da.undo()}},find:function(){return[].concat(f)},hitGuess:function(k,
m){return g&&g.search({x:k-10,y:m-10,w:20,h:20}).length>0}});j.bind("parentChange",b);j.bind("resync",b);return j},pb=function(a){return new Vb(a)};L.prototype={constructor:L,offset:function(a,e){var c=this.lat*Fa,d=this.lon*Fa,b=c+a/ib;c=xa(ka(e/ib)/wa(c));d=d+c;b=(b+pa)%Math.PI-pa;d%=ja;return new L(b*Sa,d*Sa)},toString:function(a){return this.lat+(a||" ")+this.lon}};COG.extend(D,{ex:COG.extend,is:t,ticks:Y,userMessage:function(a,e,c){D.trigger("userMessage",a,e,c)},indexOf:Ja,Rect:l,XY:Ua,XYRect:$a,
Vector:Ka,Hits:Hits,Generator:Jb,Service:rb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:P,TileLayer:db,getImage:y,viewState:ga,View:Ub,ViewLayer:aa,ImageLayer:db,Drawable:Ca,Marker:o,Poly:u,Line:H,Arc:la,ImageDrawable:Q,ImageMarker:ha,DrawLayer:Vb,ShapeLayer:pb,Map:function(a){function e(h,j,k){g.setZoomLevel(j);c(h,k)}function c(h,j,k,m){h=Pa.init(h,sa(g.getZoomLevel()));var B=g.getViewport();g.updateOffset(h.x-(B.w>>1),h.y-(B.h>>1),k,m,function(){j&&j(g)})}a=COG.extend({zoomLevel:1,minZoom:1,
maxZoom:18,pannable:true,scalable:true},a);var d=new q,b=0,f=a.tapExtent;a.adjustScaleFactor=function(h){return Math.pow(2,(h<1?Math.floor:Math.ceil)(Math.log(h)))};var g=COG.extend(new Ub(a),{getBoundingBox:function(){var h=g.getViewport();return h?Xa.init(Pa.toPos(new q(h.x,h.y2),b),Pa.toPos(new q(h.x2,h.y),b)):null},getCenterPosition:function(){var h=g.getViewport();if(h){h=new q(h.x+(h.w>>1),h.y+(h.h>>1));return Pa.toPos(h,b)}return null},gotoBounds:function(h,j){var k=Xa.getZoomLevel(h,g.getViewport());
e(Xa.getCenter(h),k,j)},gotoPosition:e,panToPosition:c,syncXY:function(h,j){return(j?Pa.syncPos:Pa.sync)(h,b)}});g.bind("tap",function(h,j,k,m){h=Pa.toPos(m,b);var B=Pa.toPos(Ua.offset(m,-f,f),b);m=Pa.toPos(Ua.offset(m,f,-f),b);g.trigger("geotap",j,k,h,Xa.init(B,m))});g.bind("refresh",function(h,j,k){if(d.x!=k.x||d.y!=k.y){g.trigger("boundsChange",g.getBoundingBox());d.x=k.x;d.y=k.y}});g.bind("zoomLevelChange",function(h,j){var k;b=sa(j);k=ja/b|0;g.setMaxOffset(k,k,true,false);g.resetScale();g.triggerAll("resync",
g)});return g},Pos:L});var Db=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Fa=Math.PI/180,Sa=180/Math.PI,Eb=pa,Wb=-Eb,Xb=ja,uc=-Xb,ib=6371,kb=0.08181919084262157,jb=null,Yb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},za=function(){function a(c){return!c||c.lat===0&&c.lon===0}function e(c,d){return new L(c,d)}return{calcDistance:function(c,d){if(a(c)||a(d))return 0;var b=(d.lat-c.lat)*Fa>>1,f=
(d.lon-c.lon)*Fa>>1;b=ka(b)*ka(b)+wa(c.lat*Fa)*wa(d.lat*Fa)*ka(f)*ka(f);b=2*ic(F(b),F(1-b));return ib*b},copy:function(c){return c?e(c.lat,c.lon):null},empty:a,equal:function(c,d){return c&&d&&c.lat==d.lat&&c.lon==d.lon},fromMercatorPixels:function(c,d){for(var b=va(Math.E,-d),f=pa-2*Ya(b),g=Ia(f,b),h=0;h<12&&w(f-g)>1.0E-7;){f=g;g=Ia(f,b);h++}return e(g*Sa,c%360*Sa)},generalize:function(c,d,b){var f=c.length,g=[],h=null;b||(b=250);b/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");
for(var j=f;j--;)if(j===0)g.unshift(c[j]);else{var k=!h||za.inArray(c[j],d)?b:za.calcDistance(h,c[j]);if(c[j]&&k>=b){g.unshift(c[j]);h=c[j]}}COG.info("generalized "+f+" positions into "+g.length+" positions");return g},inArray:function(c,d){for(var b=za.equal,f=d.length;f--;)if(b(c,d[f]))return true;return false},inBounds:function(c,d){var b=!(za.empty(c)||za.empty(d));return b=(b=b&&c.lat>=d.min.lat&&c.lat<=d.max.lat)&&c.lon>=d.min.lon&&c.lon<=d.max.lon},init:e,offset:function(c,d,b){return c.offset(d,
b)},parse:function(c){return new L(c)},parseArray:function(c){var d=c.length,b=Array(d);for(d=d;d--;)b[d]=new L(c[d]);return b},toMercatorPixels:function(c){return T5.XY.init(parseFloat(c.lon)*Fa,ua(c.lat))},toString:function(c){return c?c.toString():""},vectorize:function(c,d){function b(){for(var j=0,k=d.chunkSize,m=f;m--;){g[m]=T5.GeoXY.init(c[m]);j+=1;if(j>k)break}f=m;if(f<=0)d.callback&&d.callback(g);else animFrame(b)}var f=c.length,g=Array(f);d=COG.extend({chunkSize:500,async:true,callback:null},
d);if(!d.async){for(var h=f;h--;)g[h]=T5.GeoXY.init(c[h]);return g}animFrame(b);return null}}}(),Xa=function(){function a(b,f,g){var h=new q(0,f.lat-b.lat);h.x=(g||t(g,ya))&&b.lon>f.lon?360-b.lon+f.lon:f.lon-b.lon;return h}function e(b,f){return Xa.init(new L(b.min.lat-f,b.min.lon-f%360),new L(b.max.lat+f,b.max.lon+f%360))}function c(b){var f=a(b.min,b.max);return new L(b.min.lat+(f.y>>1),b.min.lon+(f.x>>1))}function d(b,f){return{min:new L(b),max:new L(f)}}return{calcSize:a,createBoundsFromCenter:function(b,
f){var g=f/ib,h=b.lat*Fa,j=b.lon*Fa,k=h-g,m=h+g;if(k>Wb&&m<Eb){h=xa(ka(g)/wa(h));g=(j-h)%ja;j=(j+h)%ja}else{k=ma(k,Wb);m=W(m,Eb);g=uc;j=Xb}return Xa.init(new L(k*Sa,g*Sa),new L(m*Sa,j*Sa))},expand:e,forPositions:function(b,f){var g=null,h=T5.ticks();f||(f="auto");for(var j=b.length;j--;)if(g){var k=a(g.min,b[j],false),m=a(b[j],g.max,false);if(k.x<0)g.min.lon=b[j].lon;if(k.y<0)g.min.lat=b[j].lat;if(m.x<0)g.max.lon=b[j].lon;if(m.y<0)g.max.lat=b[j].lat}else g=d(b[j],b[j]);if(f){if(f=="auto"){j=a(g.min,
g.max);f=ma(j.x,j.y)*0.3}g=e(g,f)}COG.trace("calculated bounds for "+b.length+" positions",h);return g},getCenter:c,getZoomLevel:function(b,f){var g=c(b);g=W(S(w(g.lat)*0.05),Db.length);var h=Db[g],j=a(b.min,b.max);g=V(R(Db[3]*f.h/j.y)/R(2));h=V(R(h*f.w/j.x)/R(2));return W(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:d,isEmpty:function(b){return!b||za.empty(b.min)||za.empty(b.max)},toString:function(b){return"min: "+za.toString(b.min)+", max: "+za.toString(b.max)}}}();rb=function(){var a=/^(\d+).*$/,e=/(\d+)\s?\-\s?(\d+)/;
return{buildingMatch:function(c,d){a.lastIndex=-1;if(a.test(c))for(var b=c.replace(a,"$1"),f=d.split(","),g=0;g<f.length;g++){e.lastIndex=-1;if(e.test(f[g])){var h=e.exec(f[g]);if(b>=parseInt(h[1],10)&&b<=parseInt(h[2],10))return true}else if(b==f[g])return true}return false},normalize:function(c){if(!c)return"";c=c.toUpperCase();if(!jb){var d=[];for(var b in Yb)d.push(b);jb=RegExp("(\\s)("+d.join("|")+")(\\s|$)","i")}jb.lastIndex=-1;if(d=jb.exec(c))c=c.replace(jb,"$1"+Yb[d[2]]);return c},toString:function(c){return c.streetDetails+
" "+c.location}}}();var Pa=D.GeoXY=function(){function a(d,b){if(d.length){for(var f,g,h,j,k=d.length;k--;){a(d[k],b);f=t(f,ya)||d.x<f?d.x:f;g=t(g,ya)||d.y<g?d.y:g;h=t(h,ya)||d.x>h?d.x:h;j=t(j,ya)||d.y>j?d.y:j}return new l(f,g,h-f,j-g)}else if(d.mercXY){f=d.mercXY;d.x=(f.x+Math.PI)/b|0;d.y=(Math.PI-f.y)/b|0;d.rpp=b}return d}function e(d,b){if(d.length)for(var f=d.length;f--;)e(d[f],b);else{d.mercXY=new q(d.x*b-Math.PI,Math.PI-d.y*b);d.pos=za.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function c(d,
b,f){d.pos=b;d.mercXY=za.toMercatorPixels(b);(f=t(f,jc)?f:d.rpp)&&a(d,f)}return{init:function(d,b){var f=new q;c(f,d,b);return f},sync:a,syncPos:e,toPos:function(d,b){b=b||d.rpp;return za.fromMercatorPixels(d.x*b-Math.PI,Math.PI-d.y*b)},updatePos:c}}(),vc="featurecollection",wc="feature",Ib={async:false};Ka={processor:null,group:"shapes",layerClass:pb};var xc={point:COG.extend({},Ka,{processor:function(a,e,c,d){e=Ea([e.coordinates],Ib);if(e.length>0)if(c=d.marker(e[0],c)){a.add(c);return e.length}},
group:"markers",layerClass:pb}),linestring:COG.extend({},Ka,{processor:function(a,e,c,d){e=Ea(e&&e.coordinates?e.coordinates:[]);return ta(a,e,c,d.line)}}),multilinestring:COG.extend({},Ka,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=e.length;f--;)b+=ta(a,e[f],c,d.line);return b}}),polygon:COG.extend({},Ka,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return ta(a,e[0],c,d.poly);return 0}}),multipolygon:COG.extend({},Ka,{processor:function(a,
e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=0;f<e.length;f++)b+=ta(a,e[f][0],c,d.poly);return b}})},Zb=function(a,e,c,d){function b(E,G){var N=E.processor,Z=k+E.group,da=COG.extend({},E,c,{properties:G.properties});if(N){var ba=I[Z];if(!ba){ba=new E.layerClass({id:Z});I[Z]=ba}return N(ba,G.data,da,d)}return 0}function f(E,G){var N=E&&E.type?E.type.toLowerCase():null;return N&&N===wc?f(E.geometry,E.properties):{type:N,isCollection:N?N===vc:false,definition:xc[N],data:E,properties:G?G:
E.properties}}function g(E){var G=0,N=COG.extend({},c),Z=m;E=E?E:(new Date).getTime();if(!C){for(;Z<B;Z++){E=f(j?j(a[Z]):a[Z]);var da=null;if(E.isCollection){N.layerPrefix=k+J++ +"-";C=new Zb(E.data.features,function(ba){C=null;for(var z in ba)I[z]=ba[z];m>=B&&e&&e(I)},N);da+=1}else if(E.definition)da=b(E.definition,E);G+=da?da:1;if(G>=h)break}m=Z+1;if(C||m<B)animFrame(g);else e&&e(I)}}c=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},c);d=COG.extend({marker:function(E){return new o({xy:E})},
line:function(E,G){return new u(E,COG.extend({},c,G))},poly:function(E,G){return new u(E,COG.extend({fill:true},c,G))}},d);var h=500,j=c.rowPreParse,k=c.layerPrefix,m=0,B=0,C=null,J=0,I={};if(a){t(a,"array")||(a=[a]);B=a.length;animFrame(g)}};Ka=D.GeoJSON={parse:function(a,e,c){return new Zb(a,e,c)}};D.GeoShape=function(a,e){e=COG.extend({autoParse:true},e);for(var c=Array(a.length),d=e.autoParse,b=T5.Geo.Position.parse,f=a.length;f--;)c[f]=T5.GeoXY.init(d?b(a[f]):a[f]);return new T5.Poly(c,e)};D.Geo=
{distanceToString:function(a){if(a>1E3)return~~(a/10)/100+" km";return a?a+" m":""},dist2rad:function(a){return a/ib},radsPerPixel:sa,Position:za,BoundingBox:Xa,Radius:function(a,e){return{distance:parseInt(a,10),uom:e}},Address:function(a){return a=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},a)},A:rb,GeoJSON:Ka}})(T5);
