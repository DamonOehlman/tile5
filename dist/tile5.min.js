COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var H=arguments[0]||{},V,u=1,s=arguments.length;u<s;u++)if((V=arguments[u])!==null)for(var j in V){var k=V[j];if(H!==k)if(k!==undefined)H[j]=k}return H};
(function(){var H=Object.prototype.hasOwnProperty,V=0,u={};u.toID=function(s){return s.replace(/\s/g,"-")};u.objId=function(s){return(s?s:"obj")+V++};u.isFunction=function(s){return toString.call(s)==="[object Function]"};u.isArray=function(s){return toString.call(s)==="[object Array]"};u.isPlainObject=function(s){if(!s||toString.call(s)!=="[object Object]"||s.nodeType||s.setInterval)return false;if(s.constructor&&!H.call(s,"constructor")&&!H.call(s.constructor.prototype,"isPrototypeOf"))return false;
var j;for(j in s);return j===undefined||H.call(s,j)};u.isEmptyObject=function(s){for(var j in s)return false;return true};u.isXmlDocument=function(s){return toString.call(s)==="[object Document]"};u.contains=function(s,j){var k=s,q=arguments,y=1;if(j&&module.isArray(j)){q=j;y=0}for(y=y;y<q;y++)k=k&&typeof foo[q[y]]!=="undefined";return k};u.formatStr=function(s){if(arguments.length<=1)return s;for(var j=arguments.length-2,k=0;k<=j;k++)s=s.replace(RegExp("\\{"+k+"\\}","gi"),arguments[k+1]);return s};
u.wordExists=function(s,j){var k="";if(j.toString)j=j.toString();for(var q=0;q<j.length;q++)k+=!/\w/.test(j[q])?"\\"+j[q]:j[q];return RegExp("(^|\\s|\\,)"+k+"(\\,|\\s|$)","i").test(s)};COG.extend(COG,u)})();
(function(){function H(k){return typeof console!=="undefined"?function(){console[k](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var V=window.console&&window.console.markTimeline,u=H("error"),s=H("info"),j=function(){return V?function(k,q){console.markTimeline(k+(q?": "+((new Date).getTime()-q)+"ms":""))}:function(){}}();COG.extend(COG,{trace:j,debug:H("debug"),info:s,warn:H("warn"),error:u,exception:function(k){if(u)for(var q in k)s("ERROR DETAIL: "+q+
": "+k[q])}})})();
(function(){function H(u,s){var j=u.hasOwnProperty("obsHandlers")?u.obsHandlers:null;j[s]||(j[s]=[]);return j[s]}var V=0;COG.observable=function(u){if(!u)return null;if(!(u.hasOwnProperty("obsHandlers")?u.obsHandlers:null))u.obsHandlers={};if(!u.hasOwnProperty("bind")){u.bind=function(s,j){var k="callback"+V++;H(u,s).unshift({fn:j,id:k});return k};u.triggerCustom=function(s,j){var k=H(u,s),q={cancel:false,name:s,source:this},y;j&&COG.extend(q,j);if(!k)return null;y=Array.prototype.slice.call(arguments,2);
u.eventInterceptor&&u.eventInterceptor(s,q,y);y.unshift(q);for(var P=k.length;P--&&!q.cancel;)k[P].fn.apply(this,y);return q};u.trigger=function(s){var j=Array.prototype.slice.call(arguments,1);j.splice(0,0,s,null);return u.triggerCustom.apply(this,j)};u.unbind=function(s,j){if(typeof s==="undefined")u.obsHandlers={};else for(var k=H(u,s),q=0;k&&q<k.length;q++)if(k[q].id===j){k.splice(q,1);break}return u}}return u}})();
(function(){function H(j,k){j[k]||(j[k]=function(q){return j.configure(k,q)})}function V(j){j.gtConfId="configurable"+s++;j.gtConfig={};j.gtConfigFns=[];return j.gtConfig}var u={},s=0;COG.paramTweaker=function(j,k,q){return function(y,P){if(typeof P!=="undefined"){if(y in j)j[y]=P;q&&y in q&&q[y](y,P)}else return k&&y in k?k[y](y):j[y]}};COG.configurable=function(j,k,q,y){if(j){j.gtConfId||V(j);var P=j.gtConfId,ia=j.gtConfig,o=j.gtConfigFns;u[P]=j;o.push(q);for(q=k.length;q--;){ia[k[q]]=true;y&&H(j,
k[q])}if(!j.configure)j.configure=function(D,x){if(ia[D]){for(var m=o.length;m--;){var r=o[m](D,x);if(typeof r!=="undefined")return r}return u[P]}return null}}}})();
(function(){function H(j){var k=document.createElement("script"),q=false;k.src=j;k.async=true;k.onload=k.onreadystatechange=function(){if(!q&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){q=true;k.onload=k.onreadystatechange=null;k&&k.parentNode&&k.parentNode.removeChild(k)}};u||(u=document.getElementsByTagName("head")[0]);u.appendChild(k)}var V=0,u,s=this;COG.jsonp=function(j,k,q){j+=j.indexOf("?")>=0?"&":"?";var y="json"+ ++V;s[y]=function(P){k(P);s[y]=null;try{delete s[y]}catch(ia){}};
H(j+(q?q:"callback")+"="+y);return y}})();
(function(){var H=1.70158,V=Math.PI/2,u=Math.PI*2,s=1E3/60|0,j=Math.abs,k=Math.pow,q=Math.sin,y=Math.asin,P=Math.cos,ia={linear:function(o,D,x,m){return x*o/m+D},backin:function(o,D,x,m){return x*(o/=m)*o*((H+1)*o-H)+D},backout:function(o,D,x,m){return x*((o=o/m-1)*o*((H+1)*o+H)+1)+D},backinout:function(o,D,x,m){return(o/=m/2)<1?x/2*o*o*(((H*=1.525)+1)*o-H)+D:x/2*((o-=2)*o*(((H*=1.525)+1)*o+H)+2)+D},bouncein:function(o,D,x,m){return x-ia.bounceout(m-o,0,x,m)+D},bounceout:function(o,D,x,m){return(o/=
m)<1/2.75?x*7.5625*o*o+D:o<2/2.75?x*(7.5625*(o-=1.5/2.75)*o+0.75)+D:o<2.5/2.75?x*(7.5625*(o-=2.25/2.75)*o+0.9375)+D:x*(7.5625*(o-=2.625/2.75)*o+0.984375)+D},bounceinout:function(o,D,x,m){return o<m/2?ia.bouncein(o*2,0,x,m)/2+D:ia.bounceout(o*2-m,0,x,m)/2+x/2+D},cubicin:function(o,D,x,m){return x*(o/=m)*o*o+D},cubicout:function(o,D,x,m){return x*((o=o/m-1)*o*o+1)+D},cubicinout:function(o,D,x,m){if((o/=m/2)<1)return x/2*o*o*o+D;return x/2*((o-=2)*o*o+2)+D},elasticin:function(o,D,x,m,r,w){if(o==0)return D;
if((o/=m)==1)return D+x;w||(w=m*0.3);if(!r||r<j(x)){r=x;x=w/4}else x=w/u*y(x/r);return-(r*k(2,10*(o-=1))*q((o*m-x)*u/w))+D},elasticout:function(o,D,x,m,r,w){var R;if(o==0)return D;if((o/=m)==1)return D+x;w||(w=m*0.3);if(!r||r<j(x)){r=x;R=w/4}else R=w/u*y(x/r);return r*k(2,-10*o)*q((o*m-R)*u/w)+x+D},elasticinout:function(o,D,x,m,r,w){var R;if(o==0)return D;if((o/=m/2)==2)return D+x;w||(w=m*0.3*1.5);if(!r||r<j(x)){r=x;R=w/4}else R=w/u*y(x/r);if(o<1)return-0.5*r*k(2,10*(o-=1))*q((o*m-R)*u/w)+D;return r*
k(2,-10*(o-=1))*q((o*m-R)*u/w)*0.5+x+D},quadin:function(o,D,x,m){return x*(o/=m)*o+D},quadout:function(o,D,x,m){return-x*(o/=m)*(o-2)+D},quadinout:function(o,D,x,m){if((o/=m/2)<1)return x/2*o*o+D;return-x/2*(--o*(o-2)-1)+D},sinein:function(o,D,x,m){return-x*P(o/m*V)+x+D},sineout:function(o,D,x,m){return x*q(o/m*V)+D},sineinout:function(o,D,x,m){return-x/2*(P(Math.PI*o/m)-1)+D}};COG.tweenValue=function(o,D,x,m,r){function w(W){W=W?W:(new Date).getTime();if(aa+s<W){var T=W-R,ra=x(T,o,ja,m),la=R+m<=
W;W=!la;if(r){T=r(ra,la,T);W=typeof T!="undefined"?T&&W:W}W&&animFrame(w)}}var R=(new Date).getTime(),aa=0,ja=D-o;animFrame(w);return{}};COG.easing=function(o){return ia[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(o,D){ia[o.replace(/[\-\_\s\.]/g,"").toLowerCase()]=D}})();
(function(){var H=/^P(\d+Y)?(\d+M)?(\d+D)?$/,V=/^(\d+H)?(\d+M)?(\d+S)?$/,u={8601:function(j){j=j.split("T");var k=null;k=null;var q=0,y=0;H.lastIndex=-1;k=H.exec(j[0]);q+=k[3]?parseInt(k[3].slice(0,-1),10):0;V.lastIndex=-1;k=V.exec(j[1]);y+=k[1]?parseInt(k[1].slice(0,-1),10)*3600:0;y+=k[2]?parseInt(k[2].slice(0,-1),10)*60:0;y+=k[3]?parseInt(k[3].slice(0,-1),10):0;return new s(q,y)}},s=COG.Duration=function(j,k){return{days:j?j:0,seconds:k?k:0}};COG.addDuration=function(){for(var j=new s,k=arguments.length;k--;){j.days+=
arguments[k].days;j.seconds+=arguments[k].seconds}if(j.seconds>=86400){j.days+=~~(j.seconds/86400);j.seconds%=86400}return j};COG.formatDuration=function(j){var k,q,y="";if(j.days)y=j.days+" days ";if(j.seconds){j=j.seconds;if(j>=3600){k=~~(j/3600);j-=k*3600}if(j>=60){q=Math.round(j/60);j-=q*60}if(k)y=y+k+(k>1?" hrs ":" hr ")+(q?(q>10?q:"0"+q)+" min ":"");else if(q)y=y+q+" min";else if(j>0)y=y+(j>10?j:"0"+j)+" sec"}return y};COG.parseDuration=function(j,k){var q=k?u[k]:null;if(q)return q(j);COG.Log.warn("Could not find duration parser for specified format: "+
k);return new s}})();COG.ObjectStore=function(){var H={},V={},u="obj_"+(new Date).getTime(),s=0,j=Object.prototype.hasOwnProperty;return{add:function(k,q){var y;q=q?q:"default";if(k&&k.constructor)if(!j.call(k,"id"))k.id=u+ ++s;y=V[q]?V[q]:V[q]=[];H[k.id]=y.length;y[k.length]=k}}};var CANI={};
(function(H){var V=[],u=0,s=false,j=H.register=function(k,q){V.push({section:k,run:q})};H.init=function(k){function q(){if(u<V.length){var P=V[u++];y[P.section]||(y[P.section]={});P.run(y[P.section],q)}else{for(P in y)H[P]=y[P];s=true;k&&k(H)}}var y={};if(s&&k)k(H);else{u=0;q()}};j("canvas",function(k,q){function y(){var D,x=P.getContext("2d");x.save();try{x.translate(50,50);x.beginPath();x.rect(0,0,20,20);D=x.isPointInPath(10,10)}finally{x.restore()}return D}var P=document.createElement("canvas"),
ia=typeof FlashCanvas!="undefined",o=typeof G_vmlCanvasManager!="undefnined";P.width=200;P.height=200;k.pipTransformed=ia||o?false:y();q()})})(CANI);
INTERACT=function(){function H(m){return function(r,w,R){(R?R:m?document.body:document).addEventListener(r,w,false)}}function V(m){return function(r,w,R){(R?R:m?document.body:document).removeEventListener(r,w,false)}}function u(m,r,w){(w?w:document).attachEvent("on"+m,r)}function s(m,r,w){(w?w:document).detachEvent("on"+m,r)}function j(m,r){return{x:m?m:0,y:r?r:0,count:1}}function k(m,r){D.push(COG.extend({handler:null,checks:{},type:m},r))}function q(m){var r=0,w=0;if(m.offsetParent){do{r+=m.offsetLeft;
w+=m.offsetTop;m=m.offsetParent}while(m)}return{left:r,top:w}}function y(m,r){return{source:m,target:r.target?r.target:r.srcElement}}function P(m,r){for(var w=m.target?m.target:m.srcElement;w&&w!==r&&w.nodeName&&w.nodeName.toUpperCase()!="CANVAS";)w=w.parentNode;return w&&w===r}function ia(m,r){return{x:m.x-(r?r.left:0),y:m.y-(r?r.top:0)}}function o(m){if(m.preventDefault){m.preventDefault();m.stopPropagation()}else m.cancelBubble&&m.cancelBubble()}var D=[],x=function(m,r,w){function R(Y,da,ga,N){var S=
0,ba=0,B=0;COG.tweenValue(0,Y,ga,N,function(K){B=S;S=K});COG.tweenValue(0,da,ga,N,function(K){aa.trigger("pan",S-B,K-ba);ba=K})}w=COG.extend({binder:null,unbinder:null,observable:null},w);for(var aa=w.observable,ja=null,W=[],T=[],ra,la,ua={bind:function(){return aa.bind.apply(null,arguments)},pannable:function(Y){ja=COG.extend({inertia:true},Y);return ua},unbind:function(){aa.unbind();for(var Y=0;Y<W.length;Y++)W[Y].unbind();return ua}},Da=0;Da<r.length;Da++)W.push(r[Da](m,aa,w));aa.bind("pointerDown",
function(){T=[];la=ra=0});aa.bind("pointerMove",function(Y,da,ga,N){if(ja){T[T.length]={ticks:(new Date).getTime(),x:N.x,y:N.y};aa.trigger("pan",N.x,N.y)}ra+=N.x?N.x:0;la+=N.y?N.y:0});aa.bind("pointerUp",function(Y,da,ga){if(Math.abs(ra)>20||Math.abs(la)>20){if(ja){ga=T.length;var N,S;da=0;for(S=T.length;--S>1&&da<50;)da+=T[S].ticks-T[S-1].ticks;if(ga-S>1){Y=T[ga-1].x-T[S].x;N=T[ga-1].y-T[S].y;S=Math.sqrt(Y*Y+N*N)|0;if(S>15){Y=T[ga-1].x-T[0].x;N=T[ga-1].y-T[0].y;S=Math.sqrt(Y*Y+N*N)|0;ga=Math.asin(N/
S);da=S*500/da|0;da=da>300?300:da;R(Math.cos(Y>0?ga:Math.PI-ga)*da,Math.sin(ga)*da,COG.easing("sine.out"),500)}}}}else aa.trigger("tap",da,ga)});return ua};k("pointer",{handler:function(m,r,w){function R(B){if(B.pageX&&B.pageY)return j(B.pageX,B.pageY);else{var K=document.documentElement,U=document.body;return j(B.clientX+(K&&K.scrollLeft||U&&U.scrollLeft||0)-(K&&K.clientLeft||U&&U.clientLeft||0),B.clientY+(K&&K.scrollTop||U&&U.scrollTop||0)-(K&&K.clientTop||U&&U.clientTop||0))}}function aa(B){if(P(B,
m))if(Y=ra(B)){var K=R(B);m.style.cursor="move";o(B);S=K.x;ba=K.y;da=j(S,ba);r.triggerCustom("pointerDown",y("mouse",B),da,ia(da,q(m)))}}function ja(B){var K=R(B);ga=K.x;N=K.y;if(P(B,m))la(B,Y?"pointerMove":"pointerHover")}function W(B){if(Y&&ra(B)){Y=false;if(P(B,m)){m.style.cursor="default";la(B,"pointerUp")}}}function T(B){if(P(B,m)){var K;B=B||window.event;if(B.detail)K=B.axis===2?-B.detail*ua:0;else{K=B.wheelDeltaY?B.wheelDeltaY:B.wheelDelta;if(window.opera)K=-K}if(K!==0){var U=j(ga,N);r.triggerCustom("zoom",
y("mouse",B),U,ia(U,q(m)),K/Da,"wheel");o(B);B.returnValue=false}}}function ra(B){B=B||window.event;return(B.which||B.button)==1}function la(B,K,U,oa,Ca){U=typeof U!="undefined"?U:ga;oa=typeof oa!="undefined"?oa:N;var J=U-S,Z=oa-ba,M=j(U,oa);r.triggerCustom(K,y("mouse",B),M,ia(M,q(m)),j(J,Z));if(typeof Ca=="undefined"||Ca){S=U;ba=oa}}w=COG.extend({},w);var ua=120,Da=ua*8,Y=false,da,ga,N,S,ba;w.binder("mousedown",aa,false);w.binder("mousemove",ja,false);w.binder("mouseup",W,false);w.binder("dblclick",
function(B){COG.info("captured double click");if(P(B,m)){var K=R(B);r.triggerCustom("doubleTap",y("mouse",B),K,ia(K,q(m)))}},false);w.binder("mousewheel",T,document);w.binder("DOMMouseScroll",T,document);return{unbind:function(){w.unbinder("mousedown",aa,false);w.unbinder("mousemove",ja,false);w.unbinder("mouseup",W,false);w.unbinder("mousewheel",T,document);w.unbinder("DOMMouseScroll",T,document)}}},checks:{touch:false}});k("pointer",{handler:function(m,r,w){function R(J){if(J.count<2)return 0;var Z=
J.x-J.next.x;J=J.y-J.next.y;return~~Math.sqrt(Z*Z+J*J)}function aa(J,Z,M){Z=Z?Z:0;M=M?M:0;for(var va={x:J.x-Z,y:J.y-M,id:J.id,count:J.count},ta=va;J.next;){J=J.next;ta=ta.next={x:J.x-Z,y:J.y-M,id:J.id}}return va}function ja(J,Z){var M=J[Z?Z:"touches"],va,ta;if(M.length===0)return null;ta=va={x:M[0].pageX,y:M[0].pageY,id:M[0].identifier,count:M.length};for(var za=1,Xa=M.length;za<Xa;za++)ta=ta.next={x:M[za].pageX,y:M[za].pageY,id:M[za].identifier};return va}function W(J){if(P(J,m)){N=q(m);var Z=ja(J,
"changedTouches"),M=aa(Z,N.left,N.top);if(!ba){S=Y;r.triggerCustom("pointerDown",y("touch",J),Z,M)}oa&&r.triggerCustom("pointerDownMulti",y("touch",J),Z,M);ba=ja(J);if(ba.count>1)K=R(ba);Ca=1;U=aa(ba)}}function T(J){if(P(J,m)){J.preventDefault();B=ja(J);if(S==Y)S=Math.abs(ba.x-B.x)>ua||Math.abs(ba.y-B.y)>ua?Da:Y;if(S!=Y){S=B.count>1?ga:da;if(S==ga)if(ba.count===1){ba=aa(B);K=R(ba)}else{var Z=R(B);if(Math.abs(K-Z)<la)S=da;else{var M;M=B.x;var va=B.next.x,ta=B.y,za=B.next.y,Xa=ta<za?ta:za;M={x:(M<va?
M:va)+(Math.abs(M-va)>>1),y:Xa+(Math.abs(ta-za)>>1)};Z=Z/K;va=Z-Ca;r.triggerCustom("zoom",y("touch",J),M,ia(M,N),va,"pinch");Ca=Z}}S==da&&r.triggerCustom("pointerMove",y("touch",J),B,aa(B,N.left,N.top),j(B.x-U.x,B.y-U.y));oa&&r.triggerCustom("pointerMoveMulti",y("touch",J),B,aa(B,N.left,N.top))}U=aa(B)}}function ra(J){if(P(J,m)){var Z=ja(J,"changedTouches"),M=aa(Z,N.left,N.top);B=ja(J);if(!B){r.triggerCustom("pointerUp",y("touch",J),Z,M);ba=null}oa&&r.triggerCustom("pointerUpMulti",y("touch",J),Z,
M)}}w=COG.extend({detailed:false,inertia:false},w);var la=20,ua=7,Da=0,Y=1,da=2,ga=3,N,S,ba,B,K,U,oa=w.detailed,Ca=1;w.binder("touchstart",W,false);w.binder("touchmove",T,false);w.binder("touchend",ra,false);COG.info("initialized touch handler");return{unbind:function(){w.unbinder("touchstart",W,false);w.unbinder("touchmove",T,false);w.unbinder("touchend",ra,false)}}},checks:{touch:true}});return{register:k,watch:function(m,r,w){r=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!=
"undefined",types:null},r);capabilities=COG.extend({touch:"ontouchstart"in window},w);if(!r.observable){COG.info("creating observable");r.observable=COG.observable({});globalOpts=r}r.binder=r.isIE?u:H(r.bindToBody);r.unbinder=r.isIE?s:V(r.bindToBody);w=r.types;for(var R=capabilities,aa=[],ja=D.length;ja--;){var W=D[ja],T=!w||w.indexOf(W.type)>=0,ra=true;for(var la in W.checks){var ua=W.checks[la];COG.info("checking "+la+" capability. require: "+ua+", capability = "+R[la]);ra=ra&&ua===R[la]}if(T&&
ra)aa[aa.length]=W.handler}return new x(m,aa,r)}}}();var T5={};
(function(H){function V(){return(new Date).getTime()}function u(b,d){d=Sb.call(d);if(d=="finite")return!Tb[Ub](+b);return d=="null"&&b===null||d==typeof b||d=="object"&&b===Object(b)||d=="array"&&Array.isArray&&Array.isArray(b)||Vb.call(b).slice(8,-1).toLowerCase()==d}function s(b,d){this.x=b||0;this.y=d||0}function j(b,d,f,e){this.x=b||0;this.y=d||0;this.w=f||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function k(b){b=b||(new Date).getTime();for(var d=0;d<Sa.length;){var f=Sa[d],e=
Oa[f],a=Oa[f].image&&(bb||Oa[f].image.complete&&Oa[f].image.width>0),c=b-e.start;c=a||c>=Wb;if(a){a=e.callbacks;vb[f]=e.image;for(var g=0;g<a.length;g++)a[g](e.image,true)}if(c){Sa.splice(d,1);delete Oa[f]}else d++}Sa.length>0&&animFrame(k)}function q(b,d){var f=b&&d?vb[b]:null;if(f&&f&&(bb||f.complete&&f.width>0))d(f);else{if(f=Oa[b])f.callbacks.push(d);else{f=new Image;f.id="_ldimg"+ ++Xb;Oa[b]={start:(new Date).getTime(),image:f,callbacks:[d]};f.src=b;Sa[Sa.length]=b}animFrame(k)}}function y(b,
d,f,e,a,c){this.x=b;this.y=d;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+d;this.loaded=false;this.image=null}function P(b){function d(c){var g=b[c];u(g,sa)||e.push(function(i){i[c]=g})}function f(){e=[];for(var c in b)d(c)}b=COG.extend({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},b);var e=[],a={applyToContext:function(c){for(var g=
e.length;g--;)e[g](c)},update:function(c,g){b[c]=g;f()}};f();return a}function ia(){for(var b=0,d=arguments.length;d--;){var f=Yb[arguments[d].toUpperCase()];if(f)b|=f}return b}function o(b){b=b?b:(new Date).getTime();if(b-wb>Zb){for(var d=Ya.splice(0),f=d.length;f--;)d[f](b);wb=b}Ya.length&&animFrame(o)}function D(b){var d=Ya.length==0;Ya[Ya.length]=b;d&&animFrame(o)}function x(b,d,f,e,a){a=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),
g=b[d],i=d=="translate",h=a.autoInvalidate,l=f.length&&e.length&&f.length==e.length?f.length:0,t=Array(l),E=Array(l),X=COG.easing(a.easing),I=a.duration,F=a.progress,A=function(n){var C=n-c;n=c+I<=n;for(var G=b.layer?b.layer.view:null,O,L=l;L--;){O=X(C,f[L],t[L],I);E[L]=i?O|0:O}g.apply(b,E);h&&G&&G.invalidate();if(F){C=[].concat(n?e:E);C.unshift(n);F.apply(b,C)}if(n){b.animations--;g.apply(b,e);a.complete&&a.complete.apply(b,e)}else D(A)};if(g&&g.apply&&l>0){I=I?I:DEFAULT_DURATION;for(d=l;d--;)t[d]=
e[d]-f[d];b.animations++;D(A)}}function m(b){b=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},b);Aa.call(this,b)}function r(b,d){d=COG.extend({simplify:false,typeName:"Poly"},d);var f=d.simplify;Aa.call(this,d);COG.extend(this,{resync:function(e){var a,c,g,i,h,l;e.syncXY(b);l=this.points=Pa.floor(f?Pa.simplify(b):b);for(var t=l.length;t--;){e=l[t].x;a=l[t].y;i=u(i,sa)||e<i?e:i;h=u(h,sa)||a<h?a:h;c=u(c,sa)||e>c?e:c;g=u(g,sa)||a>g?a:g}this.updateBounds(new j(i,
h,c-i,g-h),true)}});this.haveData=b&&b.length>=2}function w(b,d){d.fill=false;r.call(this,b,d)}function R(b){function d(){if(i&&i.width>0){if(!this.centerOffset)this.centerOffset=new s(-i.width>>1,-i.height>>1);this.updateBounds(new j(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,i.width,i.height),false)}}function f(l){if(this.imageUrl=l){var t=this;q(this.imageUrl,function(E,X){i=E;if(X){var I=h.layer?h.layer.view:null;I&&I.invalidate()}d.apply(t)})}}b=COG.extend({image:null,imageUrl:null,
centerOffset:null,typeName:"Image"},b);var e=null,a=Aa.prototype.resync,c=0,g=0,i=b.image;Aa.call(this,b);var h=COG.extend(this,{changeImage:f,drag:function(l,t,E,X){e||(e=new s(l.startX-this.xy.x,l.startY-this.xy.y));this.xy.x=t-e.x;this.xy.y=E-e.y;if(X){e=null;if(this.layer)if(l=this.layer.view){l.syncXY([this.xy],true);l.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||d(this,i);return{image:i,x:this.xy.x+c,y:this.xy.y+g}},resync:function(l){a.call(this,l);d.call(this)}});
i||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;g=this.centerOffset.y}}function aa(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Pa.invert(b.imageAnchor);R.call(this,b)}function ja(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);Aa.call(this,b)}function W(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:ia("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;this.visible=
true;COG.observable(COG.extend(this,b))}function T(b){for(var d=null,f=1;!d&&f<arguments.length;f++)d=ua(b,arguments[f]);d=d?d:ua(b);if(!d)throw Error("Unable to find GEO engine with "+b+" capability");return d}function ra(b){b=parseFloat(b)*Ea;b=M(b);var d=cb*b;return J((1+b)/(1-b)*oa((1-d)/(1+d),cb))/2}function la(b){return N/(256<<b)}function ua(b,d){var f=null;for(var e in Qa)if(d){if(e==d&&Qa[e][b]){f=Qa[e];break}}else if(Qa[e][b]){f=Qa[e];break}return f}function Da(b,d){var f=cb*M(b);return S-
2*za(d*oa((1-f)/(1+f),cb/2))}function Y(b,d,f,e){d=da(d);b.add(e(d,f));return d.length}function da(b){var d=b?b.length:0,f=Array(d);for(d=d;d--;)f[d]=ea.init(b[d][1],b[d][0]);return ea.vectorize(f,xb)}window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var ga=Array.prototype.indexOf||
function(b){for(var d=0;d<this.length;d++)if(this[d]===b)return d;return-1},N=Math.PI*2,S=Math.PI/2,ba=Math.abs,B=Math.ceil,K=Math.min,U=Math.max,oa=Math.pow,Ca=Math.sqrt,J=Math.log,Z=Math.round,M=Math.sin,va=Math.asin,ta=Math.cos,za=Math.atan,Xa=Math.atan2,Ub="hasOwnProperty",Tb={NaN:1,Infinity:1,"-Infinity":1},Sb=String.prototype.toLowerCase,Vb=Object.prototype.toString,sa="undefined",yb="number",$b=typeof G_vmlCanvasManager!=sa,bb=typeof FlashCanvas!=sa,ac=T5.newCanvas=function(b,d){var f=document.createElement("canvas");
f.width=b?b:0;f.height=d?d:0;if(bb){document.body.appendChild(f);FlashCanvas.initElement(f)}$b&&G_vmlCanvasManager.initElement(f);return f},zb=function(){var b={};return{init:function(d,f){var e=b[d];if(!e)throw Error("Unable to locate requested generator: "+d);return new e(f)},register:function(d,f){b[d]=f}}}();s.prototype={constructor:s};j.prototype={constructor:j};var Pa=function(){function b(e,a){return f(e.x-a.x,e.y-a.y)}function d(e,a){a=a||e.length;if(a<=1)return null;for(var c=Array(a-1),
g=Array(a-1),i=0,h,l=0;l<a-1;l++){h=b(e[l],e[l+1]);c[l]=Ca(h.x*h.x+h.y*h.y);g[l]=i+=c[l]}return{edges:c,accrued:g,tota:i}}function f(e,a){return new s(e,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var e=0,a=0,c=arguments.length;c--;){e+=arguments[c].x;a+=arguments[c].y}return f(e,a)},absSize:function(e){return U(ba(e.x),ba(e.y))},copy:function(e){return e?f(e.x,e.y):null},diff:b,distance:function(e,a){return d(e,a).total},edges:d,equals:function(e,a){return e.x===
a.x&&e.y===a.y},extendBy:function(e,a,c){var g=ta(a)*c|0;a=M(a)*c|0;return f(e.x-g,e.y-a)},floor:function(e){for(var a=Array(e.length),c=e.length;c--;)a[c]=f(~~e[c].x,~~e[c].y);return a},getRect:function(e){for(var a,c,g,i,h=e.length;h--;){var l=e[h];a=u(a,sa)||l.x<a?l.x:a;c=u(c,sa)||l.y<c?l.y:c;g=u(g,sa)||l.x>g?l.x:g;i=u(i,sa)||l.y>i?l.y:i}return new j(a,c,g-a,i-c)},init:f,invert:function(e){return f(-e.x,-e.y)},min:function(e,a){return f(e.x<a.x?e.x:a.x,e.y<a.y?e.y:a.y)},max:function(e,a){return f(e.x>
a.x?e.x:a.x,e.y>a.y?e.y:a.y)},offset:function(e,a,c){return f(e.x+a,e.y+(c||a))},scale:function(e,a){return f(e.x/a|0,e.y/a|0)},simplify:function(e,a){if(!e)return null;a=a?a:Pa.VECTOR_SIMPLIFICATION;for(var c=[],g=null,i=e.length;i--;){var h=e[i];if(include=!g||i===0||ba(h.x-g.x)+ba(h.y-g.y)>a){c.unshift(h);g=h}}return c},theta:function(e,a,c){c=va((e.y-a.y)/c);return e.x>a.x?c:Math.PI-c},toString:function(e){return e?e.x+", "+e.y:""}}}(),hb=function(){return{dotProduct:function(b,d){return b.x*
d.x+b.y*d.y}}}(),Ta=function(){function b(f){return d(f.x,f.y,f.x2,f.y2)}function d(f,e,a,c){return new j(f,e,(a||f)-f,(c||e)-e)}return{buffer:function(f,e,a){return Ta.init(f.x-e,f.y-(a||e),f.x+e,f.y+(a||e))},center:function(f){return new s(f.x+(f.w>>1),f.y+(f.h>>1))},copy:b,diagonalSize:function(f){return Ca(f.w*f.w+f.h*f.h)},fromCenter:function(f,e,a,c){a=a>>1;c=c>>1;return d(f-a,e-c,f+a,e+c)},init:d,intersect:function(f,e){var a=U(f.x,e.x),c=U(f.y,e.y),g=K(f.x2,e.x2),i=K(f.y2,e.y2);a=d(a,c,g,
i);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,e){if(f.w===0||f.h===0)return b(e);else if(e.w===0||e.h===0)return b(f);else{var a=K(f.x,e.x),c=K(f.y,e.y),g=U(f.x2,e.x2),i=U(f.y2,e.y2);a=d(a,c,g,i);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,d){var f=[],e={},a;for(a=d.length;a--;)e[d[a].target.id]=true;for(a=b.length;a--;)e[b[a].target.id]||(f[f.length]=b[a]);return f},init:function(b,d,f,e){return{type:b,
x:e.x|0,y:e.y|0,elements:[],absXY:d,relXY:f}},initHit:function(b,d,f){return{type:b,target:d,drag:f}},triggerEvent:function(b,d,f,e){d.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},e?e:b.elements,b.absXY,b.relXY,new s(b.x,b.y))}}}();var ib=function(b){function d(a,c){var g=f[a],i;g||(g=f[a]=[]);(i=g[c])||(i=g[c]=[]);return i}b=b||128;var f=[],e={};return{insert:function(a,c,g){var i=a.x/b|0,h=a.y/b|0,l=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id||COG.objId("spatial");e[g]=c;for(c=i;c<=l;c++)for(i=
h;i<=a;i++)d(c,i).push(g)},remove:function(a,c,g){var i=a.x/b|0,h=a.y/b|0,l=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;delete e[g];for(c=i;c<=l;c++)for(i=h;i<=a;i++){var t=d(c,i),E=ga.call(t,g);E>=0&&t.splice(E,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,i=(a.y+a.h)/b|0,h=[],l=[];for(a=a.x/b|0;a<=g;a++)for(var t=c;t<=i;t++)h=h.concat(d(a,t));h.sort();for(c=h.length;c--;){g=h[c];if(i=e[g])l[l.length]=i;for(;c>0&&h[c-1]==g;)c--}return l}}},Wb=3E4,vb={},Xb=0;(new Date).getTime();var Oa={},Sa=
[];y.prototype={constructor:y,load:function(b){var d=this;q(this.url,function(f){d.loaded=true;d.image=f;b&&b()})}};var bc=function(){return{applyStyle:function(){},applyTransform:function(b,d,f){return{restore:null,x:d,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new s},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},reset:function(){}}},Ab={},Ua=H.registerRenderer=function(b,
d){Ab[b]=d},cc=H.attachRenderer=function(b,d,f,e){b=b.split("/");for(var a=new bc(d,f,e),c=0;c<b.length;c++){var g=Ab[b[c]];if(g)a=new g(d,f,e,a)}return a};Ua("canvas",function(b,d,f,e){function a(n,C,G,O){var L=false;if(C)L=h.isPointInPath(X?C.x-l:C.relXY.x,X?C.y-t:C.relXY.y);return{draw:O||A,viewport:n,state:G,hit:L,vpX:l,vpY:t,context:h}}f=COG.extend({},f);var c,g,i,h,l=0,t=0,E=null,X=CANI.canvas.pipTransformed,I={},F=function(){},A=function(){this.fill&&h.fill();this.stroke&&h.stroke()};(function(){if(d){var n=
d.tagName=="CANVAS",C=n?d.parentNode:d;c=b.width=C.offsetWidth;g=b.height=C.offsetHeight;if(n){i=d;i.width=c;i.height=g;bb&&FlashCanvas.initElement(i)}else{i=ac(c,g);i.style.cssText="position: absolute; z-index: 1;";d.appendChild(i)}h=null}})();return COG.extend(e,{interactTarget:i,applyStyle:function(n){var C=dc(n),G=h&&h.canvas?h.canvas.id:"default",O;I[G]||(I[G]=[]);O=I[G].pop()||"basic";if(C){I[G].push(n);C.applyToContext(h);return O}},applyTransform:function(n){if(n.translateX!==0||n.translateY!==
0||n.scaling!==1||n.rotation!==0){h.save();E={undo:function(){h.restore();E=null},x:n.xy.x,y:n.xy.y};h.translate(n.xy.x-l+n.translateX,n.xy.y-t+n.translateY);n.rotation!==0&&h.rotate(n.rotation);n.scaling!==1&&h.scale(n.scaling,n.scaling)}return E},drawTiles:function(n,C){for(var G,O,L=l-256,ha=t-256,fa=n.x2,ka=n.y2,Ba=C.length;Ba--;){G=C[Ba];if(O=G.x>=L&&G.x<=fa&&G.y>=ha&&G.y<=ka)G.loaded?h.drawImage(G.image,G.x-l,G.y-t):G.load(b.invalidate)}},hitTest:function(n,C,G){return h.isPointInPath(C,G)},
prepare:function(n,C){var G,O=false,L=C.scaled||C,ha=C.scaleFactor;if(h)h.restore();else h=i.getContext("2d");for(G=n.length;G--;)O=O||n[G].clip;l=L.x;t=L.y;if(h){O||h.clearRect(0,0,c,g);h.save();h.scale(ha,ha)}h.globalCompositeOperation="source-over";return h},prepArc:function(n,C,G,O){h.beginPath();h.arc(n.xy.x-(E?E.x:l),n.xy.y-(E?E.y:t),n.size>>1,n.startAngle,n.endAngle,false);return a(C,G,O)},prepImage:function(n,C,G,O,L){var ha=(L.x||n.xy.x)-(E?E.x:l),fa=(L.y||n.xy.y)-(E?E.y:t),ka=L.image||n.image;
if(ka){h.beginPath();h.rect(ha,fa,L.width||ka.width,L.height||ka.height);return a(C,G,O,function(){h.drawImage(ka,ha,fa,L.width||ka.width,L.height||ka.height)})}},prepMarker:function(n,C,G,O){var L=n.xy.x-(E?E.x:l),ha=n.xy.y-(E?E.y:t),fa=n.size,ka=undefined;h.beginPath();switch(n.markerStyle.toLowerCase()){case "simple":h.moveTo(L,ha);h.lineTo(L-(fa>>1),ha-fa);h.lineTo(L+(fa>>1),ha-fa);h.lineTo(L,ha);break;case "image":ka=F;h.rect(L-(fa>>1),ha-(fa>>1),fa,fa);n.image?h.drawImage(n.image,L-(fa>>1),
ha-(fa>>1),fa,fa):q(n.imageUrl,function(Ba){n.image=Ba;h.drawImage(n.image,L-(fa>>1),ha-(fa>>1),fa,fa)});break}return a(C,G,O,ka)},prepPoly:function(n,C,G,O,L){var ha=true;n=L.points||n.points;L=E?E.x:l;var fa=E?E.y:t;h.beginPath();for(var ka=n.length;ka--;){var Ba=n[ka].x-L,db=n[ka].y-fa;if(ha){h.moveTo(Ba,db);ha=false}else h.lineTo(Ba,db)}return a(C,G,O)},getContext:function(){return h},getDimensions:function(){return{width:c,height:g}},getOffset:function(){return new s(l,t)}})});var Bb={},ec=H.defineStyle=
function(b,d){Bb[b]=P(d);return b},Cb=H.defineStyles=function(b){for(var d in b)ec(d,b[d])},dc=H.getStyle=function(b){return Bb[b]};H.loadStyles=function(b){COG.jsonp(b,function(d){Cb(d)})};Cb({basic:{fillStyle:"#000"},highlight:{fillStyle:"#f00"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"},waypointsHover:{lineWidth:4,strokeStyle:"#f00",fillStyle:"#FFF"}});var Yb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Lb=function(b){function d(p,v,z){Fa||Ba(ma-v,na-
z)}function f(p,v,z,Q){ha(K(U(pa+oa(2,Q)-1,0.5),2))}function e(){var p=J(pa)/Math.LN2|0;if(p!==0){pa=oa(2,p);fa(Za+p,fc,gc)}redraw=true}function a(p,v){var z=renderer&&renderer.projectXY?renderer.projectXY(p,v):null;if(!z){z=$.getViewport();var Q=1/pa;z=new s(z?z.x+p*Q:p,z?z.y+v*Q:v)}return z}function c(p,v,z){ka("doubleTap",v,z,a(z.x,z.y));b.scalable&&ha(2,a(z.x,z.y),b.zoomEasing,null,b.zoomDuration)}function g(p,v,z){Fa=null;C("down",v,z)}function i(p,v,z){C("hover",v,z)}function h(p,v,z){A(v,z,
false)}function l(p,v,z){A(v,z,true)}function t(){clearTimeout(Db);Db=setTimeout(function(){renderer.checkSize()},250)}function E(p,v,z){C("tap",v,z);ka("tap",v,z,a(z.x,z.y,true))}function X(){renderer=cc(b.renderer,$,jb);Eb=!renderer.preventPartialScale;F()}function I(p,v){v.id=p;v.added=V();v.view=$;v.trigger("parentChange",$,jb,hc);qa.push(v);qa.sort(function(z,Q){var ca=Q.zindex-z.zindex;if(ca===0)ca=Q.added-z.added;return ca});Ha=qa.length;return v}function F(){xa&&xa.unbind();if(renderer){xa=
INTERACT.watch(renderer.interactTarget);b.pannable&&xa.pannable().bind("pan",d);if(b.scalable){xa.bind("zoom",f);xa.bind("doubleTap",c)}xa.bind("pointerDown",g);xa.bind("pointerMove",h);xa.bind("pointerUp",l);b.captureHover&&xa.bind("pointerHover",i);xa.bind("tap",E)}}function A(p,v,z){if(Fa){p=a(v.x,v.y);if(Fa.drag.call(Fa.target,Fa,p.x,p.y,z))redraw=true;if(z)Fa=null}}function n(p){var v,z,Q=false;p=p||(new Date).getTime();if(Q=p-Fb>ic){var ca=ba(ma-kb),wa=ba(na-lb);v=ma!==mb||na!==nb;z=pa!==Gb;
if(v||z)La++;if(ca>=Hb||wa>=Hb)L();z={index:jc++,draw:La};$.trigger("enterFrame",p,z);Fb=p}if(Q&&z.draw){Ma=Ib|(pa!==1?Jb:0)|(v?ob:0)|(pb?Kb:0);qb=(v=(Ma&(Jb|ob))!==0)&&(Ma&Kb)===0;v=O();if(renderer.prepare(qa,v,Ma,p,ya)){La=0;for(ii=Ha;ii--;){Q=qa[ii];if(Q.visible&&(Ma&Q.validStates)!==0){z=Q.style?renderer.applyStyle(Q.style,true):null;Q.draw(renderer,v,Ma,$,p,ya);z&&renderer.applyStyle(z)}}renderer.render(v);$.trigger("drawComplete",v,p);mb=ma;nb=na;Gb=pa}if(ya){p=ya?ya.elements:[];if($a&&$a.type===
"hover"){v=Hits.diffHits($a.elements,p);v.length>0&&Hits.triggerEvent($a,$,"Out",v)}if(p.length>0){Q=ya.x;z=ya.y;for(v=p.length;v--;){ca=p[v];wa=Q;var Ia=z,Ga=ca&&ca.drag&&(!ca.canDrag||ca.canDrag(ca,wa,Ia));if(Ga){Fa=ca;Fa.startX=wa;Fa.startY=Ia}if(Ga)break}Hits.triggerEvent(ya,$)}$a=p.length>0?COG.extend({},ya):null;ya=null}}animFrame(n)}function C(p,v,z){ya=Hits.init(p,v,z,a(z.x,z.y,true));for(p=Ha;p--;)rb=rb||(qa[p].hitGuess?qa[p].hitGuess(ya.x,ya.y,Ma,$):false);rb&&La++}function G(){La++}function O(){var p=
new j(ma,na,$.width,$.height);p.scaleFactor=pa;if(pa!==1)p.scaled=Ta.fromCenter(ma+($.width>>1),na+($.height>>1),$.width/pa|0,$.height/pa|0);return p}function L(){var p=O();if(p){if(Va||Wa)if(p){var v=eb?ma+(p.w>>1):ma,z=fb?na+(p.h>>1):na,Q=p.w,ca=p.h;if(Va&&Va>Q)if(v+Q>Va)ma=eb?ma:Va-Q;else if(v<0)ma=eb?ma:0;if(Wa&&Wa>ca)if(z+ca>Wa)na=fb?na:Wa-ca;else if(z<0)na=fb?na:0}kb=ma;lb=na;ka("refresh",$,p);La++}}function ha(p,v,z,Q,ca){var wa;if(!Eb){z=false;wa=Z(J(p)/Math.LN2);p=oa(2,wa)}if(z)COG.tweenValue(pa,
p,z,ca,function(Ia,Ga){pa=Ia;if(Ga){wa=Z(J(pa)/Math.LN2);pa=oa(2,wa);Q&&Q()}e()});else{pa=p;e()}return $}function fa(p,v,z){p=U(b.minZoom,K(b.maxZoom,p));if(p!==Za){var Q=oa(2,p-Za),ca=$.width>>1,wa=$.height>>1,Ia=ca/Q|0,Ga=wa/Q|0;Za=p;Ba(((v?v:ma+ca)-Ia)*Q,((z?z:na+wa)-Ga)*Q);mb=ma;nb=na;lb=kb=0;ka("zoomLevelChange",p);pa=1;renderer.reset();L()}}function ka(){for(var p=$.trigger.apply(null,arguments).cancel,v=qa.length;v--;)p=qa[v].trigger.apply(null,arguments).cancel||p;return!p}function Ba(p,v,
z,Q,ca){function wa(){Ia+=1;if(Ia>=2){pb=false;ca&&ca()}}var Ia=0;if(z){if((Ma&ob)===0){COG.tweenValue(ma,p,z,Q,function(Ga,sb){ma=Ga|0;(sb?wa:G)();return!qb});COG.tweenValue(na,v,z,Q,function(Ga,sb){na=Ga|0;(sb?wa:G)();return!qb});pb=true}}else{ma=p|0;na=v|0;ca&&ca()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,
autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},b);var db={},qa=[],Ha=0,jb=document.getElementById(b.container),Fa=null,jc=0,hc=null,kc=!u(window.attachEvent,sa),rb=false,Hb=b.refreshDistance,ma=0,na=0,kb=0,lb=0,mb=0,nb=0,Va=null,Wa=null,eb=false,fb=false,ya=null,qb=false,$a=null,Db=0,pa=1,Gb=1,Fb=0,xa=null,Eb=true,pb=false,ic=1E3/b.fps|0,La=0,fc,gc,Za=b.zoomLevel,Ib=ia("ACTIVE"),ob=ia("PAN"),
Jb=ia("ZOOM"),Kb=ia("ANIMATING"),Ma=Ib,$={id:b.id,detach:function(){xa&&xa.unbind()},eachLayer:function(p){for(var v=Ha;v--;)p(qa[v])},getLayer:function(p){for(var v=0;v<Ha;v++)if(qa[v].id===p)return qa[v];return null},getZoomLevel:function(){return Za},setLayer:function(p,v){for(var z=0;z<Ha;z++)if(qa[z].id===p){qa.splice(z,1);break}if(v){I(p,v);v.trigger("refresh",$,O());$.trigger("layerChange",$,v)}La++;return v},invalidate:G,refresh:L,resetScale:function(){pa=1},scale:ha,setZoomLevel:fa,syncXY:function(){},
triggerAll:ka,removeLayer:function(p){a:{for(var v=Ha;v--;)if(qa[v].id===p){p=v;break a}p=-1}if(p>=0&&p<Ha){$.trigger("layerRemove",$,qa[p]);qa.splice(p,1);La++}Ha=qa.length},getOffset:function(){return new s(ma,na)},getRenderer:function(){return renderer},getScaleFactor:function(){return pa},setMaxOffset:function(p,v,z,Q){Va=p;Wa=v;eb=z;fb=Q},getViewport:O,updateOffset:Ba,pan:function(p,v,z,Q,ca){Ba(ma+p,na+v,z,Q,ca)}};COG.observable($);$.bind("resync",function(){});COG.configurable($,["container",
"captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(b,null,{container:function(p,v){jb=document.getElementById(v);X()},inertia:F,captureHover:F,scalable:F,pannable:F}),true);CANI.init(function(p){$.markers=I("markers",new gb({zindex:20}));db=p;X();kc?window.attachEvent("onresize",t):window.addEventListener("resize",t,false)});animFrame(n);return $},Aa=function(b){b=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,
properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Aa.prototype={constructor:Aa,animate:function(b,d,f,e){x(this,b,d,f,e)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds(Ta.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=
b},scale:function(b){this.scaling=b},translate:function(b,d){this.translateX=b;this.translateY=d},updateBounds:function(b,d){b&&(!this.bounds||b.x!=this.bounds.x||b.y!=this.bounds.y)&&this.trigger("move",this,b,this.bounds);this.bounds=b;if(d)this.xy=Ta.center(this.bounds)}};var Zb=1E3/60|0,Ya=[],wb=0;m.prototype=COG.extend(Aa.prototype,{constructor:m});r.prototype=COG.extend({},Aa.prototype,{constructor:r});w.prototype=COG.extend({},r.prototype);R.prototype=COG.extend({},Aa.prototype,{constructor:R});
aa.prototype=COG.extend({},R.prototype,{constructor:aa});ja.prototype=COG.extend(Aa.prototype,{constructor:ja});W.prototype={constructor:W,clip:null,cycle:function(){},draw:function(){},hitGuess:null};Ua=function(b,d){function f(l,t){if(a&&i){g=a.search(i);i=null}var E=t&&t.getZoomLevel?t.getZoomLevel():0;c[E]||(c[E]=new ib);a=c[E]}d=COG.extend({imageLoadArgs:{}},d);var e=b?zb.init(b,d).run:null,a=null,c=[],g=[],i=null,h=COG.extend(new W(d),{draw:function(l,t){l.drawTiles(t,a.search(t))}});h.bind("refresh",
function(l,t,E){var X=(new Date).getTime();if(a){g=i?a.search(i):[];e(t,E,a,function(){t.invalidate();COG.info("GEN COMPLETED IN "+((new Date).getTime()-X)+" ms")});i=Ta.copy(E)}});h.bind("parentChange",f);h.bind("resync",f);return h};var Mb=function(b){function d(h){clearTimeout(g);g=setTimeout(function(){a.sort(function(l,t){if(t.xy&&l.xy){var E=t.xy.y-l.xy.y;return E!=0?E:t.xy.x-l.xy.x}});h&&h.invalidate()},50)}function f(h,l,t,E){E&&c.remove(E,l);c.insert(t,l)}function e(h,l){for(var t=a.length;t--;)a[t].resync(l)}
b=COG.extend({zindex:10},b);var a=[],c=new ib,g=0,i=COG.extend(new W(b),{itemCount:0,add:function(h,l){if(h){h.layer=i;if(l)a.unshift(h);else a[a.length]=h;var t=i.view;if(t){h.resync(t);c&&h.bounds&&c.insert(h.bounds,h);d(t)}h.bind("move",f)}i.itemCount=a.length},clear:function(){c=new ib;a=[];i.itemCount=0},draw:function(h,l,t,E,X,I){E={};X=c&&l?c.search(l):[];for(var F=X.length;F--;){var A=X[F],n=A.style||i.style,C,G=h.applyTransform(A),O=A.getProps?A.getProps(h,t):E;if(O=(C=h["prep"+A.typeName])?
C.call(h,A,l,I,t,O):null){if(O.hit){I.elements.push(Hits.initHit(A.type,A,A.draggable?A.drag:null));C=I.type+"Style";n=A[C]||i[C]||n}n=n?h.applyStyle(n,true):null;(C=A.draw||O.draw)&&C.call(A,O);n&&h.applyStyle(n)}G&&G.undo&&G.undo()}},find:function(){return[].concat(a)},hitGuess:function(h,l){return c&&c.search({x:h-10,y:l-10,w:20,h:20}).length>0}});i.bind("parentChange",e);i.bind("resync",e);return i},gb=function(b){return new Mb(b)};COG.extend(H,{ex:COG.extend,is:u,ticks:V,userMessage:function(b,
d,f){H.trigger("userMessage",b,d,f)},indexOf:ga,Rect:j,XY:Pa,XYRect:Ta,Vector:hb,Hits:Hits,Generator:zb,tweenValue:COG.tweenValue,easing:COG.easing,Tile:y,TileLayer:Ua,getImage:q,viewState:ia,View:Lb,ViewLayer:W,ImageLayer:Ua,Drawable:Aa,Marker:m,Poly:r,Line:w,Arc:ja,ImageDrawable:R,ImageMarker:aa,DrawLayer:Mb,ShapeLayer:gb});COG.observable(H);var tb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Ea=Math.PI/180,Na=180/Math.PI,ub=S,Nb=-ub,Ob=N,lc=-Ob,cb=
0.08181919084262157,ab=null,Pb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ea=function(){function b(a){return a?f(a.lat,a.lon):null}function d(a){return!a||a.lat===0&&a.lon===0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function e(a){if(a)if(u(a.lat,yb))return b(a);else{if(a.split)for(var c=[" ",","],g=0;g<c.length;g++){var i=a.split(c[g]);if(i.length===2)return f(i[0],i[1])}}else return f();return null}return{calcDistance:function(a,
c){if(d(a)||d(c))return 0;var g=(c.lat-a.lat)*Ea>>1,i=(c.lon-a.lon)*Ea>>1;g=M(g)*M(g)+ta(a.lat*Ea)*ta(c.lat*Ea)*M(i)*M(i);return 6371*2*Xa(Ca(g),Ca(1-g))},copy:b,empty:d,equal:function(a,c){return a&&c&&a.lat==c.lat&&a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=oa(Math.E,-c),i=S-2*za(g),h=Da(i,g),l=0;l<12&&ba(i-h)>1.0E-7;){i=h;h=Da(i,g);l++}return f(h*Na,a%360*Na)},generalize:function(a,c,g){var i=a.length,h=[],l=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+
c.length+" positions");for(var t=i;t--;)if(t===0)h.unshift(a[t]);else{var E=!l||ea.inArray(a[t],c)?g:ea.calcDistance(l,a[t]);if(a[t]&&E>=g){h.unshift(a[t]);l=a[t]}}COG.info("generalized "+i+" positions into "+h.length+" positions");return h},inArray:function(a,c){for(var g=ea.equal,i=c.length;i--;)if(g(a,c[i]))return true;return false},inBounds:function(a,c){var g=!(ea.empty(a)||ea.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,
c,g){var i=a.lat*Ea;a=a.lon*Ea;c=i+c/6371;g=va(M(g/6371)/ta(i));g=a+g;c=(c+S)%Math.PI-S;g%=N;return f(c*Na,g*Na)},parse:e,parseArray:function(a){var c=a.length,g=Array(c);for(c=c;c--;)g[c]=e(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*Ea,ra(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var t=0,E=c.chunkSize,X=i;X--;){h[X]=T5.GeoXY.init(a[X]);t+=1;if(t>E)break}i=X;if(i<=0)c.callback&&c.callback(h);else animFrame(g)}
var i=a.length,h=Array(i);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var l=i;l--;)h[l]=T5.GeoXY.init(a[l]);return h}animFrame(g);return null}}}(),Ja=function(){function b(a,c,g){var i=new s(0,c.lat-a.lat);i.x=(g||u(g,sa))&&a.lon>c.lon?360-a.lon+c.lon:c.lon-a.lon;return i}function d(a,c){return Ja.init(ea.init(a.min.lat-c,a.min.lon-c%360),ea.init(a.max.lat+c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ea.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function e(a,
c){return{min:ea.parse(a),max:ea.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,i=a.lat*Ea,h=a.lon*Ea,l=i-g,t=i+g;if(l>Nb&&t<ub){i=va(M(g)/ta(i));g=(h-i)%N;h=(h+i)%N}else{l=U(l,Nb);t=K(t,ub);g=lc;h=Ob}return Ja.init(ea.init(l*Na,g*Na),ea.init(t*Na,h*Na))},expand:d,forPositions:function(a,c){var g=null,i=T5.ticks();c||(c="auto");for(var h=a.length;h--;)if(g){var l=b(g.min,a[h],false),t=b(a[h],g.max,false);if(l.x<0)g.min.lon=a[h].lon;if(l.y<0)g.min.lat=a[h].lat;if(t.x<
0)g.max.lon=a[h].lon;if(t.y<0)g.max.lat=a[h].lat}else g=e(a[h],a[h]);if(c){if(c=="auto"){h=b(g.min,g.max);c=U(h.x,h.y)*0.3}g=d(g,c)}COG.trace("calculated bounds for "+a.length+" positions",i);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,c){var g=f(a);g=K(Z(ba(g.lat)*0.05),tb.length);var i=tb[g],h=b(a.min,a.max);g=B(J(tb[3]*c.h/h.y)/J(2));
i=B(J(i*c.w/h.x)/J(2));return K(isNaN(g)?1E3:g,isNaN(i)?1E3:i)},init:e,isEmpty:function(a){return!a||ea.empty(a.min)||ea.empty(a.max)},toString:function(a){return"min: "+ea.toString(a.min)+", max: "+ea.toString(a.max)}}}();hb=function(){var b=/^(\d+).*$/,d=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(f,e){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=e.split(","),g=0;g<c.length;g++){d.lastIndex=-1;if(d.test(c[g])){var i=d.exec(c[g]);if(a>=parseInt(i[1],10)&&a<=parseInt(i[2],10))return true}else if(a==
c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!ab){var e=[];for(var a in Pb)e.push(a);ab=RegExp("(\\s)("+e.join("|")+")(\\s|$)","i")}ab.lastIndex=-1;if(e=ab.exec(f))f=f.replace(ab,"$1"+Pb[e[2]]);return f},toString:function(f){return f.streetDetails+" "+f.location}}}();var Ka=H.GeoXY=function(){function b(e,a){if(e.length){for(var c,g,i,h,l=e.length;l--;){b(e[l],a);c=u(c,sa)||e.x<c?e.x:c;g=u(g,sa)||e.y<g?e.y:g;i=u(i,sa)||e.x>i?e.x:i;h=u(h,sa)||e.y>h?e.y:h}return new j(c,
g,i-c,h-g)}else if(e.mercXY){c=e.mercXY;e.x=(c.x+Math.PI)/a|0;e.y=(Math.PI-c.y)/a|0;e.rpp=a}return e}function d(e,a){if(e.length)for(var c=e.length;c--;)d(e[c],a);else{e.mercXY=new s(e.x*a-Math.PI,Math.PI-e.y*a);e.pos=ea.fromMercatorPixels(e.mercXY.x,e.mercXY.y)}return e}function f(e,a,c){e.pos=a;e.mercXY=ea.toMercatorPixels(a);(c=u(c,yb)?c:e.rpp)&&b(e,c)}return{init:function(e,a){var c=new s;f(c,e,a);return c},sync:b,syncPos:d,toPos:function(e,a){a=a||e.rpp;return ea.fromMercatorPixels(e.x*a-Math.PI,
Math.PI-e.y*a)},updatePos:f}}(),Qa={};Ua=function(){return{bestResults:function(b,d){d||(d=20);for(var f=b.length>0?b[0]:null,e=[],a=0;a<b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=d)e.push(b[a]);else break;return e}}}();var Qb=function(b){b=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})},mc=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&
ea.vectorize(c.geometry,{callback:function(i){g.add(new T5.Line(i,{style:"waypoints",simplify:true}));a.setLayer("route",g)}})}function d(a){for(var c=f.Unknown,g=e,i=0;i<g.length;i++){g[i].regex.lastIndex=-1;var h=g[i].regex.exec(a);if(h){c=g[i].customCheck?g[i].customCheck(a,h):g[i].turnType;break}}return c}var f={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",
TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},e=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:
f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});a.push({regex:/take.*?ramp/i,turnType:f.Ramp});a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",
waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=T("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=ea.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:d,TurnType:f,Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,
"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=d(a.description);return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Ja.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&c.push(a.instructions[g].position);return c}},a)}}}(),nc="featurecollection",oc="feature",xb={async:false},Ra={processor:null,group:"shapes",layerClass:gb},
pc={point:COG.extend({},Ra,{processor:function(b,d,f,e){d=da([d.coordinates],xb);if(d.length>0)if(f=e.marker(d[0],f)){b.add(f);return d.length}},group:"markers",layerClass:gb}),linestring:COG.extend({},Ra,{processor:function(b,d,f,e){d=da(d&&d.coordinates?d.coordinates:[]);return Y(b,d,f,e.line)}}),multilinestring:COG.extend({},Ra,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=d.length;c--;)a+=Y(b,d[c],f,e.line);return a}}),polygon:COG.extend({},Ra,{processor:function(b,
d,f,e){d=d&&d.coordinates?d.coordinates:[];if(d.length>0)return Y(b,d[0],f,e.poly);return 0}}),multipolygon:COG.extend({},Ra,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=0;c<d.length;c++)a+=Y(b,d[c][0],f,e.poly);return a}})},Rb=function(b,d,f,e){function a(A,n){var C=A.processor,G=l+A.group,O=COG.extend({},A,f,{properties:n.properties});if(C){var L=F[G];if(!L){L=new A.layerClass({id:G});F[G]=L}return C(L,n.data,O,e)}return 0}function c(A,n){var C=A&&A.type?A.type.toLowerCase():
null;return C&&C===oc?c(A.geometry,A.properties):{type:C,isCollection:C?C===nc:false,definition:pc[C],data:A,properties:n?n:A.properties}}function g(A){var n=0,C=COG.extend({},f),G=t;A=A?A:(new Date).getTime();if(!X){for(;G<E;G++){A=c(h?h(b[G]):b[G]);var O=null;if(A.isCollection){C.layerPrefix=l+I++ +"-";X=new Rb(A.data.features,function(L){X=null;for(var ha in L)F[ha]=L[ha];t>=E&&d&&d(F)},C);O+=1}else if(A.definition)O=a(A.definition,A);n+=O?O:1;if(n>=i)break}t=G+1;if(X||t<E)animFrame(g);else d&&
d(F)}}f=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},f);e=COG.extend({marker:function(A){return new m({xy:A})},line:function(A,n){return new r(A,COG.extend({},f,n))},poly:function(A,n){return new r(A,COG.extend({fill:true},f,n))}},e);var i=500,h=f.rowPreParse,l=f.layerPrefix,t=0,E=0,X=null,I=0,F={};if(b){u(b,"array")||(b=[b]);E=b.length;animFrame(g)}};Ra=H.GeoJSON={parse:function(b,d,f){return new Rb(b,d,f)}};H.Map=function(b){function d(F){try{var A=ea.init(F.coords.latitude,
F.coords.longitude),n=F.coords.accuracy/1E3;I.trigger("locationUpdate",F,n);if(t){if(!h){h=new UI.LocationOverlay({pos:A,accuracy:n});h.update(I.getTileLayer());I.setLayer("location",h)}var C=Ja.createBoundsFromCenter(A,Math.max(n,1));I.gotoBounds(C)}else{h.pos=A;h.accuracy=n;h.update(I.getTileLayer());a(A,null,COG.easing("sine.out"))}t=false}catch(G){COG.exception(G)}}function f(F){COG.info("caught location tracking error:",F)}function e(F,A,n){I.setZoomLevel(A);a(F,n)}function a(F,A,n,C){F=Ka.init(F,
la(I.getZoomLevel()));I.updateOffset(F.x-(I.width>>1),F.y-(I.height>>1),n,C,function(){A&&A(I)})}b=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2},g=new s,i=c.NONE,h=null,l=0,t=true,E=0,X=b.tapExtent;b.adjustScaleFactor=function(F){return Math.pow(2,(F<1?Math.floor:Math.ceil)(Math.log(F)))};var I=COG.extend(new Lb(b),{getBoundingBox:function(){var F=I.getViewport();return F?Ja.init(Ka.toPos(new s(F.x,F.y2),E),
Ka.toPos(new s(F.x2,F.y),E)):null},getCenterPosition:function(){var F=I.getViewport();if(F){F=new s(F.x+(F.w>>1),F.y+(F.h>>1));return Ka.toPos(F,E)}return null},gotoBounds:function(F,A){var n=Ja.getZoomLevel(F,I.getViewport());e(Ja.getCenter(F),n,A)},gotoPosition:e,panToPosition:a,syncXY:function(F,A){return(A?Ka.syncPos:Ka.sync)(F,E)},locate:function(){I.trackStart(c.SINGLE);setTimeout(I.trackCancel,1E4)},trackStart:function(F){if(navigator.geolocation&&!l){i=F?F:c.WATCH;t=true;l=navigator.geolocation.watchPosition(d,
f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},trackCancel:function(){l&&navigator.geolocation&&navigator.geolocation.clearWatch(l);I.removeLayer("location");h=null;i=c.NONE;l=0},animateRoute:function(F,A,n,C){var G=I.getLayer("route");if(G)(F=G.getAnimation(F,A,n,C))&&F.addToView(I)}});I.bind("pan",function(){i===c.SINGLE&&I.trackCancel()});I.bind("tap",function(F,A,n,C){F=Ka.toPos(C,E);var G=Ka.toPos(Pa.offset(C,-X,X),E);C=Ka.toPos(Pa.offset(C,X,-X),E);I.trigger("geotap",A,n,F,Ja.init(G,
C))});I.bind("refresh",function(F,A,n){if(g.x!=n.x||g.y!=n.y){I.trigger("boundsChange",I.getBoundingBox());g.x=n.x;g.y=n.y}});I.bind("zoomLevelChange",function(F,A){var n;E=la(A);n=N/E|0;I.setMaxOffset(n,n,true,false);I.resetScale();I.triggerAll("resync",I)});return I};H.GeoShape=function(b,d){d=COG.extend({autoParse:true},d);for(var f=Array(b.length),e=d.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(e?a(b[c]):b[c]);return new T5.Poly(f,d)};H.LocationOverlay=function(b){b=COG.extend({pos:null,
accuracy:null,zindex:90},b);var d=new Image,f=T5.XY.init(),e=T5.XY.init(),a=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
d.onload=function(){f=T5.XY.init(d.width>>1,d.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,i){var h=e.x-i.x,l=e.y-i.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(h,l,a,0,Math.PI*2,false);g.fill()}d.complete&&d.width>0&&g.drawImage(d,h-f.x,l-f.y,d.width,d.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;e=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,i){c.update(i)});
return c};H.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:T,radsPerPixel:la,Position:ea,BoundingBox:Ja,Radius:function(b,d){return{distance:parseInt(b,10),uom:d}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:hb,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var d=COG.extend({remove:function(){delete Qa[d.id]}},b);return Qa[d.id]=d},Search:Ua,GeoSearchResult:Qb,LocationSearch:function(b){function d(g,i){navigator.geolocation.clearWatch(e);e=0;if(a){clearTimeout(a);a=0}i&&i([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var e=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,i){if(navigator.geolocation&&!e){e=navigator.geolocation.watchPosition(function(h){var l=
ea.init(h.coords.latitude,h.coords.longitude);h=new Qb({id:1,caption:"Current Location",pos:l,accuracy:h.coords.accuracy/1E3,matchWeight:100});if(!c||h.accuracy<c.accuracy)c=h;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)d(c,i)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&d(c,i)},b.searchTimeout)}}},b))},Routing:mc,GeoJSON:Ra}})(T5);
