COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var C=arguments[0]||{},V,t=1,r=arguments.length;t<r;t++)if((V=arguments[t])!==null)for(var l in V){var m=V[l];if(C!==m)if(m!==undefined)C[l]=m}return C};
(function(){var C=Object.prototype.hasOwnProperty,V=0,t={};t.toID=function(r){return r.replace(/\s/g,"-")};t.objId=function(r){return(r?r:"obj")+V++};t.isFunction=function(r){return toString.call(r)==="[object Function]"};t.isArray=function(r){return toString.call(r)==="[object Array]"};t.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!C.call(r,"constructor")&&!C.call(r.constructor.prototype,"isPrototypeOf"))return false;
var l;for(l in r);return l===undefined||C.call(r,l)};t.isEmptyObject=function(r){for(var l in r)return false;return true};t.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};t.contains=function(r,l){var m=r,s=arguments,w=1;if(l&&module.isArray(l)){s=l;w=0}for(w=w;w<s;w++)m=m&&typeof foo[s[w]]!=="undefined";return m};t.formatStr=function(r){if(arguments.length<=1)return r;for(var l=arguments.length-2,m=0;m<=l;m++)r=r.replace(RegExp("\\{"+m+"\\}","gi"),arguments[m+1]);return r};
t.wordExists=function(r,l){var m="";if(l.toString)l=l.toString();for(var s=0;s<l.length;s++)m+=!/\w/.test(l[s])?"\\"+l[s]:l[s];return RegExp("(^|\\s|\\,)"+m+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,t)})();
(function(){function C(m){return typeof console!=="undefined"?function(){console[m](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var V=window.console&&window.console.markTimeline,t=C("error"),r=C("info"),l=function(){return V?function(m,s){console.markTimeline(m+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:l,debug:C("debug"),info:r,warn:C("warn"),error:t,exception:function(m){if(t)for(var s in m)r("ERROR DETAIL: "+s+
": "+m[s])}})})();
(function(){function C(t,r){var l=t.hasOwnProperty("obsHandlers")?t.obsHandlers:null;l[r]||(l[r]=[]);return l[r]}var V=0;COG.observable=function(t){if(!t)return null;if(!(t.hasOwnProperty("obsHandlers")?t.obsHandlers:null))t.obsHandlers={};if(!t.hasOwnProperty("bind")){t.bind=function(r,l){var m="callback"+V++;C(t,r).unshift({fn:l,id:m});return m};t.triggerCustom=function(r,l){var m=C(t,r),s={cancel:false,name:r,source:this},w;l&&COG.extend(s,l);if(!m)return null;w=Array.prototype.slice.call(arguments,2);
t.eventInterceptor&&t.eventInterceptor(r,s,w);w.unshift(s);for(var O=m.length;O--&&!s.cancel;)m[O].fn.apply(this,w);return s};t.trigger=function(r){var l=Array.prototype.slice.call(arguments,1);l.splice(0,0,r,null);return t.triggerCustom.apply(this,l)};t.unbind=function(r,l){if(typeof r==="undefined")t.obsHandlers={};else for(var m=C(t,r),s=0;m&&s<m.length;s++)if(m[s].id===l){m.splice(s,1);break}return t}}return t}})();
(function(){function C(l,m){l[m]||(l[m]=function(s){return l.configure(m,s)})}function V(l){l.gtConfId="configurable"+r++;l.gtConfig={};l.gtConfigFns=[];return l.gtConfig}var t={},r=0;COG.paramTweaker=function(l,m,s){return function(w,O){if(typeof O!=="undefined"){if(w in l)l[w]=O;s&&w in s&&s[w](w,O)}else return m&&w in m?m[w](w):l[w]}};COG.configurable=function(l,m,s,w){if(l){l.gtConfId||V(l);var O=l.gtConfId,la=l.gtConfig,p=l.gtConfigFns;t[O]=l;p.push(s);for(s=m.length;s--;){la[m[s]]=true;w&&C(l,
m[s])}if(!l.configure)l.configure=function(A,i){if(la[A]){for(var n=p.length;n--;){var v=p[n](A,i);if(typeof v!=="undefined")return v}return t[O]}return null}}}})();
(function(){function C(l){var m=document.createElement("script"),s=false;m.src=l;m.async=true;m.onload=m.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;m.onload=m.onreadystatechange=null;m&&m.parentNode&&m.parentNode.removeChild(m)}};t||(t=document.getElementsByTagName("head")[0]);t.appendChild(m)}var V=0,t,r=this;COG.jsonp=function(l,m,s){l+=l.indexOf("?")>=0?"&":"?";var w="json"+ ++V;r[w]=function(O){m(O);r[w]=null;try{delete r[w]}catch(la){}};
C(l+(s?s:"callback")+"="+w);return w}})();
(function(){var C=1.70158,V=Math.PI/2,t=Math.PI*2,r=1E3/60|0,l=Math.abs,m=Math.pow,s=Math.sin,w=Math.asin,O=Math.cos,la={linear:function(p,A,i,n){return i*p/n+A},backin:function(p,A,i,n){return i*(p/=n)*p*((C+1)*p-C)+A},backout:function(p,A,i,n){return i*((p=p/n-1)*p*((C+1)*p+C)+1)+A},backinout:function(p,A,i,n){return(p/=n/2)<1?i/2*p*p*(((C*=1.525)+1)*p-C)+A:i/2*((p-=2)*p*(((C*=1.525)+1)*p+C)+2)+A},bouncein:function(p,A,i,n){return i-la.bounceout(n-p,0,i,n)+A},bounceout:function(p,A,i,n){return(p/=
n)<1/2.75?i*7.5625*p*p+A:p<2/2.75?i*(7.5625*(p-=1.5/2.75)*p+0.75)+A:p<2.5/2.75?i*(7.5625*(p-=2.25/2.75)*p+0.9375)+A:i*(7.5625*(p-=2.625/2.75)*p+0.984375)+A},bounceinout:function(p,A,i,n){return p<n/2?la.bouncein(p*2,0,i,n)/2+A:la.bounceout(p*2-n,0,i,n)/2+i/2+A},cubicin:function(p,A,i,n){return i*(p/=n)*p*p+A},cubicout:function(p,A,i,n){return i*((p=p/n-1)*p*p+1)+A},cubicinout:function(p,A,i,n){if((p/=n/2)<1)return i/2*p*p*p+A;return i/2*((p-=2)*p*p+2)+A},elasticin:function(p,A,i,n,v,G){if(p==0)return A;
if((p/=n)==1)return A+i;G||(G=n*0.3);if(!v||v<l(i)){v=i;i=G/4}else i=G/t*w(i/v);return-(v*m(2,10*(p-=1))*s((p*n-i)*t/G))+A},elasticout:function(p,A,i,n,v,G){var R;if(p==0)return A;if((p/=n)==1)return A+i;G||(G=n*0.3);if(!v||v<l(i)){v=i;R=G/4}else R=G/t*w(i/v);return v*m(2,-10*p)*s((p*n-R)*t/G)+i+A},elasticinout:function(p,A,i,n,v,G){var R;if(p==0)return A;if((p/=n/2)==2)return A+i;G||(G=n*0.3*1.5);if(!v||v<l(i)){v=i;R=G/4}else R=G/t*w(i/v);if(p<1)return-0.5*v*m(2,10*(p-=1))*s((p*n-R)*t/G)+A;return v*
m(2,-10*(p-=1))*s((p*n-R)*t/G)*0.5+i+A},quadin:function(p,A,i,n){return i*(p/=n)*p+A},quadout:function(p,A,i,n){return-i*(p/=n)*(p-2)+A},quadinout:function(p,A,i,n){if((p/=n/2)<1)return i/2*p*p+A;return-i/2*(--p*(p-2)-1)+A},sinein:function(p,A,i,n){return-i*O(p/n*V)+i+A},sineout:function(p,A,i,n){return i*s(p/n*V)+A},sineinout:function(p,A,i,n){return-i/2*(O(Math.PI*p/n)-1)+A}};COG.tweenValue=function(p,A,i,n,v){function G(I){I=I?I:(new Date).getTime();if(ha+r<I){var $=I-R,ma=i($,p,fa,n),oa=R+n<=
I;I=!oa;if(v){$=v(ma,oa,$);I=typeof $!="undefined"?$&&I:I}I&&animFrame(G)}}var R=(new Date).getTime(),ha=0,fa=A-p;animFrame(G);return{}};COG.easing=function(p){return la[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(p,A){la[p.replace(/[\-\_\s\.]/g,"").toLowerCase()]=A}})();
(function(){var C=/^P(\d+Y)?(\d+M)?(\d+D)?$/,V=/^(\d+H)?(\d+M)?(\d+S)?$/,t={8601:function(l){l=l.split("T");var m=null;m=null;var s=0,w=0;C.lastIndex=-1;m=C.exec(l[0]);s+=m[3]?parseInt(m[3].slice(0,-1),10):0;V.lastIndex=-1;m=V.exec(l[1]);w+=m[1]?parseInt(m[1].slice(0,-1),10)*3600:0;w+=m[2]?parseInt(m[2].slice(0,-1),10)*60:0;w+=m[3]?parseInt(m[3].slice(0,-1),10):0;return new r(s,w)}},r=COG.Duration=function(l,m){return{days:l?l:0,seconds:m?m:0}};COG.addDuration=function(){for(var l=new r,m=arguments.length;m--;){l.days+=
arguments[m].days;l.seconds+=arguments[m].seconds}if(l.seconds>=86400){l.days+=~~(l.seconds/86400);l.seconds%=86400}return l};COG.formatDuration=function(l){var m,s,w="";if(l.days)w=l.days+" days ";if(l.seconds){l=l.seconds;if(l>=3600){m=~~(l/3600);l-=m*3600}if(l>=60){s=Math.round(l/60);l-=s*60}if(m)w=w+m+(m>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)w=w+s+" min";else if(l>0)w=w+(l>10?l:"0"+l)+" sec"}return w};COG.parseDuration=function(l,m){var s=m?t[m]:null;if(s)return s(l);COG.Log.warn("Could not find duration parser for specified format: "+
m);return new r}})();COG.ObjectStore=function(){var C={},V={},t="obj_"+(new Date).getTime(),r=0,l=Object.prototype.hasOwnProperty;return{add:function(m,s){var w;s=s?s:"default";if(m&&m.constructor)if(!l.call(m,"id"))m.id=t+ ++r;w=V[s]?V[s]:V[s]=[];C[m.id]=w.length;w[m.length]=m}}};var CANI={};
(function(C){var V=[],t=0,r=false,l=C.register=function(m,s){V.push({section:m,run:s})};C.init=function(m){function s(){if(t<V.length){var O=V[t++];w[O.section]||(w[O.section]={});O.run(w[O.section],s)}else{for(O in w)C[O]=w[O];r=true;m&&m(C)}}var w={};if(r&&m)m(C);else{t=0;s()}};l("canvas",function(m,s){function w(){var A,i=O.getContext("2d");i.save();try{i.translate(50,50);i.beginPath();i.rect(0,0,20,20);A=i.isPointInPath(10,10)}finally{i.restore()}return A}var O=document.createElement("canvas"),
la=typeof FlashCanvas!="undefined",p=typeof G_vmlCanvasManager!="undefnined";O.width=200;O.height=200;m.pipTransformed=la||p?false:w();s()})})(CANI);
INTERACT=function(){function C(i){return function(n,v){i.addEventListener(n,v,false)}}function V(i){return function(n,v){i.removeEventListener(n,v,false)}}function t(i){return function(n,v){i.attachEvent("on"+n,v)}}function r(i,n){return{x:i?i:0,y:n?n:0,count:1}}function l(i,n){p.push(COG.extend({handler:null,checks:{},type:i},n))}function m(i){var n=0,v=0;if(i.offsetParent){do{n+=i.offsetLeft;v+=i.offsetTop;i=i.offsetParent}while(i)}return{left:n,top:v}}function s(i,n){return{source:i,target:n.target?
n.target:n.srcElement}}function w(i,n){for(var v=i.target?i.target:i.srcElement;v&&v!==n;)v=v.parentNode;return v&&v===n}function O(i,n){return{x:i.x-(n?n.left:0),y:i.y-(n?n.top:0)}}function la(i,n){if(i.preventDefault){i.preventDefault();i.stopPropagation()}else if(typeof i.cancelBubble!="undefined")i.cancelBubble=true;n&&i.stopImmediatePropagation&&i.stopImmediatePropagation()}var p=[],A=function(i,n,v){v=COG.extend({binder:null,unbinder:null,observable:null},v);for(var G=v.observable,R=[],ha,fa,
I={bind:function(){return G.bind.apply(null,arguments)},unbind:function(){G.unbind();for($=0;$<R.length;$++)R[$].unbind();return I}},$=0;$<n.length;$++)R.push(n[$](i,G,v));G.bind("pointerDown",function(){fa=ha=0});G.bind("pointerMove",function(ma,oa,Da,sa){ha+=sa.x||0;fa+=sa.y||0});G.bind("pointerUp",function(ma,oa,Da){Math.abs(ha)>20||Math.abs(fa)>20||G.triggerCustom("tap",ma,oa,Da)});return I};l("pointer",{handler:function(i,n,v){function G(x){if(x.pageX&&x.pageY)return r(x.pageX,x.pageY);else{var H=
document.documentElement,S=document.body;return r(x.clientX+(H&&H.scrollLeft||S&&S.scrollLeft||0)-(H&&H.clientLeft||S&&S.clientLeft||0),x.clientY+(H&&H.scrollTop||S&&S.scrollTop||0)-(H&&H.clientTop||S&&S.clientTop||0))}}function R(x){if(w(x,i))if(sa=$(x)){var H=G(x);i.style.cursor="move";la(x,true);Z=H.x;ja=H.y;Ia=r(Z,ja);n.triggerCustom("pointerDown",s("mouse",x),Ia,O(Ia,m(i)))}}function ha(x){var H=G(x);ya=H.x;ia=H.y;if(w(x,i))ma(x,sa?"pointerMove":"pointerHover")}function fa(x){if(sa&&$(x)){sa=
false;if(w(x,i)){i.style.cursor="default";ma(x,"pointerUp")}}}function I(x){if(w(x,i)){var H;x=x||window.event;if(x.detail)H=x.axis===2?-x.detail*oa:0;else{H=x.wheelDeltaY?x.wheelDeltaY:x.wheelDelta;if(window.opera)H=-H}if(H!==0){var S=r(ya,ia);n.triggerCustom("zoom",s("mouse",x),S,O(S,m(i)),H/Da,"wheel");la(x);x.returnValue=false}}}function $(x){x=x||window.event;return(x.which||x.button)==1}function ma(x,H,S,ka,Ea){S=typeof S!="undefined"?S:ya;ka=typeof ka!="undefined"?ka:ia;var E=S-Z,M=ka-ja,P=
r(S,ka);n.triggerCustom(H,s("mouse",x),P,O(P,m(i)),r(E,M));if(typeof Ea=="undefined"||Ea){Z=S;ja=ka}}v=COG.extend({},v);var oa=120,Da=oa*8,sa=false,Ia,ya,ia,Z,ja;v.binder("mousedown",R);v.binder("mousemove",ha);v.binder("mouseup",fa);v.binder("dblclick",function(x){COG.info("captured double click");if(w(x,i)){var H=G(x);n.triggerCustom("doubleTap",s("mouse",x),H,O(H,m(i)))}});v.binder("mousewheel",I);v.binder("DOMMouseScroll",I);return{unbind:function(){v.unbinder("mousedown",R);v.unbinder("mousemove",
ha);v.unbinder("mouseup",fa);v.unbinder("mousewheel",I);v.unbinder("DOMMouseScroll",I)}}},checks:{touch:false}});l("pointer",{handler:function(i,n,v){function G(E){if(E.count<2)return 0;var M=E.x-E.next.x;E=E.y-E.next.y;return~~Math.sqrt(M*M+E*E)}function R(E,M,P){M=M?M:0;P=P?P:0;for(var pa={x:E.x-M,y:E.y-P,id:E.id,count:E.count},za=pa;E.next;){E=E.next;za=za.next={x:E.x-M,y:E.y-P,id:E.id}}return pa}function ha(E,M){var P=E[M?M:"touches"],pa,za;if(P.length===0)return null;za=pa={x:P[0].pageX,y:P[0].pageY,
id:P[0].identifier,count:P.length};for(var Fa=1,ab=P.length;Fa<ab;Fa++)za=za.next={x:P[Fa].pageX,y:P[Fa].pageY,id:P[Fa].identifier};return pa}function fa(E){if(w(E,i)){ia=m(i);var M=ha(E,"changedTouches"),P=R(M,ia.left,ia.top);if(!ja){Z=sa;n.triggerCustom("pointerDown",s("touch",E),M,P)}ka&&n.triggerCustom("pointerDownMulti",s("touch",E),M,P);ja=ha(E);if(ja.count>1)H=G(ja);Ea=1;S=R(ja)}}function I(E){if(w(E,i)){la(E);x=ha(E);if(Z==sa)Z=Math.abs(ja.x-x.x)>oa||Math.abs(ja.y-x.y)>oa?Da:sa;if(Z!=sa){Z=
x.count>1?ya:Ia;if(Z==ya)if(ja.count===1){ja=R(x);H=G(ja)}else{var M=G(x);if(Math.abs(H-M)<ma)Z=Ia;else{var P;P=x.x;var pa=x.next.x,za=x.y,Fa=x.next.y,ab=za<Fa?za:Fa;P={x:(P<pa?P:pa)+(Math.abs(P-pa)>>1),y:ab+(Math.abs(za-Fa)>>1)};M=M/H;pa=M-Ea;n.triggerCustom("zoom",s("touch",E),P,O(P,ia),pa,"pinch");Ea=M}}Z==Ia&&n.triggerCustom("pointerMove",s("touch",E),x,R(x,ia.left,ia.top),r(x.x-S.x,x.y-S.y));ka&&n.triggerCustom("pointerMoveMulti",s("touch",E),x,R(x,ia.left,ia.top))}S=R(x)}}function $(E){if(w(E,
i)){var M=ha(E,"changedTouches"),P=R(M,ia.left,ia.top);x=ha(E);if(!x){n.triggerCustom("pointerUp",s("touch",E),M,P);ja=null}ka&&n.triggerCustom("pointerUpMulti",s("touch",E),M,P)}}v=COG.extend({detailed:false,inertia:false},v);var ma=20,oa=7,Da=0,sa=1,Ia=2,ya=3,ia,Z,ja,x,H,S,ka=v.detailed,Ea=1;v.binder("touchstart",fa);v.binder("touchmove",I);v.binder("touchend",$);COG.info("initialized touch handler");return{unbind:function(){v.unbinder("touchstart",fa);v.unbinder("touchmove",I);v.unbinder("touchend",
$)}}},checks:{touch:true}});return{register:l,watch:function(i,n,v){n=COG.extend({bindTarget:null,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},n);capabilities=COG.extend({touch:"ontouchstart"in window},v);if(!n.observable){COG.info("creating observable");n.observable=COG.observable({});globalOpts=n}n.binder=(n.isIE?t:C)(n.bindTarget||document);n.unbinder=(n.isIE?t:V)(n.bindTarget||document);v=n.types;for(var G=capabilities,R=[],ha=p.length;ha--;){var fa=p[ha],I=!v||v.indexOf(fa.type)>=
0,$=true;for(var ma in fa.checks){var oa=fa.checks[ma];COG.info("checking "+ma+" capability. require: "+oa+", capability = "+G[ma]);$=$&&oa===G[ma]}if(I&&$)R[R.length]=fa.handler}return new A(i,R,n)}}}();var T5={};
(function(C){function V(){return(new Date).getTime()}function t(a,e){e=Zb.call(e);if(e=="finite")return!$b[ab](+a);return e=="null"&&a===null||e==typeof a||e=="object"&&a===Object(a)||e=="array"&&Array.isArray&&Array.isArray(a)||ac.call(a).slice(8,-1).toLowerCase()==e}function r(a,e){this.x=a||0;this.y=e||0}function l(a,e,c,d){this.x=a||0;this.y=e||0;this.w=c||0;this.h=d||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function m(a,e){var c=new Gb(Math.sqrt(256<<a)|0);e&&e.zoomLevel===a&&e.copyInto(c);
c.zoomLevel=a;return c}function s(a){a=a||(new Date).getTime();for(var e=0;e<Ya.length;){var c=Ya[e],d=Va[c],b=Va[c].image&&Va[c].image.complete&&Va[c].image.width>0,f=a-d.start;f=b||f>=bc;if(b){b=d.callbacks;Hb[c]=d.image;for(var g=0;g<b.length;g++)b[g](d.image,true)}if(f){Ya.splice(e,1);delete Va[c]}else e++}Ya.length>0&&animFrame(s)}function w(a,e){var c=a&&e?Hb[a]:null;if(c&&c&&c.complete&&c.width>0)e(c);else{if(c=Va[a])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++cc;Va[a]={start:(new Date).getTime(),
image:c,callbacks:[e]};c.src=a;Ya[Ya.length]=a}animFrame(s)}}function O(a,e,c,d,b,f){this.x=a;this.y=e;this.w=d||256;this.h=d||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=c;this.id=f||a+"_"+e;this.loaded=false;this.image=null}function la(a){a=a?a:(new Date).getTime();if(a-Ib>dc){for(var e=bb.splice(0),c=e.length;c--;)e[c](a);Ib=a}bb.length&&animFrame(la)}function p(a){var e=bb.length==0;bb[bb.length]=a;e&&animFrame(la)}function A(a,e,c,d,b){b=COG.extend({easing:"sine.out",duration:1E3,
progress:null,complete:null,autoInvalidate:true},b);var f=(new Date).getTime(),g=a[e],h=e=="translate",j=b.autoInvalidate,k=c.length&&d.length&&c.length==d.length?c.length:0,o=Array(k),B=Array(k),F=COG.easing(b.easing),T=b.duration,J=b.progress,D=function(L){var W=L-f;L=f+T<=L;for(var ga=a.layer?a.layer.view:null,ba,na=k;na--;){ba=F(W,c[na],o[na],T);B[na]=h?ba|0:ba}g.apply(a,B);j&&ga&&ga.invalidate();if(J){W=[].concat(L?d:B);W.unshift(L);J.apply(a,W)}if(L){a.animations--;g.apply(a,d);b.complete&&
b.complete.apply(a,d)}else p(D)};if(g&&g.apply&&k>0){T=T?T:DEFAULT_DURATION;for(e=k;e--;)o[e]=d[e]-c[e];a.animations++;p(D)}}function i(a){a=COG.extend({fill:true,stroke:false,markerStyle:"simple",hoverStyle:"highlight",typeName:"Marker"},a);Ba.call(this,a)}function n(a,e){e=COG.extend({simplify:false,fill:true,typeName:"Poly"},e);var c=e.simplify;Ba.call(this,e);COG.extend(this,{getPoints:function(){return[].concat(a)},resync:function(d){var b,f,g,h,j,k;d.syncXY(a);k=this.points=Wa.floor(c?Wa.simplify(a):
a);for(var o=k.length;o--;){d=k[o].x;b=k[o].y;h=t(h,wa)||d<h?d:h;j=t(j,wa)||b<j?b:j;f=t(f,wa)||d>f?d:f;g=t(g,wa)||b>g?b:g}this.updateBounds(new l(h,j,f-h,g-j),true)}});this.haveData=a&&a.length>=2}function v(a,e){e.fill=false;n.call(this,a,e)}function G(a){function e(){if(g&&g.width>0){if(!this.centerOffset)this.centerOffset=new r(-g.width>>1,-g.height>>1);this.updateBounds(new l(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,g.width,g.height),false)}}function c(j){if(this.imageUrl=j){var k=
this;w(this.imageUrl,function(o,B){g=o;if(B){var F=h.layer?h.layer.view:null;F&&F.invalidate()}e.apply(k)})}}a=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},a);var d=Ba.prototype.resync,b=0,f=0,g=a.image;Ba.call(this,a);var h=COG.extend(this,{changeImage:c,getProps:function(){this.bounds||e(this,g);return{image:g,x:this.xy.x+b,y:this.xy.y+f}},resync:function(j){d.call(this,j);e.call(this)}});g||c.call(this,this.imageUrl);if(this.centerOffset){b=this.centerOffset.x;f=this.centerOffset.y}}
function R(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.centerOffset=Wa.invert(a.imageAnchor);G.call(this,a)}function ha(a){a=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},a);Ba.call(this,a)}function fa(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,style:null,minXY:null,maxXY:null},a);this.view=null;this.visible=true;COG.observable(COG.extend(this,a))}function I(a,e){if(a&&a.split){var c=a.split(ec);if(c.length>1){a=c[0];e=c[1]}}else if(a&&a.lat){e=a.lon;
a=a.lat}this.lat=parseFloat(a||0);this.lon=parseFloat(e||0)}function $(a){a=parseFloat(a)*Ja;a=M(a);var e=lb*a;return E((1+a)/(1-a)*ka((1-e)/(1+e),lb))/2}function ma(a){return ya/(256<<a)}function oa(a,e){var c=lb*M(a);return ia-2*za(e*ka((1-c)/(1+c),lb/2))}function Da(a,e,c,d){e=sa(e);a.add(d(e,c));return e.length}function sa(a){var e=a?a.length:0,c=Array(e);for(e=e;e--;)c[e]=new I(a[e][1],a[e][0]);return xa.vectorize(c,Jb)}COG.observable(C);window.animFrame=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();var Ia=Array.prototype.indexOf||function(a){for(var e=0;e<this.length;e++)if(this[e]===a)return e;return-1},ya=Math.PI*2,ia=Math.PI/2,Z=Math.abs,ja=Math.ceil,x=Math.round,H=Math.min,S=Math.max,ka=Math.pow,Ea=Math.sqrt,E=Math.log,M=Math.sin,P=Math.asin,pa=Math.cos,za=Math.atan,Fa=Math.atan2,ab="hasOwnProperty",
$b={NaN:1,Infinity:1,"-Infinity":1},Zb=String.prototype.toLowerCase,ac=Object.prototype.toString,wa="undefined",fc="number",ec=/[\,\s]/,gc=T5.newCanvas=function(a,e){var c=document.createElement("canvas");c.width=a?a:0;c.height=e?e:0;T5.trigger("createCanvas",c);return c},Kb=function(){var a={};return{init:function(e,c){var d=a[e];if(!d)throw Error("Unable to locate requested generator: "+e);return new d(c)},register:function(e,c){a[e]=c}}}(),ub=function(){var a={};return{find:function(e){return(a[e]||
[])[0]},register:function(e,c){a[e]||(a[e]=[]);a[e].push(c())}}}(),Ga=function(){var a={"-webkit-user-select":"none",position:"absolute",overflow:"hidden"},e=["-webkit-transform","-moz-transform","-o-transform"],c=false,d;(function(){for(var b=0;b<e.length;b++){d=e[b];if(typeof document.body.style[d]!="undefined"){c=true;break}}})();return{supportTransforms:c,create:function(b,f,g,h){b=document.createElement(b);var j=[];h=h||{};b.id=f;b.className=g||"";for(var k in h)j[j.length]=k+": "+h[k];b.style.cssText=
j.join(";");return b},move:function(b,f,g,h){if(c)b.style[d]="translate3d("+f+"px, "+g+"px, 0px) "+(h||"");else{b.style.left=f+"px";b.style.top=g+"px"}},styles:function(b){return COG.extend({},a,b)}}}();r.prototype={constructor:r,add:function(){for(var a=this.x,e=this.y,c=arguments.length;c--;){a+=arguments[c].x;e+=arguments[c].y}return new r(a,e)},equals:function(a){return this.x===a.x&&this.y===a.y}};l.prototype={constructor:l};var Wa=function(){function a(d,b){return c(d.x-b.x,d.y-b.y)}function e(d,
b){b=b||d.length;if(b<=1)return null;for(var f=Array(b-1),g=Array(b-1),h=0,j,k=0;k<b-1;k++){j=a(d[k],d[k+1]);f[k]=Ea(j.x*j.x+j.y*j.y);g[k]=h+=f[k]}return{edges:f,accrued:g,tota:h}}function c(d,b){return new r(d,b)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var d=0,b=0,f=arguments.length;f--;){d+=arguments[f].x;b+=arguments[f].y}return c(d,b)},absSize:function(d){return S(Z(d.x),Z(d.y))},copy:function(d){return d?c(d.x,d.y):null},diff:a,distance:function(d,b){return e(d,
b).total},edges:e,equals:function(d,b){return d.equals(b)},extendBy:function(d,b,f){var g=pa(b)*f|0;b=M(b)*f|0;return c(d.x-g,d.y-b)},floor:function(d){for(var b=Array(d.length),f=d.length;f--;)b[f]=c(d[f].x|0,d[f].y|0);return b},getRect:function(d){for(var b,f,g,h,j=d.length;j--;){var k=d[j];b=t(b,wa)||k.x<b?k.x:b;f=t(f,wa)||k.y<f?k.y:f;g=t(g,wa)||k.x>g?k.x:g;h=t(h,wa)||k.y>h?k.y:h}return new l(b,f,g-b,h-f)},init:c,invert:function(d){return c(-d.x,-d.y)},min:function(d,b){return c(d.x<b.x?d.x:b.x,
d.y<b.y?d.y:b.y)},max:function(d,b){return c(d.x>b.x?d.x:b.x,d.y>b.y?d.y:b.y)},offset:function(d,b,f){return c(d.x+b,d.y+(f||b))},scale:function(d,b){return c(d.x/b|0,d.y/b|0)},simplify:function(d,b){if(!d)return null;b=b?b:Wa.VECTOR_SIMPLIFICATION;for(var f=[],g=null,h=d.length;h--;){var j=d[h];if(include=!g||h===0||Z(j.x-g.x)+Z(j.y-g.y)>b){f.unshift(j);g=j}}return f},theta:function(d,b,f){f=P((d.y-b.y)/f);return d.x>b.x?f:Math.PI-f},toString:function(d){return d?d.x+", "+d.y:""}}}(),Ma=function(){return{dotProduct:function(a,
e){return a.x*e.x+a.y*e.y}}}(),cb=function(){function a(c){return e(c.x,c.y,c.x2,c.y2)}function e(c,d,b,f){return new l(c,d,(b||c)-c,(f||d)-d)}return{buffer:function(c,d,b){return cb.init(c.x-d,c.y-(b||d),c.x2+d,c.y2+(b||d))},center:function(c){return new r(c.x+(c.w>>1),c.y+(c.h>>1))},copy:a,diagonalSize:function(c){return Ea(c.w*c.w+c.h*c.h)},fromCenter:function(c,d,b,f){b=b>>1;f=f>>1;return e(c-b,d-f,c+b,d+f)},init:e,intersect:function(c,d){var b=S(c.x,d.x),f=S(c.y,d.y),g=H(c.x2,d.x2),h=H(c.y2,
d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null},toString:function(c){return c?"["+c.x+", "+c.y+", "+c.x2+", "+c.y2+"]":""},union:function(c,d){if(c.w===0||c.h===0)return a(d);else if(d.w===0||d.h===0)return a(c);else{var b=H(c.x,d.x),f=H(c.y,d.y),g=S(c.x2,d.x2),h=S(c.y2,d.y2);b=e(b,f,g,h);return b.w>0&&b.h>0?b:null}}}}();Hits=function(){return{diffHits:function(a,e){var c=[],d={},b;for(b=e.length;b--;)d[e[b].target.id]=true;for(b=a.length;b--;)d[a[b].target.id]||(c[c.length]=a[b]);return c},init:function(a,
e,c,d){return{type:a,x:d.x|0,y:d.y|0,elements:[],absXY:e,relXY:c}},initHit:function(a,e,c){return{type:a,target:e,drag:c}},triggerEvent:function(a,e,c,d){e.triggerCustom(a.type+(c?c:"Hit"),{hitType:a.type},d?d:a.elements,a.absXY,a.relXY,new r(a.x,a.y))}}}();var Gb=function(a){function e(b,f){var g=c[b],h;g||(g=c[b]=[]);(h=g[f])||(h=g[f]=[]);return h}a=a||128;var c=[],d={};return{copyInto:function(b){for(var f in d){var g=d[f];b.insert(g.bounds||g,g,f)}},insert:function(b,f,g){var h=b.x/a|0,j=b.y/
a|0,k=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;g=g||f.id||COG.objId("spatial");d[g]=f;for(f=h;f<=k;f++)for(h=j;h<=b;h++)e(f,h).push(g)},remove:function(b,f,g){g=g||f.id;if(d[g]){var h=b.x/a|0;f=b.y/a|0;var j=(b.x+b.w)/a|0;b=(b.y+b.h)/a|0;delete d[g];for(h=h;h<=j;h++)for(var k=f;k<=b;k++){var o=e(h,k),B=Ia.call(o,g);B>=0&&o.splice(B,1)}}},search:function(b){var f=b.y/a|0,g=(b.x+b.w)/a|0,h=(b.y+b.h)/a|0,j=[],k=[];for(b=b.x/a|0;b<=g;b++)for(var o=f;o<=h;o++)j=j.concat(e(b,o));j.sort();for(f=j.length;f--;){g=j[f];
if(h=d[g])k[k.length]=h;for(;f>0&&j[f-1]==g;)f--}return k}}},bc=3E4,Hb={},cc=0;(new Date).getTime();var Va={},Ya=[];O.prototype={constructor:O,load:function(a){var e=this;w(this.url,function(c){e.loaded=true;e.image=c;a&&a()})}};var hc=function(){return COG.observable({fastpan:true,applyStyle:function(){},applyTransform:function(a,e,c){return{restore:null,x:e,y:c}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new r},getViewport:function(){},
hitTest:function(){return false},prepare:function(){},projectXY:null,reset:function(){}})},Lb={},db=C.registerRenderer=function(a,e){Lb[a]=e},ic=C.attachRenderer=function(a,e,c,d,b){a=a.split("/");for(var f=new hc(e,c,d,b),g=0;g<a.length;g++){var h=Lb[a[g]];if(h)f=new h(e,c,d,b,f)}return f};db("canvas",function(a,e,c,d,b){function f(z,X,N){var K,ca;T[X]=function(Y){for(K=ba.length;K--;)if(ca=N[ba[K]])Y[na[K]]=ca}}function g(z,X,N){var K=false;if(X)K=o.isPointInPath(D?X.x-B:X.relXY.x,D?X.y-F:X.relXY.y);
return{draw:N||ga,viewport:z,hit:K,vpX:B,vpY:F,context:o}}d=COG.extend({},d);var h,j,k,o,B=0,F=0,T={},J=null,D=CANI.canvas.pipTransformed,L={},W=function(){},ga=function(){this.fill&&o.fill();this.stroke&&o.stroke()},ba=["fill","stroke","lineWidth","opacity"],na=["fillStyle","strokeStyle","lineWidth","globalAlpha"];if(e){h=e.offsetWidth;j=e.offsetHeight;k=gc(h,j);k.style.cssText="position: absolute; z-index: 1;";a.attachFrame(k,true);o=null}c=COG.extend(b,{applyStyle:function(z){var X=T[z],N=o&&o.canvas?
o.canvas.id:"default",K;L[N]||(L[N]=[]);K=L[N].pop()||"basic";if(X){L[N].push(z);X(o);return K}},applyTransform:function(z){if(z.translateX!==0||z.translateY!==0||z.scaling!==1||z.rotation!==0){o.save();J={undo:function(){o.restore();J=null},x:z.xy.x,y:z.xy.y};o.translate(z.xy.x-B+z.translateX,z.xy.y-F+z.translateY);z.rotation!==0&&o.rotate(z.rotation);z.scaling!==1&&o.scale(z.scaling,z.scaling)}return J},drawTiles:function(z,X){for(var N,K,ca=B-256,Y=F-256,qa=z.x2,aa=z.y2,va=X.length;va--;){N=X[va];
if(K=N.x>=ca&&N.x<=qa&&N.y>=Y&&N.y<=aa)N.loaded?o.drawImage(N.image,N.x-B,N.y-F):N.load(a.invalidate)}},prepare:function(z,X){var N,K=false,ca=X.scaled||X;if(o)o.restore();else o=k.getContext("2d");for(N=z.length;N--;)K=K||z[N].clip;B=ca.x;F=ca.y;if(o){K||o.clearRect(0,0,h,j);o.save()}o.globalCompositeOperation="source-over";return o},prepArc:function(z,X,N){o.beginPath();o.arc(z.xy.x-(J?J.x:B),z.xy.y-(J?J.y:F),z.size>>1,z.startAngle,z.endAngle,false);return g(X,N)},prepImage:function(z,X,N,K){var ca=
(K.x||z.xy.x)-(J?J.x:B),Y=(K.y||z.xy.y)-(J?J.y:F),qa=K.image||z.image;if(qa){o.beginPath();o.rect(ca,Y,K.width||qa.width,K.height||qa.height);return g(X,N,function(){o.drawImage(qa,ca,Y,K.width||qa.width,K.height||qa.height)})}},prepMarker:function(z,X,N){var K=z.xy.x-(J?J.x:B),ca=z.xy.y-(J?J.y:F),Y=z.size,qa=undefined;o.beginPath();switch(z.markerStyle.toLowerCase()){case "image":qa=W;o.rect(K-(Y>>1),ca-(Y>>1),Y,Y);if(z.reset&&z.image){z.image=null;z.reset=false}z.image?o.drawImage(z.image,K-(Y>>
1),ca-(Y>>1),Y,Y):w(z.imageUrl,function(aa){z.image=aa;o.drawImage(z.image,K-(Y>>1),ca-(Y>>1),Y,Y)});break;default:o.moveTo(K,ca);o.lineTo(K-(Y>>1),ca-Y);o.lineTo(K+(Y>>1),ca-Y);o.lineTo(K,ca);break}return g(X,N,qa)},prepPoly:function(z,X,N,K){var ca=true;z=K.points||z.points;K=J?J.x:B;var Y=J?J.y:F;o.beginPath();for(var qa=z.length;qa--;){var aa=z[qa].x-K,va=z[qa].y-Y;if(ca){o.moveTo(aa,va);ca=false}else o.lineTo(aa,va)}return g(X,N)},getContext:function(){return o}});(function(){for(var z in T5.styles)f(null,
z,T5.styles[z]);T5.bind("styleDefined",f)})();c.bind("detach",function(){e.removeChild(k)});return c});db("dom",function(a,e,c,d,b){function f(o){var B=o.image=new Image;j[o.id]=o;B.src=o.url;B.onload=function(){if(k[o.id])h.appendChild(this);else o.image=null};B.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";
return B}function g(o,B,F){var T=[];for(var J in o){var D=o[J];if(F?D[F]:!B[J]){if(D.image&&D.image.parentNode){h.removeChild(D.image);D.image=null}T[T.length]=J}}for(B=T.length;B--;)delete o[T[B]]}var h=null,j={},k={};h=Ga.create("div",COG.objId("domImages"),"",Ga.styles({width:e.offsetWidth+"px",height:e.offsetHeight+"px"}));e.childNodes.length>0?e.insertBefore(h,e.childNodes[0]):e.appendChild(h);a.attachFrame(h);a=COG.extend(b,{drawTiles:function(o,B){for(var F,T,J=o.x,D=o.y,L=B.length;L--;){F=
B[L];if(F.url){T=F.image||f(F);Ga.move(T,F.x-J,F.y-D);k[F.id]=F}}}});a.bind("predraw",function(){g(j,k);k={}});a.bind("detach",function(){e.removeChild(h)});a.bind("reset",function(){for(g(j,k={});h.childNodes.length>0;)h.removeChild(h.childNodes[0])});return a});var vb=C.styles={},jc=C.defineStyle=function(a,e){vb[a]=e;C.trigger("styleDefined",a,vb[a]);return a},Mb=C.defineStyles=function(a){for(var e in a)jc(e,a[e])};C.getStyle=function(a){return vb[a]};C.loadStyles=function(a){COG.jsonp(a,function(e){Mb(e)})};
Mb({basic:{fill:"#ffffff"},highlight:{fill:"#ff0000"},waypoints:{lineWidth:4,stroke:"#003377",fill:"#ffffff"},waypointsHover:{lineWidth:4,stroke:"#ff0000",fill:"#ffffff"}});var Tb=function(a){function e(q,u,y,Q){z(H(S(da+ka(2,Q)-1,0.5),2))}function c(){var q=E(da)/Math.LN2|0;if(q!==0){da=ka(2,q);X(eb+q,kc,lc)}redraw=true}function d(q,u){var y=renderer&&renderer.projectXY?renderer.projectXY(q,u):null;if(!y){y=ea.getViewport();var Q=1/da;y=new r(y?y.x+q*Q:q,y?y.y+u*Q:u)}return y}function b(q,u,y){N("doubleTap",
u,y,d(y.x,y.y));a.scalable&&z(2,d(y.x,y.y),mc,null,nc)}function f(q,u,y){Ka=null;wb=true;W("down",u,y)}function g(q,u,y){W("hover",u,y)}function h(q,u,y,Q){J(u,y,false);if(!Ka){Na=Q.x;Oa=Q.y}}function j(q,u,y){J(u,y,true);wb=false}function k(){clearTimeout(Nb);Nb=setTimeout(function(){renderer.checkSize()},250)}function o(q,u,y){W("tap",u,y);N("tap",u,y,d(y.x,y.y,true))}function B(q){renderer=ic(q||a.renderer,ea,Qa,Ra,a);Ob=a.fastpan&&renderer.fastpan;T()}function F(q,u){u.id=q;u.added=V();u.view=
ea;u.trigger("parentChange",ea,Qa,oc);aa.push(u);aa.sort(function(y,Q){var U=Q.zindex-y.zindex;if(U===0)U=Q.added-y.added;return U});va=aa.length;return u}function T(){Ca&&Ca.unbind();if(renderer){Ca=INTERACT.watch(renderer.interactTarget||Ra);if(a.scalable){Ca.bind("zoom",e);Ca.bind("doubleTap",b)}Ca.bind("pointerDown",f);Ca.bind("pointerMove",h);Ca.bind("pointerUp",j);a.captureHover&&Ca.bind("pointerHover",g);Ca.bind("tap",o)}}function J(q,u,y){if(Ka){q=d(u.x,u.y);Ka.drag.call(Ka.target,Ka,q.x,
q.y,y)&&Ha++;if(y)Ka=null}}function D(q,u){Ra=document.getElementById(u);Ra.appendChild(Sa=Ga.create("div",COG.objId("t5_container"),"",Ga.styles({width:Ra.offsetWidth+"px",height:Ra.offsetHeight+"px"})));mb=Sa.offsetWidth+fb*2;nb=Sa.offsetHeight+fb*2;gb=mb/2;hb=nb/2;xb=Ra.offsetWidth/2;yb=Ra.offsetHeight/2;Sa.appendChild(Qa=Ga.create("div",COG.objId("t5_view"),"",Ga.styles({width:mb+"px",height:nb+"px",margin:-fb+"px 0 0 "+-fb+"px"})));B()}function L(q){var u="",y,Q=false,U;q=q||(new Date).getTime();
if(Q=q-Pb>pc){panSpeed=Z(Na)+Z(Oa);U=Z(ta-zb)>=Qb||Z(ua-Ab)>=Qb;y=da!==Rb;if(panSpeed>0||y)Ha++;U&&panSpeed<ca&&na();ob.index++;ob.draw=Ha||panSpeed||qc||rc;ea.trigger("enterFrame",q,ob);Pb=q}if(renderer&&Q&&ob.draw){pb+=Na;qb+=Oa;if(!Ob||panSpeed<Y){ta=ta-pb|0;ua=ua-qb|0;U=ba();U.panSpeed=panSpeed;renderer.trigger("predraw",U);if(renderer.prepare(aa,U,q,Aa)){Q=qb=y=pb=Ha=0;for(ii=va;ii--;){var ra=aa[ii];if(ra.visible){var La=ra.style?renderer.applyStyle(ra.style,true):null;ra.draw(renderer,U,ea,
q,Aa);La&&renderer.applyStyle(La)}}renderer.trigger("render",U);ea.trigger("drawComplete",U,q);Rb=da;if(Ga.supportTransforms)u+="scale("+da+")";else{Qa.style.zoom=da;if(da>1){y=-(xb-gb/da);Q=-(yb-hb/da)}else if(da<1){y=xb/da-gb;Q=yb/da-hb}}Ga.move(Qa,y,Q,u)}}else Ga.move(Qa,pb,qb);if(wb||!a.inertia)Oa=Na=0;else if(Na!=0||Oa!=0){Na*=0.8;Oa*=0.8;if(Z(Na)<0.5)Na=0;if(Z(Oa)<0.5)Oa=0}if(Aa){q=Aa?Aa.elements:[];if(ib&&ib.type==="hover"){u=Hits.diffHits(ib.elements,q);u.length>0&&Hits.triggerEvent(ib,ea,
"Out",u)}if(q.length>0){y=Aa.x;Q=Aa.y;for(u=q.length;u--;){U=q[u];ra=y;La=Q;var Ta=U&&U.drag&&(!U.canDrag||U.canDrag(U,ra,La));if(Ta){Ka=U;Ka.startX=ra;Ka.startY=La}if(Ta)break}Hits.triggerEvent(Aa,ea)}ib=q.length>0?COG.extend({},Aa):null;Aa=null}}animFrame(L)}function W(q,u,y){Aa=Hits.init(q,u,y,d(y.x,y.y,true));for(q=va;q--;)Bb=Bb||(aa[q].hitGuess?aa[q].hitGuess(Aa.x,Aa.y,ea):false);Bb&&Ha++}function ga(){Ha++}function ba(){var q=new l(ta,ua,mb,nb);q.scaleFactor=da;return q}function na(){var q=
ba();if(q){if(Za||$a)if(q){var u=rb?ta+(q.w>>1):ta,y=sb?ua+(q.h>>1):ua,Q=q.w,U=q.h;if(Za&&Za>Q)if(u+Q>Za)ta=rb?ta:Za-Q;else if(u<0)ta=rb?ta:0;if($a&&$a>U)if(y+U>$a)ua=sb?ua:$a-U;else if(y<0)ua=sb?ua:0}zb=ta;Ab=ua;N("refresh",ea,q);Ha++}}function z(q,u,y,Q,U){var ra;if(!sc){y=false;ra=x(E(q)/Math.LN2);q=ka(2,ra)}if(y)COG.tweenValue(da,q,y,U,function(La,Ta){da=La;if(Ta){ra=x(E(da)/Math.LN2);da=ka(2,ra);Q&&Q()}c()});else{da=q;c()}return ea}function X(q,u,y){q=S(a.minZoom,H(a.maxZoom,q));if(q!==eb){var Q=
ka(2,q-eb),U=gb/Q|0,ra=hb/Q|0;eb=q;K(((u?u:ta+gb)-U)*Q,((y?y:ua+hb)-ra)*Q);Ab=zb=0;N("zoomLevelChange",q);da=1;renderer.trigger("reset");na()}}function N(){for(var q=ea.trigger.apply(null,arguments).cancel,u=aa.length;u--;)q=aa[u].trigger.apply(null,arguments).cancel||q;return!q}function K(q,u,y,Q,U){function ra(){La+=1;if(La>=2){Sb=false;U&&U()}}var La=0;if(y&&panSpeed===0){COG.tweenValue(ta,q,y,Q,function(Ta,Cb){ta=Ta|0;(Cb?ra:ga)();return panSpeed===0});COG.tweenValue(ua,u,y,Q,function(Ta,Cb){ua=
Ta|0;(Cb?ra:ga)();return panSpeed===0});Sb=true}else{ta=q|0;ua=u|0;U&&U()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,fastpan:false,fastpanPadding:128,inertia:true,refreshDistance:256,pannable:false,scalable:false,fps:60,minZoom:1,maxZoom:1,renderer:"canvas",zoomLevel:1},a);var ca=2,Y=5,qa={},aa=[],va=0,Qa=null,Sa=null,Ra,Ka=null,oc=null,tc=!t(window.attachEvent,wa),Bb=false,Ob=true,wb=false,Na=0,Oa=0,qc=0,rc=0,Qb=a.refreshDistance,ta=0,ua=0,pb=0,qb=0,zb=0,Ab=0,Za=null,$a=null,
rb=false,sb=false,fb=a.fastpan?a.fastpanPadding:0,Db=[],Aa=null,ib=null,Nb=0,da=1,Rb=1,Pb=0,Ca=null,ob={index:0,draw:false},sc=true,Sb=false,pc=1E3/a.fps|0,Ha=0,mb,nb,gb,hb,xb,yb,kc,lc,eb=a.zoomLevel,mc=COG.easing("quad.out"),nc=300,ea={id:a.id,padding:fb,attachFrame:function(q,u){Db[Db.length]=q;u&&Qa.appendChild(q)},detach:function(){renderer&&renderer.trigger("detach");Ca&&Ca.unbind();if(Sa){document.getElementById(Sa).removeChild(Sa);Qa=Sa=null}Db=[]},eachLayer:function(q){for(var u=va;u--;)q(aa[u])},
getLayer:function(q){for(var u=0;u<va;u++)if(aa[u].id===q)return aa[u];return null},getZoomLevel:function(){return eb},setLayer:function(q,u){for(var y=0;y<va;y++)if(aa[y].id===q){aa.splice(y,1);break}if(u){F(q,u);u.trigger("refresh",ea,ba());ea.trigger("layerChange",ea,u)}Ha++;return u},invalidate:ga,refresh:na,resetScale:function(){da=1},scale:z,setZoomLevel:X,syncXY:function(){},triggerAll:N,removeLayer:function(q){a:{for(var u=va;u--;)if(aa[u].id===q){q=u;break a}q=-1}if(q>=0&&q<va){ea.trigger("layerRemove",
ea,aa[q]);aa.splice(q,1);Ha++}va=aa.length},getOffset:function(){return new r(ta,ua)},getRenderer:function(){return renderer},getScaleFactor:function(){return da},setMaxOffset:function(q,u,y,Q){Za=q;$a=u;rb=y;sb=Q},getViewport:ba,updateOffset:K,pan:function(q,u){Na=q;Oa=u;Ha++}};COG.observable(ea);ea.bind("resync",function(){});COG.configurable(ea,["container","captureHover","scalable","pannable","inertia","minZoom","maxZoom","renderer","zoom"],COG.paramTweaker(a,null,{container:D,captureHover:T,
scalable:T,pannable:T,renderer:function(q,u){if(renderer){renderer.trigger("detach");renderer=null}B(u);Ha++}}),true);CANI.init(function(q){ea.markers=F("markers",new tb({zindex:20}));qa=q;D(null,a.container);tc?window.attachEvent("onresize",k):window.addEventListener("resize",k,false)});animFrame(L);return ea},Ba=function(a){a=COG.extend({style:null,xy:null,size:10,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},a);COG.extend(this,a);this.id=COG.objId(this.typeName);
this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Ba.prototype={constructor:Ba,animate:function(a,e,c,d){A(this,a,e,c,d)},drag:null,draw:null,getProps:null,resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(cb.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=a},translate:function(a,e){this.translateX=
a;this.translateY=e},updateBounds:function(a,e){a&&(!this.bounds||a.x!=this.bounds.x||a.y!=this.bounds.y)&&this.trigger("move",this,a,this.bounds);this.bounds=a;if(e)this.xy=cb.center(this.bounds)}};var dc=1E3/60|0,bb=[],Ib=0;i.prototype=COG.extend(Ba.prototype,{constructor:i});n.prototype=COG.extend({},Ba.prototype,{constructor:n});v.prototype=COG.extend({},n.prototype);G.prototype=COG.extend({},Ba.prototype,{constructor:G});R.prototype=COG.extend({},G.prototype,{constructor:R});ha.prototype=COG.extend(Ba.prototype,
{constructor:ha});fa.prototype={constructor:fa,clip:null,cycle:function(){},draw:function(){},hitGuess:null};db=function(a,e){function c(h,j){var k=j&&j.getZoomLevel?j.getZoomLevel():0;f[k]||(f[k]=m(k));b=f[k]}e=COG.extend({imageLoadArgs:{}},e);var d=a?Kb.init(a,e).run:null,b=null,f=[],g=COG.extend(new fa(e),{draw:function(h,j){h.drawTiles&&h.drawTiles(j,b.search(cb.buffer(j,128)))}});g.bind("refresh",function(h,j,k){var o=(new Date).getTime();b&&d(j,k,b,function(){j.invalidate();COG.info("GEN COMPLETED IN "+
((new Date).getTime()-o)+" ms")})});g.bind("parentChange",c);g.bind("resync",c);return g};var Ub=function(a){function e(k,o,B,F){var T=this.dragOffset;if(!T)T=this.dragOffset=new r(k.startX-this.xy.x,k.startY-this.xy.y);this.xy.x=o-T.x;this.xy.y=B-T.y;if(F){delete this.dragOffset;if(k=j.view){k.syncXY([this.xy],true);k.invalidate()}this.trigger("dragDrop")}return true}function c(k){clearTimeout(h);h=setTimeout(function(){f.sort(function(o,B){if(B.xy&&o.xy){var F=B.xy.y-o.xy.y;return F!=0?F:B.xy.x-
o.xy.x}});k&&k.invalidate()},50)}function d(k,o,B,F){F&&g.remove(F,o);g.insert(B,o)}function b(k,o){g=m(o.getZoomLevel(),g);for(var B=f.length;B--;)f[B].resync(o)}a=COG.extend({zindex:10},a);var f=[],g,h=0,j=COG.extend(new fa(a),{itemCount:0,add:function(k,o){if(k){k.layer=j;if(o)f.unshift(k);else f[f.length]=k;var B=j.view;if(B){k.resync(B);g&&k.bounds&&g.insert(k.bounds,k);c(B)}k.bind("move",d)}j.itemCount=f.length},clear:function(){g=new Gb;f=[];j.itemCount=0},draw:function(k,o,B,F,T){B={};F=g&&
o?g.search(o):[];for(var J=F.length;J--;){var D=F[J],L=D.style||j.style,W,ga=k.applyTransform(D),ba=D.getProps?D.getProps(k):B;if(ba=(W=k["prep"+D.typeName])?W.call(k,D,o,T,ba):null){if(T&&ba.hit){T.elements.push(Hits.initHit(D.type,D,D.draggable?e:null));W=T.type+"Style";L=D[W]||j[W]||L}L=L?k.applyStyle(L,true):null;(W=D.draw||ba.draw)&&W.call(D,ba);L&&k.applyStyle(L)}ga&&ga.undo&&ga.undo()}},find:function(){return[].concat(f)},hitGuess:function(k,o){return g&&g.search({x:k-10,y:o-10,w:20,h:20}).length>
0}});j.bind("parentChange",b);j.bind("resync",b);return j},tb=function(a){return new Ub(a)};I.prototype={constructor:I,offset:function(a,e){var c=this.lat*Ja,d=this.lon*Ja,b=c+a/jb;c=P(M(e/jb)/pa(c));d=d+c;b=(b+ia)%Math.PI-ia;d%=ya;return new I(b*Ua,d*Ua)},toString:function(a){return this.lat+(a||" ")+this.lon}};COG.extend(C,{ex:COG.extend,is:t,ticks:V,userMessage:function(a,e,c){C.trigger("userMessage",a,e,c)},indexOf:Ia,DOM:Ga,Rect:l,XY:Wa,XYRect:cb,Vector:Ma,Hits:Hits,Generator:Kb,Service:ub,tweenValue:COG.tweenValue,
easing:COG.easing,Tile:O,TileLayer:db,getImage:w,View:Tb,ViewLayer:fa,ImageLayer:db,Drawable:Ba,Marker:i,Poly:n,Line:v,Arc:ha,ImageDrawable:G,ImageMarker:R,DrawLayer:Ub,ShapeLayer:tb,Map:function(a){function e(h,j,k){g.setZoomLevel(j);c(h,k)}function c(h,j,k,o){h=Pa.init(h,ma(g.getZoomLevel()));var B=g.getViewport();g.updateOffset(h.x-(B.w>>1),h.y-(B.h>>1),k,o,function(){j&&j(g)})}a=COG.extend({zoomLevel:1,minZoom:1,maxZoom:18,pannable:true,scalable:true},a);var d=new r,b=0,f=a.tapExtent;a.adjustScaleFactor=
function(h){return Math.pow(2,(h<1?Math.floor:Math.ceil)(Math.log(h)))};var g=COG.extend(new Tb(a),{getBoundingBox:function(){var h=g.getViewport();return h?Xa.init(Pa.toPos(new r(h.x,h.y2),b),Pa.toPos(new r(h.x2,h.y),b)):null},getCenterPosition:function(){var h=g.getViewport();if(h){h=new r(h.x+(h.w>>1),h.y+(h.h>>1));return Pa.toPos(h,b)}return null},gotoBounds:function(h,j){var k=Xa.getZoomLevel(h,g.getViewport());e(Xa.getCenter(h),k,j)},gotoPosition:e,panToPosition:c,syncXY:function(h,j){return(j?
Pa.syncPos:Pa.sync)(h,b)}});g.bind("tap",function(h,j,k,o){h=Pa.toPos(o,b);var B=Pa.toPos(Wa.offset(o,-f,f),b);o=Pa.toPos(Wa.offset(o,f,-f),b);g.trigger("geotap",j,k,h,Xa.init(B,o))});g.bind("refresh",function(h,j,k){if(d.x!=k.x||d.y!=k.y){g.trigger("boundsChange",g.getBoundingBox());d.x=k.x;d.y=k.y}});g.bind("zoomLevelChange",function(h,j){var k;b=ma(j);k=ya/b|0;g.setMaxOffset(k,k,true,false);g.resetScale();g.triggerAll("resync",g)});return g},Pos:I});var Eb=[1.406245461070741,1.321415085624082,
1.077179995861952,0.703119412486786,0.488332580888611],Ja=Math.PI/180,Ua=180/Math.PI,Fb=ia,Vb=-Fb,Wb=ya,uc=-Wb,jb=6371,lb=0.08181919084262157,kb=null,Xb={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},xa=function(){function a(c){return!c||c.lat===0&&c.lon===0}function e(c,d){return new I(c,d)}return{calcDistance:function(c,d){if(a(c)||a(d))return 0;var b=(d.lat-c.lat)*Ja>>1,f=(d.lon-c.lon)*Ja>>1;b=M(b)*M(b)+pa(c.lat*Ja)*pa(d.lat*Ja)*M(f)*M(f);
b=2*Fa(Ea(b),Ea(1-b));return jb*b},copy:function(c){return c?e(c.lat,c.lon):null},empty:a,equal:function(c,d){return c&&d&&c.lat==d.lat&&c.lon==d.lon},fromMercatorPixels:function(c,d){for(var b=ka(Math.E,-d),f=ia-2*za(b),g=oa(f,b),h=0;h<12&&Z(f-g)>1.0E-7;){f=g;g=oa(f,b);h++}return e(g*Ua,c%360*Ua)},generalize:function(c,d,b){var f=c.length,g=[],h=null;b||(b=250);b/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");for(var j=f;j--;)if(j===0)g.unshift(c[j]);else{var k=!h||
xa.inArray(c[j],d)?b:xa.calcDistance(h,c[j]);if(c[j]&&k>=b){g.unshift(c[j]);h=c[j]}}COG.info("generalized "+f+" positions into "+g.length+" positions");return g},inArray:function(c,d){for(var b=xa.equal,f=d.length;f--;)if(b(c,d[f]))return true;return false},inBounds:function(c,d){var b=!(xa.empty(c)||xa.empty(d));return b=(b=b&&c.lat>=d.min.lat&&c.lat<=d.max.lat)&&c.lon>=d.min.lon&&c.lon<=d.max.lon},init:e,offset:function(c,d,b){return c.offset(d,b)},parse:function(c){return new I(c)},parseArray:function(c){var d=
c.length,b=Array(d);for(d=d;d--;)b[d]=new I(c[d]);return b},toMercatorPixels:function(c){return T5.XY.init(parseFloat(c.lon)*Ja,$(c.lat))},toString:function(c){return c?c.toString():""},vectorize:function(c,d){function b(){for(var j=0,k=d.chunkSize,o=f;o--;){g[o]=T5.GeoXY.init(c[o]);j+=1;if(j>k)break}f=o;if(f<=0)d.callback&&d.callback(g);else animFrame(b)}var f=c.length,g=Array(f);d=COG.extend({chunkSize:500,async:true,callback:null},d);if(!d.async){for(var h=f;h--;)g[h]=T5.GeoXY.init(c[h]);return g}animFrame(b);
return null}}}(),Xa=function(){function a(b,f,g){var h=new r(0,f.lat-b.lat);h.x=(g||t(g,wa))&&b.lon>f.lon?360-b.lon+f.lon:f.lon-b.lon;return h}function e(b,f){return Xa.init(new I(b.min.lat-f,b.min.lon-f%360),new I(b.max.lat+f,b.max.lon+f%360))}function c(b){var f=a(b.min,b.max);return new I(b.min.lat+(f.y>>1),b.min.lon+(f.x>>1))}function d(b,f){return{min:new I(b),max:new I(f)}}return{calcSize:a,createBoundsFromCenter:function(b,f){var g=f/jb,h=b.lat*Ja,j=b.lon*Ja,k=h-g,o=h+g;if(k>Vb&&o<Fb){h=P(M(g)/
pa(h));g=(j-h)%ya;j=(j+h)%ya}else{k=S(k,Vb);o=H(o,Fb);g=uc;j=Wb}return Xa.init(new I(k*Ua,g*Ua),new I(o*Ua,j*Ua))},expand:e,forPositions:function(b,f){var g=null,h=T5.ticks();f||(f="auto");for(var j=b.length;j--;)if(g){var k=a(g.min,b[j],false),o=a(b[j],g.max,false);if(k.x<0)g.min.lon=b[j].lon;if(k.y<0)g.min.lat=b[j].lat;if(o.x<0)g.max.lon=b[j].lon;if(o.y<0)g.max.lat=b[j].lat}else g=d(b[j],b[j]);if(f){if(f=="auto"){j=a(g.min,g.max);f=S(j.x,j.y)*0.3}g=e(g,f)}COG.trace("calculated bounds for "+b.length+
" positions",h);return g},getCenter:c,getZoomLevel:function(b,f){var g=c(b);g=H(x(Z(g.lat)*0.05),Eb.length);var h=Eb[g],j=a(b.min,b.max);g=ja(E(Eb[3]*f.h/j.y)/E(2));h=ja(E(h*f.w/j.x)/E(2));return H(isNaN(g)?1E3:g,isNaN(h)?1E3:h)},init:d,isEmpty:function(b){return!b||xa.empty(b.min)||xa.empty(b.max)},toString:function(b){return"min: "+xa.toString(b.min)+", max: "+xa.toString(b.max)}}}();ub=function(){var a=/^(\d+).*$/,e=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(c,d){a.lastIndex=-1;if(a.test(c))for(var b=
c.replace(a,"$1"),f=d.split(","),g=0;g<f.length;g++){e.lastIndex=-1;if(e.test(f[g])){var h=e.exec(f[g]);if(b>=parseInt(h[1],10)&&b<=parseInt(h[2],10))return true}else if(b==f[g])return true}return false},normalize:function(c){if(!c)return"";c=c.toUpperCase();if(!kb){var d=[];for(var b in Xb)d.push(b);kb=RegExp("(\\s)("+d.join("|")+")(\\s|$)","i")}kb.lastIndex=-1;if(d=kb.exec(c))c=c.replace(kb,"$1"+Xb[d[2]]);return c},toString:function(c){return c.streetDetails+" "+c.location}}}();var Pa=C.GeoXY=function(){function a(d,
b){if(d.length){for(var f,g,h,j,k=d.length;k--;){a(d[k],b);f=t(f,wa)||d.x<f?d.x:f;g=t(g,wa)||d.y<g?d.y:g;h=t(h,wa)||d.x>h?d.x:h;j=t(j,wa)||d.y>j?d.y:j}return new l(f,g,h-f,j-g)}else if(d.mercXY){f=d.mercXY;d.x=x((f.x+Math.PI)/b);d.y=x((Math.PI-f.y)/b);d.rpp=b}return d}function e(d,b){if(d.length)for(var f=d.length;f--;)e(d[f],b);else{d.mercXY=new r(d.x*b-Math.PI,Math.PI-d.y*b);d.pos=xa.fromMercatorPixels(d.mercXY.x,d.mercXY.y)}return d}function c(d,b,f){d.pos=b;d.mercXY=xa.toMercatorPixels(b);(f=
t(f,fc)?f:d.rpp)&&a(d,f)}return{init:function(d,b){var f=new r;c(f,d,b);return f},sync:a,syncPos:e,toPos:function(d,b){b=b||d.rpp;return xa.fromMercatorPixels(d.x*b-Math.PI,Math.PI-d.y*b)},updatePos:c}}(),vc="featurecollection",wc="feature",Jb={async:false};Ma={processor:null,group:"shapes",layerClass:tb};var xc={point:COG.extend({},Ma,{processor:function(a,e,c,d){e=sa([e.coordinates],Jb);if(e.length>0)if(c=d.marker(e[0],c)){a.add(c);return e.length}},group:"markers",layerClass:tb}),linestring:COG.extend({},
Ma,{processor:function(a,e,c,d){e=sa(e&&e.coordinates?e.coordinates:[]);return Da(a,e,c,d.line)}}),multilinestring:COG.extend({},Ma,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=0,f=e.length;f--;)b+=Da(a,e[f],c,d.line);return b}}),polygon:COG.extend({},Ma,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];if(e.length>0)return Da(a,e[0],c,d.poly);return 0}}),multipolygon:COG.extend({},Ma,{processor:function(a,e,c,d){e=e&&e.coordinates?e.coordinates:[];for(var b=
0,f=0;f<e.length;f++)b+=Da(a,e[f][0],c,d.poly);return b}})},Yb=function(a,e,c,d){function b(D,L){var W=D.processor,ga=k+D.group,ba=COG.extend({},D,c,{properties:L.properties});if(W){var na=J[ga];if(!na){na=new D.layerClass({id:ga});J[ga]=na}return W(na,L.data,ba,d)}return 0}function f(D,L){var W=D&&D.type?D.type.toLowerCase():null;return W&&W===wc?f(D.geometry,D.properties):{type:W,isCollection:W?W===vc:false,definition:xc[W],data:D,properties:L?L:D.properties}}function g(D){var L=0,W=COG.extend({},
c),ga=o;D=D?D:(new Date).getTime();if(!F){for(;ga<B;ga++){D=f(j?j(a[ga]):a[ga]);var ba=null;if(D.isCollection){W.layerPrefix=k+T++ +"-";F=new Yb(D.data.features,function(na){F=null;for(var z in na)J[z]=na[z];o>=B&&e&&e(J)},W);ba+=1}else if(D.definition)ba=b(D.definition,D);L+=ba?ba:1;if(L>=h)break}o=ga+1;if(F||o<B)animFrame(g);else e&&e(J)}}c=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},c);d=COG.extend({marker:function(D){return new i({xy:D})},line:function(D,L){return new n(D,
COG.extend({},c,L))},poly:function(D,L){return new n(D,COG.extend({fill:true},c,L))}},d);var h=500,j=c.rowPreParse,k=c.layerPrefix,o=0,B=0,F=null,T=0,J={};if(a){t(a,"array")||(a=[a]);B=a.length;animFrame(g)}};Ma=C.GeoJSON={parse:function(a,e,c){return new Yb(a,e,c)}};C.GeoShape=function(a,e){e=COG.extend({autoParse:true},e);for(var c=Array(a.length),d=e.autoParse,b=T5.Geo.Position.parse,f=a.length;f--;)c[f]=T5.GeoXY.init(d?b(a[f]):a[f]);return new T5.Poly(c,e)};C.Geo={distanceToString:function(a){if(a>
1E3)return~~(a/10)/100+" km";return a?a+" m":""},dist2rad:function(a){return a/jb},radsPerPixel:ma,Position:xa,BoundingBox:Xa,Radius:function(a,e){return{distance:parseInt(a,10),uom:e}},Address:function(a){return a=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},a)},A:ub,GeoJSON:Ma}})(T5);
