COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var H=arguments[0]||{},T,w=1,p=arguments.length;w<p;w++)if((T=arguments[w])!==null)for(var j in T){var k=T[j];if(H!==k)if(k!==undefined)H[j]=k}return H};
(function(){var H=Object.prototype.hasOwnProperty,T=0,w={};w.toID=function(p){return p.replace(/\s/g,"-")};w.objId=function(p){return(p?p:"obj")+T++};w.isFunction=function(p){return toString.call(p)==="[object Function]"};w.isArray=function(p){return toString.call(p)==="[object Array]"};w.isPlainObject=function(p){if(!p||toString.call(p)!=="[object Object]"||p.nodeType||p.setInterval)return false;if(p.constructor&&!H.call(p,"constructor")&&!H.call(p.constructor.prototype,"isPrototypeOf"))return false;
var j;for(j in p);return j===undefined||H.call(p,j)};w.isEmptyObject=function(p){for(var j in p)return false;return true};w.isXmlDocument=function(p){return toString.call(p)==="[object Document]"};w.contains=function(p,j){var k=p,r=arguments,y=1;if(j&&module.isArray(j)){r=j;y=0}for(y=y;y<r;y++)k=k&&typeof foo[r[y]]!=="undefined";return k};w.formatStr=function(p){if(arguments.length<=1)return p;for(var j=arguments.length-2,k=0;k<=j;k++)p=p.replace(RegExp("\\{"+k+"\\}","gi"),arguments[k+1]);return p};
w.wordExists=function(p,j){var k="";if(j.toString)j=j.toString();for(var r=0;r<j.length;r++)k+=!/\w/.test(j[r])?"\\"+j[r]:j[r];return RegExp("(^|\\s|\\,)"+k+"(\\,|\\s|$)","i").test(p)};COG.extend(COG,w)})();
(function(){function H(k){return typeof console!=="undefined"?function(){console[k](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var T=window.console&&window.console.markTimeline,w=H("error"),p=H("info"),j=function(){return T?function(k,r){console.markTimeline(k+(r?": "+((new Date).getTime()-r)+"ms":""))}:function(){}}();COG.extend(COG,{trace:j,debug:H("debug"),info:p,warn:H("warn"),error:w,exception:function(k){if(w)for(var r in k)p("ERROR DETAIL: "+r+
": "+k[r])}})})();
(function(){function H(w,p){var j=w.hasOwnProperty("obsHandlers")?w.obsHandlers:null;j[p]||(j[p]=[]);return j[p]}var T=0;COG.observable=function(w){if(!w)return null;if(!(w.hasOwnProperty("obsHandlers")?w.obsHandlers:null))w.obsHandlers={};if(!w.hasOwnProperty("bind")){w.bind=function(p,j){var k="callback"+T++;H(w,p).unshift({fn:j,id:k});return k};w.triggerCustom=function(p,j){var k=H(w,p),r={cancel:false,name:p,source:this},y;j&&COG.extend(r,j);if(!k)return null;y=Array.prototype.slice.call(arguments,2);
w.eventInterceptor&&w.eventInterceptor(p,r,y);y.unshift(r);for(var P=k.length;P--&&!r.cancel;)k[P].fn.apply(this,y);return r};w.trigger=function(p){var j=Array.prototype.slice.call(arguments,1);j.splice(0,0,p,null);return w.triggerCustom.apply(this,j)};w.unbind=function(p,j){if(typeof p==="undefined")w.obsHandlers={};else for(var k=H(w,p),r=0;k&&r<k.length;r++)if(k[r].id===j){k.splice(r,1);break}return w}}return w}})();
(function(){function H(j,k){j[k]||(j[k]=function(r){return j.configure(k,r)})}function T(j){j.gtConfId="configurable"+p++;j.gtConfig={};j.gtConfigFns=[];return j.gtConfig}var w={},p=0;COG.paramTweaker=function(j,k,r){return function(y,P){if(typeof P!=="undefined"){if(y in j)j[y]=P;r&&y in r&&r[y](y,P)}else return k&&y in k?k[y](y):j[y]}};COG.configurable=function(j,k,r,y){if(j){j.gtConfId||T(j);var P=j.gtConfId,m=j.gtConfig,D=j.gtConfigFns;w[P]=j;D.push(r);for(r=k.length;r--;){m[k[r]]=true;y&&H(j,
k[r])}if(!j.configure)j.configure=function(x,F){if(m[x]){for(var t=D.length;t--;){var q=D[t](x,F);if(typeof q!=="undefined")return q}return w[P]}return null}}}})();
(function(){function H(j){var k=document.createElement("script"),r=false;k.src=j;k.async=true;k.onload=k.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){r=true;k.onload=k.onreadystatechange=null;k&&k.parentNode&&k.parentNode.removeChild(k)}};w||(w=document.getElementsByTagName("head")[0]);w.appendChild(k)}var T=0,w,p=this;COG.jsonp=function(j,k,r){j+=j.indexOf("?")>=0?"&":"?";var y="json"+ ++T;p[y]=function(P){k(P);p[y]=null;try{delete p[y]}catch(m){}};
H(j+(r?r:"callback")+"="+y);return y}})();
(function(){var H=1.70158,T=Math.PI/2,w=1E3/60|0,p=Math.abs,j=Math.pow,k=Math.sin,r=Math.asin,y=Math.cos,P={linear:function(m,D,x,F){return x*m/F+D},backin:function(m,D,x,F){return x*(m/=F)*m*((H+1)*m-H)+D},backout:function(m,D,x,F){return x*((m=m/F-1)*m*((H+1)*m+H)+1)+D},backinout:function(m,D,x,F){return(m/=F/2)<1?x/2*m*m*(((H*=1.525)+1)*m-H)+D:x/2*((m-=2)*m*(((H*=1.525)+1)*m+H)+2)+D},bouncein:function(m,D,x,F){return x-P.bounceout(F-m,0,x,F)+D},bounceout:function(m,D,x,F){return(m/=F)<1/2.75?x*
7.5625*m*m+D:m<2/2.75?x*(7.5625*(m-=1.5/2.75)*m+0.75)+D:m<2.5/2.75?x*(7.5625*(m-=2.25/2.75)*m+0.9375)+D:x*(7.5625*(m-=2.625/2.75)*m+0.984375)+D},bounceinout:function(m,D,x,F){return m<F/2?P.bouncein(m*2,0,x,F)/2+D:P.bounceout(m*2-F,0,x,F)/2+x/2+D},cubicin:function(m,D,x,F){return x*(m/=F)*m*m+D},cubicout:function(m,D,x,F){return x*((m=m/F-1)*m*m+1)+D},cubicinout:function(m,D,x,F){if((m/=F/2)<1)return x/2*m*m*m+D;return x/2*((m-=2)*m*m+2)+D},elasticin:function(m,D,x,F,t,q){if(m==0)return D;if((m/=
F)==1)return D+x;q||(q=F*0.3);if(!t||t<p(x)){t=x;x=q/4}else x=q/TWO_PI*r(x/t);return-(t*j(2,10*(m-=1))*k((m*F-x)*TWO_PI/q))+D},elasticout:function(m,D,x,F,t,q){var A;if(m==0)return D;if((m/=F)==1)return D+x;q||(q=F*0.3);if(!t||t<p(x)){t=x;A=q/4}else A=q/TWO_PI*r(x/t);return t*j(2,-10*m)*k((m*F-A)*TWO_PI/q)+x+D},elasticinout:function(m,D,x,F,t,q){var A;if(m==0)return D;if((m/=F/2)==2)return D+x;q||(q=F*0.3*1.5);if(!t||t<p(x)){t=x;A=q/4}else A=q/TWO_PI*r(x/t);if(m<1)return-0.5*t*j(2,10*(m-=1))*k((m*
F-A)*TWO_PI/q)+D;return t*j(2,-10*(m-=1))*k((m*F-A)*TWO_PI/q)*0.5+x+D},quadin:function(m,D,x,F){return x*(m/=F)*m+D},quadout:function(m,D,x,F){return-x*(m/=F)*(m-2)+D},quadinout:function(m,D,x,F){if((m/=F/2)<1)return x/2*m*m+D;return-x/2*(--m*(m-2)-1)+D},sinein:function(m,D,x,F){return-x*y(m/F*T)+x+D},sineout:function(m,D,x,F){return x*k(m/F*T)+D},sineinout:function(m,D,x,F){return-x/2*(y(Math.PI*m/F)-1)+D}};COG.tweenValue=function(m,D,x,F,t){function q(V){V=V?V:(new Date).getTime();if(da+w<V){var ea=
V-A,Z=x(ea,m,Y,F),ma=A+F<=V;V=!ma;if(t){ea=t(Z,ma,ea);V=typeof ea!="undefined"?ea&&V:V}V&&animFrame(q)}}var A=(new Date).getTime(),da=0,Y=D-m;animFrame(q);return{}};COG.easing=function(m){return P[m.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(m,D){P[m.replace(/[\-\_\s\.]/g,"").toLowerCase()]=D}})();
(function(){var H=/^P(\d+Y)?(\d+M)?(\d+D)?$/,T=/^(\d+H)?(\d+M)?(\d+S)?$/,w={8601:function(j){j=j.split("T");var k=null;k=null;var r=0,y=0;H.lastIndex=-1;k=H.exec(j[0]);r+=k[3]?parseInt(k[3].slice(0,-1),10):0;T.lastIndex=-1;k=T.exec(j[1]);y+=k[1]?parseInt(k[1].slice(0,-1),10)*3600:0;y+=k[2]?parseInt(k[2].slice(0,-1),10)*60:0;y+=k[3]?parseInt(k[3].slice(0,-1),10):0;return new p(r,y)}},p=COG.Duration=function(j,k){return{days:j?j:0,seconds:k?k:0}};COG.addDuration=function(){for(var j=new p,k=arguments.length;k--;){j.days+=
arguments[k].days;j.seconds+=arguments[k].seconds}if(j.seconds>=86400){j.days+=~~(j.seconds/86400);j.seconds%=86400}return j};COG.formatDuration=function(j){var k,r,y="";if(j.days)y=j.days+" days ";if(j.seconds){j=j.seconds;if(j>=3600){k=~~(j/3600);j-=k*3600}if(j>=60){r=Math.round(j/60);j-=r*60}if(k)y=y+k+(k>1?" hrs ":" hr ")+(r?(r>10?r:"0"+r)+" min ":"");else if(r)y=y+r+" min";else if(j>0)y=y+(j>10?j:"0"+j)+" sec"}return y};COG.parseDuration=function(j,k){var r=k?w[k]:null;if(r)return r(j);COG.Log.warn("Could not find duration parser for specified format: "+
k);return new p}})();COG.ObjectStore=function(){var H={},T={},w="obj_"+(new Date).getTime(),p=0,j=Object.prototype.hasOwnProperty;return{add:function(k,r){var y;r=r?r:"default";if(k&&k.constructor)if(!j.call(k,"id"))k.id=w+ ++p;y=T[r]?T[r]:T[r]=[];H[k.id]=y.length;y[k.length]=k}}};var CANI={};
(function(H){var T=[],w=0,p=false,j=H.register=function(k,r){T.push({section:k,run:r})};H.init=function(k){function r(){if(w<T.length){var P=T[w++];y[P.section]||(y[P.section]={});P.run(y[P.section],r)}else{for(P in y)H[P]=y[P];p=true;k&&k(H)}}var y={};if(p&&k)k(H);else{w=0;r()}};j("canvas",function(k,r){function y(){var x,F=P.getContext("2d");F.save();try{F.translate(50,50);F.beginPath();F.rect(0,0,20,20);x=F.isPointInPath(10,10)}finally{F.restore()}return x}var P=document.createElement("canvas"),
m=typeof FlashCanvas!="undefined",D=typeof G_vmlCanvasManager!="undefnined";P.width=200;P.height=200;k.pipTransformed=m||D?false:y();r()})})(CANI);
INTERACT=function(){function H(t){return function(q,A,da){(da?da:t?document.body:document).addEventListener(q,A,false)}}function T(t){return function(q,A,da){(da?da:t?document.body:document).removeEventListener(q,A,false)}}function w(t,q,A){(A?A:document).attachEvent("on"+t,q)}function p(t,q,A){(A?A:document).detachEvent("on"+t,q)}function j(t,q){return{x:t?t:0,y:q?q:0,count:1}}function k(t,q){x.push(COG.extend({handler:null,checks:{},type:t},q))}function r(t){var q=0,A=0;if(t.offsetParent){do{q+=
t.offsetLeft;A+=t.offsetTop;t=t.offsetParent}while(t)}return{left:q,top:A}}function y(t,q){return{source:t,target:q.target?q.target:q.srcElement}}function P(t,q){for(var A=t.target?t.target:t.srcElement;A&&A!==q&&A.nodeName&&A.nodeName.toUpperCase()!="CANVAS";)A=A.parentNode;return A&&A===q}function m(t,q){return{x:t.x-(q?q.left:0),y:t.y-(q?q.top:0)}}function D(t){if(t.preventDefault){t.preventDefault();t.stopPropagation()}else t.cancelBubble&&t.cancelBubble()}var x=[],F=function(t,q,A){function da(W,
fa,ha,M){var Q=0,$=0,B=0;COG.tweenValue(0,W,ha,M,function(K){B=Q;Q=K});COG.tweenValue(0,fa,ha,M,function(K){Y.trigger("pan",Q-B,K-$);$=K})}A=COG.extend({binder:null,unbinder:null,observable:null},A);for(var Y=A.observable,V=null,ea=[],Z=[],ma,oa,ra={bind:function(){return Y.bind.apply(null,arguments)},pannable:function(W){V=COG.extend({inertia:true},W);return ra},unbind:function(){Y.unbind();for(var W=0;W<ea.length;W++)ea[W].unbind();return ra}},Ca=0;Ca<q.length;Ca++)ea.push(q[Ca](t,Y,A));Y.bind("pointerDown",
function(){Z=[];oa=ma=0});Y.bind("pointerMove",function(W,fa,ha,M){if(V){Z[Z.length]={ticks:(new Date).getTime(),x:M.x,y:M.y};Y.trigger("pan",M.x,M.y)}ma+=M.x?M.x:0;oa+=M.y?M.y:0});Y.bind("pointerUp",function(W,fa,ha){if(Math.abs(ma)>20||Math.abs(oa)>20){if(V){ha=Z.length;var M,Q;fa=0;for(Q=Z.length;--Q>1&&fa<50;)fa+=Z[Q].ticks-Z[Q-1].ticks;if(ha-Q>1){W=Z[ha-1].x-Z[Q].x;M=Z[ha-1].y-Z[Q].y;Q=Math.sqrt(W*W+M*M)|0;if(Q>15){W=Z[ha-1].x-Z[0].x;M=Z[ha-1].y-Z[0].y;Q=Math.sqrt(W*W+M*M)|0;ha=Math.asin(M/Q);
fa=Q*500/fa|0;fa=fa>300?300:fa;da(Math.cos(W>0?ha:Math.PI-ha)*fa,Math.sin(ha)*fa,COG.easing("sine.out"),500)}}}}else Y.trigger("tap",fa,ha)});return ra};k("pointer",{handler:function(t,q,A){function da(B){if(B.pageX&&B.pageY)return j(B.pageX,B.pageY);else{var K=document.documentElement,S=document.body;return j(B.clientX+(K&&K.scrollLeft||S&&S.scrollLeft||0)-(K&&K.clientLeft||S&&S.clientLeft||0),B.clientY+(K&&K.scrollTop||S&&S.scrollTop||0)-(K&&K.clientTop||S&&S.clientTop||0))}}function Y(B){if(P(B,
t))if(W=ma(B)){var K=da(B);t.style.cursor="move";D(B);Q=K.x;$=K.y;fa=j(Q,$);q.triggerCustom("pointerDown",y("mouse",B),fa,m(fa,r(t)))}}function V(B){var K=da(B);ha=K.x;M=K.y;if(P(B,t))oa(B,W?"pointerMove":"pointerHover")}function ea(B){if(W&&ma(B)){W=false;if(P(B,t)){t.style.cursor="default";oa(B,"pointerUp")}}}function Z(B){if(P(B,t)){var K;B=B||window.event;if(B.detail)K=B.axis===2?-B.detail*ra:0;else{K=B.wheelDeltaY?B.wheelDeltaY:B.wheelDelta;if(window.opera)K=-K}if(K!==0){var S=j(ha,M);q.triggerCustom("zoom",
y("mouse",B),S,m(S,r(t)),K/Ca,"wheel");D(B);B.returnValue=false}}}function ma(B){B=B||window.event;return(B.which||B.button)==1}function oa(B,K,S,ka,Aa){S=typeof S!="undefined"?S:ha;ka=typeof ka!="undefined"?ka:M;var J=S-Q,X=ka-$,L=j(S,ka);q.triggerCustom(K,y("mouse",B),L,m(L,r(t)),j(J,X));if(typeof Aa=="undefined"||Aa){Q=S;$=ka}}A=COG.extend({},A);var ra=120,Ca=ra*8,W=false,fa,ha,M,Q,$;A.binder("mousedown",Y,false);A.binder("mousemove",V,false);A.binder("mouseup",ea,false);A.binder("dblclick",function(B){COG.info("captured double click");
if(P(B,t)){var K=da(B);q.triggerCustom("doubleTap",y("mouse",B),K,m(K,r(t)))}},false);A.binder("mousewheel",Z,document);A.binder("DOMMouseScroll",Z,document);return{unbind:function(){A.unbinder("mousedown",Y,false);A.unbinder("mousemove",V,false);A.unbinder("mouseup",ea,false);A.unbinder("mousewheel",Z,document);A.unbinder("DOMMouseScroll",Z,document)}}},checks:{touch:false}});k("pointer",{handler:function(t,q,A){function da(J){if(J.count<2)return 0;var X=J.x-J.next.x;J=J.y-J.next.y;return~~Math.sqrt(X*
X+J*J)}function Y(J,X,L){X=X?X:0;L=L?L:0;for(var sa={x:J.x-X,y:J.y-L,id:J.id,count:J.count},qa=sa;J.next;){J=J.next;qa=qa.next={x:J.x-X,y:J.y-L,id:J.id}}return sa}function V(J,X){var L=J[X?X:"touches"],sa,qa;if(L.length===0)return null;qa=sa={x:L[0].pageX,y:L[0].pageY,id:L[0].identifier,count:L.length};for(var ya=1,Xa=L.length;ya<Xa;ya++)qa=qa.next={x:L[ya].pageX,y:L[ya].pageY,id:L[ya].identifier};return sa}function ea(J){if(P(J,t)){M=r(t);var X=V(J,"changedTouches"),L=Y(X,M.left,M.top);if(!$){Q=
W;q.triggerCustom("pointerDown",y("touch",J),X,L)}ka&&q.triggerCustom("pointerDownMulti",y("touch",J),X,L);$=V(J);if($.count>1)K=da($);Aa=1;S=Y($)}}function Z(J){if(P(J,t)){J.preventDefault();B=V(J);if(Q==W)Q=Math.abs($.x-B.x)>ra||Math.abs($.y-B.y)>ra?Ca:W;if(Q!=W){Q=B.count>1?ha:fa;if(Q==ha)if($.count===1){$=Y(B);K=da($)}else{var X=da(B);if(Math.abs(K-X)<oa)Q=fa;else{var L;L=B.x;var sa=B.next.x,qa=B.y,ya=B.next.y,Xa=qa<ya?qa:ya;L={x:(L<sa?L:sa)+(Math.abs(L-sa)>>1),y:Xa+(Math.abs(qa-ya)>>1)};X=X/
K;sa=X-Aa;q.triggerCustom("zoom",y("touch",J),L,m(L,M),sa,"pinch");Aa=X}}Q==fa&&q.triggerCustom("pointerMove",y("touch",J),B,Y(B,M.left,M.top),j(B.x-S.x,B.y-S.y));ka&&q.triggerCustom("pointerMoveMulti",y("touch",J),B,Y(B,M.left,M.top))}S=Y(B)}}function ma(J){if(P(J,t)){var X=V(J,"changedTouches"),L=Y(X,M.left,M.top);B=V(J);if(!B){q.triggerCustom("pointerUp",y("touch",J),X,L);$=null}ka&&q.triggerCustom("pointerUpMulti",y("touch",J),X,L)}}A=COG.extend({detailed:false,inertia:false},A);var oa=20,ra=
7,Ca=0,W=1,fa=2,ha=3,M,Q,$,B,K,S,ka=A.detailed,Aa=1;A.binder("touchstart",ea,false);A.binder("touchmove",Z,false);A.binder("touchend",ma,false);COG.info("initialized touch handler");return{unbind:function(){A.unbinder("touchstart",ea,false);A.unbinder("touchmove",Z,false);A.unbinder("touchend",ma,false)}}},checks:{touch:true}});return{register:k,watch:function(t,q,A){q=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},q);capabilities=COG.extend({touch:"ontouchstart"in
window},A);if(!q.observable){COG.info("creating observable");q.observable=COG.observable({});globalOpts=q}q.binder=q.isIE?w:H(q.bindToBody);q.unbinder=q.isIE?p:T(q.bindToBody);A=q.types;for(var da=capabilities,Y=[],V=x.length;V--;){var ea=x[V],Z=!A||A.indexOf(ea.type)>=0,ma=true;for(var oa in ea.checks){var ra=ea.checks[oa];COG.info("checking "+oa+" capability. require: "+ra+", capability = "+da[oa]);ma=ma&&ra===da[oa]}if(Z&&ma)Y[Y.length]=ea.handler}return new F(t,Y,q)}}}();var T5={};
(function(H){function T(){return(new Date).getTime()}function w(b,d){d=Rb.call(d);if(d=="finite")return!Sb[Tb](+b);return d=="null"&&b===null||d==typeof b||d=="object"&&b===Object(b)||d=="array"&&Array.isArray&&Array.isArray(b)||Ub.call(b).slice(8,-1).toLowerCase()==d}function p(b,d){this.x=b||0;this.y=d||0}function j(b,d,f,e){this.x=b||0;this.y=d||0;this.w=f||0;this.h=e||0;this.x2=this.x+this.w;this.y2=this.y+this.h}function k(b){b=b||(new Date).getTime();for(var d=0;d<Sa.length;){var f=Sa[d],e=
Na[f],a=Na[f].image&&(bb||Na[f].image.complete&&Na[f].image.width>0),c=b-e.start;c=a||c>=Vb;if(a){a=e.callbacks;ub[f]=e.image;for(var g=0;g<a.length;g++)a[g](e.image,true)}if(c){Sa.splice(d,1);delete Na[f]}else d++}Sa.length>0&&animFrame(k)}function r(b,d){var f=b&&d?ub[b]:null;if(f&&f&&(bb||f.complete&&f.width>0))d(f);else{if(f=Na[b])f.callbacks.push(d);else{f=new Image;f.id="_ldimg"+ ++Wb;Na[b]={start:(new Date).getTime(),image:f,callbacks:[d]};f.src=b;Sa[Sa.length]=b}animFrame(k)}}function y(b,
d,f,e,a,c){this.x=b;this.y=d;this.w=e||256;this.h=e||256;this.x2=this.x+this.w;this.y2=this.y+this.h;this.url=f;this.id=c||b+"_"+d;this.loaded=false;this.image=null}function P(b){function d(c){var g=b[c];w(g,pa)||e.push(function(i){i[c]=g})}function f(){e=[];for(var c in b)d(c)}b=COG.extend({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},b);var e=[],a={applyToContext:function(c){for(var g=
e.length;g--;)e[g](c)},update:function(c,g){b[c]=g;f()}};f();return a}function m(){for(var b=0,d=arguments.length;d--;){var f=Xb[arguments[d].toUpperCase()];if(f)b|=f}return b}function D(b){b=b?b:(new Date).getTime();if(b-vb>Yb){for(var d=Ya.splice(0),f=d.length;f--;)d[f](b);vb=b}Ya.length&&animFrame(D)}function x(b){var d=Ya.length==0;Ya[Ya.length]=b;d&&animFrame(D)}function F(b,d,f,e,a){a=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},a);var c=(new Date).getTime(),
g=b[d],i=d=="translate",h=a.autoInvalidate,n=f.length&&e.length&&f.length==e.length?f.length:0,s=Array(n),G=Array(n),U=COG.easing(a.easing),I=a.duration,E=a.progress,l=function(u){var C=u-c;u=c+I<=u;for(var N=b.layer?b.layer.view:null,O,ba=n;ba--;){O=U(C,f[ba],s[ba],I);G[ba]=i?O|0:O}g.apply(b,G);h&&N&&N.invalidate();if(E){C=[].concat(u?e:G);C.unshift(u);E.apply(b,C)}if(u){b.animations--;g.apply(b,e);a.complete&&a.complete.apply(b,e)}else x(l)};if(g&&g.apply&&n>0){I=I?I:DEFAULT_DURATION;for(d=n;d--;)s[d]=
e[d]-f[d];b.animations++;x(l)}}function t(b){za.call(this,b)}function q(b,d){d=COG.extend({simplify:false,typeName:"Poly"},d);var f=d.simplify;za.call(this,d);COG.extend(this,{resync:function(e){var a,c,g,i,h,n;e.syncXY(b);n=this.points=Oa.floor(f?Oa.simplify(b):b);for(var s=n.length;s--;){e=n[s].x;a=n[s].y;i=w(i,pa)||e<i?e:i;h=w(h,pa)||a<h?a:h;c=w(c,pa)||e>c?e:c;g=w(g,pa)||a>g?a:g}this.updateBounds(new j(i,h,c-i,g-h),true)}});this.haveData=b&&b.length>=2}function A(b,d){d.fill=false;q.call(this,
b,d)}function da(b){function d(){if(i&&i.width>0){if(!this.centerOffset)this.centerOffset=new p(-i.width>>1,-i.height>>1);this.updateBounds(new j(this.xy.x+this.centerOffset.x,this.xy.y+this.centerOffset.y,i.width,i.height),false)}}function f(n){if(this.imageUrl=n){var s=this;r(this.imageUrl,function(G,U){i=G;if(U){var I=h.layer?h.layer.view:null;I&&I.invalidate()}d.apply(s)})}}b=COG.extend({image:null,imageUrl:null,centerOffset:null,typeName:"Image"},b);var e=null,a=za.prototype.resync,c=0,g=0,i=
b.image;za.call(this,b);var h=COG.extend(this,{changeImage:f,drag:function(n,s,G,U){e||(e=new p(n.startX-this.xy.x,n.startY-this.xy.y));this.xy.x=s-e.x;this.xy.y=G-e.y;if(U){e=null;if(this.layer)if(n=this.layer.view){n.syncXY([this.xy],true);n.invalidate()}this.trigger("dragDrop")}return true},getProps:function(){this.bounds||d(this,i);return{image:i,x:this.xy.x+c,y:this.xy.y+g}},resync:function(n){a.call(this,n);d.call(this)}});i||f.call(this,this.imageUrl);if(this.centerOffset){c=this.centerOffset.x;
g=this.centerOffset.y}}function Y(b){b=COG.extend({imageAnchor:null},b);if(b.imageAnchor)b.centerOffset=Oa.invert(b.imageAnchor);da.call(this,b)}function V(b){b=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},b);za.call(this,b)}function ea(b){b=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:m("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},b);this.view=null;COG.observable(COG.extend(this,b))}function Z(b){for(var d=null,f=1;!d&&f<arguments.length;f++)d=
ra(b,arguments[f]);d=d?d:ra(b);if(!d)throw Error("Unable to find GEO engine with "+b+" capability");return d}function ma(b){b=parseFloat(b)*Da;b=L(b);var d=cb*b;return J((1+b)/(1-b)*ka((1-d)/(1+d),cb))/2}function oa(b){return M/(256<<b)}function ra(b,d){var f=null;for(var e in Pa)if(d){if(e==d&&Pa[e][b]){f=Pa[e];break}}else if(Pa[e][b]){f=Pa[e];break}return f}function Ca(b,d){var f=cb*L(b);return Q-2*ya(d*ka((1-f)/(1+f),cb/2))}function W(b,d,f,e){d=fa(d);b.add(e(d,f));return d.length}function fa(b){var d=
b?b.length:0,f=Array(d);for(d=d;d--;)f[d]=ga.init(b[d][1],b[d][0]);return ga.vectorize(f,wb)}window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(function(){b((new Date).getTime())},1E3/60)}}();var ha=Array.prototype.indexOf||function(b){for(var d=0;d<this.length;d++)if(this[d]===b)return d;return-1},M=Math.PI*2,Q=Math.PI/2,$=Math.abs,
B=Math.ceil,K=Math.min,S=Math.max,ka=Math.pow,Aa=Math.sqrt,J=Math.log,X=Math.round,L=Math.sin,sa=Math.asin,qa=Math.cos,ya=Math.atan,Xa=Math.atan2,Tb="hasOwnProperty",Sb={NaN:1,Infinity:1,"-Infinity":1},Rb=String.prototype.toLowerCase,Ub=Object.prototype.toString,pa="undefined",xb="number",Zb=typeof G_vmlCanvasManager!=pa,bb=typeof FlashCanvas!=pa,$b=T5.newCanvas=function(b,d){var f=document.createElement("canvas");f.width=b?b:0;f.height=d?d:0;if(bb){document.body.appendChild(f);FlashCanvas.initElement(f)}Zb&&
G_vmlCanvasManager.initElement(f);return f},yb=function(){var b={};return{init:function(d,f){var e=b[d];if(!e)throw Error("Unable to locate requested generator: "+d);return new e(f)},register:function(d,f){b[d]=f}}}();p.prototype={constructor:p};j.prototype={constructor:j};var Oa=function(){function b(e,a){return f(e.x-a.x,e.y-a.y)}function d(e,a){a=a||e.length;if(a<=1)return null;for(var c=Array(a-1),g=Array(a-1),i=0,h,n=0;n<a-1;n++){h=b(e[n],e[n+1]);c[n]=Aa(h.x*h.x+h.y*h.y);g[n]=i+=c[n]}return{edges:c,
accrued:g,tota:i}}function f(e,a){return new p(e,a)}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var e=0,a=0,c=arguments.length;c--;){e+=arguments[c].x;a+=arguments[c].y}return f(e,a)},absSize:function(e){return S($(e.x),$(e.y))},copy:function(e){return e?f(e.x,e.y):null},diff:b,distance:function(e,a){return d(e,a).total},edges:d,equals:function(e,a){return e.x===a.x&&e.y===a.y},extendBy:function(e,a,c){var g=qa(a)*c|0;a=L(a)*c|0;return f(e.x-g,e.y-a)},floor:function(e){for(var a=
Array(e.length),c=e.length;c--;)a[c]=f(~~e[c].x,~~e[c].y);return a},getRect:function(e){for(var a,c,g,i,h=e.length;h--;){var n=e[h];a=w(a,pa)||n.x<a?n.x:a;c=w(c,pa)||n.y<c?n.y:c;g=w(g,pa)||n.x>g?n.x:g;i=w(i,pa)||n.y>i?n.y:i}return new j(a,c,g-a,i-c)},init:f,invert:function(e){return f(-e.x,-e.y)},min:function(e,a){return f(e.x<a.x?e.x:a.x,e.y<a.y?e.y:a.y)},max:function(e,a){return f(e.x>a.x?e.x:a.x,e.y>a.y?e.y:a.y)},offset:function(e,a,c){return f(e.x+a,e.y+(c||a))},scale:function(e,a){return f(e.x/
a|0,e.y/a|0)},simplify:function(e,a){if(!e)return null;a=a?a:Oa.VECTOR_SIMPLIFICATION;for(var c=[],g=null,i=e.length;i--;){var h=e[i];if(include=!g||i===0||$(h.x-g.x)+$(h.y-g.y)>a){c.unshift(h);g=h}}return c},theta:function(e,a,c){c=sa((e.y-a.y)/c);return e.x>a.x?c:Math.PI-c},toString:function(e){return e?e.x+", "+e.y:""}}}(),gb=function(){return{dotProduct:function(b,d){return b.x*d.x+b.y*d.y}}}(),Ta=function(){function b(f){return d(f.x,f.y,f.x2,f.y2)}function d(f,e,a,c){return new j(f,e,(a||f)-
f,(c||e)-e)}return{buffer:function(f,e,a){return Ta.init(f.x-e,f.y-(a||e),f.x+e,f.y+(a||e))},center:function(f){return new p(f.x+(f.w>>1),f.y+(f.h>>1))},copy:b,diagonalSize:function(f){return Aa(f.w*f.w+f.h*f.h)},fromCenter:function(f,e,a,c){a=a>>1;c=c>>1;return d(f-a,e-c,f+a,e+c)},init:d,intersect:function(f,e){var a=S(f.x,e.x),c=S(f.y,e.y),g=K(f.x2,e.x2),i=K(f.y2,e.y2);a=d(a,c,g,i);return a.w>0&&a.h>0?a:null},toString:function(f){return f?"["+f.x+", "+f.y+", "+f.x2+", "+f.y2+"]":""},union:function(f,
e){if(f.w===0||f.h===0)return b(e);else if(e.w===0||e.h===0)return b(f);else{var a=K(f.x,e.x),c=K(f.y,e.y),g=S(f.x2,e.x2),i=S(f.y2,e.y2);a=d(a,c,g,i);return a.w>0&&a.h>0?a:null}}}}();Hits=function(){return{diffHits:function(b,d){var f=[],e={},a;for(a=d.length;a--;)e[d[a].target.id]=true;for(a=b.length;a--;)e[b[a].target.id]||(f[f.length]=b[a]);return f},init:function(b,d,f,e){return{type:b,x:e.x|0,y:e.y|0,elements:[],absXY:d,relXY:f}},initHit:function(b,d,f){return{type:b,target:d,drag:f}},triggerEvent:function(b,
d,f,e){d.triggerCustom(b.type+(f?f:"Hit"),{hitType:b.type},e?e:b.elements,b.absXY,b.relXY,new p(b.x,b.y))}}}();var hb=function(b){function d(a,c){var g=f[a],i;g||(g=f[a]=[]);(i=g[c])||(i=g[c]=[]);return i}b=b||128;var f=[],e={};return{insert:function(a,c,g){var i=a.x/b|0,h=a.y/b|0,n=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id||COG.objId("spatial");e[g]=c;for(c=i;c<=n;c++)for(i=h;i<=a;i++)d(c,i).push(g)},remove:function(a,c,g){var i=a.x/b|0,h=a.y/b|0,n=(a.x+a.w)/b|0;a=(a.y+a.h)/b|0;g=g||c.id;delete e[g];
for(c=i;c<=n;c++)for(i=h;i<=a;i++){var s=d(c,i),G=ha.call(s,g);G>=0&&s.splice(G,1)}},search:function(a){var c=a.y/b|0,g=(a.x+a.w)/b|0,i=(a.y+a.h)/b|0,h=[],n=[];for(a=a.x/b|0;a<=g;a++)for(var s=c;s<=i;s++)h=h.concat(d(a,s));h.sort();for(c=h.length;c--;){g=h[c];if(i=e[g])n[n.length]=i;for(;c>0&&h[c-1]==g;)c--}return n}}},Vb=3E4,ub={},Wb=0;(new Date).getTime();var Na={},Sa=[];y.prototype={constructor:y,load:function(b){var d=this;r(this.url,function(f){d.loaded=true;d.image=f;b&&b()})}};var ac=function(){return{applyStyle:function(){},
applyTransform:function(b,d,f){return{restore:null,x:d,y:f}},checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return new p},getViewport:function(){},hitTest:function(){return false},prepare:function(){},projectXY:null,render:function(){},reset:function(){}}},zb={},Ua=H.registerRenderer=function(b,d){zb[b]=d},bc=H.attachRenderer=function(b,d,f,e){b=b.split("/");for(var a=new ac(d,f,e),c=0;c<b.length;c++){var g=zb[b[c]];if(g)a=new g(d,f,e,a)}return a};Ua("canvas",
function(b,d,f,e){function a(l,u,C,N){var O=false;if(u)O=h.isPointInPath(U?u.x-n:u.relXY.x,U?u.y-s:u.relXY.y);return{draw:N||E,viewport:l,state:C,hit:O,vpX:n,vpY:s,context:h}}f=COG.extend({},f);var c,g,i,h,n=0,s=0,G=null,U=CANI.canvas.pipTransformed,I={},E=function(){this.fill&&h.fill();this.stroke&&h.stroke()};(function(){if(d){var l=d.tagName=="CANVAS",u=l?d.parentNode:d;c=b.width=u.offsetWidth;g=b.height=u.offsetHeight;if(l){i=d;i.width=c;i.height=g;bb&&FlashCanvas.initElement(i)}else{i=$b(c,g);
i.style.cssText="position: absolute; z-index: 1;";d.appendChild(i)}h=null}})();return COG.extend(e,{interactTarget:i,applyStyle:function(l){var u=cc(l),C=u&&h&&h.canvas?I[h.canvas.id]:null;if(u){I[h.canvas.id]=l;u.applyToContext(h);return C}},applyTransform:function(l){if(l.translateX!==0||l.translateY!==0||l.scaling!==1||l.rotation!==0){h.save();G={undo:function(){h.restore();G=null},x:l.xy.x,y:l.xy.y};h.translate(l.xy.x-n+l.translateX,l.xy.y-s+l.translateY);l.rotation!==0&&h.rotate(l.rotation);
l.scaling!==1&&h.scale(l.scaling,l.scaling)}return G},drawTiles:function(l,u){for(var C,N,O=n-256,ba=s-256,va=l.x2,ta=l.y2,Ba=u.length;Ba--;){C=u[Ba];if(N=C.x>=O&&C.x<=va&&C.y>=ba&&C.y<=ta)C.loaded?h.drawImage(C.image,C.x-n,C.y-s):C.load(b.invalidate)}},hitTest:function(l,u,C){return h.isPointInPath(u,C)},prepare:function(l,u){var C,N=false,O=u.scaled||u,ba=u.scaleFactor;if(h)h.restore();else h=i.getContext("2d");for(C=l.length;C--;)N=N||l[C].clip;n=O.x;s=O.y;if(h){N||h.clearRect(0,0,c,g);h.save();
h.scale(ba,ba)}h.globalCompositeOperation="source-over";return h},prepArc:function(l,u,C,N){h.beginPath();h.arc(l.xy.x-(G?G.x:n),l.xy.y-(G?G.y:s),l.size>>1,l.startAngle,l.endAngle,false);return a(u,C,N)},prepImage:function(l,u,C,N,O){var ba=(O.x||l.xy.x)-(G?G.x:n),va=(O.y||l.xy.y)-(G?G.y:s),ta=O.image||l.image;if(ta){h.beginPath();h.rect(ba,va,O.width||ta.width,O.height||ta.height);return a(u,C,N,function(){h.drawImage(ta,ba,va,O.width||ta.width,O.height||ta.height)})}},prepPoly:function(l,u,C,N,
O){var ba=true;l=O.points||l.points;O=G?G.x:n;var va=G?G.y:s;h.beginPath();for(var ta=l.length;ta--;){var Ba=l[ta].x-O,Qa=l[ta].y-va;if(ba){h.moveTo(Ba,Qa);ba=false}else h.lineTo(Ba,Qa)}return a(u,C,N)},getContext:function(){return h},getDimensions:function(){return{width:c,height:g}},getOffset:function(){return new p(n,s)}})});var Ab={},dc=H.defineStyle=function(b,d){Ab[b]=P(d);return b},Bb=H.defineStyles=function(b){for(var d in b)dc(d,b[d])},cc=H.getStyle=function(b){return Ab[b]};H.loadStyles=
function(b){COG.jsonp(b,function(d){Bb(d)})};Bb({basic:{lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"},waypointsHover:{lineWidth:4,strokeStyle:"#f00",fillStyle:"#FFF"}});var Xb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},Kb=function(b){function d(o,v,z){Ea||Qa(ia-v,ja-z)}function f(o,v,z,R){va(K(S(la+ka(2,R)-1,0.5),2))}function e(){var o=J(la)/Math.LN2|0;if(o!==0){la=ka(2,o);ta(Za+o,ec,fc)}redraw=true}function a(o,
v){var z=renderer&&renderer.projectXY?renderer.projectXY(o,v):null;if(!z){z=ca.getViewport();var R=1/la;z=new p(z?z.x+o*R:o,z?z.y+v*R:v)}return z}function c(o,v,z){Ba("doubleTap",v,z,a(z.x,z.y));b.scalable&&va(2,a(z.x,z.y),b.zoomEasing,null,b.zoomDuration)}function g(o,v,z){Ea=null;C("down",v,z)}function i(o,v,z){C("hover",v,z)}function h(o,v,z){l(v,z,false)}function n(o,v,z){l(v,z,true)}function s(){clearTimeout(Cb);Cb=setTimeout(function(){renderer.checkSize()},250)}function G(o,v,z){C("tap",v,
z);Ba("tap",v,z,a(z.x,z.y,true))}function U(){renderer=bc(b.renderer,ca,ib);Db=!renderer.preventPartialScale;E()}function I(o,v){v.id=o;v.added=T();v.view=ca;v.trigger("parentChange",ca,ib,gc);na.push(v);na.sort(function(z,R){var aa=R.zindex-z.zindex;if(aa===0)aa=R.added-z.added;return aa});Ga=na.length;return v}function E(){wa&&wa.unbind();if(renderer){wa=INTERACT.watch(renderer.interactTarget);b.pannable&&wa.pannable().bind("pan",d);if(b.scalable){wa.bind("zoom",f);wa.bind("doubleTap",c)}wa.bind("pointerDown",
g);wa.bind("pointerMove",h);wa.bind("pointerUp",n);b.captureHover&&wa.bind("pointerHover",i);wa.bind("tap",G)}}function l(o,v,z){if(Ea){o=a(v.x,v.y);if(Ea.drag.call(Ea.target,Ea,o.x,o.y,z))redraw=true;if(z)Ea=null}}function u(o){var v,z,R=false;o=o||(new Date).getTime();if(R=o-Eb>hc){var aa=$(ia-jb),ua=$(ja-kb);v=ia!==lb||ja!==mb;z=la!==Fb;if(v||z)Ka++;if(aa>=Gb||ua>=Gb)ba();ca.trigger("enterFrame",o,ic++);Eb=o}if(R&&Ka){La=Hb|(la!==1?Ib:0)|(v?nb:0)|(ob?Jb:0);pb=(v=(La&(Ib|nb))!==0)&&(La&Jb)===0;
v=O();if(renderer.prepare(na,v,La,o,xa)){Ka=0;for(ii=Ga;ii--;){z=na[ii];if((La&z.validStates)!==0){R=z.style?renderer.applyStyle(z.style):null;z.draw(renderer,v,La,ca,o,xa);R&&renderer.applyStyle(R)}}renderer.render(v);lb=ia;mb=ja;Fb=la}if(xa){o=xa?xa.elements:[];if($a&&$a.type==="hover"){v=Hits.diffHits($a.elements,o);v.length>0&&Hits.triggerEvent($a,ca,"Out",v)}if(o.length>0){z=xa.x;R=xa.y;for(v=o.length;v--;){aa=o[v];ua=z;var Ha=R,Fa=aa&&aa.drag&&(!aa.canDrag||aa.canDrag(aa,ua,Ha));if(Fa){Ea=aa;
Ea.startX=ua;Ea.startY=Ha}if(Fa)break}Hits.triggerEvent(xa,ca)}$a=o.length>0?COG.extend({},xa):null;xa=null}}animFrame(u)}function C(o,v,z){xa=Hits.init(o,v,z,a(z.x,z.y,true));for(o=Ga;o--;)qb=qb||(na[o].hitGuess?na[o].hitGuess(xa.x,xa.y,La,ca):false);qb&&Ka++}function N(){Ka++}function O(){var o=new j(ia,ja,ca.width,ca.height);o.scaleFactor=la;if(la!==1)o.scaled=Ta.fromCenter(ia+(ca.width>>1),ja+(ca.height>>1),ca.width/la|0,ca.height/la|0);return o}function ba(){var o=O();if(o){if(Va||Wa)if(o){var v=
db?ia+(o.w>>1):ia,z=eb?ja+(o.h>>1):ja,R=o.w,aa=o.h;if(Va&&Va>R)if(v+R>Va)ia=db?ia:Va-R;else if(v<0)ia=db?ia:0;if(Wa&&Wa>aa)if(z+aa>Wa)ja=eb?ja:Wa-aa;else if(z<0)ja=eb?ja:0}jb=ia;kb=ja;Ba("refresh",ca,o);Ka++}}function va(o,v,z,R,aa){var ua;if(!Db){z=false;ua=X(J(o)/Math.LN2);o=ka(2,ua)}if(z)COG.tweenValue(la,o,z,aa,function(Ha,Fa){la=Ha;if(Fa){ua=X(J(la)/Math.LN2);la=ka(2,ua);R&&R()}e()});else{la=o;e()}return ca}function ta(o,v,z){o=S(b.minZoom,K(b.maxZoom,o));if(o!==Za){var R=ka(2,o-Za),aa=ca.width>>
1,ua=ca.height>>1,Ha=aa/R|0,Fa=ua/R|0;Za=o;Qa(((v?v:ia+aa)-Ha)*R,((z?z:ja+ua)-Fa)*R);lb=ia;mb=ja;kb=jb=0;Ba("zoomLevelChange",o);la=1;renderer.reset();ba()}}function Ba(){for(var o=ca.trigger.apply(null,arguments).cancel,v=na.length;v--;)o=na[v].trigger.apply(null,arguments).cancel||o;return!o}function Qa(o,v,z,R,aa){function ua(){Ha+=1;if(Ha>=2){ob=false;aa&&aa()}}var Ha=0;if(z){if((La&nb)===0){COG.tweenValue(ia,o,z,R,function(Fa,rb){ia=Fa|0;(rb?ua:N)();return!pb});COG.tweenValue(ja,v,z,R,function(Fa,
rb){ja=Fa|0;(rb?ua:N)();return!pb});ob=true}}else{ia=o|0;ja=v|0;aa&&aa()}}b=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,refreshDistance:256,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},b);var jc=
{},na=[],Ga=0,ib=document.getElementById(b.container),Ea=null,ic=0,gc=null,kc=!w(window.attachEvent,pa),qb=false,Gb=b.refreshDistance,ia=0,ja=0,jb=0,kb=0,lb=0,mb=0,Va=null,Wa=null,db=false,eb=false,xa=null,pb=false,$a=null,Cb=0,la=1,Fb=1,Eb=0,wa=null,Db=true,ob=false,hc=1E3/b.fps|0,Ka=0,ec,fc,Za=b.zoomLevel,Hb=m("ACTIVE"),nb=m("PAN"),Ib=m("ZOOM"),Jb=m("ANIMATING"),La=Hb,ca={id:b.id,detach:function(){wa&&wa.unbind()},eachLayer:function(o){for(var v=Ga;v--;)o(na[v])},getLayer:function(o){for(var v=
0;v<Ga;v++)if(na[v].id===o)return na[v];return null},getZoomLevel:function(){return Za},setLayer:function(o,v){for(var z=0;z<Ga;z++)if(na[z].id===o){na.splice(z,1);break}if(v){I(o,v);v.trigger("refresh",ca,O())}Ka++;return v},invalidate:N,refresh:ba,resetScale:function(){la=1},scale:va,setZoomLevel:ta,syncXY:function(){},triggerAll:Ba,removeLayer:function(o){a:{for(var v=Ga;v--;)if(na[v].id===o){o=v;break a}o=-1}if(o>=0&&o<Ga){ca.trigger("layerRemoved",na[o]);na.splice(o,1);Ka++}Ga=na.length},getOffset:function(){return new p(ia,
ja)},getRenderer:function(){return renderer},getScaleFactor:function(){return la},setMaxOffset:function(o,v,z,R){Va=o;Wa=v;db=z;eb=R},getViewport:O,updateOffset:Qa,pan:function(o,v,z,R,aa){Qa(ia+o,ja+v,z,R,aa)}};COG.observable(ca);ca.bind("resync",function(){});COG.configurable(ca,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(b,null,{container:function(o,v){ib=document.getElementById(v);U()},inertia:E,captureHover:E,scalable:E,
pannable:E}),true);CANI.init(function(o){ca.markers=I("markers",new fb({zindex:20}));jc=o;U();kc?window.attachEvent("onresize",s):window.addEventListener("resize",s,false)});animFrame(u);return ca},za=function(b){b=COG.extend({style:null,xy:null,size:null,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},b);COG.extend(this,b);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=
0;this.observable&&COG.observable(this)};za.prototype={constructor:za,animate:function(b,d,f,e){F(this,b,d,f,e)},drag:null,draw:null,getProps:null,resync:function(b){if(this.xy){b.syncXY([this.xy]);this.size&&this.updateBounds(Ta.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(b){this.rotation=b},scale:function(b){this.scaling=b},translate:function(b,d){this.translateX=b;this.translateY=d},updateBounds:function(b,d){b&&(!this.bounds||b.x!=this.bounds.x||b.y!=this.bounds.y)&&
this.trigger("move",this,b,this.bounds);this.bounds=b;if(d)this.xy=Ta.center(this.bounds)}};var Yb=1E3/60|0,Ya=[],vb=0;t.prototype=COG.extend(za.prototype,{constructor:t,prep:function(b){return b.arc(this.xy.x,this.xy.y,this.size>>1,0,Math.PI*2)}});q.prototype=COG.extend({},za.prototype,{constructor:q});A.prototype=COG.extend({},q.prototype);da.prototype=COG.extend({},za.prototype,{constructor:da});Y.prototype=COG.extend({},da.prototype,{constructor:Y});V.prototype=COG.extend(za.prototype,{constructor:V});
ea.prototype={constructor:ea,clip:null,cycle:function(){},draw:function(){},hitGuess:null};Ua=function(b,d){function f(n,s){if(a&&i){g=a.search(i);i=null}var G=s&&s.getZoomLevel?s.getZoomLevel():0;c[G]||(c[G]=new hb);a=c[G]}d=COG.extend({imageLoadArgs:{}},d);var e=b?yb.init(b,d).run:null,a=null,c=[],g=[],i=null,h=COG.extend(new ea(d),{draw:function(n,s){n.drawTiles(s,a.search(s))}});h.bind("refresh",function(n,s,G){var U=(new Date).getTime();if(a){g=i?a.search(i):[];e(s,G,a,function(){s.invalidate();
COG.info("GEN COMPLETED IN "+((new Date).getTime()-U)+" ms")});i=Ta.copy(G)}});h.bind("parentChange",f);h.bind("resync",f);return h};var Lb=function(b){function d(h){clearTimeout(g);g=setTimeout(function(){a.sort(function(n,s){if(s.xy&&n.xy){var G=s.xy.y-n.xy.y;return G!=0?G:s.xy.x-n.xy.x}});h&&h.invalidate()},50)}function f(h,n,s,G){G&&c.remove(G,n);c.insert(s,n)}function e(h,n){for(var s=a.length;s--;)a[s].resync(n)}b=COG.extend({zindex:10},b);var a=[],c=new hb,g=0,i=COG.extend(new ea(b),{add:function(h,
n){if(h){h.layer=i;if(n)a.unshift(h);else a[a.length]=h;var s=i.view;if(s){h.resync(s);c&&h.bounds&&c.insert(h.bounds,h);d(s)}h.bind("move",f)}},clear:function(){c=new hb;a=[]},draw:function(h,n,s,G,U,I){G={};U=c&&n?c.search(n):[];for(var E=U.length;E--;){var l=U[E],u=l.style||i.style,C,N=h.applyTransform(l),O=l.getProps?l.getProps(h,s):G;if(O=(C=h["prep"+l.typeName])?C.call(h,l,n,I,s,O):null){if(O.hit){I.elements.push(Hits.initHit(l.type,l,l.draggable?l.drag:null));C=I.type+"Style";u=l[C]||i[C]||
u}u=u?h.applyStyle(u):null;(C=l.draw||O.draw)&&C.call(l,O);u&&h.applyStyle(u)}N&&N.undo&&N.undo()}},find:function(){return[].concat(a)},hitGuess:function(h,n){return c&&c.search({x:h-10,y:n-10,w:20,h:20}).length>0}});i.bind("parentChange",e);i.bind("resync",e);return i},fb=function(b){return new Lb(b)};COG.extend(H,{ex:COG.extend,is:w,ticks:T,userMessage:function(b,d,f){H.trigger("userMessage",b,d,f)},indexOf:ha,Rect:j,XY:Oa,XYRect:Ta,Vector:gb,Hits:Hits,Generator:yb,tweenValue:COG.tweenValue,easing:COG.easing,
Tile:y,TileLayer:Ua,getImage:r,viewState:m,View:Kb,ViewLayer:ea,ImageLayer:Ua,Drawable:za,Marker:t,Poly:q,Line:A,Arc:V,ImageDrawable:da,ImageMarker:Y,DrawLayer:Lb,ShapeLayer:fb});COG.observable(H);var sb=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],Da=Math.PI/180,Ma=180/Math.PI,tb=Q,Mb=-tb,Nb=M,lc=-Nb,cb=0.08181919084262157,ab=null,Ob={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},ga=function(){function b(a){return a?
f(a.lat,a.lon):null}function d(a){return!a||a.lat===0&&a.lon===0}function f(a,c){return{lat:parseFloat(a?a:0),lon:parseFloat(c?c:0)}}function e(a){if(a)if(w(a.lat,xb))return b(a);else{if(a.split)for(var c=[" ",","],g=0;g<c.length;g++){var i=a.split(c[g]);if(i.length===2)return f(i[0],i[1])}}else return f();return null}return{calcDistance:function(a,c){if(d(a)||d(c))return 0;var g=(c.lat-a.lat)*Da>>1,i=(c.lon-a.lon)*Da>>1;g=L(g)*L(g)+qa(a.lat*Da)*qa(c.lat*Da)*L(i)*L(i);return 6371*2*Xa(Aa(g),Aa(1-
g))},copy:b,empty:d,equal:function(a,c){return a&&c&&a.lat==c.lat&&a.lon==c.lon},fromMercatorPixels:function(a,c){for(var g=ka(Math.E,-c),i=Q-2*ya(g),h=Ca(i,g),n=0;n<12&&$(i-h)>1.0E-7;){i=h;h=Ca(i,g);n++}return f(h*Ma,a%360*Ma)},generalize:function(a,c,g){var i=a.length,h=[],n=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+c.length+" positions");for(var s=i;s--;)if(s===0)h.unshift(a[s]);else{var G=!n||ga.inArray(a[s],c)?g:ga.calcDistance(n,a[s]);if(a[s]&&G>=g){h.unshift(a[s]);
n=a[s]}}COG.info("generalized "+i+" positions into "+h.length+" positions");return h},inArray:function(a,c){for(var g=ga.equal,i=c.length;i--;)if(g(a,c[i]))return true;return false},inBounds:function(a,c){var g=!(ga.empty(a)||ga.empty(c));return g=(g=g&&a.lat>=c.min.lat&&a.lat<=c.max.lat)&&a.lon>=c.min.lon&&a.lon<=c.max.lon},init:f,offset:function(a,c,g){var i=a.lat*Da;a=a.lon*Da;c=i+c/6371;g=sa(L(g/6371)/qa(i));g=a+g;c=(c+Q)%Math.PI-Q;g%=M;return f(c*Ma,g*Ma)},parse:e,parseArray:function(a){var c=
a.length,g=Array(c);for(c=c;c--;)g[c]=e(a[c]);return g},toMercatorPixels:function(a){return T5.XY.init(parseFloat(a.lon)*Da,ma(a.lat))},toString:function(a){return a?a.lat+" "+a.lon:""},vectorize:function(a,c){function g(){for(var s=0,G=c.chunkSize,U=i;U--;){h[U]=T5.GeoXY.init(a[U]);s+=1;if(s>G)break}i=U;if(i<=0)c.callback&&c.callback(h);else animFrame(g)}var i=a.length,h=Array(i);c=COG.extend({chunkSize:500,async:true,callback:null},c);if(!c.async){for(var n=i;n--;)h[n]=T5.GeoXY.init(a[n]);return h}animFrame(g);
return null}}}(),Ia=function(){function b(a,c,g){var i=new p(0,c.lat-a.lat);i.x=(g||w(g,pa))&&a.lon>c.lon?360-a.lon+c.lon:c.lon-a.lon;return i}function d(a,c){return Ia.init(ga.init(a.min.lat-c,a.min.lon-c%360),ga.init(a.max.lat+c,a.max.lon+c%360))}function f(a){var c=b(a.min,a.max);return ga.init(a.min.lat+(c.y>>1),a.min.lon+(c.x>>1))}function e(a,c){return{min:ga.parse(a),max:ga.parse(c)}}return{calcSize:b,createBoundsFromCenter:function(a,c){var g=c/6371,i=a.lat*Da,h=a.lon*Da,n=i-g,s=i+g;if(n>
Mb&&s<tb){i=sa(L(g)/qa(i));g=(h-i)%M;h=(h+i)%M}else{n=S(n,Mb);s=K(s,tb);g=lc;h=Nb}return Ia.init(ga.init(n*Ma,g*Ma),ga.init(s*Ma,h*Ma))},expand:d,forPositions:function(a,c){var g=null,i=T5.ticks();c||(c="auto");for(var h=a.length;h--;)if(g){var n=b(g.min,a[h],false),s=b(a[h],g.max,false);if(n.x<0)g.min.lon=a[h].lon;if(n.y<0)g.min.lat=a[h].lat;if(s.x<0)g.max.lon=a[h].lon;if(s.y<0)g.max.lat=a[h].lat}else g=e(a[h],a[h]);if(c){if(c=="auto"){h=b(g.min,g.max);c=S(h.x,h.y)*0.3}g=d(g,c)}COG.trace("calculated bounds for "+
a.length+" positions",i);return g},getCenter:f,getGeoHash:function(a){var c=T5.Geo.GeoHash.encode(a.min.lat,a.min.lon);a=T5.Geo.GeoHash.encode(a.max.lat,a.max.lon);COG.info("min hash = "+c+", max hash = "+a)},getZoomLevel:function(a,c){var g=f(a);g=K(X($(g.lat)*0.05),sb.length);var i=sb[g],h=b(a.min,a.max);g=B(J(sb[3]*c.h/h.y)/J(2));i=B(J(i*c.w/h.x)/J(2));return K(isNaN(g)?1E3:g,isNaN(i)?1E3:i)},init:e,isEmpty:function(a){return!a||ga.empty(a.min)||ga.empty(a.max)},toString:function(a){return"min: "+
ga.toString(a.min)+", max: "+ga.toString(a.max)}}}();gb=function(){var b=/^(\d+).*$/,d=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(f,e){b.lastIndex=-1;if(b.test(f))for(var a=f.replace(b,"$1"),c=e.split(","),g=0;g<c.length;g++){d.lastIndex=-1;if(d.test(c[g])){var i=d.exec(c[g]);if(a>=parseInt(i[1],10)&&a<=parseInt(i[2],10))return true}else if(a==c[g])return true}return false},normalize:function(f){if(!f)return"";f=f.toUpperCase();if(!ab){var e=[];for(var a in Ob)e.push(a);ab=RegExp("(\\s)("+
e.join("|")+")(\\s|$)","i")}ab.lastIndex=-1;if(e=ab.exec(f))f=f.replace(ab,"$1"+Ob[e[2]]);return f},toString:function(f){return f.streetDetails+" "+f.location}}}();var Ja=H.GeoXY=function(){function b(e,a){if(e.length){for(var c,g,i,h,n=e.length;n--;){b(e[n],a);c=w(c,pa)||e.x<c?e.x:c;g=w(g,pa)||e.y<g?e.y:g;i=w(i,pa)||e.x>i?e.x:i;h=w(h,pa)||e.y>h?e.y:h}return new j(c,g,i-c,h-g)}else if(e.mercXY){c=e.mercXY;e.x=(c.x+Math.PI)/a|0;e.y=(Math.PI-c.y)/a|0;e.rpp=a}else COG.warn("Attempted to sync an XY composite, not a GeoXY");
return e}function d(e,a){if(e.length)for(var c=e.length;c--;)d(e[c],a);else{e.mercXY=new p(e.x*a-Math.PI,Math.PI-e.y*a);e.pos=ga.fromMercatorPixels(e.mercXY.x,e.mercXY.y)}return e}function f(e,a,c){e.pos=a;e.mercXY=ga.toMercatorPixels(a);(c=w(c,xb)?c:e.rpp)&&b(e,c)}return{init:function(e,a){var c=new p;f(c,e,a);return c},sync:b,syncPos:d,toPos:function(e,a){a=a||e.rpp;return ga.fromMercatorPixels(e.x*a-Math.PI,Math.PI-e.y*a)},updatePos:f}}(),Pa={};Ua=function(){return{bestResults:function(b,d){d||
(d=20);for(var f=b.length>0?b[0]:null,e=[],a=0;a<b.length;a++)if(f&&b[a]&&f.matchWeight-b[a].matchWeight<=d)e.push(b[a]);else break;return e}}}();var Pb=function(b){b=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},b);return COG.extend(b,{toString:function(){return b.caption+(b.matchWeight?" ("+b.matchWeight+")":"")}})},mc=function(){function b(a,c){var g=new T5.ShapeLayer;c.geometry&&ga.vectorize(c.geometry,{callback:function(i){g.add(new T5.Line(i,{style:"waypoints",
simplify:true}));a.setLayer("route",g)}})}function d(a){for(var c=f.Unknown,g=e,i=0;i<g.length;i++){g[i].regex.lastIndex=-1;var h=g[i].regex.exec(a);if(h){c=g[i].customCheck?g[i].customCheck(a,h):g[i].turnType;break}}return c}var f={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",
Merge:"merge",UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},e=function(){var a=[];a.push({regex:/continue/i,turnType:f.Continue});a.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnLeftSlight:f.TurnLeft}});a.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(c,g){return/bear/i.test(g[1])?f.TurnRightSlight:f.TurnRight}});a.push({regex:/enter\s(roundabout|rotaty)/i,turnType:f.EnterRoundabout});
a.push({regex:/take.*?ramp/i,turnType:f.Ramp});a.push({regex:/take.*?exit/i,turnType:f.RampExit});a.push({regex:/make(.*?)u\-turn/i,customCheck:function(c,g){return/right/i.test(g[1])?f.UTurnRight:f.UTurnLeft}});a.push({regex:/proceed/i,turnType:f.Start});a.push({regex:/arrive/i,turnType:f.Arrive});a.push({regex:/fell\sthrough/i,turnType:f.Merge});return a}();return{calculate:function(a){a=COG.extend({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},a);var c=
Z("route");c&&c.route(a,function(g){if(a.generalize)g.geometry=ga.generalize(g.geometry,g.getInstructionPositions());if(a.map){b(a.map,g);a.autoFit&&a.map.gotoBounds(g.boundingBox)}a.success&&a.success(g)})},createMapOverlay:b,parseTurnType:d,TurnType:f,Instruction:function(a){var c=a=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},a),g=a.description;g=g.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");c.description=g;if(!a.turnType)a.turnType=d(a.description);
return a},RouteData:function(a){a=COG.extend({geometry:[],instructions:[],boundingBox:null},a);if(!a.boundingBox)a.boundingBox=Ia.forPositions(a.geometry);return COG.extend({getInstructionPositions:function(){for(var c=[],g=0;g<a.instructions.length;g++)a.instructions[g].position&&c.push(a.instructions[g].position);return c}},a)}}}(),nc="featurecollection",oc="feature",wb={async:false},Ra={processor:null,group:"shapes",layerClass:fb},pc={point:COG.extend({},Ra,{processor:function(b,d,f,e){d=fa([d.coordinates],
wb);if(d.length>0)if(f=e.marker(d[0],f)){b.add(f);return d.length}},group:"markers",layerClass:fb}),linestring:COG.extend({},Ra,{processor:function(b,d,f,e){d=fa(d&&d.coordinates?d.coordinates:[]);return W(b,d,f,e.line)}}),multilinestring:COG.extend({},Ra,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=d.length;c--;)a+=W(b,d[c],f,e.line);return a}}),polygon:COG.extend({},Ra,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];if(d.length>0)return W(b,d[0],
f,e.poly);return 0}}),multipolygon:COG.extend({},Ra,{processor:function(b,d,f,e){d=d&&d.coordinates?d.coordinates:[];for(var a=0,c=0;c<d.length;c++)a+=W(b,d[c][0],f,e.poly);return a}})},Qb=function(b,d,f,e){function a(l,u){var C=l.processor,N=n+l.group,O=COG.extend({},l,f,{properties:u.properties});if(C){var ba=E[N];if(!ba){ba=new l.layerClass({id:N});E[N]=ba}return C(ba,u.data,O,e)}return 0}function c(l,u){var C=l&&l.type?l.type.toLowerCase():null;return C&&C===oc?c(l.geometry,l.properties):{type:C,
isCollection:C?C===nc:false,definition:pc[C],data:l,properties:u?u:l.properties}}function g(l){var u=0,C=COG.extend({},f),N=s;l=l?l:(new Date).getTime();if(!U){for(;N<G;N++){l=c(h?h(b[N]):b[N]);var O=null;if(l.isCollection){C.layerPrefix=n+I++ +"-";U=new Qb(l.data.features,function(ba){U=null;for(var va in ba)E[va]=ba[va];s>=G&&d&&d(E)},C);O+=1}else if(l.definition)O=a(l.definition,l);u+=O?O:1;if(u>=i)break}s=N+1;if(U||s<G)animFrame(g);else d&&d(E)}}f=COG.extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},
f);e=COG.extend({marker:function(l){return new t({xy:l})},line:function(l,u){return new q(l,COG.extend({},f,u))},poly:function(l,u){return new q(l,COG.extend({fill:true},f,u))}},e);var i=500,h=f.rowPreParse,n=f.layerPrefix,s=0,G=0,U=null,I=0,E={};if(b){w(b,"array")||(b=[b]);G=b.length;animFrame(g)}};Ra=H.GeoJSON={parse:function(b,d,f){return new Qb(b,d,f)}};H.Map=function(b){function d(E){try{var l=ga.init(E.coords.latitude,E.coords.longitude),u=E.coords.accuracy/1E3;I.trigger("locationUpdate",E,
u);if(s){if(!h){h=new UI.LocationOverlay({pos:l,accuracy:u});h.update(I.getTileLayer());I.setLayer("location",h)}var C=Ia.createBoundsFromCenter(l,Math.max(u,1));I.gotoBounds(C)}else{h.pos=l;h.accuracy=u;h.update(I.getTileLayer());a(l,null,COG.easing("sine.out"))}s=false}catch(N){COG.exception(N)}}function f(E){COG.info("caught location tracking error:",E)}function e(E,l,u){I.setZoomLevel(l);a(E,u)}function a(E,l,u,C){E=Ja.init(E,oa(I.getZoomLevel()));I.updateOffset(E.x-(I.width>>1),E.y-(I.height>>
1),u,C,function(){l&&l(I)})}b=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,minZoom:1,maxZoom:18,pannable:true,scalable:true},b);var c={NONE:0,SINGLE:1,WATCH:2},g=new p,i=c.NONE,h=null,n=0,s=true,G=0,U=b.tapExtent;b.adjustScaleFactor=function(E){return Math.pow(2,(E<1?Math.floor:Math.ceil)(Math.log(E)))};var I=COG.extend(new Kb(b),{getBoundingBox:function(){var E=I.getViewport();return E?Ia.init(Ja.toPos(new p(E.x,E.y2),G),Ja.toPos(new p(E.x2,E.y),G)):null},getCenterPosition:function(){var E=
I.getViewport();if(E){E=new p(E.x+(E.w>>1),E.y+(E.h>>1));return Ja.toPos(E,G)}return null},gotoBounds:function(E,l){var u=Ia.getZoomLevel(E,I.getViewport());e(Ia.getCenter(E),u,l)},gotoPosition:e,panToPosition:a,syncXY:function(E,l){return(l?Ja.syncPos:Ja.sync)(E,G)},locate:function(){I.trackStart(c.SINGLE);setTimeout(I.trackCancel,1E4)},trackStart:function(E){if(navigator.geolocation&&!n){i=E?E:c.WATCH;s=true;n=navigator.geolocation.watchPosition(d,f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},
trackCancel:function(){n&&navigator.geolocation&&navigator.geolocation.clearWatch(n);I.removeLayer("location");h=null;i=c.NONE;n=0},animateRoute:function(E,l,u,C){var N=I.getLayer("route");if(N)(E=N.getAnimation(E,l,u,C))&&E.addToView(I)}});I.bind("pan",function(){i===c.SINGLE&&I.trackCancel()});I.bind("tap",function(E,l,u,C){E=Ja.toPos(C,G);var N=Ja.toPos(Oa.offset(C,-U,U),G);C=Ja.toPos(Oa.offset(C,U,-U),G);I.trigger("geotap",l,u,E,Ia.init(N,C))});I.bind("refresh",function(E,l,u){if(g.x!=u.x||g.y!=
u.y){I.trigger("boundsChange",I.getBoundingBox());g.x=u.x;g.y=u.y}});I.bind("zoomLevelChange",function(E,l){var u;G=oa(l);u=M/G|0;I.setMaxOffset(u,u,true,false);I.resetScale();I.triggerAll("resync",I)});return I};H.GeoShape=function(b,d){d=COG.extend({autoParse:true},d);for(var f=Array(b.length),e=d.autoParse,a=T5.Geo.Position.parse,c=b.length;c--;)f[c]=T5.GeoXY.init(e?a(b[c]):b[c]);return new T5.Poly(f,d)};H.LocationOverlay=function(b){b=COG.extend({pos:null,accuracy:null,zindex:90},b);var d=new Image,
f=T5.XY.init(),e=T5.XY.init(),a=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
d.onload=function(){f=T5.XY.init(d.width>>1,d.height>>1)};var c=COG.extend(new T5.ViewLayer(b),{pos:b.pos,accuracy:b.accuracy,drawAccuracyIndicator:false,draw:function(g,i){var h=e.x-i.x,n=e.y-i.y;if(a){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(h,n,a,0,Math.PI*2,false);g.fill()}d.complete&&d.width>0&&g.drawImage(d,h-f.x,n-f.y,d.width,d.height)},update:function(g){if(g){a=g.getPixelDistance(c.accuracy)>>1;e=g.getGridXYForPosition(c.pos)}}});c.bind("gridUpdate",function(g,i){c.update(i)});
return c};H.Geo={distanceToString:function(b){if(b>1E3)return~~(b/10)/100+" km";return b?b+" m":""},dist2rad:function(b){return b/6371},getEngine:Z,radsPerPixel:oa,Position:ga,BoundingBox:Ia,Radius:function(b,d){return{distance:parseInt(b,10),uom:d}},Address:function(b){return b=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},b)},A:gb,GeocodeFieldWeights:{streetDetails:50,location:50},AddressCompareFns:{},Engine:function(b){if(!b.id)throw Error("A GEO.Engine cannot be registered without providing an id.");
var d=COG.extend({remove:function(){delete Pa[d.id]}},b);return Pa[d.id]=d},Search:Ua,GeoSearchResult:Pb,LocationSearch:function(b){function d(g,i){navigator.geolocation.clearWatch(e);e=0;if(a){clearTimeout(a);a=0}i&&i([g],b)}function f(g){COG.info("caught location tracking error:",g)}b=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},b);var e=0,a=0,c=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,i){if(navigator.geolocation&&!e){e=navigator.geolocation.watchPosition(function(h){var n=
ga.init(h.coords.latitude,h.coords.longitude);h=new Pb({id:1,caption:"Current Location",pos:n,accuracy:h.coords.accuracy/1E3,matchWeight:100});if(!c||h.accuracy<c.accuracy)c=h;if(!b.requiredAccuracy||c.accuracy<b.requiredAccuracy)d(c,i)},f,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(b.searchTimeout)a=setTimeout(function(){c&&d(c,i)},b.searchTimeout)}}},b))},Routing:mc,GeoJSON:Ra}})(T5);
