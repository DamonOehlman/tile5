COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var D=arguments[0]||{},O,s=1,r=arguments.length;s<r;s++)if((O=arguments[s])!==null)for(var h in O){var f=O[h];if(D!==f)if(f!==undefined)D[h]=f}return D};
(function(){var D=Object.prototype.hasOwnProperty,O=0,s={};s.toID=function(r){return r.replace(/\s/g,"-")};s.objId=function(r){return(r?r:"obj")+O++};s.isFunction=function(r){return toString.call(r)==="[object Function]"};s.isArray=function(r){return toString.call(r)==="[object Array]"};s.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!D.call(r,"constructor")&&!D.call(r.constructor.prototype,"isPrototypeOf"))return false;
var h;for(h in r);return h===undefined||D.call(r,h)};s.isEmptyObject=function(r){for(var h in r)return false;return true};s.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};s.contains=function(r,h){var f=r,m=arguments,t=1;if(h&&module.isArray(h)){m=h;t=0}for(t=t;t<m;t++)f=f&&typeof foo[m[t]]!=="undefined";return f};s.formatStr=function(r){if(arguments.length<=1)return r;for(var h=arguments.length-2,f=0;f<=h;f++)r=r.replace(RegExp("\\{"+f+"\\}","gi"),arguments[f+1]);return r};
s.wordExists=function(r,h){var f="";if(h.toString)h=h.toString();for(var m=0;m<h.length;m++)f+=!/\w/.test(h[m])?"\\"+h[m]:h[m];return RegExp("(^|\\s|\\,)"+f+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,s)})();
(function(){function D(f){return typeof console!=="undefined"?function(){console[f](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var O=window.console&&window.console.markTimeline,s=D("error"),r=D("info"),h=function(){return O?function(f,m){console.markTimeline(f+(m?": "+((new Date).getTime()-m)+"ms":""))}:function(){}}();COG.extend(COG,{trace:h,debug:D("debug"),info:r,warn:D("warn"),error:s,exception:function(f){if(s)for(var m in f)r("ERROR DETAIL: "+m+
": "+f[m])}})})();
(function(){function D(s,r){var h=s.hasOwnProperty("obsHandlers")?s.obsHandlers:null;h[r]||(h[r]=[]);return h[r]}var O=0;COG.observable=function(s){if(!s)return null;if(!(s.hasOwnProperty("obsHandlers")?s.obsHandlers:null))s.obsHandlers={};if(!s.hasOwnProperty("bind")){s.bind=function(r,h){var f="callback"+O++;D(s,r).unshift({fn:h,id:f});return f};s.triggerCustom=function(r,h){var f=D(s,r),m={cancel:false,name:r,source:this},t;h&&COG.extend(m,h);if(!f)return null;t=Array.prototype.slice.call(arguments,2);
s.eventInterceptor&&s.eventInterceptor(r,m,t);t.unshift(m);for(var F=f.length;F--&&!m.cancel;)f[F].fn.apply(this,t);return m};s.trigger=function(r){var h=Array.prototype.slice.call(arguments,1);h.splice(0,0,r,null);return s.triggerCustom.apply(this,h)};s.unbind=function(r,h){if(typeof r==="undefined")s.obsHandlers={};else for(var f=D(s,r),m=0;f&&m<f.length;m++)if(f[m].id===h){f.splice(m,1);break}return s}}return s}})();
(function(){function D(h,f){h[f]||(h[f]=function(m){return h.configure(f,m)})}function O(h){h.gtConfId="configurable"+r++;h.gtConfig={};h.gtConfigFns=[];return h.gtConfig}var s={},r=0;COG.paramTweaker=function(h,f,m){return function(t,F){if(typeof F!=="undefined"){if(t in h)h[t]=F;m&&t in m&&m[t](t,F)}else return f&&t in f?f[t](t):h[t]}};COG.configurable=function(h,f,m,t){if(h){h.gtConfId||O(h);var F=h.gtConfId,i=h.gtConfig,x=h.gtConfigFns;s[F]=h;x.push(m);for(m=f.length;m--;){i[f[m]]=true;t&&D(h,
f[m])}if(!h.configure)h.configure=function(q,z){if(i[q]){for(var n=x.length;n--;){var o=x[n](q,z);if(typeof o!=="undefined")return o}return s[F]}return null}}}})();
(function(){function D(h){var f=document.createElement("script"),m=false;f.src=h;f.async=true;f.onload=f.onreadystatechange=function(){if(!m&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){m=true;f.onload=f.onreadystatechange=null;f&&f.parentNode&&f.parentNode.removeChild(f)}};s||(s=document.getElementsByTagName("head")[0]);s.appendChild(f)}var O=0,s,r=this;COG.jsonp=function(h,f,m){h+=h.indexOf("?")>=0?"&":"?";var t="json"+ ++O;r[t]=function(F){f(F);r[t]=null;try{delete r[t]}catch(i){}};
D(h+(m?m:"callback")+"="+t);return t}})();
(function(){var D=1.70158,O=Math.PI/2,s=1E3/60|0,r=Math.abs,h=Math.pow,f=Math.sin,m=Math.asin,t=Math.cos,F={linear:function(i,x,q,z){return q*i/z+x},backin:function(i,x,q,z){return q*(i/=z)*i*((D+1)*i-D)+x},backout:function(i,x,q,z){return q*((i=i/z-1)*i*((D+1)*i+D)+1)+x},backinout:function(i,x,q,z){return(i/=z/2)<1?q/2*i*i*(((D*=1.525)+1)*i-D)+x:q/2*((i-=2)*i*(((D*=1.525)+1)*i+D)+2)+x},bouncein:function(i,x,q,z){return q-F.bounceout(z-i,0,q,z)+x},bounceout:function(i,x,q,z){return(i/=z)<1/2.75?q*
7.5625*i*i+x:i<2/2.75?q*(7.5625*(i-=1.5/2.75)*i+0.75)+x:i<2.5/2.75?q*(7.5625*(i-=2.25/2.75)*i+0.9375)+x:q*(7.5625*(i-=2.625/2.75)*i+0.984375)+x},bounceinout:function(i,x,q,z){return i<z/2?F.bouncein(i*2,0,q,z)/2+x:F.bounceout(i*2-z,0,q,z)/2+q/2+x},cubicin:function(i,x,q,z){return q*(i/=z)*i*i+x},cubicout:function(i,x,q,z){return q*((i=i/z-1)*i*i+1)+x},cubicinout:function(i,x,q,z){if((i/=z/2)<1)return q/2*i*i*i+x;return q/2*((i-=2)*i*i+2)+x},elasticin:function(i,x,q,z,n,o){if(i==0)return x;if((i/=
z)==1)return x+q;o||(o=z*0.3);if(!n||n<r(q)){n=q;q=o/4}else q=o/TWO_PI*m(q/n);return-(n*h(2,10*(i-=1))*f((i*z-q)*TWO_PI/o))+x},elasticout:function(i,x,q,z,n,o){var u;if(i==0)return x;if((i/=z)==1)return x+q;o||(o=z*0.3);if(!n||n<r(q)){n=q;u=o/4}else u=o/TWO_PI*m(q/n);return n*h(2,-10*i)*f((i*z-u)*TWO_PI/o)+q+x},elasticinout:function(i,x,q,z,n,o){var u;if(i==0)return x;if((i/=z/2)==2)return x+q;o||(o=z*0.3*1.5);if(!n||n<r(q)){n=q;u=o/4}else u=o/TWO_PI*m(q/n);if(i<1)return-0.5*n*h(2,10*(i-=1))*f((i*
z-u)*TWO_PI/o)+x;return n*h(2,-10*(i-=1))*f((i*z-u)*TWO_PI/o)*0.5+q+x},quadin:function(i,x,q,z){return q*(i/=z)*i+x},quadout:function(i,x,q,z){return-q*(i/=z)*(i-2)+x},quadinout:function(i,x,q,z){if((i/=z/2)<1)return q/2*i*i+x;return-q/2*(--i*(i-2)-1)+x},sinein:function(i,x,q,z){return-q*t(i/z*O)+q+x},sineout:function(i,x,q,z){return q*f(i/z*O)+x},sineinout:function(i,x,q,z){return-q/2*(t(Math.PI*i/z)-1)+x}};COG.tweenValue=function(i,x,q,z,n){function o(J){J=J?J:(new Date).getTime();if(ba+s<J){var X=
J-u,Q=q(X,i,L,z),ha=u+z<=J;J=!ha;if(n){X=n(Q,ha,X);J=typeof X!="undefined"?X&&J:J}J&&animFrame(o)}}var u=(new Date).getTime(),ba=0,L=x-i;animFrame(o);return{}};COG.easing=function(i){return F[i.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(i,x){F[i.replace(/[\-\_\s\.]/g,"").toLowerCase()]=x}})();
(function(){var D=/^P(\d+Y)?(\d+M)?(\d+D)?$/,O=/^(\d+H)?(\d+M)?(\d+S)?$/,s={8601:function(h){h=h.split("T");var f=null;f=null;var m=0,t=0;D.lastIndex=-1;f=D.exec(h[0]);m+=f[3]?parseInt(f[3].slice(0,-1),10):0;O.lastIndex=-1;f=O.exec(h[1]);t+=f[1]?parseInt(f[1].slice(0,-1),10)*3600:0;t+=f[2]?parseInt(f[2].slice(0,-1),10)*60:0;t+=f[3]?parseInt(f[3].slice(0,-1),10):0;return new r(m,t)}},r=COG.Duration=function(h,f){return{days:h?h:0,seconds:f?f:0}};COG.addDuration=function(){for(var h=new r,f=arguments.length;f--;){h.days+=
arguments[f].days;h.seconds+=arguments[f].seconds}if(h.seconds>=86400){h.days+=~~(h.seconds/86400);h.seconds%=86400}return h};COG.formatDuration=function(h){var f,m,t="";if(h.days)t=h.days+" days ";if(h.seconds){h=h.seconds;if(h>=3600){f=~~(h/3600);h-=f*3600}if(h>=60){m=Math.round(h/60);h-=m*60}if(f)t=t+f+(f>1?" hrs ":" hr ")+(m?(m>10?m:"0"+m)+" min ":"");else if(m)t=t+m+" min";else if(h>0)t=t+(h>10?h:"0"+h)+" sec"}return t};COG.parseDuration=function(h,f){var m=f?s[f]:null;if(m)return m(h);COG.Log.warn("Could not find duration parser for specified format: "+
f);return new r}})();COG.ObjectStore=function(){var D={},O={},s="obj_"+(new Date).getTime(),r=0,h=Object.prototype.hasOwnProperty;return{add:function(f,m){var t;m=m?m:"default";if(f&&f.constructor)if(!h.call(f,"id"))f.id=s+ ++r;t=O[m]?O[m]:O[m]=[];D[f.id]=t.length;t[f.length]=f}}};var CANI={};
(function(D){var O=[],s=0,r=false,h=D.register=function(f,m){O.push({section:f,run:m})};D.init=function(f){function m(){if(s<O.length){var F=O[s++];t[F.section]||(t[F.section]={});F.run(t[F.section],m)}else{for(F in t)D[F]=t[F];r=true;f&&f(D)}}var t={};if(r&&f)f(D);else{s=0;m()}};h("canvas",function(f,m){function t(){var q,z=F.getContext("2d");z.save();try{z.translate(50,50);z.beginPath();z.rect(0,0,20,20);q=z.isPointInPath(10,10)}finally{z.restore()}return q}var F=document.createElement("canvas"),
i=typeof FlashCanvas!="undefined",x=typeof G_vmlCanvasManager!="undefnined";F.width=200;F.height=200;f.pipTransformed=i||x?false:t();m()})})(CANI);
INTERACT=function(){function D(n){return function(o,u,ba){(ba?ba:n?document.body:document).addEventListener(o,u,false)}}function O(n){return function(o,u,ba){(ba?ba:n?document.body:document).removeEventListener(o,u,false)}}function s(n,o,u){(u?u:document).attachEvent("on"+n,o)}function r(n,o,u){(u?u:document).detachEvent("on"+n,o)}function h(n,o){return{x:n?n:0,y:o?o:0,count:1}}function f(n,o){q.push(COG.extend({handler:null,checks:{},type:n},o))}function m(n){var o=0,u=0;if(n.offsetParent){do{o+=
n.offsetLeft;u+=n.offsetTop;n=n.offsetParent}while(n)}return{left:o,top:u}}function t(n,o){return{source:n,target:o.target?o.target:o.srcElement}}function F(n,o){for(var u=n.target?n.target:n.srcElement;u&&u!==o&&u.nodeName&&u.nodeName.toUpperCase()!="CANVAS";)u=u.parentNode;return u&&u===o}function i(n,o){return{x:n.x-(o?o.left:0),y:n.y-(o?o.top:0)}}function x(n){if(n.preventDefault){n.preventDefault();n.stopPropagation()}else n.cancelBubble&&n.cancelBubble()}var q=[],z=function(n,o,u){function ba(V,
da,ea,I){var P=0,R=0,v=0;COG.tweenValue(0,V,ea,I,function(G){v=P;P=G});COG.tweenValue(0,da,ea,I,function(G){L.trigger("pan",P-v,G-R);R=G})}u=COG.extend({binder:null,unbinder:null,observable:null},u);for(var L=u.observable,J=null,X=[],Q=[],ha,la,na={bind:function(){return L.bind.apply(null,arguments)},pannable:function(V){J=COG.extend({inertia:true},V);return na},unbind:function(){L.unbind();for(var V=0;V<X.length;V++)X[V].unbind();return na}},Ca=0;Ca<o.length;Ca++)X.push(o[Ca](n,L,u));L.bind("pointerDown",
function(){Q=[];la=ha=0});L.bind("pointerMove",function(V,da,ea,I){if(J){Q[Q.length]={ticks:(new Date).getTime(),x:I.x,y:I.y};L.trigger("pan",I.x,I.y)}ha+=I.x?I.x:0;la+=I.y?I.y:0});L.bind("pointerUp",function(V,da,ea){if(Math.abs(ha)>20||Math.abs(la)>20){if(J){ea=Q.length;var I,P;da=0;for(P=Q.length;--P>1&&da<50;)da+=Q[P].ticks-Q[P-1].ticks;if(ea-P>1){V=Q[ea-1].x-Q[P].x;I=Q[ea-1].y-Q[P].y;P=Math.sqrt(V*V+I*I)|0;if(P>15){V=Q[ea-1].x-Q[0].x;I=Q[ea-1].y-Q[0].y;P=Math.sqrt(V*V+I*I)|0;ea=Math.asin(I/P);
da=P*500/da|0;da=da>300?300:da;ba(Math.cos(V>0?ea:Math.PI-ea)*da,Math.sin(ea)*da,COG.easing("sine.out"),500)}}}}else L.trigger("tap",da,ea)});return na};f("pointer",{handler:function(n,o,u){function ba(v){if(v.pageX&&v.pageY)return h(v.pageX,v.pageY);else{var G=document.documentElement,W=document.body;return h(v.clientX+(G&&G.scrollLeft||W&&W.scrollLeft||0)-(G&&G.clientLeft||W&&W.clientLeft||0),v.clientY+(G&&G.scrollTop||W&&W.scrollTop||0)-(G&&G.clientTop||W&&W.clientTop||0))}}function L(v){if(F(v,
n))if(V=ha(v)){var G=ba(v);n.style.cursor="move";x(v);P=G.x;R=G.y;da=h(P,R);o.triggerCustom("pointerDown",t("mouse",v),da,i(da,m(n)))}}function J(v){var G=ba(v);ea=G.x;I=G.y;if(F(v,n))la(v,V?"pointerMove":"pointerHover")}function X(v){if(V&&ha(v)){V=false;if(F(v,n)){n.style.cursor="default";la(v,"pointerUp")}}}function Q(v){if(F(v,n)){var G;v=v||window.event;if(v.detail)G=v.axis===2?-v.detail*na:0;else{G=v.wheelDeltaY?v.wheelDeltaY:v.wheelDelta;if(window.opera)G=-G}if(G!==0){var W=h(ea,I);o.triggerCustom("zoom",
t("mouse",v),W,i(W,m(n)),G/Ca,"wheel");x(v);v.returnValue=false}}}function ha(v){v=v||window.event;return(v.which||v.button)==1}function la(v,G,W,$,Ea){W=typeof W!="undefined"?W:ea;$=typeof $!="undefined"?$:I;var C=W-P,S=$-R,K=h(W,$);o.triggerCustom(G,t("mouse",v),K,i(K,m(n)),h(C,S));if(typeof Ea=="undefined"||Ea){P=W;R=$}}u=COG.extend({},u);var na=120,Ca=na*8,V=false,da,ea,I,P,R;u.binder("mousedown",L,false);u.binder("mousemove",J,false);u.binder("mouseup",X,false);u.binder("dblclick",function(v){COG.info("captured double click");
if(F(v,n)){var G=ba(v);o.triggerCustom("doubleTap",t("mouse",v),G,i(G,m(n)))}},false);u.binder("mousewheel",Q,document);u.binder("DOMMouseScroll",Q,document);return{unbind:function(){u.unbinder("mousedown",L,false);u.unbinder("mousemove",J,false);u.unbinder("mouseup",X,false);u.unbinder("mousewheel",Q,document);u.unbinder("DOMMouseScroll",Q,document)}}},checks:{touch:false}});f("pointer",{handler:function(n,o,u){function ba(C){if(C.count<2)return 0;var S=C.x-C.next.x;C=C.y-C.next.y;return~~Math.sqrt(S*
S+C*C)}function L(C,S,K){S=S?S:0;K=K?K:0;for(var oa={x:C.x-S,y:C.y-K,id:C.id,count:C.count},pa=oa;C.next;){C=C.next;pa=pa.next={x:C.x-S,y:C.y-K,id:C.id}}return oa}function J(C,S){var K=C[S?S:"touches"],oa,pa;if(K.length===0)return null;pa=oa={x:K[0].pageX,y:K[0].pageY,id:K[0].identifier,count:K.length};for(var ua=1,va=K.length;ua<va;ua++)pa=pa.next={x:K[ua].pageX,y:K[ua].pageY,id:K[ua].identifier};return oa}function X(C){if(F(C,n)){I=m(n);var S=J(C,"changedTouches"),K=L(S,I.left,I.top);if(!R){P=V;
o.triggerCustom("pointerDown",t("touch",C),S,K)}$&&o.triggerCustom("pointerDownMulti",t("touch",C),S,K);R=J(C);if(R.count>1)G=ba(R);Ea=1;W=L(R)}}function Q(C){if(F(C,n)){C.preventDefault();v=J(C);if(P==V)P=Math.abs(R.x-v.x)>na||Math.abs(R.y-v.y)>na?Ca:V;if(P!=V){P=v.count>1?ea:da;if(P==ea)if(R.count===1){R=L(v);G=ba(R)}else{var S=ba(v);if(Math.abs(G-S)<la)P=da;else{var K;K=v.x;var oa=v.next.x,pa=v.y,ua=v.next.y,va=pa<ua?pa:ua;K={x:(K<oa?K:oa)+(Math.abs(K-oa)>>1),y:va+(Math.abs(pa-ua)>>1)};S=S/G;oa=
S-Ea;o.triggerCustom("zoom",t("touch",C),K,i(K,I),oa,"pinch");Ea=S}}P==da&&o.triggerCustom("pointerMove",t("touch",C),v,L(v,I.left,I.top),h(v.x-W.x,v.y-W.y));$&&o.triggerCustom("pointerMoveMulti",t("touch",C),v,L(v,I.left,I.top))}W=L(v)}}function ha(C){if(F(C,n)){var S=J(C,"changedTouches"),K=L(S,I.left,I.top);v=J(C);if(!v){o.triggerCustom("pointerUp",t("touch",C),S,K);R=null}$&&o.triggerCustom("pointerUpMulti",t("touch",C),S,K)}}u=COG.extend({detailed:false,inertia:false},u);var la=20,na=7,Ca=0,
V=1,da=2,ea=3,I,P,R,v,G,W,$=u.detailed,Ea=1;u.binder("touchstart",X,false);u.binder("touchmove",Q,false);u.binder("touchend",ha,false);COG.info("initialized touch handler");return{unbind:function(){u.unbinder("touchstart",X,false);u.unbinder("touchmove",Q,false);u.unbinder("touchend",ha,false)}}},checks:{touch:true}});return{register:f,watch:function(n,o,u){o=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},o);capabilities=COG.extend({touch:"ontouchstart"in
window},u);if(!o.observable){COG.info("creating observable");o.observable=COG.observable({});globalOpts=o}o.binder=o.isIE?s:D(o.bindToBody);o.unbinder=o.isIE?r:O(o.bindToBody);u=o.types;for(var ba=capabilities,L=[],J=q.length;J--;){var X=q[J],Q=!u||u.indexOf(X.type)>=0,ha=true;for(var la in X.checks){var na=X.checks[la];COG.info("checking "+la+" capability. require: "+na+", capability = "+ba[la]);ha=ha&&na===ba[la]}if(Q&&ha)L[L.length]=X.handler}return new z(n,L,o)}}}();var T5={};
(function(D){function O(){return(new Date).getTime()}function s(a,e){e=I.call(e);if(e=="finite")return!ea[da](+a);return e=="null"&&a===null||e==typeof a||e=="object"&&a===Object(a)||e=="array"&&Array.isArray&&Array.isArray(a)||P.call(a).slice(8,-1).toLowerCase()==e}function r(){var a=(new Date).getTime(),e=0;clearTimeout(Ka);for(Ka=0;e<Ga.length;){var d=Ga[e],b=va[d],c=va[d].image&&(W||va[d].image.complete&&va[d].image.width>0),g=a-b.start;g=c||g>=oa;if(c){c=b.image;b=b.callbacks;pa[d]=c;for(var j=
0;j<b.length;j++)b[j](c,true)}if(g){Ga.splice(e,1);delete va[d]}else e++}if(Ga.length>0)Ka=setTimeout(r,K)}function h(a){function e(g){var j=a[g];s(j,R)||b.push(function(w){w[g]=j})}function d(){b=[];for(var g in a)e(g)}a=COG.extend({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},a);var b=[],c={applyToContext:function(g){for(var j=b.length;j--;)b[j](g)},update:function(g,
j){a[g]=j;d()}};d();return c}function f(){for(var a=0,e=arguments.length;e--;){var d=ob[arguments[e].toUpperCase()];if(d)a|=d}return a}function m(a){a=a?a:(new Date).getTime();if(a-$a>pb){for(var e=La.splice(0),d=e.length;d--;)e[d](a);$a=a}La.length&&animFrame(m)}function t(a){var e=La.length==0;La[La.length]=a;e&&animFrame(m)}function F(a,e,d,b,c){c=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},c);var g=(new Date).getTime(),j=a[e],w=e=="translate",k=
c.autoInvalidate,B=d.length&&b.length&&d.length==b.length?d.length:0,T=Array(B),Y=Array(B),H=COG.easing(c.easing),Z=c.duration,ma=c.progress,A=function(E){var ca=E-g;E=g+Z<=E;for(var aa=a.layer?a.layer.view:null,ga,ia=B;ia--;){ga=H(ca,d[ia],T[ia],Z);Y[ia]=w?ga|0:ga}j.apply(a,Y);if(k&&aa)aa.redraw=true;if(ma){ca=[].concat(E?b:Y);ca.unshift(E);ma.apply(a,ca)}if(E){a.animations--;j.apply(a,b);c.complete&&c.complete.apply(a,b)}else t(A)};if(j&&j.apply&&B>0){Z=Z?Z:DEFAULT_DURATION;for(e=B;e--;)T[e]=b[e]-
d[e];a.animations++;t(A)}}function i(a,e){var d,b;if(e&&e.width>0){if(!a.imageOffset)a.imageOffset=$.init(-e.width>>1,-e.height>>1);if(!a.bounds){d=a.xy.x+a.imageOffset.x;b=a.xy.y+a.imageOffset.y;a.bounds=C.init(d,b,d+e.width,b+e.height)}}}function x(a){wa.call(this,a)}function q(a,e){e=COG.extend({simplify:false},e);var d=false,b=e.simplify;f("ZOOM");var c=[];e.type=e.fill?"polygon":"line";wa.call(this,e);COG.extend(this,{animatePath:function(){},prep:function(g){return d?g.path(c):null},resync:function(g){var j,
w,k,B,T;g.syncXY(a);c=$.floor(b?$.simplify(a):a);for(var Y=c.length;Y--;){g=c[Y].x;j=c[Y].y;B=s(B,R)||g<B?g:B;T=s(T,R)||j<T?j:T;w=s(w,R)||g>w?g:w;k=s(k,R)||j>k?j:k}this.updateBounds(C.init(B,T,w,k),true)}});d=a&&a.length>=2}function z(a,e){e.fill=false;q.call(this,a,e)}function n(a){function e(k){(this.imageUrl=k)&&ab(this.imageUrl,function(B,T){j=B;if(T){var Y=w.layer?w.layer.view:null;if(Y)Y.redraw=true}})}a=COG.extend({image:null,imageUrl:null,imageOffset:null},a);var d=null,b=wa.prototype.updateBounds,
c,g,j=a.image;wa.call(this,a);var w=COG.extend(this,{changeImage:e,drag:function(k,B,T,Y){d||(d=$.init(k.startX-this.xy.x,k.startY-this.xy.y));this.xy.x=B-d.x;this.xy.y=T-d.y;if(Y){d=null;if(this.layer)(k=this.layer.view)&&k.syncXY([this.xy],true);this.trigger("dragDrop")}return true},prep:function(k){if(j&&j.width>0){i(this,j);c=this.xy.x+this.imageOffset.x;g=this.xy.y+this.imageOffset.y;return k.image(j,c,g,j.width,j.height)}},updateBounds:function(k,B){b.call(this,k,B);i(this,j)}});j||e(this.imageUrl)}
function o(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.imageOffset=$.invert(a.imageAnchor);n.call(this,a)}function u(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:f("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},a);this.view=null;COG.observable(COG.extend(this,a))}window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();var ba=Math.abs,L=Math.min,J=Math.max,X=Math.pow,Q=Math.sqrt,ha=Math.log,la=Math.round,na=Math.sin,Ca=Math.asin,V=Math.cos,da="hasOwnProperty",ea={NaN:1,Infinity:1,"-Infinity":1},I=String.prototype.toLowerCase,P=Object.prototype.toString,R="undefined",v="number",G=typeof G_vmlCanvasManager!=R,W=typeof FlashCanvas!=R,$=function(){function a(b,c){return d(b.x-c.x,b.y-c.y)}function e(b,c){if(!c)c=b.length;if(c<=1)throw Error("Cannot determine edge distances for a vector array of only one vector");
for(var g={edges:Array(c-1),accrued:Array(c-1),total:0},j=0;j<c-1;j++){var w=a(b[j],b[j+1]);g.edges[j]=Q(w.x*w.x+w.y*w.y);g.accrued[j]=g.total+g.edges[j];g.total+=g.edges[j]}return g}function d(b,c){return{x:b?b:0,y:c?c:0}}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var b=0,c=0,g=arguments.length;g--;){b+=arguments[g].x;c+=arguments[g].y}return d(b,c)},absSize:function(b){return J(ba(b.x),ba(b.y))},copy:function(b){return b?d(b.x,b.y):null},diff:a,distance:function(b,
c){return e(b,c).total},edges:e,equals:function(b,c){return b.x===c.x&&b.y===c.y},extendBy:function(b,c,g){var j=V(c)*g|0;c=na(c)*g|0;return d(b.x-j,b.y-c)},floor:function(b){for(var c=Array(b.length),g=b.length;g--;)c[g]=d(~~b[g].x,~~b[g].y);return c},getRect:function(b){for(var c,g,j,w,k=b.length;k--;){var B=b[k];c=s(c,R)||B.x<c?B.x:c;g=s(g,R)||B.y<g?B.y:g;j=s(j,R)||B.x>j?B.x:j;w=s(w,R)||B.y>w?B.y:w}return C.init(c,g,j,w)},init:d,invert:function(b){return d(-b.x,-b.y)},min:function(b,c){return d(b.x<
c.x?b.x:c.x,b.y<c.y?b.y:c.y)},max:function(b,c){return d(b.x>c.x?b.x:c.x,b.y>c.y?b.y:c.y)},offset:function(b,c,g){return d(b.x+c,b.y+(g?g:c))},scale:function(b,c){return d(b.x/c|0,b.y/c|0)},simplify:function(b,c){if(!b)return null;c=c?c:$.VECTOR_SIMPLIFICATION;for(var g=[],j=null,w=b.length;w--;){var k=b[w];if(include=!j||w===0||ba(k.x-j.x)+ba(k.y-j.y)>c){g.unshift(k);j=k}}return g},theta:function(b,c,g){g=Ca((b.y-c.y)/g);return b.x>c.x?g:Math.PI-g},toString:function(b){return b?b.x+", "+b.y:""}}}(),
Ea=function(){return{dotProduct:function(a,e){return a.x*e.x+a.y*e.y}}}(),C=function(){function a(d){return e(d.x1,d.y1,d.x2,d.y2)}function e(d,b,c,g){d=d?d:0;b=b?b:0;c=s(c,v)?c:d;g=s(g,v)?g:g;return{x1:d,y1:b,x2:c,y2:g,width:c-d,height:g-b}}return{buffer:function(d,b,c){return $.init(d.x1-b,d.y1-c?c:b,d.x1+b,d.y1+c?c:b)},center:function(d){return $.init(d.x1+(d.width>>1),d.y1+(d.height>>1))},copy:a,diagonalSize:function(d){return Q(d.width*d.width+d.height*d.height)},fromCenter:function(d,b,c,g){c=
c>>1;g=g>>1;return e(d-c,b-g,d+c,b+g)},init:e,intersect:function(d,b){var c=J(d.x1,b.x1),g=J(d.y1,b.y1),j=L(d.x2,b.x2),w=L(d.y2,b.y2);c=e(c,g,j,w);return c.width>0&&c.height>0?c:null},toString:function(d){return d?"["+d.x1+", "+d.y1+", "+d.x2+", "+d.y2+"]":""},union:function(d,b){if(d.width===0||d.height===0)return a(b);else if(b.width===0||b.height===0)return a(d);else{var c=L(d.x1,b.x1),g=L(d.y1,b.y1),j=J(d.x2,b.x2),w=J(d.y2,b.y2);c=e(c,g,j,w);return c.width>0&&c.height>0?c:null}}}}(),S=function(){return{getAspectRatio:function(a){return a.height!==
0?a.width/a.height:1},getCenter:function(a){return $.init(a.width>>1,a.height>>1)},getSize:function(a){return Q(X(a.width,2)+X(a.height,2))},init:function(a,e){a=a?a:0;return{width:a,height:e?e:a}}}}();Hits=function(){return{diffHits:function(a,e){var d=[],b={},c;for(c=e.length;c--;)b[e[c].target.id]=true;for(c=a.length;c--;)b[a[c].target.id]||(d[d.length]=a[c]);return d},init:function(a,e,d,b){return{type:a,x:b.x|0,y:b.y|0,elements:[],absXY:e,relXY:d}},initHit:function(a,e,d){return{type:a,target:e,
drag:d}},triggerEvent:function(a,e,d,b){e.triggerCustom(a.type+(d?d:"Hit"),{hitType:a.type},b?b:a.elements,a.absXY,a.relXY,$.init(a.x,a.y))}}}();var K=100,oa=3E4,pa={},ua=0;(new Date).getTime();var va={},Ga=[],Ka=0,ab=T5.getImage=function(a,e){var d=a&&e?pa[a]:null;if(d&&d&&(W||d.complete&&d.width>0))e(d);else{if(d=va[a])d.callbacks.push(e);else{d=new Image;d.id="_ldimg"+ ++ua;va[a]={start:(new Date).getTime(),image:d,callbacks:[e]};d.src=a;Ga[Ga.length]=a}Ka||(Ka=setTimeout(r,K))}},qb=T5.newCanvas=
function(a,e){var d=document.createElement("canvas");d.width=a?a:0;d.height=e?e:0;if(W){document.body.appendChild(d);FlashCanvas.initElement(d)}G&&G_vmlCanvasManager.initElement(d);return d},bb=function(){var a={};return{init:function(e,d){var b=a[e];if(!b)throw Error("Unable to locate requested generator: "+e);return new b(d)},register:function(e,d){a[e]=d}}}(),rb=function(){return{applyStyle:function(){},applyTransform:function(a,e,d){return{restore:null,x:e,y:d}},checkSize:function(){},getDimensions:function(){return{width:0,
height:0}},getOffset:function(){return $.init(0,0)},getViewport:function(){},hitTest:function(){return false},prepare:function(){},render:function(){},reset:function(){}}},cb={},db=D.registerRenderer=function(a,e){cb[a]=e},eb=D.attachRenderer=function(a,e,d,b){a=a.split("/");for(var c=new rb(e,d,b),g=0;g<a.length;g++){var j=cb[a[g]];if(j)c=new j(e,d,b,c)}return c};db("canvas",function(a,e,d,b){function c(A,E,ca){if(A.image)k.drawImage(A.image,E,ca);else if(!A.loading){A.loading=true;ab(A.url,function(aa){A.image=
aa;A.loading=false;k.drawImage(aa,A.screenX,A.screenY)})}}d=COG.extend({},d);var g,j,w,k,B,T=0,Y=0,H=null,Z={},ma={draw:function(){this.fill&&k.fill();this.stroke&&k.stroke()}};(function(){if(e){var A=e.tagName=="CANVAS",E=A?e.parentNode:e;g=a.width=E.offsetWidth;j=a.height=E.offsetHeight;if(A){w=e;w.width=g;w.height=j;W&&FlashCanvas.initElement(w)}else{w=qb(g,j);w.style.cssText="position: absolute; z-index: 1;";e.appendChild(w)}k=null}})();return COG.extend(b,{interactTarget:w,applyStyle:function(A){var E=
sb(A),ca=E&&k&&k.canvas?Z[k.canvas.id]:null;if(E){Z[k.canvas.id]=A;E.applyToContext(k);return ca}},applyTransform:function(A){if(A.translateX||A.translateY||A.scaling!==1||A.rotatation){k.save();H={undo:function(){k.restore();H=null},x:A.xy.x,y:A.xy.y};k.translate(A.xy.x-T+A.translateX,A.xy.y-Y+A.translateY);A.rotation!==0&&k.rotate(A.rotation);A.scaling!==1&&k.scale(A.scaling,A.scaling)}return H},arc:function(A,E,ca,aa,ga){k.beginPath();k.arc(A-(H?H.x:T),E-(H?H.y:Y),ca,aa,ga,false);return ma},drawTiles:function(A){for(var E,
ca,aa=H?H.x:T,ga=H?H.y:Y,ia=aa-256,xa=ga-256,Fa=aa+g,Ha=ga+j,Oa,fa,ta=A.length;ta--;){E=A[ta];ca=E.x>=ia&&E.x<=Fa&&E.y>=xa&&E.y<=Ha;Oa=E.screenX=E.x-aa;fa=E.screenY=E.y-ga;ca&&c(E,Oa,fa)}},image:function(A,E,ca,aa,ga){var ia=E-(H?H.x:T),xa=ca-(H?H.y:Y);k.beginPath();k.rect(ia,xa,aa,ga);return{draw:function(){k.drawImage(A,ia,xa,aa,ga)}}},prepare:function(A){var E,ca=false;E=a.getOffset();var aa=a.getScaleFactor(),ga=E.x,ia=E.y;if(k)k.restore();else k=w.getContext("2d");for(E=A.length;E--;)ca=ca||
A[E].clip;B=C.init(ga,ia,ga+g,ia+j);B.scaleFactor=aa;if(aa!==1)B=C.fromCenter(B.x1+(g>>1),B.y1+(j>>1),g/aa|0,j/aa|0);T=B.x1;Y=B.y1;if(k){ca||k.clearRect(0,0,g,j);k.save();k.scale(aa,aa)}k.globalCompositeOperation="source-over";return k},path:function(A){var E=true,ca=H?H.x:T,aa=H?H.y:Y;k.beginPath();for(var ga=A.length;ga--;){var ia=A[ga].x-ca,xa=A[ga].y-aa;if(E){k.moveTo(ia,xa);E=false}else k.lineTo(ia,xa)}return ma},getContext:function(){return k},getDimensions:function(){return{width:g,height:j}},
getOffset:function(){return $.init(T,Y)},getViewport:function(){return B}})});db("dom",function(a,e,d,b){var c=typeof e.style["-webkit-transform"]!="undefined",g=null;g=document.createElement("div");g.id=COG.objId("domImages");g.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",e.offsetWidth,e.offsetHeight);e.insertBefore(g,b.interactTarget);var j=COG.extend(b,{drawTiles:function(w){var k,B;k=j.getOffset();j.getViewport();for(var T=k.x,Y=k.y,H,Z,ma=w.length;ma--;){k=
w[ma];B=k.image;H=k.x-T;Z=k.y-Y;if(!B){B=k.image=new Image;B.src=k.url;g.appendChild(B);B.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;"}if(c)B.style["-webkit-transform"]=
"translate3d("+H+"px, "+Z+"px, 0px)";else{B.style.left=H+"px";B.style.top=Z+"px"}B.style.display="block"}},reset:function(){g.innerHTML=""}});return j});var fb={},tb=D.defineStyle=function(a,e){fb[a]=h(e);return a},gb=D.defineStyles=function(a){for(var e in a)tb(e,a[e])},sb=D.getStyle=function(a){return fb[a]};D.loadStyles=function(a){COG.jsonp(a,function(e){gb(e)})};gb({basic:{lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"},
waypointsHover:{lineWidth:4,strokeStyle:"#f00",fillStyle:"#FFF"}});var ob={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},wa=function(a){a=COG.extend({style:null,xy:null,size:null,fill:false,stroke:true,draggable:false,observable:true,properties:{},type:"shape"},a);COG.extend(this,a);this.id=COG.objId(this.type);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};wa.prototype={constructor:wa,animate:function(a,
e,d,b){F(this,a,e,d,b)},drag:null,prep:function(){},resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(C.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=a},translate:function(a,e){this.translateX=a;this.translateY=e},updateBounds:function(a,e){this.bounds=a;if(e)this.xy=C.center(this.bounds)}};var pb=1E3/60|0,La=[],$a=0;x.prototype=COG.extend(wa.prototype,{constructor:x,prep:function(a){return a.arc(this.xy.x,
this.xy.y,this.size>>1,0,Math.PI*2)}});q.prototype=COG.extend({},wa.prototype,{constructor:q});z.prototype=COG.extend({},q.prototype);n.prototype=COG.extend({},wa.prototype,{constructor:n});o.prototype=COG.extend({},n.prototype,{constructor:o});u.prototype={constructor:u,shouldDraw:function(a){return(a&this.validStates)!==0},clip:null,cycle:function(){},draw:function(){},hitGuess:null};var hb=function(a){a=COG.extend({zindex:10},a);var e=[],d=CANI.canvas.pipTransformed,b=COG.extend(new u(a),{draw:function(c,
g,j,w,k){w=c.getViewport();j=w.x1;w=w.y1;for(var B=k?d?k.x-j:k.relXY.x:0,T=k?d?k.y-w:k.relXY.y:0,Y=e.length;Y--;){var H=e[Y],Z=H.style||b.style,ma,A=c.applyTransform(H,j,w);if(drawData=H.prep(c,A?A.x:j,A?A.y:w,g)){if(k&&c.hitTest(drawData,B,T)){k.elements.push(Hits.initHit(H.type,H,H.draggable?H.drag:null));ma=k.type+"Style";Z=H[ma]||b[ma]||Z}Z=Z?c.applyStyle(Z):null;drawData.draw&&drawData.draw.call(H,j,w,g);Z&&c.applyStyle(Z)}A&&A.undo&&A.undo()}},getDrawables:function(){return[]},hitGuess:function(c,
g){for(var j=false,w=e.length;!j&&w--;){var k=e[w];if(!(j=j))j=(k=k.bounds)&&c>=k.x1&&c<=k.x2&&g>=k.y1&&g<=k.y2;j=j}return j}});b.bind("refresh",function(c,g,j){e=b.getDrawables(g,j)});return b},ib=function(a){function e(g){for(var j=b.length;j--;)b[j].resync(g);b.sort(function(w,k){var B=k.xy.y-w.xy.y;return B!=0?B:k.xy.x-w.xy.y});g.redraw=true}function d(g,j){e(j)}a=COG.extend({zindex:10},a);var b=[],c=COG.extend(new hb(a),{add:function(g,j){if(g){g.layer=c;var w=c.view;if(w){g.resync(w);w.redraw=
true}if(j)b.unshift(g);else b[b.length]=g}},clear:function(){b=[]},find:function(){return[].concat(b)},getDrawables:function(){return b}});c.bind("parentChange",d);c.bind("resync",d);return c};COG.extend(D,{ex:COG.extend,is:s,ticks:O,userMessage:function(a,e,d){D.trigger("userMessage",a,e,d)},XY:$,XYRect:C,Dimensions:S,Vector:Ea,Hits:Hits,Generator:bb,tween:COG.tween,tweenValue:COG.tweenValue,easing:COG.easing,Tween:COG.Tween,viewState:f,View:function(a){function e(l,p,y){ya||Ha(ja-p,ka-y)}function d(l,
p,y,M){ia(L(J(qa+X(2,M)-1,0.5),2))}function b(){var l=ha(qa)/Math.LN2|0;if(l!==0){qa=X(2,l);xa(Ma+l,ub,vb)}N.redraw=true}function c(l,p){var y=N.getViewport(),M=1/qa;return $.init(y?y.x1+l*M:l,y?y.y1+p*M:p)}function g(l,p,y){Fa("doubleTap",p,y,c(y.x,y.y));a.scalable&&ia(2,c(y.x,y.y),a.zoomEasing,null,a.zoomDuration)}function j(l,p,y){ya=null;E("down",p,y)}function w(l,p,y){E("hover",p,y)}function k(l,p,y){ma(p,y,false)}function B(l,p,y){ma(p,y,true)}function T(){clearTimeout(jb);jb=setTimeout(function(){renderer.checkSize()},
250)}function Y(l,p,y){E("tap",p,y);Fa("tap",p,y,c(y.x,y.y,true))}function H(l,p){p.id=l;p.added=O();p.view=N;p.trigger("parentChange",N,Pa,wb);fa.push(p);fa.sort(function(y,M){var U=M.zindex-y.zindex;if(U===0)U=M.added-y.added;return U});ta=fa.length;return p}function Z(){ra&&ra.unbind();if(renderer){ra=INTERACT.watch(renderer.interactTarget);a.pannable&&ra.pannable().bind("pan",e);if(a.scalable){ra.bind("zoom",d);ra.bind("doubleTap",g)}ra.bind("pointerDown",j);ra.bind("pointerMove",k);ra.bind("pointerUp",
B);a.captureHover&&ra.bind("pointerHover",w);ra.bind("tap",Y)}}function ma(l,p,y){if(ya){l=c(p.x,p.y);if(ya.drag.call(ya.target,ya,l.x,l.y,y))N.redraw=true;if(y)ya=null}}function A(l){var p;p=false;l=l?l:(new Date).getTime();if(p=l-kb>xb){N.trigger("enterFrame",l,yb++);l-lb>zb&&ga();kb=l}if(p&&N.redraw){p=ja!==Sa||ka!==Ta;za=mb|(qa!==1?nb:0)|(p?Ua:0)|(Va?Wa:0);Xa=(p=(za&(nb|Ua))!==0)&&(za&Wa)===0;if(renderer.prepare(fa,za,l,sa)){p=renderer.getViewport();for(var y=ta;y--;){za|=fa[y].animated?Wa:0;
fa[y].cycle(l,p,za)}for(y=fa.length;y--;){var M=fa[y];if(M.shouldDraw(za,p)){var U=M.style?renderer.applyStyle(M.style):null;M.draw(renderer,za,N,l,sa);U&&renderer.applyStyle(U)}}renderer.render()}if(sa){l=sa?sa.elements:[];if(Na&&Na.type==="hover"){p=Hits.diffHits(Na.elements,l);p.length>0&&Hits.triggerEvent(Na,N,"Out",p)}if(l.length>0){y=sa.x;M=sa.y;for(p=l.length;p--;){U=l[p];var Aa=y,Da=M,Ba=U&&U.drag&&(!U.canDrag||U.canDrag(U,Aa,Da));if(Ba){ya=U;ya.startX=Aa;ya.startY=Da}if(Ba)break}Hits.triggerEvent(sa,
N)}Na=l.length>0?COG.extend({},sa):null;sa=null}Sa=ja;Ta=ka;N.redraw=false}animFrame(A)}function E(l,p,y){sa=Hits.init(l,p,y,c(y.x,y.y,true));for(l=ta;l--;)Ya=Ya||(fa[l].hitGuess?fa[l].hitGuess(sa.x,sa.y,za,N):false);if(Ya)N.redraw=true}function ca(){N.redraw=true}function aa(){var l;if(renderer){l=renderer.getViewport();if(!l){l=renderer.getDimensions();l=C.init(ja,ka,ja+l.width,ka+l.height)}}return l}function ga(){var l=renderer?renderer.getViewport():null;if(l){if(Ia||Ja)if(l){var p=Qa?ja+(l.width>>
1):ja,y=Ra?ka+(l.height>>1):ka,M=l.width,U=l.height;if(Ia&&Ia>M)if(p+M>Ia)ja=Qa?ja:Ia-M;else if(p<0)ja=Qa?ja:0;if(Ja&&Ja>U)if(y+U>Ja)ka=Ra?ka:Ja-U;else if(y<0)ka=Ra?ka:0}lb=(new Date).getTime();Fa("refresh",N,l);N.redraw=true}}function ia(l,p,y,M,U){if(y)COG.tweenValue(qa,l,y,U,function(Aa,Da){qa=Aa;if(Da){var Ba=la(ha(qa)/Math.LN2);qa=X(2,Ba);M&&M()}b()});else{qa=l;b()}return N}function xa(l,p,y){l=J(a.minZoom,L(a.maxZoom,l));if(l!==Ma){var M=X(2,l-Ma),U=N.width>>1,Aa=N.height>>1,Da=U/M|0,Ba=Aa/
M|0;Ma=l;Ha(((p?p:ja+U)-Da)*M,((y?y:ka+Aa)-Ba)*M);Sa=ja;Ta=ka;Fa("zoomLevelChange",l);qa=1;renderer.reset();ga();N.redraw=true}}function Fa(){for(var l=N.trigger.apply(null,arguments).cancel,p=fa.length;p--;)l=fa[p].trigger.apply(null,arguments).cancel||l;return!l}function Ha(l,p,y,M,U){function Aa(){Da+=1;if(Da>=2){Va=false;U&&U()}}var Da=0;if(y){if((za&Ua)===0){COG.tweenValue(ja,l,y,M,function(Ba,Za){ja=Ba|0;(Za?Aa:ca)();return!Xa});COG.tweenValue(ka,p,y,M,function(Ba,Za){ka=Ba|0;(Za?Aa:ca)();return!Xa});
Va=true}}else{ja=l|0;ka=p|0;N.redraw=true;U&&U()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,minRefresh:1E3,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},a);var Oa={},fa=[],ta=0,Pa=document.getElementById(a.container),
ya=null,yb=0,wb=null,Ab=s(window.attachEvent,"function"),Ya=false,zb=a.minRefresh,ja=0,ka=0,Sa=0,Ta=0,Ia=null,Ja=null,Qa=false,Ra=false,sa=null,Xa=false,lb=0,Na=null,jb=0,qa=1,kb=0,ra=null,Va=false,xb=1E3/a.fps|0,ub,vb,Ma=a.zoomLevel,mb=f("ACTIVE"),Ua=f("PAN"),nb=f("ZOOM"),Wa=f("ANIMATING"),za=mb,N={id:a.id,detach:function(){ra&&ra.unbind()},eachLayer:function(l){for(var p=ta;p--;)l(fa[p])},getLayer:function(l){for(var p=0;p<ta;p++)if(fa[p].id===l)return fa[p];return null},getZoomLevel:function(){return Ma},
setLayer:function(l,p){for(var y=0;y<ta;y++)if(fa[y].id===l){fa.splice(y,1);break}if(p){H(l,p);p.trigger("refresh",N,aa())}N.redraw=true;return p},invalidate:ca,refresh:ga,resetScale:function(){qa=1},scale:ia,setZoomLevel:xa,syncXY:function(){},triggerAll:Fa,removeLayer:function(l){a:{for(var p=ta;p--;)if(fa[p].id===l){l=p;break a}l=-1}if(l>=0&&l<ta){N.trigger("layerRemoved",fa[l]);fa.splice(l,1);N.redraw=true}ta=fa.length},getOffset:function(){return $.init(ja,ka)},getRenderer:function(){return renderer},
getScaleFactor:function(){return qa},setMaxOffset:function(l,p,y,M){Ia=l;Ja=p;Qa=y;Ra=M},getViewport:aa,updateOffset:Ha,pan:function(l,p,y,M,U){Ha(ja+l,ka+p,y,M,U)}};COG.observable(N);N.bind("resync",function(){});COG.configurable(N,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(a,null,{container:function(l,p){Pa=document.getElementById(p);renderer=eb(a.renderer,N,Pa);Z()},inertia:Z,captureHover:Z,scalable:Z,pannable:Z}),true);
CANI.init(function(l){N.markers=H("markers",new ib({zindex:20}));Oa=l;renderer=eb(a.renderer,N,Pa);Z();Ab?window.attachEvent("onresize",T):window.addEventListener("resize",T,false)});animFrame(A);return N},ViewLayer:u,ImageLayer:function(a,e){function d(w,k){var B=c?Math.abs(c.x1-k.x1)+Math.abs(c.y1-k.y1):0;if(b&&(!c||B>256))b(w,k,function(T){c=C.copy(k);g=[].concat(T)})}e=COG.extend({imageLoadArgs:{}},e);var b=a?bb.init(a,e).run:null,c=null,g=[],j=COG.extend(new u(e),{draw:function(w){w.drawTiles(g)}});
j.bind("refresh",function(w,k,B){d(k,B)});return j},ImageGenerator:function(a){a=COG.extend({relative:false,padding:2},a);a={run:function(){COG.warn("running base generator - this should be overriden")}};COG.observable(a);return a},Drawable:wa,Marker:x,Poly:q,Line:z,ImageDrawable:n,ImageMarker:o,DrawLayer:hb,ShapeLayer:ib});COG.observable(D)})(T5);
