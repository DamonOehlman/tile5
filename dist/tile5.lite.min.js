COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var D=arguments[0]||{},O,A=1,r=arguments.length;A<r;A++)if((O=arguments[A])!==null)for(var f in O){var g=O[f];if(D!==g)if(g!==undefined)D[f]=g}return D};
(function(){var D=Object.prototype.hasOwnProperty,O=0,A={};A.toID=function(r){return r.replace(/\s/g,"-")};A.objId=function(r){return(r?r:"obj")+O++};A.isFunction=function(r){return toString.call(r)==="[object Function]"};A.isArray=function(r){return toString.call(r)==="[object Array]"};A.isPlainObject=function(r){if(!r||toString.call(r)!=="[object Object]"||r.nodeType||r.setInterval)return false;if(r.constructor&&!D.call(r,"constructor")&&!D.call(r.constructor.prototype,"isPrototypeOf"))return false;
var f;for(f in r);return f===undefined||D.call(r,f)};A.isEmptyObject=function(r){for(var f in r)return false;return true};A.isXmlDocument=function(r){return toString.call(r)==="[object Document]"};A.contains=function(r,f){var g=r,n=arguments,u=1;if(f&&module.isArray(f)){n=f;u=0}for(u=u;u<n;u++)g=g&&typeof foo[n[u]]!=="undefined";return g};A.formatStr=function(r){if(arguments.length<=1)return r;for(var f=arguments.length-2,g=0;g<=f;g++)r=r.replace(RegExp("\\{"+g+"\\}","gi"),arguments[g+1]);return r};
A.wordExists=function(r,f){var g="";if(f.toString)f=f.toString();for(var n=0;n<f.length;n++)g+=!/\w/.test(f[n])?"\\"+f[n]:f[n];return RegExp("(^|\\s|\\,)"+g+"(\\,|\\s|$)","i").test(r)};COG.extend(COG,A)})();
(function(){function D(g){return typeof console!=="undefined"?function(){console[g](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var O=window.console&&window.console.markTimeline,A=D("error"),r=D("info"),f=function(){return O?function(g,n){console.markTimeline(g+(n?": "+((new Date).getTime()-n)+"ms":""))}:function(){}}();COG.extend(COG,{trace:f,debug:D("debug"),info:r,warn:D("warn"),error:A,exception:function(g){if(A)for(var n in g)r("ERROR DETAIL: "+n+
": "+g[n])}})})();
(function(){function D(A,r){var f=A.hasOwnProperty("obsHandlers")?A.obsHandlers:null;f[r]||(f[r]=[]);return f[r]}var O=0;COG.observable=function(A){if(!A)return null;if(!(A.hasOwnProperty("obsHandlers")?A.obsHandlers:null))A.obsHandlers={};if(!A.hasOwnProperty("bind")){A.bind=function(r,f){var g="callback"+O++;D(A,r).unshift({fn:f,id:g});return g};A.triggerCustom=function(r,f){var g=D(A,r),n={cancel:false,name:r,source:this},u;f&&COG.extend(n,f);if(!g)return null;u=Array.prototype.slice.call(arguments,2);
A.eventInterceptor&&A.eventInterceptor(r,n,u);u.unshift(n);for(var G=g.length;G--&&!n.cancel;)g[G].fn.apply(this,u);return n};A.trigger=function(r){var f=Array.prototype.slice.call(arguments,1);f.splice(0,0,r,null);return A.triggerCustom.apply(this,f)};A.unbind=function(r,f){if(typeof r==="undefined")A.obsHandlers={};else for(var g=D(A,r),n=0;g&&n<g.length;n++)if(g[n].id===f){g.splice(n,1);break}return A}}return A}})();
(function(){function D(f,g){f[g]||(f[g]=function(n){return f.configure(g,n)})}function O(f){f.gtConfId="configurable"+r++;f.gtConfig={};f.gtConfigFns=[];return f.gtConfig}var A={},r=0;COG.paramTweaker=function(f,g,n){return function(u,G){if(typeof G!=="undefined"){if(u in f)f[u]=G;n&&u in n&&n[u](u,G)}else return g&&u in g?g[u](u):f[u]}};COG.configurable=function(f,g,n,u){if(f){f.gtConfId||O(f);var G=f.gtConfId,i=f.gtConfig,x=f.gtConfigFns;A[G]=f;x.push(n);for(n=g.length;n--;){i[g[n]]=true;u&&D(f,
g[n])}if(!f.configure)f.configure=function(s,y){if(i[s]){for(var p=x.length;p--;){var m=x[p](s,y);if(typeof m!=="undefined")return m}return A[G]}return null}}}})();
(function(){function D(f){var g=document.createElement("script"),n=false;g.src=f;g.async=true;g.onload=g.onreadystatechange=function(){if(!n&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){n=true;g.onload=g.onreadystatechange=null;g&&g.parentNode&&g.parentNode.removeChild(g)}};A||(A=document.getElementsByTagName("head")[0]);A.appendChild(g)}var O=0,A,r=this;COG.jsonp=function(f,g,n){f+=f.indexOf("?")>=0?"&":"?";var u="json"+ ++O;r[u]=function(G){g(G);r[u]=null;try{delete r[u]}catch(i){}};
D(f+(n?n:"callback")+"="+u);return u}})();
(function(){var D=1.70158,O=Math.PI/2,A=1E3/60|0,r=Math.abs,f=Math.pow,g=Math.sin,n=Math.asin,u=Math.cos,G={linear:function(i,x,s,y){return s*i/y+x},backin:function(i,x,s,y){return s*(i/=y)*i*((D+1)*i-D)+x},backout:function(i,x,s,y){return s*((i=i/y-1)*i*((D+1)*i+D)+1)+x},backinout:function(i,x,s,y){return(i/=y/2)<1?s/2*i*i*(((D*=1.525)+1)*i-D)+x:s/2*((i-=2)*i*(((D*=1.525)+1)*i+D)+2)+x},bouncein:function(i,x,s,y){return s-G.bounceout(y-i,0,s,y)+x},bounceout:function(i,x,s,y){return(i/=y)<1/2.75?s*
7.5625*i*i+x:i<2/2.75?s*(7.5625*(i-=1.5/2.75)*i+0.75)+x:i<2.5/2.75?s*(7.5625*(i-=2.25/2.75)*i+0.9375)+x:s*(7.5625*(i-=2.625/2.75)*i+0.984375)+x},bounceinout:function(i,x,s,y){return i<y/2?G.bouncein(i*2,0,s,y)/2+x:G.bounceout(i*2-y,0,s,y)/2+s/2+x},cubicin:function(i,x,s,y){return s*(i/=y)*i*i+x},cubicout:function(i,x,s,y){return s*((i=i/y-1)*i*i+1)+x},cubicinout:function(i,x,s,y){if((i/=y/2)<1)return s/2*i*i*i+x;return s/2*((i-=2)*i*i+2)+x},elasticin:function(i,x,s,y,p,m){if(i==0)return x;if((i/=
y)==1)return x+s;m||(m=y*0.3);if(!p||p<r(s)){p=s;s=m/4}else s=m/TWO_PI*n(s/p);return-(p*f(2,10*(i-=1))*g((i*y-s)*TWO_PI/m))+x},elasticout:function(i,x,s,y,p,m){var v;if(i==0)return x;if((i/=y)==1)return x+s;m||(m=y*0.3);if(!p||p<r(s)){p=s;v=m/4}else v=m/TWO_PI*n(s/p);return p*f(2,-10*i)*g((i*y-v)*TWO_PI/m)+s+x},elasticinout:function(i,x,s,y,p,m){var v;if(i==0)return x;if((i/=y/2)==2)return x+s;m||(m=y*0.3*1.5);if(!p||p<r(s)){p=s;v=m/4}else v=m/TWO_PI*n(s/p);if(i<1)return-0.5*p*f(2,10*(i-=1))*g((i*
y-v)*TWO_PI/m)+x;return p*f(2,-10*(i-=1))*g((i*y-v)*TWO_PI/m)*0.5+s+x},quadin:function(i,x,s,y){return s*(i/=y)*i+x},quadout:function(i,x,s,y){return-s*(i/=y)*(i-2)+x},quadinout:function(i,x,s,y){if((i/=y/2)<1)return s/2*i*i+x;return-s/2*(--i*(i-2)-1)+x},sinein:function(i,x,s,y){return-s*u(i/y*O)+s+x},sineout:function(i,x,s,y){return s*g(i/y*O)+x},sineinout:function(i,x,s,y){return-s/2*(u(Math.PI*i/y)-1)+x}};COG.tweenValue=function(i,x,s,y,p){function m(R){R=R?R:(new Date).getTime();if(aa+A<R){var Z=
R-v,N=s(Z,i,V,y),ea=v+y<=R;R=!ea;if(p){Z=p(N,ea,Z);R=typeof Z!="undefined"?Z&&R:R}R&&animFrame(m)}}var v=(new Date).getTime(),aa=0,V=x-i;animFrame(m);return{}};COG.easing=function(i){return G[i.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(i,x){G[i.replace(/[\-\_\s\.]/g,"").toLowerCase()]=x}})();
(function(){var D=/^P(\d+Y)?(\d+M)?(\d+D)?$/,O=/^(\d+H)?(\d+M)?(\d+S)?$/,A={8601:function(f){f=f.split("T");var g=null;g=null;var n=0,u=0;D.lastIndex=-1;g=D.exec(f[0]);n+=g[3]?parseInt(g[3].slice(0,-1),10):0;O.lastIndex=-1;g=O.exec(f[1]);u+=g[1]?parseInt(g[1].slice(0,-1),10)*3600:0;u+=g[2]?parseInt(g[2].slice(0,-1),10)*60:0;u+=g[3]?parseInt(g[3].slice(0,-1),10):0;return new r(n,u)}},r=COG.Duration=function(f,g){return{days:f?f:0,seconds:g?g:0}};COG.addDuration=function(){for(var f=new r,g=arguments.length;g--;){f.days+=
arguments[g].days;f.seconds+=arguments[g].seconds}if(f.seconds>=86400){f.days+=~~(f.seconds/86400);f.seconds%=86400}return f};COG.formatDuration=function(f){var g,n,u="";if(f.days)u=f.days+" days ";if(f.seconds){f=f.seconds;if(f>=3600){g=~~(f/3600);f-=g*3600}if(f>=60){n=Math.round(f/60);f-=n*60}if(g)u=u+g+(g>1?" hrs ":" hr ")+(n?(n>10?n:"0"+n)+" min ":"");else if(n)u=u+n+" min";else if(f>0)u=u+(f>10?f:"0"+f)+" sec"}return u};COG.parseDuration=function(f,g){var n=g?A[g]:null;if(n)return n(f);COG.Log.warn("Could not find duration parser for specified format: "+
g);return new r}})();COG.ObjectStore=function(){var D={},O={},A="obj_"+(new Date).getTime(),r=0,f=Object.prototype.hasOwnProperty;return{add:function(g,n){var u;n=n?n:"default";if(g&&g.constructor)if(!f.call(g,"id"))g.id=A+ ++r;u=O[n]?O[n]:O[n]=[];D[g.id]=u.length;u[g.length]=g}}};var CANI={};
(function(D){var O=[],A=0,r=false,f=D.register=function(g,n){O.push({section:g,run:n})};D.init=function(g){function n(){if(A<O.length){var G=O[A++];u[G.section]||(u[G.section]={});G.run(u[G.section],n)}else{for(G in u)D[G]=u[G];r=true;g&&g(D)}}var u={};if(r&&g)g(D);else{A=0;n()}};f("canvas",function(g,n){function u(){var s,y=G.getContext("2d");y.save();try{y.translate(50,50);y.beginPath();y.rect(0,0,20,20);s=y.isPointInPath(10,10)}finally{y.restore()}return s}var G=document.createElement("canvas"),
i=typeof FlashCanvas!="undefined",x=typeof G_vmlCanvasManager!="undefnined";G.width=200;G.height=200;g.pipTransformed=i||x?false:u();n()})})(CANI);
INTERACT=function(){function D(p){return function(m,v,aa){(aa?aa:p?document.body:document).addEventListener(m,v,false)}}function O(p){return function(m,v,aa){(aa?aa:p?document.body:document).removeEventListener(m,v,false)}}function A(p,m,v){(v?v:document).attachEvent("on"+p,m)}function r(p,m,v){(v?v:document).detachEvent("on"+p,m)}function f(p,m){return{x:p?p:0,y:m?m:0,count:1}}function g(p,m){s.push(COG.extend({handler:null,checks:{},type:p},m))}function n(p){var m=0,v=0;if(p.offsetParent){do{m+=
p.offsetLeft;v+=p.offsetTop;p=p.offsetParent}while(p)}return{left:m,top:v}}function u(p,m){return{source:p,target:m.target?m.target:m.srcElement}}function G(p,m){for(var v=p.target?p.target:p.srcElement;v&&v!==m&&v.nodeName&&v.nodeName.toUpperCase()!="CANVAS";)v=v.parentNode;return v&&v===m}function i(p,m){return{x:p.x-(m?m.left:0),y:p.y-(m?m.top:0)}}function x(p){if(p.preventDefault){p.preventDefault();p.stopPropagation()}else p.cancelBubble&&p.cancelBubble()}var s=[],y=function(p,m,v){function aa(P,
T,S,H){var K=0,ba=0,w=0;COG.tweenValue(0,P,S,H,function(I){w=K;K=I});COG.tweenValue(0,T,S,H,function(I){V.trigger("pan",K-w,I-ba);ba=I})}v=COG.extend({binder:null,unbinder:null,observable:null},v);for(var V=v.observable,R=null,Z=[],N=[],ea,fa,ka={bind:function(){return V.bind.apply(null,arguments)},pannable:function(P){R=COG.extend({inertia:true},P);return ka},unbind:function(){V.unbind();for(var P=0;P<Z.length;P++)Z[P].unbind();return ka}},na=0;na<m.length;na++)Z.push(m[na](p,V,v));V.bind("pointerDown",
function(){N=[];fa=ea=0});V.bind("pointerMove",function(P,T,S,H){if(R){N[N.length]={ticks:(new Date).getTime(),x:H.x,y:H.y};V.trigger("pan",H.x,H.y)}ea+=H.x?H.x:0;fa+=H.y?H.y:0});V.bind("pointerUp",function(P,T,S){if(Math.abs(ea)>20||Math.abs(fa)>20){if(R){S=N.length;var H,K;T=0;for(K=N.length;--K>1&&T<50;)T+=N[K].ticks-N[K-1].ticks;if(S-K>1){P=N[S-1].x-N[K].x;H=N[S-1].y-N[K].y;K=Math.sqrt(P*P+H*H)|0;if(K>15){P=N[S-1].x-N[0].x;H=N[S-1].y-N[0].y;K=Math.sqrt(P*P+H*H)|0;S=Math.asin(H/K);T=K*500/T|0;
T=T>300?300:T;aa(Math.cos(P>0?S:Math.PI-S)*T,Math.sin(S)*T,COG.easing("sine.out"),500)}}}}else V.trigger("tap",T,S)});return ka};g("pointer",{handler:function(p,m,v){function aa(w){if(w.pageX&&w.pageY)return f(w.pageX,w.pageY);else{var I=document.documentElement,Y=document.body;return f(w.clientX+(I&&I.scrollLeft||Y&&Y.scrollLeft||0)-(I&&I.clientLeft||Y&&Y.clientLeft||0),w.clientY+(I&&I.scrollTop||Y&&Y.scrollTop||0)-(I&&I.clientTop||Y&&Y.clientTop||0))}}function V(w){if(G(w,p))if(P=ea(w)){var I=aa(w);
p.style.cursor="move";x(w);K=I.x;ba=I.y;T=f(K,ba);m.triggerCustom("pointerDown",u("mouse",w),T,i(T,n(p)))}}function R(w){var I=aa(w);S=I.x;H=I.y;if(G(w,p))fa(w,P?"pointerMove":"pointerHover")}function Z(w){if(P&&ea(w)){P=false;if(G(w,p)){p.style.cursor="default";fa(w,"pointerUp")}}}function N(w){if(G(w,p)){var I;w=w||window.event;if(w.detail)I=w.axis===2?-w.detail*ka:0;else{I=w.wheelDeltaY?w.wheelDeltaY:w.wheelDelta;if(window.opera)I=-I}if(I!==0){var Y=f(S,H);m.triggerCustom("zoom",u("mouse",w),Y,
i(Y,n(p)),I/na,"wheel");x(w);w.returnValue=false}}}function ea(w){w=w||window.event;return(w.which||w.button)==1}function fa(w,I,Y,ra,X){Y=typeof Y!="undefined"?Y:S;ra=typeof ra!="undefined"?ra:H;var E=Y-K,J=ra-ba,L=f(Y,ra);m.triggerCustom(I,u("mouse",w),L,i(L,n(p)),f(E,J));if(typeof X=="undefined"||X){K=Y;ba=ra}}v=COG.extend({},v);var ka=120,na=ka*8,P=false,T,S,H,K,ba;v.binder("mousedown",V,false);v.binder("mousemove",R,false);v.binder("mouseup",Z,false);v.binder("dblclick",function(w){COG.info("captured double click");
if(G(w,p)){var I=aa(w);m.triggerCustom("doubleTap",u("mouse",w),I,i(I,n(p)))}},false);v.binder("mousewheel",N,document);v.binder("DOMMouseScroll",N,document);return{unbind:function(){v.unbinder("mousedown",V,false);v.unbinder("mousemove",R,false);v.unbinder("mouseup",Z,false);v.unbinder("mousewheel",N,document);v.unbinder("DOMMouseScroll",N,document)}}},checks:{touch:false}});g("pointer",{handler:function(p,m,v){function aa(E){if(E.count<2)return 0;var J=E.x-E.next.x;E=E.y-E.next.y;return~~Math.sqrt(J*
J+E*E)}function V(E,J,L){J=J?J:0;L=L?L:0;for(var ca={x:E.x-J,y:E.y-L,id:E.id,count:E.count},ma=ca;E.next;){E=E.next;ma=ma.next={x:E.x-J,y:E.y-L,id:E.id}}return ca}function R(E,J){var L=E[J?J:"touches"],ca,ma;if(L.length===0)return null;ma=ca={x:L[0].pageX,y:L[0].pageY,id:L[0].identifier,count:L.length};for(var la=1,Aa=L.length;la<Aa;la++)ma=ma.next={x:L[la].pageX,y:L[la].pageY,id:L[la].identifier};return ca}function Z(E){if(G(E,p)){H=n(p);var J=R(E,"changedTouches"),L=V(J,H.left,H.top);if(!ba){K=
P;m.triggerCustom("pointerDown",u("touch",E),J,L)}ra&&m.triggerCustom("pointerDownMulti",u("touch",E),J,L);ba=R(E);if(ba.count>1)I=aa(ba);X=1;Y=V(ba)}}function N(E){if(G(E,p)){E.preventDefault();w=R(E);if(K==P)K=Math.abs(ba.x-w.x)>ka||Math.abs(ba.y-w.y)>ka?na:P;if(K!=P){K=w.count>1?S:T;if(K==S)if(ba.count===1){ba=V(w);I=aa(ba)}else{var J=aa(w);if(Math.abs(I-J)<fa)K=T;else{var L;L=w.x;var ca=w.next.x,ma=w.y,la=w.next.y,Aa=ma<la?ma:la;L={x:(L<ca?L:ca)+(Math.abs(L-ca)>>1),y:Aa+(Math.abs(ma-la)>>1)};
J=J/I;ca=J-X;m.triggerCustom("zoom",u("touch",E),L,i(L,H),ca,"pinch");X=J}}K==T&&m.triggerCustom("pointerMove",u("touch",E),w,V(w,H.left,H.top),f(w.x-Y.x,w.y-Y.y));ra&&m.triggerCustom("pointerMoveMulti",u("touch",E),w,V(w,H.left,H.top))}Y=V(w)}}function ea(E){if(G(E,p)){var J=R(E,"changedTouches"),L=V(J,H.left,H.top);w=R(E);if(!w){m.triggerCustom("pointerUp",u("touch",E),J,L);ba=null}ra&&m.triggerCustom("pointerUpMulti",u("touch",E),J,L)}}v=COG.extend({detailed:false,inertia:false},v);var fa=20,ka=
7,na=0,P=1,T=2,S=3,H,K,ba,w,I,Y,ra=v.detailed,X=1;v.binder("touchstart",Z,false);v.binder("touchmove",N,false);v.binder("touchend",ea,false);COG.info("initialized touch handler");return{unbind:function(){v.unbinder("touchstart",Z,false);v.unbinder("touchmove",N,false);v.unbinder("touchend",ea,false)}}},checks:{touch:true}});return{register:g,watch:function(p,m,v){m=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},m);capabilities=COG.extend({touch:"ontouchstart"in
window},v);if(!m.observable){COG.info("creating observable");m.observable=COG.observable({});globalOpts=m}m.binder=m.isIE?A:D(m.bindToBody);m.unbinder=m.isIE?r:O(m.bindToBody);v=m.types;for(var aa=capabilities,V=[],R=s.length;R--;){var Z=s[R],N=!v||v.indexOf(Z.type)>=0,ea=true;for(var fa in Z.checks){var ka=Z.checks[fa];COG.info("checking "+fa+" capability. require: "+ka+", capability = "+aa[fa]);ea=ea&&ka===aa[fa]}if(N&&ea)V[V.length]=Z.handler}return new y(p,V,m)}}}();var T5={};
(function(D){function O(){return(new Date).getTime()}function A(){for(;Va.length>0;){var a=Va.shift();document.location=a}Aa=0}function r(a){for(var e=true,c=ib.length;c--;)e=e&&a!=ib[c];return e}function f(a,e){var c=[];for(var b in e)b&&c.push(b+"="+escape(e[b]));return"tile5://"+a+"/"+(c.length>0?"?"+c.join("&"):"")}function g(a,e){r(a)&&COG.info("would push url: "+f(a,e))}function n(a,e){if(r(a)){Va.push(f(a,e));Aa||(Aa=setTimeout(A,100))}}function u(a){return function(e,c,b){(b?b:a?document.body:
document).addEventListener(e,c,false)}}function G(a){return function(e,c,b){(b?b:a?document.body:document).removeEventListener(e,c,false)}}function i(a,e,c){(c?c:document).attachEvent("on"+a,e)}function x(a,e,c){(c?c:document).detachEvent("on"+a,e)}function s(){ca={base:{name:"Unknown",bindEvent:u(),unbindEvent:G(),supportsTouch:"ontouchstart"in window,imageCacheMaxSize:null,getScaling:function(){return 1},maxImageLoads:null,requireFastDraw:false,bridgeNotify:g,targetFps:null},ie:{name:"MSIE",regex:/msie/i,
bindEvent:i,unbindEvent:x,requireFastDraw:false,targetFps:25},ipod:{name:"iPod Touch",regex:/ipod/i,imageCacheMaxSize:6144,maxImageLoads:4,requireFastDraw:false,bridgeNotify:n,targetFps:25},iphone:{name:"iPhone",regex:/iphone/i,imageCacheMaxSize:6144,maxImageLoads:4,bridgeNotify:n},ipad:{name:"iPad",regex:/ipad/i,imageCacheMaxSize:6144,bridgeNotify:n},android:{name:"Android OS <= 2.1",regex:/android/i,bindEvent:u(true),unbindEvent:G(true),supportsTouch:true,getScaling:function(){return 1/window.devicePixelRatio},
bridgeNotify:n},froyo:{name:"Android OS >= 2.2",regex:/froyo/i,eventTarget:document.body,supportsTouch:true,bridgeNotify:n}};ma=[ca.froyo,ca.android,ca.ipod,ca.iphone,ca.ipad,ca.ie]}function y(){ca||s();if(!la){COG.info("ATTEMPTING TO DETECT PLATFORM: UserAgent = "+navigator.userAgent);for(var a=0;a<ma.length;a++){var e=ma[a];if(e.regex&&e.regex.test(navigator.userAgent)){la=COG.extend({},ca.base,e);COG.info("PLATFORM DETECTED AS: "+la.name);break}}if(!la){COG.warn("UNABLE TO DETECT PLATFORM, REVERTING TO BASE CONFIGURATION");
la=ca.base}COG.info("CURRENT DEVICE PIXEL RATIO = "+window.devicePixelRatio)}return la}function p(){var a=(new Date).getTime(),e=0;clearTimeout(Ka);for(Ka=0;e<Da.length;){var c=Da[e],b=Ba[c],d=Ba[c].image&&(jb||Ba[c].image.complete&&Ba[c].image.width>0),h=a-b.start;h=d||h>=Bb;if(d){d=b.image;b=b.callbacks;kb[c]=d;for(var j=0;j<b.length;j++)b[j](d,true)}if(h){Da.splice(e,1);delete Ba[c]}else e++}if(Da.length>0)Ka=setTimeout(p,lb)}function m(){for(var a=0,e=arguments.length;e--;){var c=Cb[arguments[e].toUpperCase()];
if(c)a|=c}return a}function v(a){a=a?a:(new Date).getTime();if(a-mb>Db){for(var e=La.splice(0),c=e.length;c--;)e[c](a);mb=a}La.length&&animFrame(v)}function aa(a){var e=La.length==0;La[La.length]=a;e&&animFrame(v)}function V(a,e,c,b,d){d=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},d);var h=(new Date).getTime(),j=a[e],k=d.autoInvalidate,q=c.length&&b.length&&c.length==b.length?c.length:0,t=Array(q),B=Array(q),F=COG.easing(d.easing),C=d.duration,M=d.progress,
ja=function($){var ia=$-h;$=h+C<=$;for(var sa=a.layer?a.layer.view:null,oa=q;oa--;)B[oa]=F(ia,c[oa],t[oa],C);j.apply(a,B);if(k&&sa)sa.redraw=true;if(M){ia=[].concat($?b:B);ia.unshift($);M.apply(a,ia)}if($){a.animations--;j.apply(a,b);d.complete&&d.complete.apply(a,b)}else aa(ja)};if(j&&j.apply&&q>0){C=C?C:DEFAULT_DURATION;for(e=q;e--;)t[e]=b[e]-c[e];a.animations++;aa(ja)}}function R(a,e){var c,b;if(e&&e.width>0){if(!a.imageOffset)a.imageOffset=X.init(-e.width>>1,-e.height>>1);if(!a.bounds){c=a.xy.x+
a.imageOffset.x;b=a.xy.y+a.imageOffset.y;a.bounds=J.init(c,b,c+e.width,b+e.height)}}}function Z(a){ua.call(this,a)}function N(a,e){e=COG.extend({simplify:false},e);var c=false,b=e.simplify;m("ZOOM");var d=[];e.type=e.fill?"polygon":"line";ua.call(this,e);COG.extend(this,{animatePath:function(){},prep:function(h){return c?h.path(d):null},resync:function(h){var j,k,q,t,B;h.syncXY(a);d=X.floor(b?X.simplify(a):a);for(var F=d.length;F--;){h=d[F].x;j=d[F].y;t=typeof t=="undefined"||h<t?h:t;B=typeof B==
"undefined"||j<B?j:B;k=typeof k=="undefined"||h>k?h:k;q=typeof q=="undefined"||j>q?j:q}this.updateBounds(J.init(t,B,k,q),true)}});c=a&&a.length>=2}function ea(a,e){e.fill=false;N.call(this,a,e)}function fa(a){function e(q){(this.imageUrl=q)&&nb(this.imageUrl,function(t,B){j=t;if(B){var F=k.layer?k.layer.view:null;if(F)F.redraw=true}})}a=COG.extend({image:null,imageUrl:null,imageOffset:null},a);var c=null,b=ua.prototype.updateBounds,d,h,j=a.image;ua.call(this,a);var k=COG.extend(this,{changeImage:e,
drag:function(q,t,B,F){c||(c=X.init(q.startX-this.xy.x,q.startY-this.xy.y));this.xy.x=t-c.x;this.xy.y=B-c.y;if(F){c=null;if(this.layer)(q=this.layer.view)&&q.syncXY([this.xy],true);this.trigger("dragDrop")}return true},prep:function(q){if(j&&j.width>0){R(this,j);d=this.xy.x+this.imageOffset.x;h=this.xy.y+this.imageOffset.y;return q.image(j,d,h,j.width,j.height)}},updateBounds:function(q,t){b.call(this,q,t);R(this,j)}});j||e(this.imageUrl)}function ka(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.imageOffset=
X.invert(a.imageAnchor);fa.call(this,a)}function na(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:m("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},a);this.view=null;COG.observable(COG.extend(this,a))}window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},
1E3/60)}}();var P=Math.abs,T=Math.min,S=Math.max,H=Math.pow,K=Math.sqrt,ba=Math.log,w=Math.round,I=Math.sin,Y=Math.asin,ra=Math.cos,X=function(){function a(b,d){return c(b.x-d.x,b.y-d.y)}function e(b,d){if(!d)d=b.length;if(d<=1)throw Error("Cannot determine edge distances for a vector array of only one vector");for(var h={edges:Array(d-1),accrued:Array(d-1),total:0},j=0;j<d-1;j++){var k=a(b[j],b[j+1]);h.edges[j]=K(k.x*k.x+k.y*k.y);h.accrued[j]=h.total+h.edges[j];h.total+=h.edges[j]}return h}function c(b,
d){return{x:b?b:0,y:d?d:0}}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var b=0,d=0,h=arguments.length;h--;){b+=arguments[h].x;d+=arguments[h].y}return c(b,d)},absSize:function(b){return S(P(b.x),P(b.y))},copy:function(b){return b?c(b.x,b.y):null},diff:a,distance:function(b,d){return e(b,d).total},edges:e,equals:function(b,d){return b.x===d.x&&b.y===d.y},extendBy:function(b,d,h){var j=ra(d)*h|0;d=I(d)*h|0;return c(b.x-j,b.y-d)},floor:function(b){for(var d=Array(b.length),
h=b.length;h--;)d[h]=c(~~b[h].x,~~b[h].y);return d},getRect:function(b){for(var d,h,j,k,q=b.length;q--;){var t=b[q];d=typeof d==="undefined"||t.x<d?t.x:d;h=typeof h==="undefined"||t.y<h?t.y:h;j=typeof j==="undefined"||t.x>j?t.x:j;k=typeof k==="undefined"||t.y>k?t.y:k}return J.init(d,h,j,k)},init:c,invert:function(b){return c(-b.x,-b.y)},min:function(b,d){return c(b.x<d.x?b.x:d.x,b.y<d.y?b.y:d.y)},max:function(b,d){return c(b.x>d.x?b.x:d.x,b.y>d.y?b.y:d.y)},offset:function(b,d,h){return c(b.x+d,b.y+
(h?h:d))},scale:function(b,d){return c(b.x/d|0,b.y/d|0)},simplify:function(b,d){if(!b)return null;d=d?d:X.VECTOR_SIMPLIFICATION;for(var h=[],j=null,k=b.length;k--;){var q=b[k];if(include=!j||k===0||P(q.x-j.x)+P(q.y-j.y)>d){h.unshift(q);j=q}}return h},theta:function(b,d,h){h=Y((b.y-d.y)/h);return b.x>d.x?h:Math.PI-h},toString:function(b){return b?b.x+", "+b.y:""}}}(),E=function(){return{dotProduct:function(a,e){return a.x*e.x+a.y*e.y}}}(),J=function(){function a(c){return e(c.x1,c.y1,c.x2,c.y2)}function e(c,
b,d,h){c=c?c:0;b=b?b:0;d=typeof d!=="undefined"?d:c;h=typeof h!=="undefined "?h:h;return{x1:c,y1:b,x2:d,y2:h,width:d-c,height:h-b}}return{center:function(c){return X.init(c.x1+(c.width>>1),c.y1+(c.height>>1))},copy:a,diagonalSize:function(c){return K(c.width*c.width+c.height*c.height)},fromCenter:function(c,b,d,h){d=d>>1;h=h>>1;return e(c-d,b-h,c+d,b+h)},init:e,intersect:function(c,b){var d=S(c.x1,b.x1),h=S(c.y1,b.y1),j=T(c.x2,b.x2),k=T(c.y2,b.y2);d=e(d,h,j,k);return d.width>0&&d.height>0?d:null},
toString:function(c){return c?"["+c.x1+", "+c.y1+", "+c.x2+", "+c.y2+"]":""},union:function(c,b){if(c.width===0||c.height===0)return a(b);else if(b.width===0||b.height===0)return a(c);else{var d=T(c.x1,b.x1),h=T(c.y1,b.y1),j=S(c.x2,b.x2),k=S(c.y2,b.y2);d=e(d,h,j,k);return d.width>0&&d.height>0?d:null}}}}(),L=function(){return{getAspectRatio:function(a){return a.height!==0?a.width/a.height:1},getCenter:function(a){return X.init(a.width>>1,a.height>>1)},getSize:function(a){return K(H(a.width,2)+H(a.height,
2))},init:function(a,e){a=a?a:0;return{width:a,height:e?e:a}}}}();Hits=function(){return{diffHits:function(a,e){var c=[],b={},d;for(d=e.length;d--;)b[e[d].target.id]=true;for(d=a.length;d--;)b[a[d].target.id]||(c[c.length]=a[d]);return c},init:function(a,e,c,b){return{type:a,x:b.x|0,y:b.y|0,elements:[],absXY:e,relXY:c}},initHit:function(a,e,c){return{type:a,target:e,drag:c}},triggerEvent:function(a,e,c,b){e.triggerCustom(a.type+(c?c:"Hit"),{hitType:a.type},b?b:a.elements,a.absXY,a.relXY,X.init(a.x,
a.y))}}}();var ca=null,ma=[],la=null,Aa=0,Va=[],ib=["view.wake","tile.loaded"],lb=100,Bb=3E4,kb={},Eb=0;(new Date).getTime();var Ba={},Da=[],jb=typeof FlashCanvas!="undefined",Ka=0,nb=T5.getImage=function(a,e){var c=a&&e?kb[a]:null;if(c&&c&&(jb||c.complete&&c.width>0))e(c);else{if(c=Ba[a])c.callbacks.push(e);else{c=new Image;c.id="_ldimg"+ ++Eb;Ba[a]={start:(new Date).getTime(),image:c,callbacks:[e]};c.src=a;Da[Da.length]=a}Ka||(Ka=setTimeout(p,lb))}},Fb=T5.newCanvas=function(a,e){var c=document.createElement("canvas");
c.width=a?a:0;c.height=e?e:0;if(typeof FlashCanvas!="undefined"){document.body.appendChild(c);FlashCanvas.initElement(c)}typeof G_vmlCanvasManager!="undefined"&&G_vmlCanvasManager.initElement(c);return c},ob=function(){var a={};return{init:function(e,c){var b=a[e];if(!b)throw Error("Unable to locate requested generator: "+e);return new b(c)},register:function(e,c){a[e]=c}}}(),Gb=function(){return{applyStyle:function(){},checkSize:function(){},hitTest:function(){return false},restore:function(){},
save:function(){}}},pb={},Qa=D.registerRenderer=function(a,e){pb[a]=e},Wa=D.attachRenderer=function(a,e,c,b){if(a=pb[a])return new a(e,c,b)};Qa("canvas",function(a,e,c){function b(t,B,F){if(t.image)k.drawImage(t.image,B,F);else if(!t.loading){t.loading=true;nb(t.url,function(C){t.image=C;t.loading=false;k.drawImage(C,t.screenX,t.screenY)})}}c=COG.extend({},c);var d,h,j,k,q;if(e){d=a.width=e.offsetWidth;h=a.height=e.offsetHeight;j=Fb(d,h);k=null;e.appendChild(j)}return COG.extend(new Gb(a,e,c),{interactTarget:j,
arc:function(t,B,F,C,M){k.beginPath();k.arc(t-q.x1,B-q.y1,F,C,M,false);return{draw:function(){k.fill();k.stroke()}}},drawTiles:function(t){for(var B,F,C=q.x1,M=q.y1,ja=C-256,$=M-256,ia=C+d,sa=M+h,oa,Ea,Fa=t.length;Fa--;){B=t[Fa];F=B.x>=ja&&B.x<=ia&&B.y>=$&&B.y<=sa;oa=B.screenX=B.x-C;Ea=B.screenY=B.y-M;F&&b(B,oa,Ea)}},image:function(t,B,F,C,M){var ja=B-q.x1,$=F-q.y1;k.beginPath();k.rect(ja,$,C,M);return{draw:function(){k.drawImage(t,ja,$,C,M)}}},prepare:function(t){var B,F=false;B=a.getOffset();var C=
B.x-(d>>1),M=B.y-(h>>1);if(k)k.restore();else k=j.getContext("2d");for(B=t.length;B--;)F=F||t[B].clip;q=J.init(C,M,C+d,M+h);q.scaleFactor=a.getScaleFactor();if(k){F||k.clearRect(0,0,d,h);k.save()}k.globalCompositeOperation="source-over";return k},path:function(t){var B=true,F=q.x1,C=q.y1;k.beginPath();for(var M=t.length;M--;){var ja=t[M].x-F,$=t[M].y-C;if(B){k.moveTo(ja,$);B=false}else k.lineTo(ja,$)}return{draw:function(){k.fill();k.stroke()}}},getDimensions:function(){return{width:d,height:h}},
getViewport:function(){return q}})});Qa("domvas",function(a,e,c){var b=typeof e.style["-webkit-transform"]!="undefined",d=null,h=COG.extend(Wa("canvas",a,e,c),{drawTiles:function(j){var k,q;k=h.getViewport();for(var t,B=k.x1,F=k.y1,C=B-256,M=F-256,ja=k.x2,$=k.y2,ia,sa,oa=j.length;oa--;){k=j[oa];q=k.image;t=k.x>=C&&k.x<=ja&&k.y>=M&&k.y<=$;ia=k.x-B;sa=k.y-F;if(!q){q=k.image=new Image;q.src=k.url;d.appendChild(q);q.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;"}if(b)q.style["-webkit-transform"]=
"translate3d("+ia+"px, "+sa+"px, 0px)";else{q.style.left=ia+"px";q.style.top=sa+"px"}q.style.display=t?"block":"none"}}});d=document.createElement("div");d.id=COG.objId("domImages");d.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px; background: #ddd; z-index: -1;",e.offsetWidth,e.offsetHeight);e.insertBefore(d,h.interactTarget);return h});Qa=function(){function a(j,k){d[j]=c(k);return j}function e(j){for(var k in j)a(k,j[k])}function c(j){function k(F){var C=
j[F];typeof C!=="undefined"&&t.push(function(M){M[F]=C})}function q(){t=[];for(var F in j)k(F)}j=COG.extend({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},j);var t=[],B={applyToContext:function(F){for(var C=t.length;C--;)t[C](F)},update:function(F,C){j[F]=C;q()}};q();return B}var b={},d={},h={apply:function(j,k){var q=j&&j.canvas?b[j.canvas.id]:null;b[j.canvas.id]=k;(d[k]?
d[k]:d.basic).applyToContext(j);return q},define:a,defineMany:e,get:function(j){return d[j]},init:c,load:function(j){COG.jsonp(j,function(k){e(k)})}};e({basic:{lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"},waypointsHover:{lineWidth:4,strokeStyle:"#f00",fillStyle:"#FFF"}});return h}();var Cb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},ua=function(a){a=COG.extend({style:null,xy:null,size:null,fill:false,stroke:true,
draggable:false,observable:true,properties:{},type:"shape"},a);COG.extend(this,a);this.id=COG.objId(this.type);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};ua.prototype={constructor:ua,animate:function(a,e,c,b){V(this,a,e,c,b)},drag:null,draw:function(a){this.fill&&a.fill();this.stroke&&a.stroke()},prep:function(){},resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(J.fromCenter(this.xy.x,
this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=a},translate:function(a,e){this.translateX=a;this.translateY=e},updateBounds:function(a,e){this.bounds=a;if(e)this.xy=J.center(this.bounds)}};var Db=1E3/60|0,La=[],mb=0;Z.prototype=COG.extend(ua.prototype,{constructor:Z,prep:function(a){return a.arc(this.xy.x,this.xy.y,this.size>>1,0,Math.PI*2)}});N.prototype=COG.extend({},ua.prototype,{constructor:N});ea.prototype=COG.extend({},N.prototype);fa.prototype=
COG.extend({},ua.prototype,{constructor:fa});ka.prototype=COG.extend({},fa.prototype,{constructor:ka});na.prototype={constructor:na,shouldDraw:function(a){return(a&this.validStates)!==0},clip:null,cycle:function(){},draw:function(){},hitGuess:null};var qb=function(a){a=COG.extend({zindex:10},a);var e=[],c=CANI.canvas.pipTransformed,b=COG.extend(new na(a),{draw:function(d,h,j,k,q,t){k=h.x1;h=h.y1;q=t?c?t.x-k:t.relXY.x:0;for(var B=t?c?t.y-h:t.relXY.y:0,F=e.length;F--;){var C=e[F],M=C.xy.x,ja=C.xy.y,
$=C.style||b.style,ia=C.scaling!==1||C.rotatation||C.translateX||C.translateY;if(drawData=C.prep(d,ia?M:k,ia?ja:h,j)){if(t&&d.hitTest(drawData,q,B)){t.elements.push(Hits.initHit(C.type,C,C.draggable?C.drag:null));M=t.type+"Style";$=C[M]||b[M]||$}C=$?d.applyStyle($):null;drawData.draw(k,h,j);C&&d.applyStyle(C)}}},getDrawables:function(){return[]},hitGuess:function(d,h){for(var j=false,k=e.length;!j&&k--;){var q=e[k];if(!(j=j))j=(q=q.bounds)&&d>=q.x1&&d<=q.x2&&h>=q.y1&&h<=q.y2;j=j}return j}});b.bind("refresh",
function(d,h,j){e=b.getDrawables(h,j)});return b},rb=function(a){function e(h){for(var j=b.length;j--;)b[j].resync(h);b.sort(function(k,q){var t=q.xy.y-k.xy.y;return t!=0?t:q.xy.x-k.xy.y});h.redraw=true}function c(h,j){e(j)}a=COG.extend({zindex:10},a);var b=[],d=COG.extend(new qb(a),{add:function(h,j){if(h){h.layer=d;var k=d.view;if(k){h.resync(k);k.redraw=true}if(j)b.unshift(h);else b[b.length]=h}},clear:function(){b=[]},find:function(){return[].concat(b)},getDrawables:function(){return b}});d.bind("parentChange",
c);d.bind("resync",c);return d};COG.extend(D,{ex:COG.extend,ticks:O,getConfig:y,userMessage:function(a,e,c){D.trigger("userMessage",a,e,c)},XY:X,XYRect:J,Dimensions:L,Vector:E,Hits:Hits,Generator:ob,tween:COG.tween,tweenValue:COG.tweenValue,easing:COG.easing,Tween:COG.Tween,Style:Qa,viewState:m,View:function(a){function e(l,o,z){va||Ra(ga-o,ha-z)}function c(l,o,z,Q){Fa(T(S(ta+H(2,Q)-1,0.5),2))}function b(){var l=ba(ta)/Math.LN2|0;if(l!==0){ta=H(2,l);sb(Ma+l,tb,ub)}U.redraw=true}function d(l){l||(l=
X.init(Ga,Ha));Hb=X.init(ga,ha);Xa=X.offset(l,ga,ha);tb=Xa.x;ub=Xa.y}function h(l,o,z){Na("doubleTap",o,z,X.init(z.x,z.y));a.scalable&&Fa(2,z,a.zoomEasing,null,a.zoomDuration)}function j(l,o,z){va=null;ia("down",o,z)}function k(l,o,z){ia("hover",o,z)}function q(l,o,z){ja(o,z,false)}function t(l,o,z){ja(o,z,true)}function B(){clearTimeout(vb);vb=setTimeout(function(){renderer.checkSize()},250)}function F(l,o,z){ia("tap",o,z);Na("tap",o,z,X.init(z.x,z.y))}function C(l,o){o.id=l;o.added=O();o.view=U;
o.trigger("parentChange",U,Sa,Ib);da.push(o);da.sort(function(z,Q){var W=Q.zindex-z.zindex;if(W===0)W=Q.added-z.added;return W});ya=da.length;return o}function M(){pa&&pa.unbind();if(renderer){pa=INTERACT.watch(renderer.interactTarget);a.pannable&&pa.pannable().bind("pan",e);if(a.scalable){pa.bind("zoom",c);pa.bind("doubleTap",h)}pa.bind("pointerDown",j);pa.bind("pointerMove",q);pa.bind("pointerUp",t);a.captureHover&&pa.bind("pointerHover",k);pa.bind("tap",F)}}function ja(l,o,z){if(va){l=X.init(o.x,
o.y);if(va.drag.call(va.target,va,l.x,l.y,z))U.redraw=true;if(z)va=null}}function $(l){var o;o=false;l=l?l:(new Date).getTime();if(o=l-wb>Jb){U.trigger("enterFrame",l,Kb++);l-xb>Lb&&Ea();wb=l}if(o&&U.redraw){o=ga!==Ya||ha!==Za;wa=yb|(ta!==1?zb:0)|(o?$a:0)|(ab?bb:0);cb=(o=(wa&(zb|$a))!==0)&&(wa&bb)===0;if(renderer.prepare(da,wa,l,qa)){o=renderer.getViewport();for(var z=ya;z--;){wa|=da[z].animated?bb:0;da[z].cycle(l,o,wa)}for(z=da.length;z--;){var Q=da[z];if(Q.shouldDraw(wa,o)){var W=Q.style?renderer.applyStyle(Q.style):
null;Q.draw(renderer,o,wa,U,l,qa);W&&renderer.applyStyle(W)}}}if(qa){l=qa?qa.elements:[];if(Oa&&Oa.type==="hover"){o=Hits.diffHits(Oa.elements,l);o.length>0&&Hits.triggerEvent(Oa,U,"Out",o)}if(l.length>0){z=qa.x;Q=qa.y;for(o=l.length;o--;){W=l[o];var za=z,Ca=Q,xa=W&&W.drag&&(!W.canDrag||W.canDrag(W,za,Ca));if(xa){va=W;va.startX=za;va.startY=Ca}if(xa)break}Hits.triggerEvent(qa,U)}Oa=l.length>0?COG.extend({},qa):null;qa=null}Ya=ga;Za=ha;U.redraw=false}animFrame($)}function ia(l,o,z){qa=Hits.init(l,
o,z,X.init(z.x,z.y));for(l=ya;l--;)db=db||(da[l].hitGuess?da[l].hitGuess(qa.x,qa.y,wa,U):false);if(db)U.redraw=true}function sa(){U.redraw=true}function oa(){return renderer?renderer.getViewport():null}function Ea(){var l=renderer?renderer.getViewport():null;if(l){if(Ia||Ja)if(l){var o=Ta?ga+Ga:ga,z=Ua?ha+Ha:ha,Q=l.width,W=l.height;if(Ia&&Ia>Q)if(o+Q>Ia)ga=Ta?ga:Ia-Q;else if(o<0)ga=Ta?ga:0;if(Ja&&Ja>W)if(z+W>Ja)ha=Ua?ha:Ja-W;else if(z<0)ha=Ua?ha:0}xb=(new Date).getTime();Na("refresh",U,l);U.redraw=
true}}function Fa(l,o,z,Q,W){if(z)COG.tweenValue(ta,l,z,W,function(za,Ca){ta=za;if(Ca){var xa=w(ba(ta)/Math.LN2);ta=H(2,xa);Q&&Q()}d(o);b()});else{ta=l;d(o);b()}return U}function sb(l,o,z){l=S(a.minZoom,T(a.maxZoom,l));if(l!==Ma){var Q=H(2,l-Ma),W=Ga/Q|0,za=Ha/Q|0;Ma=l;Ra(((o?o:ga+Ga)-W)*Q,((z?z:ha+Ha)-za)*Q);Ya=ga;Za=ha;Na("zoomLevelChange",l);ta=1;Ea()}}function Na(){for(var l=U.trigger.apply(null,arguments).cancel,o=da.length;o--;)l=da[o].trigger.apply(null,arguments).cancel||l;return!l}function Ra(l,
o,z,Q,W){function za(){Ca+=1;if(Ca>=2){ab=false;W&&W()}}var Ca=0,xa=eb?X.offset(eb,-Ga,-Ha):null,Pa=fb?X.offset(fb,-Ga,-Ha):null;if(xa){l=l<xa.x?xa.x:l;o=o<xa.y?xa.y:o}if(Pa){l=l>Pa.x?Pa.x:l;o=o>Pa.y?Pa.y:o}if(z){if((wa&$a)===0){COG.tweenValue(ga,l,z,Q,function(gb,hb){ga=gb|0;(hb?za:sa)();return!cb});COG.tweenValue(ha,o,z,Q,function(gb,hb){ha=gb|0;(hb?za:sa)();return!cb});ab=true}}else{ga=l|0;ha=o|0;U.redraw=true;W&&W()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,
fastDraw:false,inertia:true,minRefresh:1E3,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"domvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},a);var Mb={},da=[],ya=0,Sa=document.getElementById(a.container),va=null,Kb=0,Ib=null,Nb=typeof window.attachEvent!="undefined",db=false,Lb=a.minRefresh,ga=0,ha=
0,Ya=0,Za=0,Ia=null,Ja=null,Ta=false,Ua=false,Ab=1,Ga=0,Ha=0,qa=null,Hb=null,Xa=null,cb=false,eb=null,fb=null,xb=0,Oa=null,vb=0,ta=1,wb=0,pa=null,ab=false,Jb=1E3/a.fps|0,tb,ub,Ma=a.zoomLevel,yb=m("ACTIVE"),$a=m("PAN"),zb=m("ZOOM"),bb=m("ANIMATING"),wa=yb,U={id:a.id,deviceScaling:Ab,fastDraw:a.fastDraw||y().requireFastDraw,detach:function(){pa&&pa.unbind()},eachLayer:function(l){for(var o=ya;o--;)l(da[o])},getLayer:function(l){for(var o=0;o<ya;o++)if(da[o].id===l)return da[o];return null},getZoomLevel:function(){return Ma},
setLayer:function(l,o){for(var z=0;z<ya;z++)if(da[z].id===l){da.splice(z,1);break}if(o){C(l,o);o.trigger("refresh",U,oa())}U.redraw=true;return o},invalidate:sa,refresh:Ea,resetScale:function(){ta=1},scale:Fa,setZoomLevel:sb,syncXY:function(){},triggerAll:Na,removeLayer:function(l){a:{for(var o=ya;o--;)if(da[o].id===l){l=o;break a}l=-1}if(l>=0&&l<ya){U.trigger("layerRemoved",da[l]);da.splice(l,1);U.redraw=true}ya=da.length},getOffset:function(){return X.init(ga,ha)},getScaleFactor:function(){return ta},
setMaxOffset:function(l,o,z,Q){Ia=l;Ja=o;Ta=typeof z!="undefined"?z:false;Ua=typeof Q!="undefined"?Q:false},getViewport:oa,updateOffset:Ra,pan:function(l,o,z,Q,W){Ra(ga+l,ha+o,z,Q,W)}};Ab=y().getScaling();COG.observable(U);U.bind("resync",function(){fb=eb=null});COG.configurable(U,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(a,null,{container:function(l,o){Sa=document.getElementById(o);renderer=Wa(a.renderer,U,Sa);M()},inertia:M,
captureHover:M,scalable:M,pannable:M}),true);CANI.init(function(l){U.markers=C("markers",new rb({zindex:20}));Mb=l;renderer=Wa(a.renderer,U,Sa);M();Nb?window.attachEvent("onresize",B):window.addEventListener("resize",B,false)});animFrame($);return U},ViewLayer:na,ImageLayer:function(a,e){function c(k,q){var t=d?Math.abs(d.x1-q.x1)+Math.abs(d.y1-q.y1):0;if(b&&(!d||t>256))b(k,q,function(B){d=J.copy(q);h=[].concat(B)})}e=COG.extend({imageLoadArgs:{}},e);var b=a?ob.init(a,e).run:null,d=null,h=[],j=COG.extend(new na(e),
{draw:function(k){k.drawTiles(h)}});j.bind("refresh",function(k,q,t){c(q,t)});return j},ImageGenerator:function(a){a=COG.extend({relative:false,padding:2},a);a={run:function(){COG.warn("running base generator - this should be overriden")}};COG.observable(a);return a},Drawable:ua,Marker:Z,Poly:N,Line:ea,ImageDrawable:fa,ImageMarker:ka,DrawLayer:qb,ShapeLayer:rb});COG.observable(D)})(T5);
