COG=function(){var e=/\$\{(.*?)\}/ig,m=Object.prototype.hasOwnProperty,g=0,f={id:"grunt.core",extend:function(){var a=arguments[0]||{},c=1,h=arguments.length,b=false,j,d,k,i;if(typeof a==="boolean"){b=a;a=arguments[1]||{};c=2}if(typeof a!=="object"&&!f.isFunction(a))a={};if(h===c){a=this;--c}for(;c<h;c++)if((j=arguments[c])!=null)for(d in j){k=a[d];i=j[d];if(a!==i)if(b&&i&&(f.isPlainObject(i)||f.isArray(i))){k=k&&(f.isPlainObject(k)||f.isArray(k))?k:f.isArray(i)?[]:{};a[d]=f.extend(b,k,i)}else if(i!==
undefined)a[d]=i}return a},isFunction:function(a){return toString.call(a)==="[object Function]"},isArray:function(a){return toString.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||toString.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!m.call(a,"constructor")&&!m.call(a.constructor.prototype,"isPrototypeOf"))return false;var c;for(c in a);return c===undefined||m.call(a,c)},isEmptyObject:function(a){for(var c in a)return false;return true},isXmlDocument:function(a){return toString.call(a)===
"[object Document]"},contains:function(a,c){var h=a,b=arguments,j=1;if(c&&f.isArray(c)){b=c;j=0}for(j=j;j<b;j++)h=h&&typeof foo[b[j]]!=="undefined";return h},newModule:function(a){a=f.extend({id:null,requires:[],parent:null},a);if(a.parent)a=f.extend({},a.parent,a);return a},toID:function(a){return a.replace(/\s/g,"-")},objId:function(a){return(a?a:"obj")+g++},formatStr:function(a){if(arguments.length<=1)return a;for(var c=arguments.length-2,h=0;h<=c;h++)a=a.replace(RegExp("\\{"+h+"\\}","gi"),arguments[h+
1]);return a},wordExists:function(a,c){var h="";if(c.toString)c=c.toString();for(var b=0;b<c.length;b++)h+=!/\w/.test(c[b])?"\\"+c[b]:c[b];return RegExp("(^|\\s|\\,)"+h+"(\\,|\\s|$)","i").test(a)},parseTemplate:function(a,c){for(var h=e.exec(a);h;){a=a.replace(h[0],COG.XPath.first(h[1],c));e.lastIndex=0;h=e.exec(a)}return a}};return f}();
COG.Log=function(){function e(c,h){var b,j=h&&h.length>0?h[0]:"";for(b=1;h&&b<h.length;b++)j+=" "+(g&&COG.isPlainObject(h[b])?JSON.stringify(h[b]):h[b]);typeof console!=="undefined"&&console[c](j);for(b=0;b<m.length;b++)m[b].call(a,j,c)}var m=[],g=typeof JSON!=="undefined",f=window.console&&window.console.markTimeline,a={id:"grunt.log",getTraceTicks:function(){return f?(new Date).getTime():null},trace:function(c,h){if(f)console.markTimeline(c+(h?": "+(a.getTraceTicks()-h)+"ms":""))},debug:function(){e("debug",
arguments)},info:function(){e("info",arguments)},warn:function(){e("warn",arguments)},error:function(){e("error",arguments)},exception:function(c){a.error(arguments);for(var h in c)a.info("ERROR DETAIL: "+h+": "+c[h])},watch:function(c,h){try{h()}catch(b){a.exception(b,c)}},throwError:function(c){a.error(c);throw Error(c);},requestUpdates:function(c){m.push(c)}};return a}();
(function(){function e(f,a){f[a]||(f[a]=function(c){return f.configure(a,c)})}function m(f){f.gtConfId=COG.objId("configurable");f.gtConfig={};f.gtConfigFns=[];return f.gtConfig}var g={};COG.paramTweaker=function(f,a,c){return function(h,b){if(typeof b!=="undefined"){if(h in f)f[h]=b;c&&h in c&&c[h](h,b)}else return a&&h in a?a[h](h):f[h]}};COG.configurable=function(f,a,c,h){if(f){f.gtConfId||m(f);var b=f.gtConfId,j=f.gtConfig,d=f.gtConfigFns;g[b]=f;d.push(c);for(c=a.length;c--;){j[a[c]]=true;h&&
e(f,a[c])}if(!f.configure)f.configure=function(k,i){if(j[k]){for(var l=d.length;l--;){var n=d[l](k,i);if(typeof n!=="undefined")return n}return g[b]}return null}}}})();
(function(){function e(m,g){var f=m.gtObsHandlers;f[g]||(f[g]=[]);return f[g]}COG.observable=function(m){if(m){if(!m.gtObsHandlers)m.gtObsHandlers={};if(!(m.bind||m.trigger||m.unbind)){m.bind=function(g,f){var a=COG.objId("callback");e(m,g).unshift({fn:f,id:a});return a};m.trigger=function(g){var f=e(m,g),a={cancel:false,tickCount:(new Date).getTime()},c;if(!f)return null;c=Array.prototype.slice.call(arguments,1);c.unshift(a);for(var h=f.length;h--&&!a.cancel;)f[h].fn.apply(self,c);return a};m.unbind=
function(g,f){for(var a=e(m,g),c=0;a&&c<a.length;c++)if(a[c].id===f){a.splice(c,1);break}return m}}}}})();(function(){var e={},m=[];COG.addPipe=function(g){g("pipe.test",{});m.push(g)};COG.listen=function(g,f){e[g]||(e[g]=[]);f&&e[g].push(f)};COG.say=function(g,f){var a;for(a=m.length;a--;)m[a](g,f);if(e[g])for(a=e[g].length;a--;)e[g][a](f)}})();
COG.Loopage=function(){function e(i){return COG.extend({id:c++,frequency:0,after:0,single:false,lastTick:0,execute:function(){}},i)}function m(i){b.push(i);g()}function g(){j&&clearTimeout(j);j=setTimeout(f,0);k=true}function f(){for(var i,l=(new Date).getTime(),n=h.length;b.length>0;){var x=b.shift();for(i=n;i--;)if(h[i].id===x){h.splice(i,1);break}k=true;n=h.length}if(k){d=a;for(i=n;i--;)d=h[i].frequency<d?h[i].frequency:d}for(i=n;i--;){x=l-h[i].lastTick;if(h[i].lastTick===0||x>=h[i].frequency){h[i].execute(l,
h[i]);h[i].lastTick=l;h[i].single&&h[i].trigger("complete")}}j=n?setTimeout(f,d):0}var a=6E4,c=0,h=[],b=[],j=0,d=a,k=true;return{join:function(i){var l=new e(i);if(l.after>0)l.lastTick=(new Date).getTime()+l.after;COG.observable(l);l.bind("complete",function(){m(l.id)});h.unshift(l);g();return l},leave:m}}();if(!this.JSON)this.JSON={};
(function(){function e(d){return d<10?"0"+d:d}function m(d){a.lastIndex=0;return a.test(d)?'"'+d.replace(a,function(k){var i=b[k];return typeof i==="string"?i:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+d+'"'}function g(d,k){var i,l,n,x,z=c,p,o=k[d];if(o&&typeof o==="object"&&typeof o.toJSON==="function")o=o.toJSON(d);if(typeof j==="function")o=j.call(k,d,o);switch(typeof o){case "string":return m(o);case "number":return isFinite(o)?String(o):"null";case "boolean":case "null":return String(o);
case "object":if(!o)return"null";c+=h;p=[];if(Object.prototype.toString.apply(o)==="[object Array]"){x=o.length;for(i=0;i<x;i+=1)p[i]=g(i,o)||"null";n=p.length===0?"[]":c?"[\n"+c+p.join(",\n"+c)+"\n"+z+"]":"["+p.join(",")+"]";c=z;return n}if(j&&typeof j==="object"){x=j.length;for(i=0;i<x;i+=1){l=j[i];if(typeof l==="string")if(n=g(l,o))p.push(m(l)+(c?": ":":")+n)}}else for(l in o)if(Object.hasOwnProperty.call(o,l))if(n=g(l,o))p.push(m(l)+(c?": ":":")+n);n=p.length===0?"{}":c?"{\n"+c+p.join(",\n"+c)+
"\n"+z+"}":"{"+p.join(",")+"}";c=z;return n}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,h,b={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(d,k,i){var l;h=c="";if(typeof i==="number")for(l=0;l<i;l+=1)h+=" ";else if(typeof i==="string")h=i;if((j=k)&&typeof k!=="function"&&(typeof k!=="object"||typeof k.length!=="number"))throw Error("JSON.stringify");return g("",
{"":d})};if(typeof JSON.parse!=="function")JSON.parse=function(d,k){function i(n,x){var z,p,o=n[x];if(o&&typeof o==="object")for(z in o)if(Object.hasOwnProperty.call(o,z)){p=i(o,z);if(p!==undefined)o[z]=p;else delete o[z]}return k.call(n,x,o)}var l;d=String(d);f.lastIndex=0;if(f.test(d))d=d.replace(f,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(d.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){l=eval("("+d+")");return typeof k==="function"?i({"":l},""):l}throw new SyntaxError("JSON.parse");}})();
(function(){function e(g,f){var a=g.split("|"),c={};for(var h in f){var b=f[h];c[h]=a.length>b?a[b]:null}return c}var m={JSON:{parse:function(g){return JSON.parse(g)}},PDON:{parse:function(g){var f=null,a=[];g=g.split("\n");for(var c=0;c<g.length;c++){var h=g[c];if(f)a.push(e(h,f));else if(h){f=h.split("|");h={};for(var b=0;b<f.length;b++)h[f[b]]=b;f=h}else f=null}return a}}};COG.parseData=function(g,f){f=f?f.toUpperCase():"JSON";if(!m[f])throw Error("Unsupported data format: "+f);try{return m[f].parse(g)}catch(a){COG.Log.exception(a)}return{}}})();
COG.XPath=function(){function e(a){for(var c=null,h=0;h<m.length;h++)if(c=m[h](a))break;return c}var m=[],g=[null,function(a){return a.numberValue},function(a){return a.stringValue},function(a){return a.booleanValue},null,null,null,null,function(a){return a.singleNodeValue?a.singleNodeValue.textContent:null},function(a){return a.singleNodeValue?a.singleNodeValue.textContent:null}];typeof XPathResult!=="undefined"||COG.Log.warn("No XPATH support");var f={SearchResult:function(a){return{toString:function(){var c=
null;if(a){var h=null;if(a.resultType>=0&&a.resultType<g.length)h=g[a.resultType];if(h)c=h(a)}return c?c:""}}},first:function(a,c){var h=f.SearchResult,b;var j=XPathResult.FIRST_ORDERED_NODE_TYPE;if(!j)j=XPathResult.ANY_TYPE;try{if(COG.isXmlDocument(c))b=c.evaluate(a,c,e,j,null);else{COG.Log.warn("attempted xpath expression: "+a+" on a non-xml document");b=null}}catch(d){COG.Log.warn("invalid xpath expression: "+a+" on node: "+c);b=null}return new h(b)},registerResolver:function(a){m.push(a)}};return f}();
COG.Storage=function(){function e(m){if(m&&m=="session")return sessionStorage;return localStorage}return{get:function(m,g){var f=e(g).getItem(m);return/^(\{|\[).*(\}|\])$/.test(f)?JSON.parse(f):f},set:function(m,g,f){g=jQuery.isArray(g)||jQuery.isPlainObject(g)?JSON.stringify(g):g;e(f).setItem(m,g)},remove:function(m,g){e(g).removeItem(m)}}}();
COG.ParseRules=function(){var e=[];return{add:function(m,g){e.push({regex:m,handler:g})},each:function(m,g,f){function a(){c++;f&&c>=e.length&&f(g)}for(var c=0,h=0;h<e.length;h++){var b=e[h].regex,j=e[h].handler,d=false;if(b){b.lastIndex=-1;if((b=b.exec(m))&&j){d=true;j(b,g,a)&&a()}}d||a()}}}};
(function(){function e(b){var j=[],d=function(i,l){l=COG.isFunction(l)?l():l;j[j.length]=encodeURIComponent(i)+"="+encodeURIComponent(l)};if(COG.isArray(b))for(var k=0;k<b.length;k++)d(b[k].name,b[k].value);else for(k in b)d(k,b[k]);return j.join("&").replace(/%20/g,"+")}var m={HTML:"text/html",XML:"text/xml",TEXT:"text/plain",STREAM:"application/octet-stream"},g={JSON:["json"],PDON:["pdon.txt"]},f=["TEXT","STREAM"],a=/^(\w+:)?\/\/([^\/?#]+)/,c={XML:function(b){return b.responseXML},JSON:function(b){return COG.parseData(b.responseText)},
PDON:function(b){return COG.parseData(b.responseText,"PDON")},DEFAULT:function(b){return b.responseText}},h={CONTENT_TYPE:"Content-Type"};COG.xhr=function(b){function j(){if(this.readyState===4){var l=null,n=!this.status&&location.protocol==="file:"||this.status>=200&&this.status<300||this.status===304||this.status===1223||this.status===0;try{if(n)if(b.handleResponse)b.handleResponse(this);else{var x=b,z=this.getResponseHeader(h.CONTENT_TYPE),p,o=false;for(p in m)if(z&&z.indexOf(m[p])>=0){o=true;
break}z=!o;for(o=0;o<f.length;o++)z=z||f[o]==p;if(z)b:{z=p;for(var u in g)for(o=0;o<g[u].length;o++)if(RegExp(g[u][o]+"$","i").test(x.url)){p=u;break b}p=z?z:"DEFAULT"}try{l=c[p](this,x)}catch(t){l=c.DEFAULT(this,x)}}else b.error&&b.error(this)}catch(L){COG.Log.exception(L,"PROCESSING AJAX RESPONSE")}n&&l&&b.success&&b.success.call(this,l)}}try{b=COG.extend({method:"GET",data:null,url:null,async:true,success:null,handleResponse:null,error:null,contentType:"application/x-www-form-urlencoded"},b);var d=
a.exec(b.url),k=d&&(d[1]&&d[1]!==location.protocol||d[2]!==location.host);if(b.data)b.method="POST";if(b.url){d=null;if(b.xhr)d=b.xhr(b);d||(d=new XMLHttpRequest);d.open(b.method,b.url,b.async);b.data&&d.setRequestHeader("Content-Type",b.contentType);k||d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.onreadystatechange=j;d.send(b.method=="POST"?e(b.data):null)}else COG.Log.warn("ajax request issued with no url - that ain't going to work...")}catch(i){COG.Log.exception(i)}}})();
(function(){function e(a){var c=document.createElement("script"),h=false;c.src=a;c.async=true;c.onload=c.onreadystatechange=function(){if(!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){h=true;c.onload=c.onreadystatechange=null;c&&c.parentNode&&c.parentNode.removeChild(c)}};g||(g=document.getElementsByTagName("head")[0]);g.appendChild(c)}var m=0,g,f=this;COG.jsonp=function(a,c,h){a+=a.indexOf("?")>=0?"&":"?";var b="json"+ ++m;f[b]=function(j){c(j);f[b]=null;try{delete f[b]}catch(d){}};
e(a+(h?h:"callback")+"="+b);return b}})();
COG.Touch=function(){function e(v,C){return{x:v.x-C.x,y:v.y-C.y}}function m(v,C){var G=e(v,C);return Math.sqrt(G.x*G.x+G.y*G.y)}function g(v){if(v.count>1)return m(v.touches[0],v.touches[1]);return 0}function f(v,C){var G=v&&v.count>0?v.touches[0]:null;if(G&&C&&C.count>0)return e(G,C.touches[0]);return null}function a(v,C){v.count=C.count;for(var G=d;G--;){v.touches[G].x=C.touches[G].x;v.touches[G].y=C.touches[G].y}}function c(){for(var v={count:0,touches:Array(d)},C=d;C--;)v.touches[C]=j();return v}
function h(v){if(v.preventDefault){v.preventDefault();v.stopPropagation()}else v.cancelBubble&&v.cancelBubble()}function b(v,C,G){if(E){C=C[G?G:"touches"];G=C.length;for(G=v.count=G;G--;){v.touches[G].x=C[G].pageX;v.touches[G].y=C[G].pageY}}else if(C.button===0){v.count=1;v.touches[0].x=C.pageX?C.pageX:C.screenX;v.touches[0].y=C.pageY?C.pageY:C.screenY}else v.count=0}function j(v,C){return{x:v?v:0,y:C?C:0}}var d=10,k=120,i=100,l=250,n=300,x=5,z=0,p=1,o=2,u=7,t=0,L=0,E=undefined,ia=function(v){function C(w,
A,y,q){var s=Math.asin((w.y-A.y)/y);y=y*(qa/q)>>0;y=y>na?na:y;s=A.x>w.x?s:Math.PI-s;W("pan",Math.cos(s)*-y,Math.sin(s)*y,true)}function G(w,A){var y,q;if(E){y=A-V;if(y<l){q=m(K.touches[0],w);q>v.inertiaTrigger&&C(K.touches[0],w,q,y)}}else{Y.x=w.x;Y.y=w.y;COG.Loopage.join({execute:function(s,B){y=s-A;q=m(w,Y);if(y<i&&q>v.inertiaTrigger){B.trigger("complete");C(w,Y,q,y)}else y>i&&B.trigger("complete")},frequency:10})}}function ea(w){var A=0,y=0;if(w.offsetParent){do{A+=w.offsetLeft;y+=w.offsetTop;w=
w.offsetParent}while(w)}return j(A,y)}function $(w){var A=w.count,y=Array(A),q=ea(aa);for(A=A;A--;)y[A]=j(w.touches[A].x-q.x,w.touches[A].y-q.y);return y}function W(){oa&&oa.trigger.apply(null,arguments)}function X(w,A){var y=ea(aa);y=j(A.x-y.x,A.y-y.y);W(w,A,y)}function da(w){var A=w.target?w.target:w.srcElement;if(ba||A&&A===aa){b(K,w);if(K.count!==0){S=null;T.x=0;T.y=0;ha=true;J=false;V=(new Date).getTime();h(w);A.style.cursor="move";W("inertiaCancel");ka=V;if(w=K.count>0?K.touches[0]:null){W("touchStart",
w.x,w.y);if(ka-la<n)if((w=e(K.touches[0],P.touches[0]))&&Math.abs(w.x)<v.maxDistDoubleTap&&Math.abs(w.y)<v.maxDistDoubleTap)J=true;F=z;a(P,K)}else COG.Log.warn("Touch start fired, but no touch vector found")}}}function r(w){var A=w.target?w.target:w.srcElement,y=0;if(ba||A&&A===aa){b(N,w);if(N.count>0){Y.x=N.touches[0].x;Y.y=N.touches[0].y}if(ha){E&&h(w);if(N.count>1){K.count===1&&a(K,N);y=g(K)-g(N)}if(F===z)if((w=f(N,K))&&(Math.abs(w.x)>=u||Math.abs(w.y)>=u))F=p;if(F!==z)if(!y||Math.abs(y)<x){if(S=
f(N,P)){T.x-=S.x;T.y-=S.y;R.x-=S.x;R.y-=S.y}W("pan",R.x,R.y);R.x=0;R.y=0;F=p}else{W("pinchZoom",$(K),$(N));F=o}a(P,N)}}}function M(w){var A=w.target?w.target:w.srcElement;if(ha&&(ba||A&&A===aa)){b(ga,w,"changedTouches");var y=ga.touches[0];E&&h(w);w=(new Date).getTime();la=ka;if(F===z){X("tap",K.touches[0]);H||(H=setTimeout(function(){H=0;J&&X("doubleTap",K.touches[0])},n+50))}else if(F==p){W("panEnd",T.x,T.y);pa&&G(y,w)}else F==o&&W("pinchZoomEnd",$(K),$(P),w-V);A.style.cursor="default";ha=false}}
function D(w){var A=w.target?w.target:w.srcElement;if(ba||A&&A===aa){if(w.detail){A=-w.detail*k;A=j(w.axis===1?A:0,w.axis===2?A:0)}else A=j(w.wheelDeltaX,w.wheelDeltaY);var y=A.y!==0?Math.abs(A.y/k):0;if(Y&&y!==0){var q=j(Y.x-aa.offsetLeft,Y.y-aa.offsetTop);W("wheelZoom",q,Math.pow(2,A.y>0?y:-y))}h(w)}}v=COG.extend({element:null,observable:null,inertiaTrigger:20,maxDistDoubleTap:20,touchStartHandler:null,moveHandler:null,moveEndHandler:null,pinchZoomHandler:null,pinchZoomEndHandler:null,tapHandler:null,
doubleTapHandler:null,wheelZoomHandler:null},v);var J=false,H=0,I=T5.getConfig(),K=c(),N=c(),P=c(),ga=c(),S=null,T=j(),R=j(),F=null,ha=false,V=0,U=[],Y=j(),pa=false,qa,na,ka=0,la=0,aa=v.element,oa=v.observable,ba=typeof FlashCanvas!=="undefined",ra={supportsTouch:E,addListeners:function(w){U.push(w)},decoupleListeners:function(w){for(var A=0;w&&A<U.length;A++)if(U[A].listenerId===w){U.splice(A,1);break}},release:function(){I.unbindEvent(E?"touchstart":"mousedown",da,false);I.unbindEvent(E?"touchmove":
"mousemove",r,false);I.unbindEvent(E?"touchend":"mouseup",M,false);if(!E){window.removeEventListener("mousewheel",D,false);window.removeEventListener("DOMMouseScroll",D,false)}},inertiaEnable:function(w,A){pa=true;qa=w;na=A?Math.min(A.width,A.height):500},inertiaDisable:function(){pa=false}};if(typeof E==="undefined")E=T5.getConfig().supportsTouch;I.bindEvent(E?"touchstart":"mousedown",da,false);I.bindEvent(E?"touchmove":"mousemove",r,false);I.bindEvent(E?"touchend":"mouseup",M,false);if(!E){I.bindEvent("mousewheel",
D,window);I.bindEvent("DOMMouseScroll",D,window)}return ra},Z=[];return{capture:function(v,C){if(!v)throw Error("Unable to capture touch of null element");if(!v.id)v.id="touchable_"+t++;var G=Z[v.id];if(!G){G=new ia(COG.extend({element:v},C));Z[v.id]=G}if(C){C.listenerId&&G.decoupleListeners(C.listenerId);C.listenerId=++L;G.addListeners(C)}return G},release:function(v){if(v&&v.id&&Z[v.id]){Z[v.id].release();delete Z[v.id]}}}}();
T5=function(){var e=function(){function a(b,j){return h(b.x-j.x,b.y-j.y)}function c(b,j){if(!j)j=b.length;if(j<=1)throw Error("Cannot determine edge distances for a vector array of only one vector");for(var d={edges:Array(j-1),accrued:Array(j-1),total:0},k=0;k<j-1;k++){var i=a(b[k],b[k+1]);d.edges[k]=Math.sqrt(i.x*i.x+i.y*i.y);d.accrued[k]=d.total+d.edges[k];d.total+=d.edges[k]}return d}function h(b,j){return{x:b?b:0,y:j?j:0}}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var b=
0,j=0,d=arguments.length;d--;){b+=arguments[d].x;j+=arguments[d].y}return h(b,j)},absSize:function(b){return Math.max(Math.abs(b.x),Math.abs(b.y))},copy:function(b){return b?h(b.x,b.y):null},diff:a,distance:function(b,j){return c(b,j).total},edges:c,equals:function(b,j){return b.x===j.x&&b.y===j.y},extendBy:function(b,j,d){return h(b.x-Math.cos(j)*d,b.y-Math.sin(j)*d)},floor:function(b){for(var j=Array(b.length),d=b.length;d--;)j[d]=h(~~b[d].x,~~b[d].y);return j},getRect:function(b){for(var j,d,k,
i,l=b.length;l--;){var n=b[l];j=typeof j==="undefined"||n.x<j?n.x:j;d=typeof d==="undefined"||n.y<d?n.y:d;k=typeof k==="undefined"||n.x>k?n.x:k;i=typeof i==="undefined"||n.y>i?n.y:i}return g.init(j,d,i,i)},init:h,invert:function(b){return h(-b.x,-b.y)},offset:function(b,j,d){return h(b.x+j,b.y+(d?d:j))},simplify:function(b,j){if(!b)return null;j=j?j:e.VECTOR_SIMPLIFICATION;for(var d=[],k=null,i=b.length;i--;){var l=b[i];if(include=!k||i===0||Math.abs(l.x-k.x)+Math.abs(l.y-k.y)>j){d.unshift(l);k=l}}return d},
theta:function(b,j,d){d=Math.asin((b.y-j.y)/d);return b.x>j.x?d:Math.PI-d}}}(),m=function(){return{dotProduct:function(a,c){return a.x*c.x+a.y*c.y}}}(),g=function(){return{center:function(a){return e.init(a.x1+a.width/2,a.y1+a.height/2)},diagonalSize:function(a){return Math.sqrt(a.width*a.width+a.height*a.height)},init:function(a,c,h,b){a=a?a:0;c=c?c:0;h=h?h:a;b=b?b:b;return{x1:a,y1:c,x2:h,y2:b,width:h-a,height:b-c}}}}(),f=function(){return{getAspectRatio:function(a){return a.height!==0?a.width/a.height:
1},getCenter:function(a){return e.init(a.width/2,a.height/2)},getSize:function(a){return Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2))},init:function(a,c){a=a?a:0;return{width:a,height:c?c:a}}}}();return{ex:COG.extend,ticks:function(){return(new Date).getTime()},XY:e,XYRect:g,Vector:function(a,c){COG.Log.warn("The T5.Vector class has been deprecated, please use T5.XY.init instead");return e.init(a,c)},V:COG.extend(e,m),D:f}}();
(function(){function e(){for(;x.length>0;){var p=x.shift();document.location=p}n=0}function m(p){for(var o=true,u=z.length;u--;)o=o&&p!=z[u];return o}function g(p,o){var u=[];for(var t in o)t&&u.push(t+"="+escape(o[t]));return"tile5://"+p+"/"+(u.length>0?"?"+u.join("&"):"")}function f(p,o){m(p)&&COG.Log.info("would push url: "+g(p,o))}function a(p,o){if(m(p)){x.push(g(p,o));n||(n=setTimeout(e,100))}}function c(p){return function(o,u,t){(t?t:p?document.body:document).addEventListener(o,u,false)}}function h(p){return function(o,
u,t){(t?t:p?document.body:document).removeEventListener(o,u,false)}}function b(p,o,u){(u?u:document).attachEvent("on"+p,o)}function j(p,o,u){(u?u:document).detachEvent("on"+p,o)}function d(){k={base:{name:"Unknown",bindEvent:c(),unbindEvent:h(),supportsTouch:"ontouchstart"in window,imageCacheMaxSize:null,getScaling:function(){return 1},maxImageLoads:null,requireFastDraw:false,bridgeNotify:f,targetFps:null},ie:{name:"MSIE",regex:/msie/i,bindEvent:b,unbindEvent:j,requireFastDraw:false,targetFps:25},
ipod:{name:"iPod Touch",regex:/ipod/i,imageCacheMaxSize:6144,maxImageLoads:4,requireFastDraw:false,bridgeNotify:a,targetFps:25},iphone:{name:"iPhone",regex:/iphone/i,imageCacheMaxSize:6144,maxImageLoads:4,bridgeNotify:a},ipad:{name:"iPad",regex:/ipad/i,imageCacheMaxSize:6144,bridgeNotify:a},android:{name:"Android OS <= 2.1",regex:/android/i,bindEvent:c(true),unbindEvent:h(true),supportsTouch:true,getScaling:function(){return 1/window.devicePixelRatio},bridgeNotify:a},froyo:{name:"Android OS >= 2.2",
regex:/froyo/i,eventTarget:document.body,supportsTouch:true,bridgeNotify:a}};i=[k.froyo,k.android,k.ipod,k.iphone,k.ipad,k.ie]}var k=null,i=[],l=null,n=0,x=[],z=["view.wake","tile.loaded"];T5.getConfig=function(){k||d();if(!l){COG.Log.info("ATTEMPTING TO DETECT PLATFORM: UserAgent = "+navigator.userAgent);for(var p=0;p<i.length;p++){var o=i[p];if(o.regex&&o.regex.test(navigator.userAgent)){l=T5.ex({},k.base,o);COG.Log.info("PLATFORM DETECTED AS: "+l.name);break}}if(!l){COG.Log.warn("UNABLE TO DETECT PLATFORM, REVERTING TO BASE CONFIGURATION");
l=k.base}COG.Log.info("CURRENT DEVICE PIXEL RATIO = "+window.devicePixelRatio)}return l}})();
T5.Dispatcher=function(){var e=[],m={execute:function(g){var f=m.findAction(g);f&&f.execute.apply(f,Array.prototype.slice.call(arguments,1))},findAction:function(g){for(var f=e.length;f--;)if(e[f].id==g)return e[f];return null},getRegisteredActions:function(){return[].concat(e)},getRegisteredActionIds:function(){for(var g=[],f=e.length;f--;)e[f].id&&g.push(e[f].id);return g},registerAction:function(g){g&&g.id&&e.push(g)},Action:function(g){g=T5.ex({autoRegister:true,id:"",title:"",icon:"",hidden:false,
execute:null},g);var f={id:g.id,execute:function(){g.execute&&g.execute.apply(this,arguments)},getParam:function(a){return g[a]?g[a]:""},toString:function(){return COG.formatStr("{0} [title = {1}, icon = {2}]",f.id,g.title,g.icon)}};g.autoRegister&&m.registerAction(f);return f},Agent:function(g){g=COG.extend({name:"Untitled",translator:null,execute:null},g);var f={getName:function(){return g.name},getParam:function(a){return g[a]},getId:function(){return COG.toID(f.getName())},run:function(a,c){if(g.execute){var h=
g.translator?g.translator(a):a;g.execute.call(f,h,function(b,j){c&&c(b,j,h)})}}};return f},runAgents:function(g,f,a){for(var c=0;c<g.length;c++)g[c].run(f,a)}};return m}();
T5.Resources=function(){var e="",m={},g={getPath:function(f){return/^(file|https?|\/)/.test(f)?f:e+f},setBasePath:function(f){e=f},loadResource:function(f){f=T5.ex({filename:"",cacheable:true,dataType:null,callback:null},f);var a=function(c){f.callback&&COG.Log.watch("CALLING RESOURCE CALLBACK",function(){f.callback(c)})};f.cacheable&&m[f.filename]?a(m[f.filename]):COG.xhr({url:g.getPath(f.filename),dataType:f.dataType,success:function(c){if(f.cacheable)m[f.filename]=c;a(c)},error:function(c,h,b){COG.Log.error("error loading resource ["+
f.filename+"], error = "+b)}})},loadSnippet:function(f,a){/\.\w+$/.test(f)||(f+=".html");g.loadResource({filename:"snippets/"+f,callback:a,dataType:"html"})}};return g}();
T5.Images=function(){function e(){if(!n){var p=T5.getConfig().maxImageLoads;n=COG.Loopage.join({execute:function(o,u){if(!p||k.length<p){var t=d.shift();if(t){k[k.length]=t;t.image.onload=g;t.image.src=T5.Resources.getPath(t.url);t.requested=T5.ticks()}else u.trigger("complete")}},frequency:10});n.bind("complete",function(){n=null})}}function m(){x=true;try{var p=i.length/2>>0;if(p>0){i.sort(function(u,t){return u.created-t.created});for(var o=p;o--;)delete c[i[o].url];i.splice(0,p)}}finally{x=false}COG.say("imagecache.cleared")}
function g(){var p=b[this.id],o;if(p&&p.image.complete&&p.image.width>0){p.loaded=true;p.hitCount=1;for(o=k.length;o--;)if(k[o].image.src==this.src){k.splice(o,1);break}if(p.background||p.postProcess||p.drawBackground||p.customDraw)if(p.image){o=a(p.realSize?p.realSize.width:image.width,p.realSize?p.realSize.height:image.height);var u=o.getContext("2d"),t=p.offset?p.offset:T5.XY.init();p.background&&u.drawImage(p.background,0,0);p.drawBackground&&p.drawBackground(u);p.customDraw?p.customDraw(u,p):
u.drawImage(p.image,t.x,t.y);p.postProcess&&p.postProcess(u,p);p.image=o}for(o=p.callbacks.length;o--;)p.callbacks[o]&&p.callbacks[o](this,false);p.callbacks=[];i[i.length]={url:this.src,created:p.requested};delete b[this.id];e()}}function f(p,o,u){var t=c[p];if(t){t.hitCount++;t.image.complete&&t.image.width>0&&o?o(t.image,true):t.callbacks.push(o)}else{t=T5.ex({url:p,image:new Image,loaded:false,created:T5.ticks(),requested:null,hitCount:0,callbacks:[o]},u);t.image.id="resourceLoaderImage"+j++;
c[p]=t;b[t.image.id]=t;d[d.length]=t;e()}return t}function a(p,o){var u=document.createElement("canvas");u.width=p?p:0;u.height=o?o:0;if(typeof FlashCanvas!=="undefined"){u.id="tmpCanvas"+h++;u.style.cssText="position: absolute; top: -"+(o-1)+"px; left: -"+(p-1)+"px;";document.body.appendChild(u);FlashCanvas.initElement(u)}typeof G_vmlCanvasManager!=="undefined"&&G_vmlCanvasManager.initElement(u);return u}var c={},h=0,b={},j=0,d=[],k=[],i=[],l=0,n=null,x=false,z={avgImageSize:25,loadTimeout:10,cancelLoad:function(){k=
[]},get:function(p,o,u){var t=null,L=null;x||(t=c[p]);if((L=t?t.image:null)&&(L.getContext||L.complete&&L.width>0))return L;else o&&f(p,o,u);return null},load:f,newCanvas:a,reset:function(){c={}},stats:function(){return{imageLoadingCount:k.length,queuedImageCount:d.length,imageCacheFullness:l}}};COG.Loopage.join({execute:function(p){for(var o=false,u=0,t=T5.getConfig();u<k.length;)if(p-k[u].requested>z.loadTimeout*1E3){k.splice(u,1);o=true}else u++;o&&e();if(t&&t.imageCacheMaxSize){l=i.length*z.avgImageSize/
t.imageCacheMaxSize;l>=1&&m()}},frequency:2E4});return z}();
T5.TimeLord=function(){var e=/^P(\d+Y)?(\d+M)?(\d+D)?$/,m=/^(\d+H)?(\d+M)?(\d+S)?$/,g=function(a,c){return{days:a?a:0,seconds:c?c:0}},f={8601:function(a){a=a.split("T");var c=null;c=null;var h=0,b=0;e.lastIndex=-1;c=e.exec(a[0]);h+=c[3]?parseInt(c[3].slice(0,-1),10):0;m.lastIndex=-1;c=m.exec(a[1]);b+=c[1]?parseInt(c[1].slice(0,-1),10)*3600:0;b+=c[2]?parseInt(c[2].slice(0,-1),10)*60:0;b+=c[3]?parseInt(c[3].slice(0,-1),10):0;return new g(h,b)}};return{Duration:g,addDuration:function(){for(var a=new g,
c=arguments.length;c--;){a.days+=arguments[c].days;a.seconds+=arguments[c].seconds}if(a.seconds>=86400){a.days+=~~(a.seconds/86400);a.seconds%=86400}return a},parseDuration:function(a,c){var h=c?f[c]:null;if(h)return h(a);COG.Log.warn("Could not find duration parser for specified format: "+c);return new g},formatDuration:function(a){var c,h,b="";if(a.days)b=a.days+" days ";if(a.seconds){a=a.seconds;if(a>=3600){c=~~(a/3600);a-=c*3600}if(a>=60){h=Math.round(a/60);a-=h*60}if(c)b=b+c+(c>1?" hrs ":" hr ")+
(h?(h>10?h:"0"+h)+" min ":"");else if(h)b=b+h+" min";else if(a>0)b=b+(a>10?a:"0"+a)+" sec"}return b}}}();
(function(){var e=Math.PI*2,m=Math.PI/2,g=Math.abs,f=Math.pow,a=Math.sin,c=Math.asin,h=Math.cos,b=1.70158,j={linear:function(d,k,i,l){return i*d/l+k},backin:function(d,k,i,l){return i*(d/=l)*d*((b+1)*d-b)+k},backout:function(d,k,i,l){return i*((d=d/l-1)*d*((b+1)*d+b)+1)+k},backinout:function(d,k,i,l){return(d/=l/2)<1?i/2*d*d*(((b*=1.525)+1)*d-b)+k:i/2*((d-=2)*d*(((b*=1.525)+1)*d+b)+2)+k},bouncein:function(d,k,i,l){return i-j.bounceout(l-d,0,i,l)+k},bounceout:function(d,k,i,l){return(d/=l)<1/2.75?
i*7.5625*d*d+k:d<2/2.75?i*(7.5625*(d-=1.5/2.75)*d+0.75)+k:d<2.5/2.75?i*(7.5625*(d-=2.25/2.75)*d+0.9375)+k:i*(7.5625*(d-=2.625/2.75)*d+0.984375)+k},bounceinout:function(d,k,i,l){return d<l/2?j.bouncein(d*2,0,i,l)/2+k:j.bounceout(d*2-l,0,i,l)/2+i/2+k},cubicin:function(d,k,i,l){return i*(d/=l)*d*d+k},cubicout:function(d,k,i,l){return i*((d=d/l-1)*d*d+1)+k},cubicinout:function(d,k,i,l){if((d/=l/2)<1)return i/2*d*d*d+k;return i/2*((d-=2)*d*d+2)+k},elasticin:function(d,k,i,l,n,x){if(d==0)return k;if((d/=
l)==1)return k+i;x||(x=l*0.3);if(!n||n<g(i)){n=i;i=x/4}else i=x/e*c(i/n);return-(n*f(2,10*(d-=1))*a((d*l-i)*e/x))+k},elasticout:function(d,k,i,l,n,x){var z;if(d==0)return k;if((d/=l)==1)return k+i;x||(x=l*0.3);if(!n||n<g(i)){n=i;z=x/4}else z=x/e*c(i/n);return n*f(2,-10*d)*a((d*l-z)*e/x)+i+k},elasticinout:function(d,k,i,l,n,x){var z;if(d==0)return k;if((d/=l/2)==2)return k+i;x||(x=l*0.3*1.5);if(!n||n<g(i)){n=i;z=x/4}else z=x/e*c(i/n);if(d<1)return-0.5*n*f(2,10*(d-=1))*a((d*l-z)*e/x)+k;return n*f(2,
-10*(d-=1))*a((d*l-z)*e/x)*0.5+i+k},quadin:function(d,k,i,l){return i*(d/=l)*d+k},quadout:function(d,k,i,l){return-i*(d/=l)*(d-2)+k},quadinout:function(d,k,i,l){if((d/=l/2)<1)return i/2*d*d+k;return-i/2*(--d*(d-2)-1)+k},sinein:function(d,k,i,l){return-i*h(d/l*m)+i+k},sineout:function(d,k,i,l){return i*a(d/l*m)+k},sineinout:function(d,k,i,l){return-i/2*(h(Math.PI*d/l)-1)+k}};T5.easing=function(d){return j[d.replace(/[\-\_\s\.]/g,"").toLowerCase()]};T5.registerEasingType=function(d,k){j[d.replace(/[\-\_\s\.]/g,
"").toLowerCase()]=k}})();
T5.Tween=function(e){e=T5.ex({target:null,property:null,startValue:0,endValue:null,duration:2E3,tweenFn:T5.easing("sine.out"),complete:null,cancelOnInteract:false},e);var m=T5.ticks(),g=[],f=false,a=0,c=0,h={cancelOnInteract:e.cancelOnInteract,isComplete:function(){return f},triggerComplete:function(b){e.complete&&e.complete(b)},update:function(b){try{var j=e.tweenFn(b-m,a,c,e.duration);if(e.target)e.target[e.property]=j;for(var d=g.length;d--;)g[d](j,void 0);if(f=m+e.duration<=b){if(e.target)e.target[e.property]=
e.tweenFn(e.duration,a,c,e.duration);for(var k=g.length;k--;)g[k](j,true)}}catch(i){COG.Log.exception(i)}},requestUpdates:function(b){g.push(b)}};a=e.target&&e.property&&e.target[e.property]?e.target[e.property]:e.startValue;if(typeof e.endValue!=="undefined")c=e.endValue-a;if(c==0)f=true;T5.wakeTweens();return h};
(function(){function e(a){if(f)return m.length;f=true;try{for(var c=0;c<m.length;)if(m[c].isComplete()){m[c].triggerComplete(false);m.splice(c,1)}else{m[c].update(a);c++}}finally{f=false}m.length===0&&g.trigger("complete");return m.length}var m=[],g=null,f=false;T5.tweenValue=function(a,c,h,b,j){a=new T5.Tween({startValue:a,endValue:c,tweenFn:h,complete:b,duration:j});m.push(a);return a};T5.tween=function(a,c,h,b,j,d){a=new T5.Tween({target:a,property:c,endValue:h,tweenFn:b,duration:d,complete:j});
m.push(a);return a};T5.tweenVector=function(a,c,h,b,j,d){var k=[];if(a){var i=a.x==c,l=a.y==h;i||k.push(T5.tween(a,"x",c,b,function(){(i=true)&&l&&j()},d));l||k.push(T5.tween(a,"y",h,b,function(){l=true;i&&l&&j()},d))}return k};T5.cancelAnimation=function(a){if(!f){f=true;try{for(var c=0;c<m.length;)if(!a||a(m[c])){m[c].triggerComplete(true);m.splice(c,1)}else c++}finally{f=false}}};T5.isTweening=function(){return m.length>0};T5.wakeTweens=function(){if(!g){g=COG.Loopage.join({execute:e,frequency:20});
g.bind("complete",function(){g=null})}}})();(function(){var e={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,PINCH:16,FREEZE:128};T5.viewState=function(){for(var m=0,g=arguments.length;g--;){var f=e[arguments[g].toUpperCase()];if(f)m|=f}return m}})();
T5.ViewLayer=function(e){e=T5.ex({id:"",zindex:0,supportFastDraw:false,animated:false,validStates:T5.viewState("ACTIVE","ANIMATING","PAN","PINCH")},e);var m=null,g=false,f=false,a=e.supportFastDraw,c=e.id,h=T5.viewState("ACTIVE"),b=e.validStates,j=0,d=0,k=T5.ex({addToView:function(i){i.setLayer(c,k)},shouldDraw:function(i,l,n){i=(i&b)!==0&&(g?a:true);return i=f||n||j!==l.x||d!==l.y},cycle:function(){},draw:function(){},remove:function(){k.trigger("remove",k)},changed:function(){f=true;k.trigger("changed",
k);m&&m.trigger("invalidate")},getId:function(){return c},setId:function(i){c=i},getParent:function(){return m},setParent:function(i){g=(m=i)?m.fastDraw&&displayState!==h:false;k.trigger("parentChange",m)}},e);COG.observable(k);k.bind("drawComplete",function(i,l){f=false;j=l.x;d=l.y});return k};
T5.View=function(e){function m(q,s,B,O){ba=la;u();if(O&&e.inertia){D=true;d(Z+s,v+B,e.panAnimationEasing,e.panAnimationDuration)}else O||d(Z+s,v+B)}function g(){ba=ka;D=false;COG.Loopage.join({execute:u,after:50,single:true})}function f(q,s){P=ra(q);ga=ra(s);var B=w(P),O=w(ga);Y=A(P);r=A(ga);F=P&&B!==0?O/B:1}function a(q,s,B){f(s,B);if(N=F!==1){ba=aa;u()}}function c(q,s,B,O){f(s,B);if(e.adjustScaleFactor){F=e.adjustScaleFactor(F);COG.Log.info("scale factor adjusted to: "+F)}if(O<e.pinchZoomAnimateTrigger){l(V,
F,Y,n(),T5.easing("sine.out"),function(){b();F=1},300);F=V}else{b();F=1}}function h(q,s,B){y.zoom(s,Math.min(Math.pow(2,Math.round(Math.log(B))),8),500)}function b(){var q=P?n():r;F=Math.round(F*10)/10;N=false;for(var s=t.length;s--;)t[s].trigger("scale",F,q);y.trigger("scale",F,q);ba=ka;u()}function j(){clearTimeout(R);R=setTimeout(k,50)}function d(q,s,B,O,Q){function ca(){fa+=1;if(fa>=2){g(0,0);Q&&Q()}}var fa=0;if(B){q=T5.tweenValue(Z,q,B,ca,O);s=T5.tweenValue(v,s,B,ca,O);q.cancelOnInteract=true;
q.requestUpdates(function(ja){Z=ja;D=true;u()});s.cancelOnInteract=true;s.requestUpdates(function(ja){v=ja;D=true;u()})}else{Z=q;v=s}}function k(){var q;if(E){COG.Touch.release(E);if(e.autoSize&&E.parentNode){q=E.parentNode.getBoundingClientRect();if(q.height!==0&&q.width!==0){E.height=q.height;E.width=q.width}}try{if(!E.id)E.id=e.id+"_canvas";ia=E.getContext("2d");ia.clearRect(0,0,E.width,E.height)}catch(s){COG.Log.exception(s);throw Error("Could not initialise canvas on specified view element");
}na=COG.Touch.capture(E,{observable:y});if(X.height!==E.height||X.width!==E.width){X=T5.D.init(E.width,E.height);y.trigger("resize",E.width,E.height);for(q=L;q--;)t[q].trigger("resize",E.width,E.height)}e.inertia&&na.inertiaEnable(e.panAnimationDuration,X);for(q=L;q--;)t[q].trigger("contextChanged",ia);o()}}function i(q,s){s.setId(q);s.added=T5.ticks();s.bind("remove",function(){y.removeLayer(q)});s.trigger("contextChanged",ia);s.setParent(y);t.push(s);t.sort(function(B,O){var Q=O.zindex-B.zindex;
if(Q===0)Q=O.added-B.added;return Q});L=t.length;return s}function l(q,s,B,O,Q,ca,fa){function ja(){ca&&ca();b();F=1;U=null}N=true;Y=T5.XY.copy(B);r=T5.XY.copy(O);P=null;if(Q)T5.tweenValue(0,s-q,Q,ja,fa?fa:1E3).requestUpdates(function(ma){U=ma/(s-q);F=q+ma;ba=aa;u();y.trigger("animate")});else{F=targetScaleFactor;ja()}}function n(){var q=T5.D.getCenter(X),s=T5.XY.distance([r,q]);q=T5.XY.theta(r,q,s);var B=T5.XY.diff(Y,r);q=T5.XY.extendBy(r,q,s/F);q.x+=B.x;q.y+=B.y;return q}function x(){y.trigger("idle");
M=true;J=0}function z(q,s,B,O,Q){if($)s=T5.viewState("FROZEN");var ca=(s&aa)!==0,fa=0;if(G||ca){q.clearRect(0,0,E.width,E.height);G=false}if(ca){T5.D.getCenter(X);var ja=(U?U:1)/2,ma=T5.XY.diff(Y,r);if(P){I.x=r.x+ma.x;I.y=r.y+ma.y}else{I.x=r.x-ma.x*ja;I.y=r.y-ma.y*ja}B=T5.XY.offset(B,I.x,I.y)}q.save();try{V=F;if(W!==1)q.scale(W,W);else if(ca){q.translate(r.x,r.y);q.scale(F,F)}for(fa=L;fa--;)if(t[fa].shouldDraw(s,B,O)){t[fa].draw(q,B,X,s,y,O,Q);t[fa].trigger("drawComplete",B,Q)}}finally{q.restore()}y.trigger("drawComplete",
B,Q);COG.Log.trace("draw complete",Q)}function p(q,s){var B=false,O=S?S:D?la:ba,Q=!D&&(O===aa||O===la),ca=T||O===la||O===aa||T5.isTweening();C.x=Z>>0;C.y=v>>0;if(Q){T5.cancelAnimation(function(fa){return fa.cancelOnInteract});M=false;if(J!==0){clearTimeout(J);J=0}}for(Q=L;Q--;){if(t[Q].animated)ba|=oa;B=t[Q].cycle(q,C,ba,ca)||B}ca=ca||(ba&oa)!==0;if(B=B||ca||F!==1&&F!==ha){z(ia,O,C,ca,q);ha=F;T=false}if(!B&&da===0&&!pa){if(!M&&J===0)J=setTimeout(x,500);s.trigger("complete")}da=0;COG.Log.trace("Completed draw cycle",
q)}function o(){T=true;u()}function u(){da+=1;if(!($||ea)){ea=COG.Loopage.join({execute:p,frequency:qa});ea.bind("complete",function(){ea=null})}}e=T5.ex({id:COG.objId("view"),container:"",fastDraw:false,inertia:true,pannable:true,scalable:true,panAnimationEasing:T5.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,adjustScaleFactor:null,autoSize:true,tapExtent:10,fps:25},e);var t=[],L=0,E=document.getElementById(e.container),ia=null,Z=0,v=0,C=T5.XY.init(),G=false,ea=null,$=
false,W=1,X=T5.D.init(),da=0,r=null,M=false,D=false,J=0,H=0,I=T5.XY.init(),K=0,N=false,P=null,ga=null,S=null,T=false,R=0,F=1,ha=0,V=1,U=null,Y=null,pa=typeof FlashCanvas!=="undefined",qa=~~(1E3/e.fps),na=null,ka=T5.viewState("ACTIVE"),la=T5.viewState("PAN"),aa=T5.viewState("PINCH"),oa=T5.viewState("ANIMATING"),ba=ka,ra=T5.XY.getRect,w=T5.XYRect.diagonalSize,A=T5.XYRect.center,y={id:e.id,deviceScaling:W,fastDraw:e.fastDraw||T5.getConfig().requireFastDraw,animate:function(q,s,B,O,Q){l(F,q,s,B,O,Q)},
centerOn:function(q){Z=q.x-E.width/2;v=q.y-E.height/2},getDimensions:function(){return X},getZoomCenter:function(){return I},getLayer:function(q){for(var s=0;s<L;s++)if(t[s].getId()==q)return t[s];return null},setLayer:function(q,s){for(var B=0;B<L;B++)if(t[B].getId()===q){t.splice(B,1);break}s&&i(q,s);o()},eachLayer:function(q){for(var s=L;s--;)q(t[s])},clearBackground:function(){COG.Log.info("CALL OF DEPRECATED METHOD CLEAR BACKGROUND");G=true;o()},invalidate:o,freeze:function(){$=true},unfreeze:function(){$=
false;u()},resize:function(q,s){if(E){e.autoSize=false;E.width=q;E.height=s;k();y.trigger("resize",E.width,E.height)}},scale:function(q,s,B,O,Q){O||(O=T5.D.getCenter(X));Q||(Q=T5.D.getCenter(X));y.animate(q,O,Q,s,B);return y},removeLayer:function(q){a:{for(var s=L;s--;)if(t[s].getId()==q){q=s;break a}q=-1}if(q>=0&&q<L){COG.say("layer.removed",{layer:t[q]});t.splice(q,1);o()}L=t.length},stateOverride:function(q){S=q},getOffset:function(){return C},updateOffset:d,zoom:function(q,s,B){D=false;F=s;N=
F!==1;Y=T5.D.getCenter(X);r=F>1?T5.XY.copy(q):T5.D.getCenter(X);P=null;clearTimeout(H);if(N){ba=aa;u();if(B)H=setTimeout(function(){b();F=1},parseInt(B,10))}}};W=T5.getConfig().getScaling();y.markers=i("markers",new T5.MarkerLayer);COG.observable(y);y.bind("wake",u);y.bind("invalidate",o);if(e.pannable){y.bind("pan",m);y.bind("panEnd",g);y.bind("inertiaCancel",function(){D=false;u()})}if(e.scalable){y.bind("pinchZoom",a);y.bind("pinchZoomEnd",c);y.bind("wheelZoom",h)}y.bind("tap",function(q,s,B){for(var O=
T5.XY.offset(B,Z,v),Q=t.length;Q--;)q.cancel=q.cancel||t[Q].trigger("tap",s,B,O).cancel});COG.configurable(y,["inertia","container","rotation","tapExtent","scalable","pannable"],COG.paramTweaker(e,null,{container:function(q,s){E=document.getElementById(s);k()},rotation:function(q,s){K=s}}),true);k();e.autoSize&&window.addEventListener("resize",j,false);return y};
T5.PathLayer=function(e){function m(k){k.syncVectors(c);h&&k.syncVectors(h);d.trigger("tidy")}e=T5.ex({style:"waypoints",pixelGeneralization:8,zindex:50},e);var g=false,f=[],a=null,c=[],h=null,b=0,j=[],d=T5.ex(new T5.ViewLayer(e),{getAnimation:function(k,i,l,n){var x="pathAnimation"+b++;j.push(x);return new T5.AnimatedPathLayer({id:x,path:f,zindex:e.zindex+1,easing:k?k:T5.easing("sine.inout"),duration:i?i:5E3,drawIndicator:l,autoCenter:n?n:false})},cycle:function(k,i,l,n){return n},draw:function(k,
i){var l,n=f.length;k.save();try{T5.applyStyle(k,e.style);if(n>0){k.beginPath();k.moveTo(f[n-1].x-i.x,f[n-1].y-i.y);for(l=n;l--;)k.lineTo(f[l].x-i.x,f[l].y-i.y);k.stroke();if(a){k.fillStyle=e.waypointFillStyle;for(l=a.length;l--;){k.beginPath();k.arc(a[l].x-i.x,a[l].y-i.y,2,0,Math.PI*2,false);k.stroke();k.fill()}}}}finally{k.restore()}g=false},updateCoordinates:function(k,i){var l=d.getParent();l=l?l.getTileLayer():null;c=k;h=i;COG.Log.info("updating coordinates, grid = "+l);l&&m(l)}});d.bind("gridUpdate",
function(k,i){m(i);for(var l=j.length;l--;)COG.say("layer.remove",{id:j[l]});j=[]});d.bind("tidy",function(){f=T5.XY.simplify(c,e.pixelGeneralization);a=T5.XY.simplify(h,e.pixelGeneralization);g=true;d.changed()});return d};
T5.ShapeLayer=function(e){function m(c){for(var h=g.length;h--;)g[h].resync(c);g.sort(function(b,j){var d=j.xy.y-b.xy.y;if(d===0)d=j.xy.x-b.xy.y;return d});f=true;a.changed()}e=T5.ex({zindex:80,style:null},e);var g=[],f=false,a=T5.ex(new T5.ViewLayer(e),{add:function(c){g[g.length]=c},each:function(c){for(var h=g.length;h--;)c(g[h])},cycle:function(){return f},draw:function(c,h,b,j){var d=h.x;h=h.y;var k=b.width;b=b.height;c.save();try{T5.applyStyle(c,e.style);for(var i=g.length;i--;){var l=g[i].style,
n=l?T5.applyStyle(c,l):null;g[i].draw(c,d,h,k,b,j);n&&T5.applyStyle(c,n)}}finally{c.restore()}f=false}});a.bind("gridUpdate",function(c,h){m(h)});a.bind("parentChange",function(c,h){var b=h?h.getTileLayer():null;b&&m(b)});COG.configurable(a,["style"],COG.paramTweaker(e,null,null),true);return a};T5.PolyLayer=T5.ShapeLayer;T5.Shape=function(e){e=T5.ex({style:null,properties:{}},e);return T5.ex(e,{rect:null,draw:function(){},resync:function(){}})};
T5.Arc=function(e,m){m=T5.ex({size:4},m);var g=T5.XY.init(),f=T5.ex(m,{draw:function(a,c,h){a.beginPath();a.arc(g.x-c,g.y-h,f.size,0,Math.PI*2,false);a.fill();a.stroke()},resync:function(a){a.syncVectors([e]);g=T5.XY.floor([e])[0]}});COG.Log.info("created arc = ",e);return f};
T5.Poly=function(e,m){m=T5.ex({fill:false,simplify:false},m);var g=false,f=m.fill,a=m.simplify,c=T5.viewState("PINCH"),h=[],b=T5.ex(new T5.Shape(m),{draw:function(j,d,k,i,l,n){if(g){i=true;l=(n&c)!==0;j.beginPath();for(n=h.length;n--;){l=h[n].x-d;var x=h[n].y-k;if(i){j.moveTo(l,x);i=false}else j.lineTo(l,x);l=true}if(l){f&&j.fill();j.stroke()}}},resync:function(j){b.xy=j.syncVectors(e);h=T5.XY.floor(a?T5.XY.simplify(e):e)}});g=e&&e.length>=2;return b};
T5.AnimatedPathLayer=function(e){function m(b,j,d){b.fillStyle="#FFFFFF";b.strokeStyle="#222222";b.beginPath();b.arc(d.x,d.y,4,0,Math.PI*2,false);b.stroke();b.fill()}e=T5.ex({path:[],id:COG.objId("pathAni"),easing:T5.easing("sine.inout"),validStates:T5.viewState("ACTIVE","PAN","PINCH"),drawIndicator:null,duration:2E3,autoCenter:false},e);var g=T5.XY.edges(e.path),f,a=null,c=0;T5.tweenValue(0,g.total,e.easing,function(){h.remove()},e.duration).requestUpdates(function(b,j){c=b;j&&h.remove()});var h=
T5.ex(new T5.ViewLayer(e),{cycle:function(){for(var b=0;b<g.accrued.length&&g.accrued[b]<c;)b++;a=null;if(b<e.path.length-1){var j=c-(b>0?g.accrued[b-1]:0),d=e.path[b];f=T5.XY.theta(d,e.path[b+1],g.edges[b]);a=T5.XY.extendBy(d,f,j);if(e.autoCenter)(b=h.getParent())&&b.centerOn(a)}return a},draw:function(b,j){if(a)(e.drawIndicator?e.drawIndicator:m)(b,j,T5.XY.init(a.x-j.x,a.y-j.y),f)}});return h};
T5.Marker=function(e){function m(d,k,i,l){f=d;a=k;c=i;h=l}e=T5.ex({xy:T5.XY.init(),offset:true,tweenIn:null,animationSpeed:null},e);var g=false,f=0,a=0,c=0,h=0,b=e.offset,j=T5.ex(e,{isNew:true,isAnimating:function(){return g},draw:function(d,k,i,l,n){if(j.isNew&&e.tweenIn){var x=j.xy.y;j.xy.y=k.y-20;g=true;T5.tween(j.xy,"y",x,e.tweenIn,function(){j.xy.y=x;g=false},e.animationSpeed?e.animationSpeed:250+Math.random()*500)}j.drawMarker(d,k,j.xy.x-(b?k.x:0),j.xy.y-(b?k.y:0),i,l,n);j.isNew=false},drawMarker:function(d,
k,i,l){d.beginPath();d.arc(i,l,4,0,Math.PI*2,false);d.fill();m(i-4,l-4,8,8)},hitTest:function(d,k){return d>=f&&d<=f+c&&k>=a&&k<=a+h},updateBounds:m});COG.observable(j);return j};
T5.ImageMarker=function(e){e=T5.ex({image:null,imageUrl:null,animatingImage:null,animatingImageUrl:null,imageAnchor:null,rotation:0,scale:1,opacity:1},e);var m=e.imageAnchor?T5.XY.invert(e.imageAnchor):null,g=T5.ex(new T5.Marker(e),{drawMarker:function(f,a,c,h){if((a=g.isAnimating()&&g.animatingImage?g.animatingImage:g.image)&&a.complete&&a.width>0){m||(m=T5.XY.init(-a.width>>1,-a.height>>1));var b=g.scale,j=c+~~(m.x*b),d=h+~~(m.y*b),k=~~(a.width*b),i=~~(a.height*b);g.updateBounds(j,d,k,k);if(g.rotation||
g.opacity!==1){f.save();try{f.globalAlpha=g.opacity;f.translate(c,h);f.rotate(g.rotation);f.drawImage(a,m.x*b,m.y*b,k,i)}finally{f.restore()}}else f.drawImage(a,j,d,k,i)}}});if(!g.image)g.image=T5.Images.get(e.imageUrl,function(f){COG.Log.info("updating marker image to: "+f.src);g.image=f});if(!g.animatingImage)g.animatingImage=T5.Images.get(e.animatingImageUrl,function(f){g.animatingImage=f});return g};T5.Annotation=T5.Marker;T5.ImageAnnotation=T5.ImageMarker;
T5.MarkerLayer=function(e){function m(b,j){for(var d=a.length;d--;)j.syncVectors([a[d].xy])}function g(){h.changed();h.trigger("markerUpdate",a)}function f(){var b=h.getParent();(b=b&&b.getTileLayer?b.getTileLayer():null)&&m(null,b)}e=T5.ex({zindex:100},e);var a=[],c=false,h=T5.ex(new T5.ViewLayer(e),{cycle:function(){return c},draw:function(b,j,d,k,i){c=false;for(d=a.length;d--;){a[d].draw(b,j,k,h,i);c=c||a[d].isAnimating()}return c?1:0},add:function(b){if(b&&typeof b.length!=="undefined")for(var j=
b.length;j--;){if(b[j])a[a.length]=b[j]}else if(b)a[a.length]=b;g()},clear:function(b){if(b)for(var j=0;j<a.length;j++)b(a[j])&&a.splice(j,1);else a=[];g()},find:function(b){for(var j=[],d=a.length;d--;)if(!b||b(a[d]))j[j.length]=a[d];return j}});h.bind("tap",function(b,j,d){for(var k=[],i=d.x,l=d.y,n=a.length;n--;)if(a[n].hitTest(i,l))k[k.length]=a[n];if(k.length>0)b.cancel=h.trigger("markerTap",j,d,k).cancel});h.bind("gridUpdate",m);h.bind("parentChange",f);h.bind("changed",f);return h};
T5.Style=function(e){function m(c){var h=e[c];typeof h!=="undefined"&&g.push(function(b){b[c]=h})}e=T5.ex({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},e);var g=[],f={applyToContext:function(c){for(var h=g.length;h--;)g[h](c)}};for(var a in e)m(a);return f};
(function(){var e={},m={basic:new T5.Style({lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"}),waypoints:new T5.Style({lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"})};T5.applyStyle=function(g,f){var a=T5.styles[f]?T5.styles[f]:T5.styles.basic,c;if(g&&g.canvas){c=e[g.canvas.id];e[g.canvas.id]=f}a.applyToContext(g);return c};T5.loadStyles=function(g){COG.jsonp(g,function(f){T5.resetStyles(f)})};T5.resetStyles=function(g){var f={};for(var a in g)f[a]=new T5.Style(g[a]);T5.styles=T5.ex({},
m,f)};T5.styles=m})();(function(){T5.tileSize=256;T5.Tile=function(e){return e=T5.ex({x:0,y:0,gridX:0,gridY:0,dirty:true},e)};T5.EmptyTile=function(e){e=new T5.Tile(e);e.empty=true;return e};T5.ImageTile=function(e){e=T5.ex({url:"",sessionParamRegex:null,loading:false,loaded:false},e);return new T5.Tile(e)}})();
T5.TileGrid=function(e){function m(r,M){var D=T5.Vector(r*j-n.x,M*j-n.y);return new T5.EmptyTile({gridX:D.x,gridY:D.y,empty:true})}function g(r,M,D,J){var H=Math.max(h,b)*0.2>>0,I=T5.XY.init();if(r<0||r+D>h)I.x=r<0?-H:H;if(M<0||M+J>b)I.y=M<0?-H:H;return I}function f(r,M,D){var J=COG.Log.getTraceTicks(),H=0;T5.XY.init(h/2,b/2);ia=true;try{if(D)c=[];if(r)for(D=0;D<b;D++)for(var I=0;I<h;I++){if(!c[H]){var K=r(I,D,i,h,b);K.gridX=I*j-n.x;K.gridY=D*j-n.y;c[H]=K}H++}}finally{ia=false}l=r;x=M;COG.Log.trace("tile grid populated",
J);da.changed()}function a(r,M,D,J){var H,I=[],K=false;r=T5.XY.init((r.x+n.x-j*z)*u>>0,(r.y+n.y-j*z)*u>>0);tilesNeeded=false;if(!ea){H=da.getParent().getDimensions();C=Math.ceil(H.width*u)+1+z;G=Math.ceil(H.height*u)+1+z;ea=T5.XY.init((C-1)/2>>0,(G-1)/2>>0)}for(var N=G;N--;)for(var P=C;P--;){H=P+r.x>=0&&P+r.x<h?c[(N+r.y)*h+(P+r.x)]:null;var ga=T5.XY.init(P-ea.x,N-ea.y);if(!H){v=g(r.x,r.y,C,G);H=m(P+r.x,N+r.y)}K=H?(H.dirty=D||H.dirty)||K:K;I[I.length]={tile:H,centerness:T5.XY.absSize(ga)}}I.sort(function(S,
T){return T.centerness-S.centerness});L||(L=Array(I.length));for(D=I.length;D--;){L[D]=I[D].tile;da.prepTile(L[D],M)}Z=J;return K}e=T5.ex({tileSize:T5.tileSize,bufferSize:1,center:T5.XY.init(),clearBackground:false,gridSize:25,shiftOrigin:null,supportFastDraw:true,allowShift:true},e);var c=Array(Math.pow(e.gridSize,2)),h=e.gridSize,b=e.gridSize,j=e.tileSize,d=b*j,k=h*j,i=T5.XY.offset(e.center,-Math.ceil(h>>1)),l=null,n=T5.XY.init(),x=null,z=e.bufferSize,p=Math.round(j/2),o=false,u=j?1/j:0,t=true,
L=null,E=false,ia=false,Z=0;T5.XY.init();var v=T5.XY.init();T5.getConfig();var C,G,ea,$=e.clearBackground;T5.viewState("ANIMATING");var W=T5.viewState("PAN"),X=T5.viewState("PINCH"),da=T5.ex(new T5.ViewLayer(e),{gridDimensions:T5.D.init(k,d),cycle:function(r,M,D,J){if(v.x!==0||v.y!==0){J=v;var H=e.shiftOrigin;if(!(!e.allowShift||J.x===0&&J.y===0)){var I=COG.Log.getTraceTicks(),K=Array(c.length);K.length=c.length;for(var N=0;N<h;N++)for(var P=0;P<b;P++)K[P*h+N]=N+J.x>=0&&N+J.x<h?c[(P+J.y)*h+(N+J.x)]:
null;c=K;i=H?H(i,J):T5.XY.add(i,J);n.x+=-J.x*j;n.y+=-J.y*j;COG.Log.trace("tile storage shifted",I);f(l,x)}v=T5.XY.init();J=true}if(!o&&(D&X)===0)o=a(M,D,J,r);return o},find:function(r){if(!r)return null;for(var M=c.length;M--;){var D=c[M];if(D&&r(D))return D}return null},prepTile:function(){},drawTile:function(){return false},getTileSize:function(){return j},draw:function(r,M,D,J,H,I,K){var N=M.x;M=M.y;var P=D.width,ga=D.height,S=P,T=ga,R,F=true;if(L){$&&r.clearRect(0,0,P,ga);r.beginPath();if(t)for(var ha=
L.length;ha--;){R=L[ha];var V=R.gridX-N,U=R.gridY-M;if((V>=0||V+j<=P)&&(U>=0||U+j<=ga)){R.x=V;R.y=U;if(R.empty){if(!$){r.clearRect(V,U,j,j);r.rect(V,U,j,j);F=false}}else if(I||R.dirty){(R=da.drawTile(r,R,V,U,J,I,K,$))&&r.rect(V,U,j,j);F=F&&R}S=V<S?V:S;T=U<T?U:T}}if(!$&&(J&W)!==0){if(S>0){r.clearRect(0,0,S,D.height);r.rect(0,0,S,D.height)}if(T>0){r.clearRect(0,0,D.width,T);r.rect(0,0,D.width,T)}}$||r.clip();F&&!E&&H.trigger("tileDrawComplete");o=false;E=F}},getTileAtXY:function(r,M){for(var D=null,
J=L?L.length:0;J--;){var H=L[J];if(H&&r>=H.x&&M>=H.y)if(r<=H.x+j&&M<=H.y+j){D=H;break}}COG.Log.info("looking for tile @ x: "+r+", y: "+M+", found: "+D);return D},getTileVirtualXY:function(r,M,D){r=T5.XY.add(T5.XY.init(r,M),T5.XY.invert(i),n);r=T5.XY.init(r.x*j,r.y*j);if(D){r.x+=p;r.y+=p}return r},populate:function(r){f(r,null,true)},syncVectors:function(){return T5.XY.init(0,0)}});da.bind("resize",function(){COG.Log.info("captured resize");ea=null});da.bind("scale",function(){t=false});COG.listen("imagecache.cleared",
function(){for(var r=c.length;r--;)if(c[r])c[r].loaded=false});COG.listen("tiler.repaint",function(){for(var r=c.length;r--;)if(c[r]){c[r].x=null;c[r].y=null}});return da};
T5.ImageTileGrid=function(e){function m(l){function n(){var x=T5.Images.newCanvas(32,32),z=x.getContext("2d");z.fillStyle="#BBBBBB";z.fillRect(0,0,32,32);z.fillStyle="#C3C3C3";z.fillRect(0,0,16,16);z.fillRect(16,16,16,16);return x}if(!f||l!==f.width){f=T5.Images.newCanvas(l,l);l=f.getContext("2d");l.fillStyle=typeof FlashCanvas!=="undefined"?"#666666":l.createPattern(n(),"repeat");l.fillRect(0,0,f.width,f.height)}return f}e=T5.ex({emptyTile:function(l){if(!g||l!==g.width){g=T5.Images.newCanvas(l,
l);l=g.getContext("2d");l.fillStyle="rgba(150, 150, 150, 0.1)";l.fillRect(0,0,g.width,g.height)}return g}(T5.tileSize),panningTile:null,tileOffset:T5.XY.init(),tileDrawArgs:{}},e);var g=e.emptyTile,f=e.panningTile?e.panningTile:m(T5.tileSize),a=T5.viewState("ACTIVE"),c=T5.viewState("PAN"),h=T5.getConfig().requireFastDraw,b=e.tileSize?e.tileSize:T5.tileSize,j=T5.Images.get,d=T5.Images.load,k=T5.ex({background:null,overlay:null,offset:T5.XY.init(),realSize:T5.D.init(b)},e.tileDrawArgs),i=T5.ex(new T5.TileGrid(e),
{drawTile:function(l,n,x,z,p,o,u,t){o=n.url?j(n.url):null;u=false;if(o){l.drawImage(o,x,z);n.dirty=false;u=true}else if((p&c)!==0){t||l.drawImage(f,x,z);u=true}return u},initTileUrl:function(){},prepTile:function(l,n){if(l&&!l.loading&&(!h||n===a)){l.url||i.initTileUrl(l);if(!j(l.url)){l.loading=true;d(l.url,function(){l.loadTime=(new Date).getTime();l.loaded=true;l.dirty=true;i.changed()},k)}}}});return i};
T5.Tiler=function(e){e=T5.ex({container:"",drawCenter:false,datasources:{},tileLoadThreshold:"first"},e);var m=T5.ex(new T5.View(e),{getTileLayer:function(){return m.getLayer("grid0")},setTileLayer:function(g){m.setLayer("grid0",g);m.trigger("gridUpdate",g);m.eachLayer(function(f){f.trigger("gridUpdate",g)})},viewPixToGridPix:function(g){var f=m.getOffset();return T5.XY.init(g.x+f.x,g.y+f.y)},centerOn:function(g,f,a,c){var h=m.getTileLayer(),b=m.getDimensions();(h=h?h.getTileSize():0)&&m.updateOffset(g.gridX-
(b.width-h)*0.5>>0,g.gridY-(b.height-h)*0.5>>0,f,a,c)},cleanup:function(){m.removeLayer("grid0")},repaint:function(){COG.say("tiler.repaint");m.trigger("wake")},select:function(g){m.trigger("selectTile",g)}});m.bind("tap",function(g,f,a){if(g=m.getTileLayer())(a=g.getTileAtXY(a.x,a.y))&&m.trigger("selectTile",a)});return m};
