COG=function(){var i=/\$\{(.*?)\}/ig,m=Object.prototype.hasOwnProperty,k=0,e={id:"grunt.core",extend:function(){var a=arguments[0]||{},c=1,f=arguments.length,d=false,j,b,g,h;if(typeof a==="boolean"){d=a;a=arguments[1]||{};c=2}if(typeof a!=="object"&&!e.isFunction(a))a={};if(f===c){a=this;--c}for(;c<f;c++)if((j=arguments[c])!=null)for(b in j){g=a[b];h=j[b];if(a!==h)if(d&&h&&(e.isPlainObject(h)||e.isArray(h))){g=g&&(e.isPlainObject(g)||e.isArray(g))?g:e.isArray(h)?[]:{};a[b]=e.extend(d,g,h)}else if(h!==
undefined)a[b]=h}return a},isFunction:function(a){return toString.call(a)==="[object Function]"},isArray:function(a){return toString.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||toString.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!m.call(a,"constructor")&&!m.call(a.constructor.prototype,"isPrototypeOf"))return false;var c;for(c in a);return c===undefined||m.call(a,c)},isEmptyObject:function(a){for(var c in a)return false;return true},isXmlDocument:function(a){return toString.call(a)===
"[object Document]"},contains:function(a,c){var f=a,d=arguments,j=1;if(c&&e.isArray(c)){d=c;j=0}for(j=j;j<d;j++)f=f&&typeof foo[d[j]]!=="undefined";return f},newModule:function(a){a=e.extend({id:null,requires:[],parent:null},a);if(a.parent)a=e.extend({},a.parent,a);return a},toID:function(a){return a.replace(/\s/g,"-")},objId:function(a){return(a?a:"obj")+k++},formatStr:function(a){if(arguments.length<=1)return a;for(var c=arguments.length-2,f=0;f<=c;f++)a=a.replace(RegExp("\\{"+f+"\\}","gi"),arguments[f+
1]);return a},wordExists:function(a,c){var f="";if(c.toString)c=c.toString();for(var d=0;d<c.length;d++)f+=!/\w/.test(c[d])?"\\"+c[d]:c[d];return RegExp("(^|\\s|\\,)"+f+"(\\,|\\s|$)","i").test(a)},parseTemplate:function(a,c){for(var f=i.exec(a);f;){a=a.replace(f[0],COG.XPath.first(f[1],c));i.lastIndex=0;f=i.exec(a)}return a}};return e}();
COG.Log=function(){function i(c,f){var d,j=f&&f.length>0?f[0]:"";for(d=1;f&&d<f.length;d++)j+=" "+(k&&COG.isPlainObject(f[d])?JSON.stringify(f[d]):f[d]);typeof console!=="undefined"&&console[c](j);for(d=0;d<m.length;d++)m[d].call(a,j,c)}var m=[],k=typeof JSON!=="undefined",e=window.console&&window.console.markTimeline,a={id:"grunt.log",getTraceTicks:function(){return e?(new Date).getTime():null},trace:function(c,f){if(e)console.markTimeline(c+(f?": "+(a.getTraceTicks()-f)+"ms":""))},debug:function(){i("debug",
arguments)},info:function(){i("info",arguments)},warn:function(){i("warn",arguments)},error:function(){i("error",arguments)},exception:function(c){a.error(arguments);for(var f in c)a.info("ERROR DETAIL: "+f+": "+c[f])},watch:function(c,f){try{f()}catch(d){a.exception(d,c)}},throwError:function(c){a.error(c);throw Error(c);},requestUpdates:function(c){m.push(c)}};return a}();
(function(){function i(e,a){e[a]||(e[a]=function(c){return e.configure(a,c)})}function m(e){e.gtConfId=COG.objId("configurable");e.gtConfig={};e.gtConfigFns=[];return e.gtConfig}var k={};COG.paramTweaker=function(e,a,c){return function(f,d){if(typeof d!=="undefined"){if(f in e)e[f]=d;c&&f in c&&c[f](f,d)}else return a&&f in a?a[f](f):e[f]}};COG.configurable=function(e,a,c,f){if(e){e.gtConfId||m(e);var d=e.gtConfId,j=e.gtConfig,b=e.gtConfigFns;k[d]=e;b.push(c);for(c=a.length;c--;){j[a[c]]=true;f&&
i(e,a[c])}if(!e.configure)e.configure=function(g,h){if(j[g]){for(var l=b.length;l--;){var q=b[l](g,h);if(typeof q!=="undefined")return q}return k[d]}return null}}}})();
(function(){function i(m,k){var e=m.gtObsHandlers;e[k]||(e[k]=[]);return e[k]}COG.observable=function(m){if(m){if(!m.gtObsHandlers)m.gtObsHandlers={};if(!(m.bind||m.trigger||m.unbind)){m.bind=function(k,e){var a=COG.objId("callback");i(m,k).unshift({fn:e,id:a});return a};m.trigger=function(k){var e=i(m,k),a={cancel:false,tickCount:(new Date).getTime()},c;if(!e)return null;c=Array.prototype.slice.call(arguments,1);c.unshift(a);for(var f=e.length;f--&&!a.cancel;)e[f].fn.apply(self,c);return a};m.unbind=
function(k,e){for(var a=i(m,k),c=0;a&&c<a.length;c++)if(a[c].id===e){a.splice(c,1);break}return m}}}}})();(function(){var i={},m=[];COG.addPipe=function(k){k("pipe.test",{});m.push(k)};COG.listen=function(k,e){i[k]||(i[k]=[]);e&&i[k].push(e)};COG.say=function(k,e){var a;for(a=m.length;a--;)m[a](k,e);if(i[k])for(a=i[k].length;a--;)i[k][a](e)}})();
COG.Loopage=function(){function i(h){return COG.extend({id:c++,frequency:0,after:0,single:false,lastTick:0,execute:function(){}},h)}function m(h){d.push(h);k()}function k(){j&&clearTimeout(j);j=setTimeout(e,0);g=true}function e(){for(var h,l=(new Date).getTime(),q=f.length;d.length>0;){var u=d.shift();for(h=q;h--;)if(f[h].id===u){f.splice(h,1);break}g=true;q=f.length}if(g){b=a;for(h=q;h--;)b=f[h].frequency<b?f[h].frequency:b}for(h=q;h--;){u=l-f[h].lastTick;if(f[h].lastTick===0||u>=f[h].frequency){f[h].execute(l,
f[h]);f[h].lastTick=l;f[h].single&&f[h].trigger("complete")}}j=q?setTimeout(e,b):0}var a=6E4,c=0,f=[],d=[],j=0,b=a,g=true;return{join:function(h){var l=new i(h);if(l.after>0)l.lastTick=(new Date).getTime()+l.after;COG.observable(l);l.bind("complete",function(){m(l.id)});f.unshift(l);k();return l},leave:m}}();if(!this.JSON)this.JSON={};
(function(){function i(b){return b<10?"0"+b:b}function m(b){a.lastIndex=0;return a.test(b)?'"'+b.replace(a,function(g){var h=d[g];return typeof h==="string"?h:"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function k(b,g){var h,l,q,u,w=c,n,p=g[b];if(p&&typeof p==="object"&&typeof p.toJSON==="function")p=p.toJSON(b);if(typeof j==="function")p=j.call(g,b,p);switch(typeof p){case "string":return m(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";c+=f;n=[];if(Object.prototype.toString.apply(p)==="[object Array]"){u=p.length;for(h=0;h<u;h+=1)n[h]=k(h,p)||"null";q=n.length===0?"[]":c?"[\n"+c+n.join(",\n"+c)+"\n"+w+"]":"["+n.join(",")+"]";c=w;return q}if(j&&typeof j==="object"){u=j.length;for(h=0;h<u;h+=1){l=j[h];if(typeof l==="string")if(q=k(l,p))n.push(m(l)+(c?": ":":")+q)}}else for(l in p)if(Object.hasOwnProperty.call(p,l))if(q=k(l,p))n.push(m(l)+(c?": ":":")+q);q=n.length===0?"{}":c?"{\n"+c+n.join(",\n"+c)+
"\n"+w+"}":"{"+n.join(",")+"}";c=w;return q}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,f,d={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(b,g,h){var l;f=c="";if(typeof h==="number")for(l=0;l<h;l+=1)f+=" ";else if(typeof h==="string")f=h;if((j=g)&&typeof g!=="function"&&(typeof g!=="object"||typeof g.length!=="number"))throw Error("JSON.stringify");return k("",
{"":b})};if(typeof JSON.parse!=="function")JSON.parse=function(b,g){function h(q,u){var w,n,p=q[u];if(p&&typeof p==="object")for(w in p)if(Object.hasOwnProperty.call(p,w)){n=h(p,w);if(n!==undefined)p[w]=n;else delete p[w]}return g.call(q,u,p)}var l;b=String(b);e.lastIndex=0;if(e.test(b))b=b.replace(e,function(q){return"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){l=eval("("+b+")");return typeof g==="function"?h({"":l},""):l}throw new SyntaxError("JSON.parse");}})();
(function(){function i(k,e){var a=k.split("|"),c={};for(var f in e){var d=e[f];c[f]=a.length>d?a[d]:null}return c}var m={JSON:{parse:function(k){return JSON.parse(k)}},PDON:{parse:function(k){var e=null,a=[];k=k.split("\n");for(var c=0;c<k.length;c++){var f=k[c];if(e)a.push(i(f,e));else if(f){e=f.split("|");f={};for(var d=0;d<e.length;d++)f[e[d]]=d;e=f}else e=null}return a}}};COG.parseData=function(k,e){e=e?e.toUpperCase():"JSON";if(!m[e])throw Error("Unsupported data format: "+e);try{return m[e].parse(k)}catch(a){COG.Log.exception(a)}return{}}})();
COG.XPath=function(){function i(a){for(var c=null,f=0;f<m.length;f++)if(c=m[f](a))break;return c}var m=[],k=[null,function(a){return a.numberValue},function(a){return a.stringValue},function(a){return a.booleanValue},null,null,null,null,function(a){return a.singleNodeValue?a.singleNodeValue.textContent:null},function(a){return a.singleNodeValue?a.singleNodeValue.textContent:null}];typeof XPathResult!=="undefined"||COG.Log.warn("No XPATH support");var e={SearchResult:function(a){return{toString:function(){var c=
null;if(a){var f=null;if(a.resultType>=0&&a.resultType<k.length)f=k[a.resultType];if(f)c=f(a)}return c?c:""}}},first:function(a,c){var f=e.SearchResult,d;var j=XPathResult.FIRST_ORDERED_NODE_TYPE;if(!j)j=XPathResult.ANY_TYPE;try{if(COG.isXmlDocument(c))d=c.evaluate(a,c,i,j,null);else{COG.Log.warn("attempted xpath expression: "+a+" on a non-xml document");d=null}}catch(b){COG.Log.warn("invalid xpath expression: "+a+" on node: "+c);d=null}return new f(d)},registerResolver:function(a){m.push(a)}};return e}();
COG.Storage=function(){function i(m){if(m&&m=="session")return sessionStorage;return localStorage}return{get:function(m,k){var e=i(k).getItem(m);return/^(\{|\[).*(\}|\])$/.test(e)?JSON.parse(e):e},set:function(m,k,e){k=jQuery.isArray(k)||jQuery.isPlainObject(k)?JSON.stringify(k):k;i(e).setItem(m,k)},remove:function(m,k){i(k).removeItem(m)}}}();
COG.ParseRules=function(){var i=[];return{add:function(m,k){i.push({regex:m,handler:k})},each:function(m,k,e){function a(){c++;e&&c>=i.length&&e(k)}for(var c=0,f=0;f<i.length;f++){var d=i[f].regex,j=i[f].handler,b=false;if(d){d.lastIndex=-1;if((d=d.exec(m))&&j){b=true;j(d,k,a)&&a()}}b||a()}}}};
(function(){function i(d){var j=[],b=function(h,l){l=COG.isFunction(l)?l():l;j[j.length]=encodeURIComponent(h)+"="+encodeURIComponent(l)};if(COG.isArray(d))for(var g=0;g<d.length;g++)b(d[g].name,d[g].value);else for(g in d)b(g,d[g]);return j.join("&").replace(/%20/g,"+")}var m={HTML:"text/html",XML:"text/xml",TEXT:"text/plain",STREAM:"application/octet-stream"},k={JSON:["json"],PDON:["pdon.txt"]},e=["TEXT","STREAM"],a=/^(\w+:)?\/\/([^\/?#]+)/,c={XML:function(d){return d.responseXML},JSON:function(d){return COG.parseData(d.responseText)},
PDON:function(d){return COG.parseData(d.responseText,"PDON")},DEFAULT:function(d){return d.responseText}},f={CONTENT_TYPE:"Content-Type"};COG.xhr=function(d){function j(){if(this.readyState===4){var l=null,q=!this.status&&location.protocol==="file:"||this.status>=200&&this.status<300||this.status===304||this.status===1223||this.status===0;try{if(q)if(d.handleResponse)d.handleResponse(this);else{var u=d,w=this.getResponseHeader(f.CONTENT_TYPE),n,p=false;for(n in m)if(w&&w.indexOf(m[n])>=0){p=true;
break}w=!p;for(p=0;p<e.length;p++)w=w||e[p]==n;if(w)b:{w=n;for(var r in k)for(p=0;p<k[r].length;p++)if(RegExp(k[r][p]+"$","i").test(u.url)){n=r;break b}n=w?w:"DEFAULT"}try{l=c[n](this,u)}catch(x){l=c.DEFAULT(this,u)}}else d.error&&d.error(this)}catch(B){COG.Log.exception(B,"PROCESSING AJAX RESPONSE")}q&&l&&d.success&&d.success.call(this,l)}}try{d=COG.extend({method:"GET",data:null,url:null,async:true,success:null,handleResponse:null,error:null,contentType:"application/x-www-form-urlencoded"},d);var b=
a.exec(d.url),g=b&&(b[1]&&b[1]!==location.protocol||b[2]!==location.host);if(d.data)d.method="POST";if(d.url){b=null;if(d.xhr)b=d.xhr(d);b||(b=new XMLHttpRequest);b.open(d.method,d.url,d.async);d.data&&b.setRequestHeader("Content-Type",d.contentType);g||b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.onreadystatechange=j;b.send(d.method=="POST"?i(d.data):null)}else COG.Log.warn("ajax request issued with no url - that ain't going to work...")}catch(h){COG.Log.exception(h)}}})();
(function(){function i(a){var c=document.createElement("script"),f=false;c.src=a;c.async=true;c.onload=c.onreadystatechange=function(){if(!f&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){f=true;c.onload=c.onreadystatechange=null;c&&c.parentNode&&c.parentNode.removeChild(c)}};k||(k=document.getElementsByTagName("head")[0]);k.appendChild(c)}var m=0,k,e=this;COG.jsonp=function(a,c,f){a+=a.indexOf("?")>=0?"&":"?";var d="json"+ ++m;e[d]=function(j){c(j);e[d]=null;try{delete e[d]}catch(b){}};
i(a+(f?f:"callback")+"="+d);return d}})();
COG.Touch=function(){function i(y,A){return{x:y.x-A.x,y:y.y-A.y}}function m(y,A){var D=i(y,A);return Math.sqrt(D.x*D.x+D.y*D.y)}function k(y){if(y.count>1)return m(y.touches[0],y.touches[1]);return 0}function e(y,A){var D=y&&y.count>0?y.touches[0]:null;if(D&&A&&A.count>0)return i(D,A.touches[0]);return null}function a(y,A){y.count=A.count;for(var D=b;D--;){y.touches[D].x=A.touches[D].x;y.touches[D].y=A.touches[D].y}}function c(){for(var y={count:0,touches:Array(b)},A=b;A--;)y.touches[A]=j();return y}
function f(y){if(y.preventDefault){y.preventDefault();y.stopPropagation()}else y.cancelBubble&&y.cancelBubble()}function d(y,A,D){if(C){A=A[D?D:"touches"];D=A.length;for(D=y.count=D;D--;){y.touches[D].x=A[D].pageX;y.touches[D].y=A[D].pageY}}else if(A.button===0){y.count=1;y.touches[0].x=A.pageX?A.pageX:A.screenX;y.touches[0].y=A.pageY?A.pageY:A.screenY}else y.count=0}function j(y,A){return{x:y?y:0,y:A?A:0}}var b=10,g=120,h=100,l=250,q=300,u=5,w=0,n=1,p=2,r=7,x=0,B=0,C=undefined,R=function(y){function A(v,
t,o,s){var z=Math.asin((v.y-t.y)/o);o=o*(ia/s)>>0;o=o>da?da:o;z=t.x>v.x?z:Math.PI-z;H("pan",Math.cos(z)*-o,Math.sin(z)*o,true)}function D(v,t){var o,s;if(C){o=t-ja;if(o<l){s=m(K.touches[0],v);s>y.inertiaTrigger&&A(K.touches[0],v,s,o)}}else{S.x=v.x;S.y=v.y;COG.Loopage.join({execute:function(z,E){o=z-t;s=m(v,S);if(o<h&&s>y.inertiaTrigger){E.trigger("complete");A(v,S,s,o)}else o>h&&E.trigger("complete")},frequency:10})}}function pa(v){var t=0,o=0;if(v.offsetParent){do{t+=v.offsetLeft;o+=v.offsetTop;
v=v.offsetParent}while(v)}return j(t,o)}function ea(v){var t=v.count,o=Array(t),s=pa(T);for(t=t;t--;)o[t]=j(v.touches[t].x-s.x,v.touches[t].y-s.y);return o}function H(){P&&P.trigger.apply(null,arguments)}function ka(v,t){var o=pa(T);o=j(t.x-o.x,t.y-o.y);H(v,t,o)}function X(v){var t=v.target?v.target:v.srcElement;if(fa||t&&t===T){d(K,v);if(K.count!==0){Z=null;G.x=0;G.y=0;ga=true;la=false;ja=(new Date).getTime();f(v);t.style.cursor="move";H("inertiaCancel");ca=ja;if(v=K.count>0?K.touches[0]:null){H("touchStart",
v.x,v.y);if(ca-$<q)if((v=i(K.touches[0],aa.touches[0]))&&Math.abs(v.x)<y.maxDistDoubleTap&&Math.abs(v.y)<y.maxDistDoubleTap)la=true;U=w;a(aa,K)}else COG.Log.warn("Touch start fired, but no touch vector found")}}}function ma(v){var t=v.target?v.target:v.srcElement,o=0;if(fa||t&&t===T){d(M,v);if(M.count>0){S.x=M.touches[0].x;S.y=M.touches[0].y}if(ga){C&&f(v);if(M.count>1){K.count===1&&a(K,M);o=k(K)-k(M)}if(U===w)if((v=e(M,K))&&(Math.abs(v.x)>=r||Math.abs(v.y)>=r))U=n;if(U!==w)if(!o||Math.abs(o)<u){if(Z=
e(M,aa)){G.x-=Z.x;G.y-=Z.y;ba.x-=Z.x;ba.y-=Z.y}H("pan",ba.x,ba.y);ba.x=0;ba.y=0;U=n}else{H("pinchZoom",ea(K),ea(M));U=p}a(aa,M)}}}function V(v){var t=v.target?v.target:v.srcElement;if(ga&&(fa||t&&t===T)){d(na,v,"changedTouches");var o=na.touches[0];C&&f(v);v=(new Date).getTime();$=ca;if(U===w){ka("tap",K.touches[0]);Q||(Q=setTimeout(function(){Q=0;la&&ka("doubleTap",K.touches[0])},q+50))}else if(U==n){H("panEnd",G.x,G.y);ha&&D(o,v)}else U==p&&H("pinchZoomEnd",ea(K),ea(aa),v-ja);t.style.cursor="default";
ga=false}}function W(v){var t=v.target?v.target:v.srcElement;if(fa||t&&t===T){if(v.detail){t=-v.detail*g;t=j(v.axis===1?t:0,v.axis===2?t:0)}else t=j(v.wheelDeltaX,v.wheelDeltaY);var o=t.y!==0?Math.abs(t.y/g):0;if(S&&o!==0){var s=j(S.x-T.offsetLeft,S.y-T.offsetTop);H("wheelZoom",s,Math.pow(2,t.y>0?o:-o))}f(v)}}y=COG.extend({element:null,observable:null,inertiaTrigger:20,maxDistDoubleTap:20,touchStartHandler:null,moveHandler:null,moveEndHandler:null,pinchZoomHandler:null,pinchZoomEndHandler:null,tapHandler:null,
doubleTapHandler:null,wheelZoomHandler:null},y);var la=false,Q=0,J=T5.getConfig(),K=c(),M=c(),aa=c(),na=c(),Z=null,G=j(),ba=j(),U=null,ga=false,ja=0,oa=[],S=j(),ha=false,ia,da,ca=0,$=0,T=y.element,P=y.observable,fa=typeof FlashCanvas!=="undefined",qa={supportsTouch:C,addListeners:function(v){oa.push(v)},decoupleListeners:function(v){for(var t=0;v&&t<oa.length;t++)if(oa[t].listenerId===v){oa.splice(t,1);break}},release:function(){J.unbindEvent(C?"touchstart":"mousedown",X,false);J.unbindEvent(C?"touchmove":
"mousemove",ma,false);J.unbindEvent(C?"touchend":"mouseup",V,false);if(!C){window.removeEventListener("mousewheel",W,false);window.removeEventListener("DOMMouseScroll",W,false)}},inertiaEnable:function(v,t){ha=true;ia=v;da=t?Math.min(t.width,t.height):500},inertiaDisable:function(){ha=false}};if(typeof C==="undefined")C=T5.getConfig().supportsTouch;J.bindEvent(C?"touchstart":"mousedown",X,false);J.bindEvent(C?"touchmove":"mousemove",ma,false);J.bindEvent(C?"touchend":"mouseup",V,false);if(!C){J.bindEvent("mousewheel",
W,window);J.bindEvent("DOMMouseScroll",W,window)}return qa},L=[];return{capture:function(y,A){if(!y)throw Error("Unable to capture touch of null element");if(!y.id)y.id="touchable_"+x++;var D=L[y.id];if(!D){D=new R(COG.extend({element:y},A));L[y.id]=D}if(A){A.listenerId&&D.decoupleListeners(A.listenerId);A.listenerId=++B;D.addListeners(A)}return D},release:function(y){if(y&&y.id&&L[y.id]){L[y.id].release();delete L[y.id]}}}}();
T5=function(){var i=function(){function c(j,b){return d(j.x-b.x,j.y-b.y)}function f(j,b){if(!b)b=j.length;if(b<=1)throw Error("Cannot determine edge distances for a vector array of only one vector");for(var g={edges:Array(b-1),accrued:Array(b-1),total:0},h=0;h<b-1;h++){var l=c(j[h],j[h+1]);g.edges[h]=Math.sqrt(l.x*l.x+l.y*l.y);g.accrued[h]=g.total+g.edges[h];g.total+=g.edges[h]}return g}function d(j,b){return{x:j?j:0,y:b?b:0}}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var j=
0,b=0,g=arguments.length;g--;){j+=arguments[g].x;b+=arguments[g].y}return d(j,b)},absSize:function(j){return Math.max(Math.abs(j.x),Math.abs(j.y))},copy:function(j){return j?d(j.x,j.y):null},diff:c,distance:function(j,b){return f(j,b).total},edges:f,equals:function(j,b){return j.x===b.x&&j.y===b.y},extendBy:function(j,b,g){return d(j.x-Math.cos(b)*g,j.y-Math.sin(b)*g)},floor:function(j){for(var b=Array(j.length),g=j.length;g--;)b[g]=d(~~j[g].x,~~j[g].y);return b},getRect:function(j){for(var b,g,h,
l,q=j.length;q--;){var u=j[q];b=typeof b==="undefined"||u.x<b?u.x:b;g=typeof g==="undefined"||u.y<g?u.y:g;h=typeof h==="undefined"||u.x>h?u.x:h;l=typeof l==="undefined"||u.y>l?u.y:l}return k.init(b,g,h,l)},init:d,invert:function(j){return d(-j.x,-j.y)},min:function(j,b){return d(j.x<b.x?j.x:b.x,j.y<b.y?j.y:b.y)},max:function(j,b){return d(j.x>b.x?j.x:b.x,j.y>b.y?j.y:b.y)},offset:function(j,b,g){return d(j.x+b,j.y+(g?g:b))},simplify:function(j,b){if(!j)return null;b=b?b:i.VECTOR_SIMPLIFICATION;for(var g=
[],h=null,l=j.length;l--;){var q=j[l];if(include=!h||l===0||Math.abs(q.x-h.x)+Math.abs(q.y-h.y)>b){g.unshift(q);h=q}}return g},theta:function(j,b,g){g=Math.asin((j.y-b.y)/g);return j.x>b.x?g:Math.PI-g}}}(),m=function(){return{dotProduct:function(c,f){return c.x*f.x+c.y*f.y}}}(),k=function(){function c(d){return f(d.x1,d.y1,d.x2,d.y2)}function f(d,j,b,g){d=d?d:0;j=j?j:0;b=typeof b!=="undefined"?b:d;g=typeof g!=="undefined "?g:g;return{x1:d,y1:j,x2:b,y2:g,width:b-d,height:g-j}}return{center:function(d){return i.init(d.x1+
d.width/2,d.y1+d.height/2)},copy:c,diagonalSize:function(d){return Math.sqrt(d.width*d.width+d.height*d.height)},fromCenter:function(d,j,b,g){b=~~(b/2);g=~~(g/2);return f(d-b,j-g,d+b,j+g)},init:f,intersect:function(d,j){var b=f(Math.max(d.x1,j.x1),Math.max(d.y1,j.y1),Math.min(d.x2,j.x2),Math.min(d.y2,j.y2));return b.width>0&&b.height>0?b:null},union:function(d,j){if(d.width===0||d.height===0)return c(j);else if(j.width===0||j.height===0)return c(d);else{var b=f(Math.min(d.x1,j.x1),Math.min(d.y1,j.y1),
Math.max(d.x2,j.x2),Math.max(d.y2,j.y2));return b.width>0&&b.height>0?b:null}}}}(),e=function(){return{getAspectRatio:function(c){return c.height!==0?c.width/c.height:1},getCenter:function(c){return i.init(c.width/2,c.height/2)},getSize:function(c){return Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2))},init:function(c,f){c=c?c:0;return{width:c,height:f?f:c}}}}(),a={ex:COG.extend,ticks:function(){return(new Date).getTime()},userMessage:function(c,f,d){a.trigger("userMessage",c,f,d)},XY:i,XYRect:k,
Vector:function(c,f){COG.Log.warn("The T5.Vector class has been deprecated, please use T5.XY.init instead");return i.init(c,f)},V:COG.extend(i,m),D:e};COG.observable(a);return a}();
(function(){function i(){for(;u.length>0;){var n=u.shift();document.location=n}q=0}function m(n){for(var p=true,r=w.length;r--;)p=p&&n!=w[r];return p}function k(n,p){var r=[];for(var x in p)x&&r.push(x+"="+escape(p[x]));return"tile5://"+n+"/"+(r.length>0?"?"+r.join("&"):"")}function e(n,p){m(n)&&COG.Log.info("would push url: "+k(n,p))}function a(n,p){if(m(n)){u.push(k(n,p));q||(q=setTimeout(i,100))}}function c(n){return function(p,r,x){(x?x:n?document.body:document).addEventListener(p,r,false)}}function f(n){return function(p,
r,x){(x?x:n?document.body:document).removeEventListener(p,r,false)}}function d(n,p,r){(r?r:document).attachEvent("on"+n,p)}function j(n,p,r){(r?r:document).detachEvent("on"+n,p)}function b(){g={base:{name:"Unknown",bindEvent:c(),unbindEvent:f(),supportsTouch:"ontouchstart"in window,imageCacheMaxSize:null,getScaling:function(){return 1},maxImageLoads:null,requireFastDraw:false,bridgeNotify:e,targetFps:null},ie:{name:"MSIE",regex:/msie/i,bindEvent:d,unbindEvent:j,requireFastDraw:false,targetFps:25},
ipod:{name:"iPod Touch",regex:/ipod/i,imageCacheMaxSize:6144,maxImageLoads:4,requireFastDraw:false,bridgeNotify:a,targetFps:25},iphone:{name:"iPhone",regex:/iphone/i,imageCacheMaxSize:6144,maxImageLoads:4,bridgeNotify:a},ipad:{name:"iPad",regex:/ipad/i,imageCacheMaxSize:6144,bridgeNotify:a},android:{name:"Android OS <= 2.1",regex:/android/i,bindEvent:c(true),unbindEvent:f(true),supportsTouch:true,getScaling:function(){return 1/window.devicePixelRatio},bridgeNotify:a},froyo:{name:"Android OS >= 2.2",
regex:/froyo/i,eventTarget:document.body,supportsTouch:true,bridgeNotify:a}};h=[g.froyo,g.android,g.ipod,g.iphone,g.ipad,g.ie]}var g=null,h=[],l=null,q=0,u=[],w=["view.wake","tile.loaded"];T5.getConfig=function(){g||b();if(!l){COG.Log.info("ATTEMPTING TO DETECT PLATFORM: UserAgent = "+navigator.userAgent);for(var n=0;n<h.length;n++){var p=h[n];if(p.regex&&p.regex.test(navigator.userAgent)){l=T5.ex({},g.base,p);COG.Log.info("PLATFORM DETECTED AS: "+l.name);break}}if(!l){COG.Log.warn("UNABLE TO DETECT PLATFORM, REVERTING TO BASE CONFIGURATION");
l=g.base}COG.Log.info("CURRENT DEVICE PIXEL RATIO = "+window.devicePixelRatio)}return l}})();
T5.Dispatcher=function(){var i=[],m={execute:function(k){var e=m.findAction(k);e&&e.execute.apply(e,Array.prototype.slice.call(arguments,1))},findAction:function(k){for(var e=i.length;e--;)if(i[e].id==k)return i[e];return null},getRegisteredActions:function(){return[].concat(i)},getRegisteredActionIds:function(){for(var k=[],e=i.length;e--;)i[e].id&&k.push(i[e].id);return k},registerAction:function(k){k&&k.id&&i.push(k)},Action:function(k){k=T5.ex({autoRegister:true,id:"",title:"",icon:"",hidden:false,
execute:null},k);var e={id:k.id,execute:function(){k.execute&&k.execute.apply(this,arguments)},getParam:function(a){return k[a]?k[a]:""},toString:function(){return COG.formatStr("{0} [title = {1}, icon = {2}]",e.id,k.title,k.icon)}};k.autoRegister&&m.registerAction(e);return e},Agent:function(k){k=COG.extend({name:"Untitled",translator:null,execute:null},k);var e={getName:function(){return k.name},getParam:function(a){return k[a]},getId:function(){return COG.toID(e.getName())},run:function(a,c){if(k.execute){var f=
k.translator?k.translator(a):a;k.execute.call(e,f,function(d,j){c&&c(d,j,f)})}}};return e},runAgents:function(k,e,a){for(var c=0;c<k.length;c++)k[c].run(e,a)}};return m}();
T5.Resources=function(){var i="",m={},k={getPath:function(e){return/^(file|https?|\/)/.test(e)?e:i+e},setBasePath:function(e){i=e},loadResource:function(e){e=T5.ex({filename:"",cacheable:true,dataType:null,callback:null},e);var a=function(c){e.callback&&COG.Log.watch("CALLING RESOURCE CALLBACK",function(){e.callback(c)})};e.cacheable&&m[e.filename]?a(m[e.filename]):COG.xhr({url:k.getPath(e.filename),dataType:e.dataType,success:function(c){if(e.cacheable)m[e.filename]=c;a(c)},error:function(c,f,d){COG.Log.error("error loading resource ["+
e.filename+"], error = "+d)}})},loadSnippet:function(e,a){/\.\w+$/.test(e)||(e+=".html");k.loadResource({filename:"snippets/"+e,callback:a,dataType:"html"})}};return k}();
T5.Images=function(){function i(){if(!q){var n=T5.getConfig().maxImageLoads;q=COG.Loopage.join({execute:function(p,r){if(!n||g.length<n){var x=b.shift();if(x){g[g.length]=x;x.image.onload=k;x.image.src=T5.Resources.getPath(x.url);x.requested=T5.ticks()}else r.trigger("complete")}},frequency:10});q.bind("complete",function(){q=null})}}function m(){u=true;try{var n=h.length/2>>0;if(n>0){h.sort(function(r,x){return r.created-x.created});for(var p=n;p--;)delete c[h[p].url];h.splice(0,n)}}finally{u=false}COG.say("imagecache.cleared")}
function k(){var n=d[this.id],p;if(n&&n.image.complete&&n.image.width>0){n.loaded=true;n.hitCount=1;for(p=g.length;p--;)if(g[p].image.src==this.src){g.splice(p,1);break}if(n.background||n.postProcess||n.drawBackground||n.customDraw)if(n.image){globalImageData=n;p=a(n.realSize?n.realSize.width:n.image.width,n.realSize?n.realSize.height:n.image.height);var r=p.getContext("2d"),x=n.offset?n.offset:T5.XY.init();n.background&&r.drawImage(n.background,0,0);n.drawBackground&&n.drawBackground(r);n.customDraw?
n.customDraw(r,n):r.drawImage(n.image,x.x,x.y);n.postProcess&&n.postProcess(r,n);n.image=p}for(p=n.callbacks.length;p--;)n.callbacks[p]&&n.callbacks[p](this,false);n.callbacks=[];h[h.length]={url:this.src,created:n.requested};delete d[this.id];i()}}function e(n,p,r){var x=c[n];if(x){x.hitCount++;x.image.complete&&x.image.width>0&&p?p(x.image,true):x.callbacks.push(p)}else{x=T5.ex({url:n,image:new Image,loaded:false,created:T5.ticks(),requested:null,hitCount:0,callbacks:[p]},r);x.image.id="resourceLoaderImage"+
j++;c[n]=x;d[x.image.id]=x;b[b.length]=x;i()}return x}function a(n,p){var r=document.createElement("canvas");r.width=n?n:0;r.height=p?p:0;if(typeof FlashCanvas!=="undefined"){r.id="tmpCanvas"+f++;r.style.cssText="position: absolute; top: -"+(p-1)+"px; left: -"+(n-1)+"px;";document.body.appendChild(r);FlashCanvas.initElement(r)}typeof G_vmlCanvasManager!=="undefined"&&G_vmlCanvasManager.initElement(r);return r}var c={},f=0,d={},j=0,b=[],g=[],h=[],l=0,q=null,u=false,w={avgImageSize:25,loadTimeout:10,
cancelLoad:function(){g=[]},get:function(n,p,r){var x=null,B=null;u||(x=c[n]);if((B=x?x.image:null)&&(B.getContext||B.complete&&B.width>0))return B;else p&&e(n,p,r);return null},load:e,newCanvas:a,reset:function(){c={}},stats:function(){return{imageLoadingCount:g.length,queuedImageCount:b.length,imageCacheFullness:l}}};COG.Loopage.join({execute:function(n){for(var p=false,r=0,x=T5.getConfig();r<g.length;)if(n-g[r].requested>w.loadTimeout*1E3){g.splice(r,1);p=true}else r++;p&&i();if(x&&x.imageCacheMaxSize){l=
h.length*w.avgImageSize/x.imageCacheMaxSize;l>=1&&m()}},frequency:2E4});return w}();T5.Generator=function(){var i={};return{init:function(m,k){var e=i[m];if(!e)throw Error("Unable to locate requested generator: "+m);return new e(k)},register:function(m,k){i[m]=k},Template:function(){}}}();
T5.TimeLord=function(){var i=/^P(\d+Y)?(\d+M)?(\d+D)?$/,m=/^(\d+H)?(\d+M)?(\d+S)?$/,k=function(a,c){return{days:a?a:0,seconds:c?c:0}},e={8601:function(a){a=a.split("T");var c=null;c=null;var f=0,d=0;i.lastIndex=-1;c=i.exec(a[0]);f+=c[3]?parseInt(c[3].slice(0,-1),10):0;m.lastIndex=-1;c=m.exec(a[1]);d+=c[1]?parseInt(c[1].slice(0,-1),10)*3600:0;d+=c[2]?parseInt(c[2].slice(0,-1),10)*60:0;d+=c[3]?parseInt(c[3].slice(0,-1),10):0;return new k(f,d)}};return{Duration:k,addDuration:function(){for(var a=new k,
c=arguments.length;c--;){a.days+=arguments[c].days;a.seconds+=arguments[c].seconds}if(a.seconds>=86400){a.days+=~~(a.seconds/86400);a.seconds%=86400}return a},parseDuration:function(a,c){var f=c?e[c]:null;if(f)return f(a);COG.Log.warn("Could not find duration parser for specified format: "+c);return new k},formatDuration:function(a){var c,f,d="";if(a.days)d=a.days+" days ";if(a.seconds){a=a.seconds;if(a>=3600){c=~~(a/3600);a-=c*3600}if(a>=60){f=Math.round(a/60);a-=f*60}if(c)d=d+c+(c>1?" hrs ":" hr ")+
(f?(f>10?f:"0"+f)+" min ":"");else if(f)d=d+f+" min";else if(a>0)d=d+(a>10?a:"0"+a)+" sec"}return d}}}();
T5.zoomable=function(i,m){function k(a,c){if(a&&e!==a){e=a;i.triggerAll("zoomLevelChange",e,c)}}m=T5.ex({initial:0,min:0,max:null,zoomAnimation:T5.easing("quad.out")},m);var e=m.initial;T5.ex(i,{getZoomLevel:function(){return e},setZoomLevel:k,zoomIn:function(){i.scale(2,T5.easing("sine.out"))||i.setZoomLevel(e+1)},zoomOut:function(){i.scale(0.5,T5.easing("sine.out"))||i.setZoomLevel(e-1)}});i.bind("scale",function(a,c,f){a=0;c=Math.sqrt(c);if(c<1)a=-(0.5/c);else if(c>1)a=c;T5.cancelAnimation(function(d){return d.cancelOnInteract});
k(e+a>>0,f)});i.bind("doubleTap",function(a,c,f){if(i.scalable()){T5.cancelAnimation(function(d){return d.cancelOnInteract});i.animate(2,T5.D.getCenter(i.getDimensions()),T5.XY.init(f.x,f.y),m.zoomAnimation)}})};
(function(){var i=Math.PI*2,m=Math.PI/2,k=Math.abs,e=Math.pow,a=Math.sin,c=Math.asin,f=Math.cos,d=1.70158,j={linear:function(b,g,h,l){return h*b/l+g},backin:function(b,g,h,l){return h*(b/=l)*b*((d+1)*b-d)+g},backout:function(b,g,h,l){return h*((b=b/l-1)*b*((d+1)*b+d)+1)+g},backinout:function(b,g,h,l){return(b/=l/2)<1?h/2*b*b*(((d*=1.525)+1)*b-d)+g:h/2*((b-=2)*b*(((d*=1.525)+1)*b+d)+2)+g},bouncein:function(b,g,h,l){return h-j.bounceout(l-b,0,h,l)+g},bounceout:function(b,g,h,l){return(b/=l)<1/2.75?
h*7.5625*b*b+g:b<2/2.75?h*(7.5625*(b-=1.5/2.75)*b+0.75)+g:b<2.5/2.75?h*(7.5625*(b-=2.25/2.75)*b+0.9375)+g:h*(7.5625*(b-=2.625/2.75)*b+0.984375)+g},bounceinout:function(b,g,h,l){return b<l/2?j.bouncein(b*2,0,h,l)/2+g:j.bounceout(b*2-l,0,h,l)/2+h/2+g},cubicin:function(b,g,h,l){return h*(b/=l)*b*b+g},cubicout:function(b,g,h,l){return h*((b=b/l-1)*b*b+1)+g},cubicinout:function(b,g,h,l){if((b/=l/2)<1)return h/2*b*b*b+g;return h/2*((b-=2)*b*b+2)+g},elasticin:function(b,g,h,l,q,u){if(b==0)return g;if((b/=
l)==1)return g+h;u||(u=l*0.3);if(!q||q<k(h)){q=h;h=u/4}else h=u/i*c(h/q);return-(q*e(2,10*(b-=1))*a((b*l-h)*i/u))+g},elasticout:function(b,g,h,l,q,u){var w;if(b==0)return g;if((b/=l)==1)return g+h;u||(u=l*0.3);if(!q||q<k(h)){q=h;w=u/4}else w=u/i*c(h/q);return q*e(2,-10*b)*a((b*l-w)*i/u)+h+g},elasticinout:function(b,g,h,l,q,u){var w;if(b==0)return g;if((b/=l/2)==2)return g+h;u||(u=l*0.3*1.5);if(!q||q<k(h)){q=h;w=u/4}else w=u/i*c(h/q);if(b<1)return-0.5*q*e(2,10*(b-=1))*a((b*l-w)*i/u)+g;return q*e(2,
-10*(b-=1))*a((b*l-w)*i/u)*0.5+h+g},quadin:function(b,g,h,l){return h*(b/=l)*b+g},quadout:function(b,g,h,l){return-h*(b/=l)*(b-2)+g},quadinout:function(b,g,h,l){if((b/=l/2)<1)return h/2*b*b+g;return-h/2*(--b*(b-2)-1)+g},sinein:function(b,g,h,l){return-h*f(b/l*m)+h+g},sineout:function(b,g,h,l){return h*a(b/l*m)+g},sineinout:function(b,g,h,l){return-h/2*(f(Math.PI*b/l)-1)+g}};T5.easing=function(b){return j[b.replace(/[\-\_\s\.]/g,"").toLowerCase()]};T5.registerEasingType=function(b,g){j[b.replace(/[\-\_\s\.]/g,
"").toLowerCase()]=g}})();
T5.Tween=function(i){i=T5.ex({target:null,property:null,startValue:0,endValue:null,duration:2E3,tweenFn:T5.easing("sine.out"),complete:null,cancelOnInteract:false},i);var m=T5.ticks(),k=[],e=false,a=0,c=0,f={cancelOnInteract:i.cancelOnInteract,isComplete:function(){return e},triggerComplete:function(d){i.complete&&i.complete(d)},update:function(d){try{var j=i.tweenFn(d-m,a,c,i.duration);if(i.target)i.target[i.property]=j;for(var b=k.length;b--;)k[b](j,void 0);if(e=m+i.duration<=d){if(i.target)i.target[i.property]=
i.tweenFn(i.duration,a,c,i.duration);for(var g=k.length;g--;)k[g](j,true)}}catch(h){COG.Log.exception(h)}},requestUpdates:function(d){k.push(d)}};a=i.target&&i.property&&i.target[i.property]?i.target[i.property]:i.startValue;if(typeof i.endValue!=="undefined")c=i.endValue-a;if(c==0)e=true;T5.wakeTweens();return f};
(function(){function i(a){if(e)return m.length;e=true;try{for(var c=0;c<m.length;)if(m[c].isComplete()){m[c].triggerComplete(false);m.splice(c,1)}else{m[c].update(a);c++}}finally{e=false}m.length===0&&k.trigger("complete");return m.length}var m=[],k=null,e=false;T5.tweenValue=function(a,c,f,d,j){a=new T5.Tween({startValue:a,endValue:c,tweenFn:f,complete:d,duration:j});m.push(a);return a};T5.tween=function(a,c,f,d,j,b){a=new T5.Tween({target:a,property:c,endValue:f,tweenFn:d,duration:b,complete:j});
m.push(a);return a};T5.tweenVector=function(a,c,f,d,j,b){var g=[];if(a){var h=a.x==c,l=a.y==f;h||g.push(T5.tween(a,"x",c,d,function(){(h=true)&&l&&j()},b));l||g.push(T5.tween(a,"y",f,d,function(){l=true;h&&l&&j()},b))}return g};T5.cancelAnimation=function(a){if(!e){e=true;try{for(var c=0;c<m.length;)if(!a||a(m[c])){m[c].triggerComplete(true);m.splice(c,1)}else c++}finally{e=false}}};T5.isTweening=function(){return m.length>0};T5.wakeTweens=function(){if(!k){k=COG.Loopage.join({execute:i,frequency:20});
k.bind("complete",function(){k=null})}}})();(function(){var i={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128};T5.viewState=function(){for(var m=0,k=arguments.length;k--;){var e=i[arguments[k].toUpperCase()];if(e)m|=e}return m}})();
T5.ViewLayer=function(i){i=T5.ex({id:"",zindex:0,supportFastDraw:false,animated:false,validStates:T5.viewState("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},i);var m=null,k=false,e=false,a=i.supportFastDraw,c=i.id,f=T5.viewState("ACTIVE"),d=i.validStates,j=0,b=0,g=T5.ex({addToView:function(h){h.setLayer(c,g)},shouldDraw:function(h,l,q){return(e||q||j!==l.x1||b!==l.y1)&&(h&d)!==0&&(k?a:true)},clip:null,cycle:function(){},draw:function(){},remove:function(){g.trigger("remove",
g)},changed:function(h){e=true;g.trigger("changed",g);m&&m.trigger("invalidate",h)},getId:function(){return c},setId:function(h){c=h},getParent:function(){return m},setParent:function(h){k=(m=h)?m.fastDraw&&displayState!==f:false;g.trigger("parentChange",m)}},i);COG.observable(g);g.bind("drawComplete",function(h,l){e=false;j=l.x1;b=l.y1});g.bind("resync",function(h,l){if(l.syncXY){g.minXY&&l.syncXY(g.minXY);g.maxXY&&l.syncXY(g.maxXY)}});return g};
T5.View=function(i){function m(o,s,z,E){P=ca;n();if(E&&i.inertia){V=true;b(R+s,L+z,i.panAnimationEasing,i.panAnimationDuration)}else E||b(R+s,L+z)}function k(){P=da;V=false;COG.Loopage.join({execute:n,after:50,single:true})}function e(o,s){var z=fa(o);v(z);var E=qa(z),F=fa(s),I=v(F);F=qa(F);X=T5.XY.offset(I,A.x1,A.y1);G=z&&E!==0?F/E:1}function a(o,s,z){e(s,z);if(M=G!==1){P=$;n()}}function c(o,s,z){e(s,z);if(i.adjustScaleFactor){G=i.adjustScaleFactor(G);COG.Log.info("scale factor adjusted to: "+G)}d();
G=1}function f(o,s,z){t.zoom(s,Math.min(Math.pow(2,Math.round(Math.log(z))),8),500)}function d(){var o=T5.XY.init(ha,ia);G=Math.round(G*10)/10;M=false;for(var s=r.length;s--;)r[s].trigger("scale",G,o);t.trigger("scale",G,o);P=da;n()}function j(){clearTimeout(Z);Z=setTimeout(g,50)}function b(o,s,z,E,F){function I(){O+=1;if(O>=2){k(0,0);F&&F()}}var O=0;if(Q){o=o<Q.x?Q.x:o;s=s<Q.y?Q.y:s}if(J){o=o>J.x?J.x:o;s=s>J.y?J.y:s}if(z){o=T5.tweenValue(R,o,z,I,E);s=T5.tweenValue(L,s,z,I,E);o.cancelOnInteract=true;
o.requestUpdates(function(N){R=N;V=true;n()});s.cancelOnInteract=true;s.requestUpdates(function(N){L=N;V=true;n()})}else{R=o;L=s}}function g(){var o;if(B){COG.Touch.release(B);if(i.autoSize&&B.parentNode){o=B.parentNode.getBoundingClientRect();if(o.height!==0&&o.width!==0){B.height=o.height;B.width=o.width}}try{if(!B.id)B.id=i.id+"_canvas";C=B.getContext("2d")}catch(s){COG.Log.exception(s);throw Error("Could not initialise canvas on specified view element");}S=COG.Touch.capture(B,{observable:t});
if(H.height!==B.height||H.width!==B.width){H=T5.D.init(B.width,B.height);t.trigger("resize",B.width,B.height);for(o=x;o--;)r[o].trigger("resize",B.width,B.height)}i.inertia&&S.inertiaEnable(i.panAnimationDuration,H);for(o=x;o--;)r[o].trigger("contextChanged",C);n()}}function h(o,s){s.setId(o);s.added=T5.ticks();s.bind("remove",function(){t.removeLayer(o)});s.trigger("contextChanged",C);s.setParent(t);r.push(s);r.sort(function(z,E){var F=E.zindex-z.zindex;if(F===0)F=E.added-z.added;return F});x=r.length;
return s}function l(o,s,z,E,F,I,O){function N(){I&&I();d();G=1;ga=null}M=true;X=T5.XY.offset(E,A.x1,A.y1);if(F)T5.tweenValue(0,s-o,F,N,O?O:1E3).requestUpdates(function(Y){ga=Y/(s-o);G=o+Y;P=$;n();t.trigger("animate")});else{G=s;N()}}function q(){p("idle",t);ma=true;W=0}function u(o,s,z,E){var F=false,I=(o&$)!==0,O=T5.XYRect.copy(s),N,Y=0;z&&C.clearRect(0,0,B.width,B.height);C.save();try{U=G;C.globalCompositeOperation="source-over";if(I){I=1/G;var ra=(I-0.5)*2,ua=O.width*I>>0,va=O.height*I>>0,wa=X.y-
L;ha=X.x-(X.x-R)*ra>>0;ia=X.y-wa*ra>>0;O=T5.XYRect.fromCenter(ha,ia,ua,va);C.scale(G,G)}C.translate(-O.x1,-O.y1);J=Q=null;C.beginPath();for(Y=x;Y--;)if(r[Y].clip){r[Y].clip(C,O,o,t,z,E);F=true}C.closePath();F&&C.clip();for(Y=x;Y--;){N=r[Y];var sa=N.style,ta=sa?T5.Style.apply(C,sa):null;if(N.minXY)Q=Q?T5.XY.min(Q,N.minXY):T5.XY.copy(N.minXY);if(N.maxXY)J=J?T5.XY.max(J,N.maxXY):T5.XY.copy(N.maxXY);N.draw(C,O,o,t,z,E);ta&&T5.Style.apply(C,ta);N.trigger("drawComplete",O,E)}}finally{C.restore()}if(pa){C.globalCompositeOperation=
"source-over";C.strokeStyle="#f00";C.beginPath();C.moveTo(B.width/2,0);C.lineTo(B.width/2,B.height);C.moveTo(0,B.height/2);C.lineTo(B.width,B.height/2);C.stroke()}t.trigger("drawComplete",s,E);COG.Log.trace("draw complete",E)}function w(o,s){var z=false,E=aa?aa:V?ca:P,F=!V&&(E===$||E===ca),I=na||E===ca||E===$||T5.isTweening();y=T5.XY.init(R>>0,L>>0);A=T5.XYRect.fromCenter(y.x,y.y,H.width,H.height);if(F){T5.cancelAnimation(function(O){return O.cancelOnInteract});ma=false;if(W!==0){clearTimeout(W);
W=0}}for(F=x;F--;){if(r[F].animated)P|=T;r[F].cycle(o,A,P,I);z=r[F].shouldDraw(P,A,I)||z}I=I||(P&T)!==0;if(z=z||I||G!==1&&G!==ba){u(E,A,I,o);ba=G;na=false}if(!z&&ka===0&&!ja){if(!ma&&W===0)W=setTimeout(q,500);s.trigger("complete")}ka=0;COG.Log.trace("Completed draw cycle",o)}function n(o){na=o?true:false;ka+=1;if(!D){D=COG.Loopage.join({execute:w,frequency:oa});D.bind("complete",function(){D=null})}}function p(){t.trigger.apply(null,arguments);for(var o=r.length;o--;)r[o].trigger.apply(null,arguments)}
i=T5.ex({id:COG.objId("view"),container:"",fastDraw:false,inertia:true,pannable:true,scalable:true,panAnimationEasing:T5.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,adjustScaleFactor:null,autoSize:true,tapExtent:10,mask:true,guides:false,fps:25},i);var r=[],x=0,B=document.getElementById(i.container),C=null,R=0,L=0,y=null,A=null,D=null,pa=i.guides,ea=1,H=T5.D.init(),ka=0,X=null,ma=false,V=false,W=0,la=0,Q=null,J=null,K=0,M=false,aa=null,na=false,Z=0,G=1,ba=0,U=1,ga=null,
ja=typeof FlashCanvas!=="undefined",oa=~~(1E3/i.fps),S=null,ha,ia,da=T5.viewState("ACTIVE"),ca=T5.viewState("PAN"),$=T5.viewState("ZOOM"),T=T5.viewState("ANIMATING"),P=da,fa=T5.XY.getRect,qa=T5.XYRect.diagonalSize,v=T5.XYRect.center,t={id:i.id,deviceScaling:ea,fastDraw:i.fastDraw||T5.getConfig().requireFastDraw,animate:function(o,s,z,E,F){l(G,o,s,z,E,F)},centerOn:function(o){R=o.x-B.width/2;L=o.y-B.height/2},getDimensions:function(){return H},getLayer:function(o){for(var s=0;s<x;s++)if(r[s].getId()==
o)return r[s];return null},setLayer:function(o,s){for(var z=0;z<x;z++)if(r[z].getId()===o){r.splice(z,1);break}s&&h(o,s);n();return s},eachLayer:function(o){for(var s=x;s--;)o(r[s])},invalidate:n,resize:function(o,s){if(B){i.autoSize=false;B.width=o;B.height=s;g();t.trigger("resize",B.width,B.height)}},scale:function(o,s,z,E,F){E||(E=T5.D.getCenter(H));F||(F=T5.D.getCenter(H));t.animate(o,E,F,s,z);return t},triggerAll:p,removeLayer:function(o){a:{for(var s=x;s--;)if(r[s].getId()==o){o=s;break a}o=
-1}if(o>=0&&o<x){COG.say("layer.removed",{layer:r[o]});r.splice(o,1);n()}x=r.length},stateOverride:function(o){aa=o},getOffset:function(){return y?y:T5.XY.init(R,L)},getViewRect:function(){return A?A:T5.XYRect.fromCenter(R,L,H.width,H.height)},updateOffset:b,pan:function(o,s,z,E,F){b(R+o,L+s,z,E,F)},zoom:function(o,s,z){V=false;G=s;M=G!==1;X=T5.XY.offset(G>1?T5.XY.copy(o):T5.D.getCenter(H),A.x1,A.y1);clearTimeout(la);if(M){P=$;n();if(z)la=setTimeout(function(){d();G=1},parseInt(z,10))}}};ea=T5.getConfig().getScaling();
t.markers=h("markers",new T5.MarkerLayer);COG.observable(t);t.bind("invalidate",function(o,s){n(s)});if(i.pannable){t.bind("pan",m);t.bind("panEnd",k);t.bind("inertiaCancel",function(){V=false;n()})}if(i.scalable){t.bind("pinchZoom",a);t.bind("pinchZoomEnd",c);t.bind("wheelZoom",f)}t.bind("tap",function(o,s,z){for(var E=T5.XY.offset(z,R,L),F=r.length;F--;)o.cancel=o.cancel||r[F].trigger("tap",s,z,E).cancel});t.bind("resync",function(){J=Q=null});COG.configurable(t,["inertia","container","rotation",
"tapExtent","scalable","pannable"],COG.paramTweaker(i,null,{container:function(o,s){B=document.getElementById(s);g()},rotation:function(o,s){K=s}}),true);g();i.autoSize&&window.addEventListener("resize",j,false);return t};
T5.PathLayer=function(i){i=T5.ex({style:"waypoints",pixelGeneralization:8,zindex:50},i);var m=false,k=[],e=null,a=[],c=null,f=0,d=[],j=T5.ex(new T5.ViewLayer(i),{getAnimation:function(b,g,h,l){var q="pathAnimation"+f++;d.push(q);return new T5.AnimatedPathLayer({id:q,path:k,zindex:i.zindex+1,easing:b?b:T5.easing("sine.inout"),duration:g?g:5E3,drawIndicator:h,autoCenter:l?l:false})},cycle:function(b,g,h,l){return l},draw:function(b){var g,h=k.length;b.save();try{T5.Style.apply(b,i.style);if(h>0){b.beginPath();
b.moveTo(k[h-1].x,k[h-1].y);for(g=h;g--;)b.lineTo(k[g].x,k[g].y);b.stroke();if(e){b.fillStyle=i.waypointFillStyle;for(g=e.length;g--;){b.beginPath();b.arc(e[g].x,e[g].y,2,0,Math.PI*2,false);b.stroke();b.fill()}}}}finally{b.restore()}m=false},updateCoordinates:function(b,g){a=b;c=g;var h=j.getParent();if(h&&h.syncXY){h.syncXY(a);c&&h.syncXY(c);j.trigger("tidy")}}});j.bind("tidy",function(){k=T5.XY.simplify(a,i.pixelGeneralization);e=T5.XY.simplify(c,i.pixelGeneralization);m=true;j.changed()});return j};
T5.ShapeLayer=function(i){function m(c){for(var f=e.length;f--;)e[f].resync(c);e.sort(function(d,j){var b=j.xy.y-d.xy.y;if(b===0)b=j.xy.x-d.xy.y;return b});a.changed()}function k(c,f){f.syncXY&&m(f)}i=T5.ex({zindex:80},i);var e=[],a=T5.ex(new T5.ViewLayer(i),{add:function(c){e[e.length]=c},each:function(c){for(var f=e.length;f--;)c(e[f])},draw:function(c,f,d){var j=f.x1,b=f.y1,g=f.width;f=f.height;for(var h=e.length;h--;){var l=e[h].style;l=l?T5.Style.apply(c,l):null;e[h].draw(c,j,b,g,f,d);l&&T5.Style.apply(c,
l)}}});a.bind("parentChange",k);a.bind("resync",k);return a};T5.PolyLayer=T5.ShapeLayer;T5.Shape=function(i){i=T5.ex({style:null,properties:{}},i);return T5.ex(i,{rect:null,draw:function(){},resync:function(){}})};T5.Arc=function(i,m){m=T5.ex({size:4},m);var k=T5.XY.init(),e=T5.ex(m,{draw:function(a){a.beginPath();a.arc(k.x,k.y,e.size,0,Math.PI*2,false);a.fill();a.stroke()},resync:function(a){a.syncXY([i]);k=T5.XY.floor([i])[0]}});COG.Log.info("created arc = ",i);return e};
T5.Poly=function(i,m){m=T5.ex({fill:false,simplify:false},m);var k=false,e=m.fill,a=m.simplify,c=T5.viewState("ZOOM"),f=[],d=T5.ex(new T5.Shape(m),{draw:function(j,b,g,h,l,q){if(k){b=true;g=(q&c)!==0;j.beginPath();for(q=f.length;q--;){g=f[q].x;h=f[q].y;if(b){j.moveTo(g,h);b=false}else j.lineTo(g,h);g=true}if(g){e&&j.fill();j.stroke()}}},resync:function(j){d.xy=j.syncXY(i);f=T5.XY.floor(a?T5.XY.simplify(i):i)}});k=i&&i.length>=2;return d};
T5.AnimatedPathLayer=function(i){function m(d,j,b){d.fillStyle="#FFFFFF";d.strokeStyle="#222222";d.beginPath();d.arc(b.x,b.y,4,0,Math.PI*2,false);d.stroke();d.fill()}i=T5.ex({path:[],id:COG.objId("pathAni"),easing:T5.easing("sine.inout"),validStates:T5.viewState("ACTIVE","PAN","ZOOM"),drawIndicator:null,duration:2E3,autoCenter:false},i);var k=T5.XY.edges(i.path),e,a=null,c=0;T5.tweenValue(0,k.total,i.easing,function(){f.remove()},i.duration).requestUpdates(function(d,j){c=d;j&&f.remove()});var f=
T5.ex(new T5.ViewLayer(i),{cycle:function(){for(var d=0;d<k.accrued.length&&k.accrued[d]<c;)d++;a=null;if(d<i.path.length-1){var j=c-(d>0?k.accrued[d-1]:0),b=i.path[d];e=T5.XY.theta(b,i.path[d+1],k.edges[d]);a=T5.XY.extendBy(b,e,j);if(i.autoCenter)(d=f.getParent())&&d.centerOn(a)}return a},draw:function(d,j){if(a)(i.drawIndicator?i.drawIndicator:m)(d,j,T5.XY.init(a.x,a.y),e)}});return f};
T5.Marker=function(i){function m(j,b,g,h){e=j;a=b;c=g;f=h}i=T5.ex({xy:T5.XY.init(),offset:true,tweenIn:null,animationSpeed:null},i);var k=false,e=0,a=0,c=0,f=0,d=T5.ex(i,{isNew:true,isAnimating:function(){return k},draw:function(j,b,g,h,l){if(d.isNew&&i.tweenIn){var q=d.xy.y;d.xy.y=b.y1-20;k=true;T5.tween(d.xy,"y",q,i.tweenIn,function(){d.xy.y=q;k=false},i.animationSpeed?i.animationSpeed:250+Math.random()*500)}d.drawMarker(j,b,d.xy.x,d.xy.y,g,h,l);d.isNew=false},drawMarker:function(j,b,g,h){j.beginPath();
j.arc(g,h,4,0,Math.PI*2,false);j.fill();m(g-4,h-4,8,8)},hitTest:function(j,b){return j>=e&&j<=e+c&&b>=a&&b<=a+f},updateBounds:m});COG.observable(d);return d};
T5.ImageMarker=function(i){i=T5.ex({image:null,imageUrl:null,animatingImage:null,animatingImageUrl:null,imageAnchor:null,rotation:0,scale:1,opacity:1},i);var m=i.imageAnchor?T5.XY.invert(i.imageAnchor):null,k=T5.ex(new T5.Marker(i),{drawMarker:function(e,a,c,f){if((a=k.isAnimating()&&k.animatingImage?k.animatingImage:k.image)&&a.complete&&a.width>0){m||(m=T5.XY.init(-a.width>>1,-a.height>>1));var d=k.scale,j=c+~~(m.x*d),b=f+~~(m.y*d),g=~~(a.width*d),h=~~(a.height*d);k.updateBounds(j,b,g,g);if(k.rotation||
k.opacity!==1){e.save();try{e.globalAlpha=k.opacity;e.translate(c,f);e.rotate(k.rotation);e.drawImage(a,m.x*d,m.y*d,g,h)}finally{e.restore()}}else e.drawImage(a,j,b,g,h)}}});if(!k.image)k.image=T5.Images.get(i.imageUrl,function(e){COG.Log.info("updating marker image to: "+e.src);k.image=e});if(!k.animatingImage)k.animatingImage=T5.Images.get(i.animatingImageUrl,function(e){k.animatingImage=e});return k};T5.Annotation=T5.Marker;T5.ImageAnnotation=T5.ImageMarker;
T5.MarkerLayer=function(i){function m(){a.changed();a.trigger("markerUpdate",e)}function k(){var c=a.getParent();if(c&&c.syncXY)for(var f=e.length;f--;)c.syncXY([e[f].xy])}i=T5.ex({zindex:100,style:"basic"},i);var e=[],a=T5.ex(new T5.ViewLayer(i),{draw:function(c,f,d,j){for(var b=e.length;b--;)e[b].draw(c,f,d,a,j)},add:function(c){if(c&&typeof c.length!=="undefined")for(var f=c.length;f--;){if(c[f])e[e.length]=c[f]}else if(c)e[e.length]=c;m()},clear:function(c){if(c)for(var f=0;f<e.length;f++)c(e[f])&&
e.splice(f,1);else e=[];m()},find:function(c){for(var f=[],d=e.length;d--;)if(!c||c(e[d]))f[f.length]=e[d];return f}});a.bind("tap",function(c,f,d){for(var j=[],b=d.x,g=d.y,h=e.length;h--;)if(e[h].hitTest(b,g))j[j.length]=e[h];if(j.length>0)c.cancel=a.trigger("markerTap",f,d,j).cancel});a.bind("parentChange",k);a.bind("resync",k);a.bind("changed",k);return a};
T5.ImageLayer=function(i,m){function k(h,l,q){if(f)for(var u=f.length;u--;){var w=f[u],n=w.x,p=w.y,r=T5.XYRect.init(w.x,w.y,w.x+w.width,w.y+w.height);if(q&&T5.XYRect.intersect(h,r)){r=T5.Images.get(w.url,(l&b)===0?a:null,j);q(r,n,p,w.width,w.height)}}}function e(h){c&&c.run(h,function(l){f=l;g.changed()})}function a(){g.changed()}m=T5.ex({imageLoadArgs:{}},m);var c=i?T5.Generator.init(i,m):null,f=null,d=T5.XYRect.init(),j=m.imageLoadArgs,b=T5.viewState("ZOOM"),g=T5.ex(new T5.ViewLayer(m),{changeGenerator:function(h,
l){c=T5.Generator.init(h,T5.ex({},m,l));c.bindToView(g.getParent());f=null;e(d)},clip:function(h,l,q){k(l,q,function(u,w,n,p,r){u&&h.rect(w,n,p,r)})},cycle:function(h,l){e(l)},draw:function(h,l,q){k(l,q,function(u,w,n,p,r){g.drawImage(h,u,w,n,p,r,l,q)});d=T5.XYRect.copy(l)},drawImage:function(h,l,q,u){l&&h.drawImage(l,q,u,l.width,l.height)}});g.bind("idle",function(){e(d)});g.bind("parentChange",function(h,l){c&&c.bindToView(l)});g.bind("tap",function(h,l,q,u){h=[];var w=u.x,n=u.y,p,r;if(f)for(var x=
f.length;x--;){p=f[x];if(r=w>=p.x&&w<=p.x+p.width&&n>=p.y&&n<=p.y+p.height)h[h.length]=p}h.length>0&&g.trigger("tapImage",h,l,q,u)});return g};
T5.Style=function(){function i(f,d){a[f]=k(d);return f}function m(f){for(var d in f)i(d,f[d])}function k(f){function d(h){var l=f[h];typeof l!=="undefined"&&b.push(function(q){q[h]=l})}function j(){b=[];for(var h in f)d(h)}f=T5.ex({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},f);var b=[],g={applyToContext:function(h){for(var l=b.length;l--;)b[l](h)},update:function(h,
l){f[h]=l;j()}};j();return g}var e={},a={},c={apply:function(f,d){var j=a[d]?a[d]:a.basic,b;if(f&&f.canvas){b=e[f.canvas.id];e[f.canvas.id]=d}j.applyToContext(f);return b},define:i,defineMany:m,get:function(f){return a[f]},init:k,load:function(f){COG.jsonp(f,function(d){T5.resetStyles(d)})}};m({basic:{lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"}});return c}();
T5.Tiling=function(){return{tileSize:256,init:function(i,m,k,e,a){return T5.ex({x:i,y:m,width:k,height:e},a)}}}();
T5.TileGenerator=function(i){function m(q,u,w,n){function p(){if(l.initTileCreator){f=true;l.initTileCreator(q,u,w,n)}}l.prepTileCreator?l.prepTileCreator(q,u,w,p):p()}function k(q,u){for(var w=~~((q.x1-c.x)/d),n=~~((q.y1-c.y)/j),p=[],r=-g;r<g;r++)for(var x=-h;x<h;x++){var B=b(w+r,n+x);if(B)p[p.length]=B}u&&u(p);a=T5.XYRect.copy(q)}i=T5.ex({tileWidth:256,tileHeight:256},i);var e=null,a=null,c=T5.XY.init(),f=false,d=i.tileWidth,j=i.tileHeight,b=null,g=0,h=0,l={bindToView:function(q){COG.Log.info("initializing generator");
e=q;l.trigger("bindView",q)},getTileCreatorArgs:null,initTileCreator:null,prepTileCreator:null,requireRefresh:function(){return false},reset:function(){b=null;f=false;a=null},run:function(q,u){if(!a||Math.abs(q.x1-a.x1)>d||Math.abs(q.y1-a.y1)>j){if(!b&&!f||l.requireRefresh()){c=T5.XY.init(q.x1,q.y1);g=Math.ceil(q.width/d)+1;h=Math.ceil(q.height/j)+1;m(d,j,l.getTileCreatorArgs?l.getTileCreatorArgs(e):{},function(w){b=w;f=false;k(q,u)})}b&&k(q,u)}}};COG.observable(l);l.bind("update",function(){COG.Log.info("captured generator update");
a=null});return l};
