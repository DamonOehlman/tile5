T5.Registry.register("parser","geojson",function(){function o(d,a,c,e){a=s(a);d.add(e(a,c));return a.length}function s(d){var a=d?d.length:0,c=Array(a);for(a=a;a--;)c[a]=new Pos(d[a][1],d[a][0]);return PosFns.vectorize(c,t)}var z="featurecollection",A="feature",t={async:false},m={processor:null,group:"shapes",layer:"draw"},B={point:_extend({},m,{processor:function(d,a,c,e){a=s([a.coordinates],t);if(a.length>0)if(c=e.marker(a[0],c)){d.add(c);return a.length}},group:"markers",layer:"draw"}),linestring:_extend({},
m,{processor:function(d,a,c,e){a=s(a&&a.coordinates?a.coordinates:[]);return o(d,a,c,e.line)}}),multilinestring:_extend({},m,{processor:function(d,a,c,e){a=a&&a.coordinates?a.coordinates:[];for(var j=0,h=a.length;h--;)j+=o(d,a[h],c,e.line);return j}}),polygon:_extend({},m,{processor:function(d,a,c,e){a=a&&a.coordinates?a.coordinates:[];if(a.length>0)return o(d,a[0],c,e.poly);return 0}}),multipolygon:_extend({},m,{processor:function(d,a,c,e){a=a&&a.coordinates?a.coordinates:[];for(var j=0,h=0;h<a.length;h++)j+=
o(d,a[h][0],c,e.poly);return j}})},x=function(d,a,c,e){function j(b,f){var g=b.processor,i=u+b.group,l=_extend({},b,c,{properties:f.properties});if(g){var k=n[i];if(!k){k=new b.layerClass({id:i});n[i]=k}return g(k,f.data,l,e)}return 0}function h(b,f){var g=b&&b.type?b.type.toLowerCase():null;return g&&g===A?h(b.geometry,b.properties):{type:g,isCollection:g?g===z:false,definition:B[g],data:b,properties:f?f:b.properties}}function v(b){var f=0,g=_extend({},c),i=p;b=b?b:(new Date).getTime();if(!q){for(;i<
r;i++){b=h(w?w(d[i]):d[i]);var l=null;if(b.isCollection){g.layerPrefix=u+C++ +"-";q=new x(b.data.features,function(k){q=null;for(var y in k)n[y]=k[y];p>=r&&a&&a(n)},g);l+=1}else if(b.definition)l=j(b.definition,b);f+=l?l:1;if(f>=D)break}p=i+1;if(q||p<r)animFrame(v);else a&&a(n)}}c=_extend({rowPreParse:null,simplify:false,layerPrefix:"geojson-"},c);e=_extend({marker:function(b){return regCreate(typeDrawable,"marker",{xy:b})},line:function(b,f){return regCreate(typeDrawable,"line",_extend({points:b},
c,f))},poly:function(b,f){return regCreate(typeDrawable,"poly",_extend({points:b},c,f))}},e);var D=500,w=c.rowPreParse,u=c.layerPrefix,p=0,r=0,q=null,C=0,n={};if(d){_is(d,typeArray)||(d=[d]);r=d.length;animFrame(v)}};return{parse:function(d,a,c){return new x(d,a,c)}}});
