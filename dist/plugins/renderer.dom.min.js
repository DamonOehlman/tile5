T5.registerRenderer("dom",function(q,g,x,u){function v(b){var d=b.image=new Image;r[b.id]=b;d.src=b.url;d.onload=function(){if(k[b.id]){f.appendChild(this);b.indom=true}else b.image=null};d.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;";
return d}function s(b,d,a){var c=[];for(var h in b){var e=b[h];if(a?e[a]:!d[h]){if(e.indom){COG.info("attemping to remove tile "+e.id+" from the dom");try{f.removeChild(e.image)}catch(l){COG.warn("could not remove tile "+e.id+" from the DOM")}e.image=null}c[c.length]=h}}for(d=c.length;d--;)delete b[c[d]]}var w=typeof g.style["-webkit-transform"]!="undefined",f=null,r={},k={};f=document.createElement("div");f.id=COG.objId("domImages");f.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",
g.offsetWidth,g.offsetHeight);g.childNodes.length>0?g.insertBefore(f,g.childNodes[0]):g.appendChild(f);q=COG.extend(u,{preventPartialScale:true,drawTiles:function(b,d){var a,c,h=b.scaleFactor,e,l,m,n,i,o,p,j,t;for(j=d.length;j--;){a=d[j];l=l||a.w;i=i||a.h;m=m?Math.min(a.x,m):a.x;n=n?Math.min(a.y,n):a.y;c=c?Math.max(a.x,c):a.x;e=e?Math.max(a.y,e):a.y}e=m-b.x;l=n-b.y;for(j=d.length;j--;){a=d[j];if(a.url){(c=a.image)||(c=v(a));o=(a.x-m)/a.w;p=(a.y-n)/a.h;i=a.w*h|0;t=a.h*h|0;o=e+o*i;p=l+p*i;if(w)c.style["-webkit-transform"]=
"translate3d("+o+"px, "+p+"px, 0px)";else{c.style.left=o+"px";c.style.top=p+"px"}c.style.width=i+"px";c.style.height=t+"px";k[a.id]=a}}},reset:function(){for(s(r,k={});f.childNodes.length>0;)f.removeChild(f.childNodes[0])}});q.bind("predraw",function(){s(r,k);k={}});q.bind("detach",function(){g.removeChild(f)});return q});
