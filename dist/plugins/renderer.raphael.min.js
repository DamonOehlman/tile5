T5.registerRenderer("raphael",function(i,l,C,v,y){function z(a,b,c){m[b]=c}function r(a,b,c,d,e){return{draw:e||A,viewport:b,state:d,hit:s[a.id],vpX:j,vpY:k}}function n(a,b){a.scale(b.scaling,b.scaling);a.rotate(b.rotation*w,true);a.mouseover(function(){s[b.id]=true});a.mouseout(function(){delete s[b.id]});t[b.id]=b}function A(){if(this.rObject){var a=COG.extend({},m[o]||m.basic),b=j-this.translateX,c=k-this.translateY;switch(this.rObject.type){case "circle":a.cx=this.xy.x-b;a.cy=this.xy.y-c;break;
case "path":a.path=this.path(b,c);break;default:a.x=this.xy.x-(this.size>>1)-b;a.y=this.xy.y-(this.size>>1)-c}a.fill&&!this.fill&&delete a.fill;a.stroke&&!this.stroke&&delete a.stroke;this.rObject.attr(a);p[this.id]=this}}function x(a,b,c){var d=[];for(var e in a){var f=a[e];if(c?f[c]:!b[e]){f.rObject.remove();f.rObject=null;d[d.length]=e}}for(b=d.length;b--;)delete a[d[b]]}v=COG.extend({},v);var w=180/Math.PI,j,k,t={},p={},o,s={},m={},g;g=Raphael(l,l.offsetWidth,l.offsetHeight);g.canvas.style.position=
"absolute";i.attachFrame(g.canvas);i=COG.extend(y,{applyStyle:function(a){var b;if(o!==a){b=o;o=a}return b||"basic"},applyTransform:function(a){if(a.rObject){a.rObject.scale(a.scaling,a.scaling);a.rObject.rotate(a.rotation*w,true)}},prepare:function(a,b){j=b.x;k=b.y;return g},prepArc:function(a,b,c,d){if(!a.rObject)n(a.rObject=g.circle(a.xy.x-j,a.xy.y-k,a.size),a);return r(a,b,c,d)},prepMarker:function(a,b,c,d){if(a.reset&&a.rObject){a.rObject.remove();a.rObject=null;a.reset=false}if(!a.rObject){var e=
a.xy.x-j,f=a.xy.y-k,h=a.size;switch(a.markerStyle.toLowerCase()){case "image":n(a.rObject=g.image(a.imageUrl,e-(h>>1),f-(h>>1),h,h),a);break;default:n(a.rObject=g.circle(e,f,h),a)}}return r(a,b,c,d)},prepPoly:function(a,b,c,d,e){if(!a.rObject){var f=e.points||a.points;a.path=function(h,B){for(var u="",q=f.length;q--;)u=(q>0?"L":"M")+(f[q].x-h)+" "+(f[q].y-B)+u;return u};a.removeOnReset=true;n(a.rObject=g.path("M0 0L0 0"),a)}return r(a,b,c,d)}});i.bind("predraw",function(){x(t,p);p={}});i.bind("detach",
function(){l.removeChild(g.canvas)});i.bind("reset",function(){x(t,p,"removeOnReset")});(function(){for(var a in T5.styles)m[a]=T5.styles[a];T5.bind("styleDefined",z)})();return i});
