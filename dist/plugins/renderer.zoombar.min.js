T5.registerRenderer("zoombar",function(d,s,i,b,o){function w(a,e){var f=p[a]=document.createElement("div");f.className="t5-zoombar-button";f.style.cssText=COG.formatStr("position: absolute; background: {0}; z-index: 51; width: {1}px; height: {2}px; margin-top: {3}px",x(a),b.width,b.buttonHeight,e||0);c.appendChild(f)}function x(a,e){return"url("+b.images+") 0 -"+(y+l*3+(a||0)*q*3+(e||0)*q)+"px"}function z(a){return"url("+b.images+") 0 -"+(y+(a||0)*l)+"px"}function t(a,e){var f;if(a===g){g.style.background=
z(e);f="thumb"}else for(var j=0;j<p.length;j++)if(a===p[j]){f="button"+j;p[j].style.background=x(j,e);break}return f}function u(a){if(a!==m){m=a;h=r-m/v*(r-n)|0;if(C)g.style[A]="translate3d(0px, "+(h-n)+"px, 0px)";else g.style.margin=h+"px 0 0 0";COG.info("thumb value = "+m+", pos = "+h);clearTimeout(B);B=setTimeout(function(){d.setZoomLevel(m)},500)}}b=COG.extend({width:24,height:200,images:"/img/zoom.png",align:"right",marginTop:10,spacing:10,thumbHeight:16,buttonHeight:16},b.zoombar);var A="-webkit-transform",
q=b.buttonHeight,k,C=typeof s.style[A]!="undefined",y=b.height,g,l=b.thumbHeight,n=b.spacing+q-(l>>1),r=b.height-q-(l>>1),h=n,m=-1;s=d.minZoom();var v=d.maxZoom()-s+1,p=[],c,B=0,D={button0:function(){d.setZoomLevel(d.getZoomLevel()+1)},button1:function(){d.setZoomLevel(d.getZoomLevel()-1)}};c=document.createElement("div");c.className="t5-zoombar";c.style.cssText=COG.formatStr("position: absolute; background: {3}; z-index: 50; overflow: hidden; width: {0}px; height: {1}px; margin: {2};",b.width,b.height,
function(){var a=b.spacing;if(b.align==="right")a=i.offsetWidth-b.width-b.spacing;return COG.formatStr("{0}px 0 0 {1}px",b.marginTop,a)}(),"url("+b.images+")");i.childNodes[0]?i.insertBefore(c,i.childNodes[0]):i.appendChild(c);g=document.createElement("div");g.className="t5-zoombar-thumb";g.style.cssText=COG.formatStr("position: absolute; background: {0}; z-index: 51; width: {1}px; height: {2}px; margin-top: {3}px;",z(),b.width,b.thumbHeight,h);c.appendChild(g);w(0);w(1,b.height-b.buttonHeight);k=
INTERACT.watch(c,{bindTarget:c});k.bind("pointerMove",function(a,e,f){h=Math.min(Math.max(n,f.y-(l>>1)),r);u(v-(h-n)/r*v|0)});k.bind("pointerDown",function(a){t(a.target,2)});k.bind("pointerUp",function(a){t(a.target,0)});k.bind("tap",function(a){(a=D[t(a.target,2)])&&a()});o=COG.extend(o,{});o.bind("detach",function(){k.unbind();i.removeChild(c)});d.bind("zoomLevelChange",function(a,e){u(e)});u(d.getZoomLevel());return o});
