T5.registerRenderer("zoombar",function(d,h,b,o){function v(a,e){var f=p[a]=document.createElement("div");f.className="t5-zoombar-button";f.style.cssText=COG.formatStr("position: absolute; background: {0}; z-index: 51; width: {1}px; height: {2}px; margin-top: {3}px",w(a),b.width,b.buttonHeight,e||0);c.appendChild(f)}function w(a,e){return"url("+b.images+") 0 -"+(x+l*3+(a||0)*q*3+(e||0)*q)+"px"}function y(a){return"url("+b.images+") 0 -"+(x+(a||0)*l)+"px"}function s(a,e){var f;if(a===g){g.style.background=
y(e);f="thumb"}else for(var j=0;j<p.length;j++)if(a===p[j]){f="button"+j;p[j].style.background=w(j,e);break}return f}function t(a){if(a!==m){m=a;i=r-m/u*(r-n)|0;if(B)g.style[z]="translate3d(0px, "+(i-n)+"px, 0px)";else g.style.margin=i+"px 0 0 0";COG.info("thumb value = "+m+", pos = "+i);clearTimeout(A);A=setTimeout(function(){d.setZoomLevel(m)},500)}}b=COG.extend({width:24,height:200,images:"/img/zoom.png",margin:10,thumbHeight:16,buttonHeight:16},b.zoombar);var z="-webkit-transform",q=b.buttonHeight,
k,B=typeof h.style[z]!="undefined",x=b.height,g,l=b.thumbHeight,n=b.margin+q-(l>>1),r=b.height-q-(l>>1),i=n,m=-1,C=d.minZoom(),u=d.maxZoom()-C+1,p=[],c,A=0,D={button0:function(){d.setZoomLevel(d.getZoomLevel()+1)},button1:function(){d.setZoomLevel(d.getZoomLevel()-1)}};c=document.createElement("div");c.className="t5-zoombar";c.style.cssText=COG.formatStr("position: absolute; background: {3}; z-index: 50; overflow: hidden; width: {0}px; height: {1}px; margin: {2};",b.width,b.height,COG.formatStr("{0} {1} {2} {3}",
b.margin+"px",0,"0",h.offsetWidth-b.width-b.margin+"px"),"url("+b.images+")");h.childNodes[0]?h.insertBefore(c,h.childNodes[0]):h.appendChild(c);g=document.createElement("div");g.className="t5-zoombar-thumb";g.style.cssText=COG.formatStr("position: absolute; background: {0}; z-index: 51; width: {1}px; height: {2}px; margin-top: {3}px;",y(),b.width,b.thumbHeight,i);c.appendChild(g);v(0);v(1,b.height-b.buttonHeight);k=INTERACT.watch(c,{bindTarget:c});k.bind("pointerMove",function(a,e,f){i=Math.min(Math.max(n,
f.y-(l>>1)),r);t(u-(i-n)/r*u|0)});k.bind("pointerDown",function(a){s(a.target,2)});k.bind("pointerUp",function(a){s(a.target,0)});k.bind("tap",function(a){(a=D[s(a.target,2)])&&a()});o=COG.extend(o,{});o.bind("detach",function(){k.unbind();h.removeChild(c)});d.bind("zoomLevelChange",function(a,e){t(e)});t(d.getZoomLevel());return o});
