COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var M=arguments[0]||{},ja,y=1,B=arguments.length;y<B;y++)if((ja=arguments[y])!==null)for(var l in ja){var j=ja[l];if(M!==j)if(j!==undefined)M[l]=j}return M};
(function(){var M=Object.prototype.hasOwnProperty,ja=0,y={};y.toID=function(B){return B.replace(/\s/g,"-")};y.objId=function(B){return(B?B:"obj")+ja++};y.isFunction=function(B){return toString.call(B)==="[object Function]"};y.isArray=function(B){return toString.call(B)==="[object Array]"};y.isPlainObject=function(B){if(!B||toString.call(B)!=="[object Object]"||B.nodeType||B.setInterval)return false;if(B.constructor&&!M.call(B,"constructor")&&!M.call(B.constructor.prototype,"isPrototypeOf"))return false;
var l;for(l in B);return l===undefined||M.call(B,l)};y.isEmptyObject=function(B){for(var l in B)return false;return true};y.isXmlDocument=function(B){return toString.call(B)==="[object Document]"};y.contains=function(B,l){var j=B,s=arguments,C=1;if(l&&module.isArray(l)){s=l;C=0}for(C=C;C<s;C++)j=j&&typeof foo[s[C]]!=="undefined";return j};y.formatStr=function(B){if(arguments.length<=1)return B;for(var l=arguments.length-2,j=0;j<=l;j++)B=B.replace(RegExp("\\{"+j+"\\}","gi"),arguments[j+1]);return B};
y.wordExists=function(B,l){var j="";if(l.toString)l=l.toString();for(var s=0;s<l.length;s++)j+=!/\w/.test(l[s])?"\\"+l[s]:l[s];return RegExp("(^|\\s|\\,)"+j+"(\\,|\\s|$)","i").test(B)};COG.extend(COG,y)})();
(function(){function M(j){return typeof console!=="undefined"?function(){console[j](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var ja=window.console&&window.console.markTimeline,y=M("error"),B=M("info"),l=function(){return ja?function(j,s){console.markTimeline(j+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:l,debug:M("debug"),info:B,warn:M("warn"),error:y,exception:function(j){if(y)for(var s in j)B("ERROR DETAIL: "+
s+": "+j[s])}})})();
(function(){function M(y,B){var l=y.hasOwnProperty("obsHandlers")?y.obsHandlers:null;l[B]||(l[B]=[]);return l[B]}var ja=0;COG.observable=function(y){if(!y)return null;if(!(y.hasOwnProperty("obsHandlers")?y.obsHandlers:null))y.obsHandlers={};if(!y.hasOwnProperty("bind")){y.bind=function(B,l){var j="callback"+ja++;M(y,B).unshift({fn:l,id:j});return j};y.triggerCustom=function(B,l){var j=M(y,B),s={cancel:false,name:B,source:this},C;l&&COG.extend(s,l);if(!j)return null;C=Array.prototype.slice.call(arguments,2);
y.eventInterceptor&&y.eventInterceptor(B,s,C);C.unshift(s);for(var U=j.length;U--&&!s.cancel;)j[U].fn.apply(this,C);return s};y.trigger=function(B){var l=Array.prototype.slice.call(arguments,1);l.splice(0,0,B,null);return y.triggerCustom.apply(this,l)};y.unbind=function(B,l){if(typeof B==="undefined")y.obsHandlers={};else for(var j=M(y,B),s=0;j&&s<j.length;s++)if(j[s].id===l){j.splice(s,1);break}return y}}return y}})();
(function(){function M(l,j){l[j]||(l[j]=function(s){return l.configure(j,s)})}function ja(l){l.gtConfId="configurable"+B++;l.gtConfig={};l.gtConfigFns=[];return l.gtConfig}var y={},B=0;COG.paramTweaker=function(l,j,s){return function(C,U){if(typeof U!=="undefined"){if(C in l)l[C]=U;s&&C in s&&s[C](C,U)}else return j&&C in j?j[C](C):l[C]}};COG.configurable=function(l,j,s,C){if(l){l.gtConfId||ja(l);var U=l.gtConfId,n=l.gtConfig,E=l.gtConfigFns;y[U]=l;E.push(s);for(s=j.length;s--;){n[j[s]]=true;C&&M(l,
j[s])}if(!l.configure)l.configure=function(x,I){if(n[x]){for(var t=E.length;t--;){var u=E[t](x,I);if(typeof u!=="undefined")return u}return y[U]}return null}}}})();
(function(){function M(l){var j=document.createElement("script"),s=false;j.src=l;j.async=true;j.onload=j.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;j.onload=j.onreadystatechange=null;j&&j.parentNode&&j.parentNode.removeChild(j)}};y||(y=document.getElementsByTagName("head")[0]);y.appendChild(j)}var ja=0,y,B=this;COG.jsonp=function(l,j,s){l+=l.indexOf("?")>=0?"&":"?";var C="json"+ ++ja;B[C]=function(U){j(U);B[C]=null;try{delete B[C]}catch(n){}};
M(l+(s?s:"callback")+"="+C);return C}})();
(function(){var M=1.70158,ja=Math.PI/2,y=1E3/60|0,B=Math.abs,l=Math.pow,j=Math.sin,s=Math.asin,C=Math.cos,U={linear:function(n,E,x,I){return x*n/I+E},backin:function(n,E,x,I){return x*(n/=I)*n*((M+1)*n-M)+E},backout:function(n,E,x,I){return x*((n=n/I-1)*n*((M+1)*n+M)+1)+E},backinout:function(n,E,x,I){return(n/=I/2)<1?x/2*n*n*(((M*=1.525)+1)*n-M)+E:x/2*((n-=2)*n*(((M*=1.525)+1)*n+M)+2)+E},bouncein:function(n,E,x,I){return x-U.bounceout(I-n,0,x,I)+E},bounceout:function(n,E,x,I){return(n/=I)<1/2.75?
x*7.5625*n*n+E:n<2/2.75?x*(7.5625*(n-=1.5/2.75)*n+0.75)+E:n<2.5/2.75?x*(7.5625*(n-=2.25/2.75)*n+0.9375)+E:x*(7.5625*(n-=2.625/2.75)*n+0.984375)+E},bounceinout:function(n,E,x,I){return n<I/2?U.bouncein(n*2,0,x,I)/2+E:U.bounceout(n*2-I,0,x,I)/2+x/2+E},cubicin:function(n,E,x,I){return x*(n/=I)*n*n+E},cubicout:function(n,E,x,I){return x*((n=n/I-1)*n*n+1)+E},cubicinout:function(n,E,x,I){if((n/=I/2)<1)return x/2*n*n*n+E;return x/2*((n-=2)*n*n+2)+E},elasticin:function(n,E,x,I,t,u){if(n==0)return E;if((n/=
I)==1)return E+x;u||(u=I*0.3);if(!t||t<B(x)){t=x;x=u/4}else x=u/TWO_PI*s(x/t);return-(t*l(2,10*(n-=1))*j((n*I-x)*TWO_PI/u))+E},elasticout:function(n,E,x,I,t,u){var D;if(n==0)return E;if((n/=I)==1)return E+x;u||(u=I*0.3);if(!t||t<B(x)){t=x;D=u/4}else D=u/TWO_PI*s(x/t);return t*l(2,-10*n)*j((n*I-D)*TWO_PI/u)+x+E},elasticinout:function(n,E,x,I,t,u){var D;if(n==0)return E;if((n/=I/2)==2)return E+x;u||(u=I*0.3*1.5);if(!t||t<B(x)){t=x;D=u/4}else D=u/TWO_PI*s(x/t);if(n<1)return-0.5*t*l(2,10*(n-=1))*j((n*
I-D)*TWO_PI/u)+E;return t*l(2,-10*(n-=1))*j((n*I-D)*TWO_PI/u)*0.5+x+E},quadin:function(n,E,x,I){return x*(n/=I)*n+E},quadout:function(n,E,x,I){return-x*(n/=I)*(n-2)+E},quadinout:function(n,E,x,I){if((n/=I/2)<1)return x/2*n*n+E;return-x/2*(--n*(n-2)-1)+E},sinein:function(n,E,x,I){return-x*C(n/I*ja)+x+E},sineout:function(n,E,x,I){return x*j(n/I*ja)+E},sineinout:function(n,E,x,I){return-x/2*(C(Math.PI*n/I)-1)+E}};COG.tweenValue=function(n,E,x,I,t){function u(ga){ga=ga?ga:(new Date).getTime();if(sa+y<
ga){var qa=ga-D,na=x(qa,n,ca,I),ta=D+I<=ga;ga=!ta;if(t){qa=t(na,ta,qa);ga=typeof qa!="undefined"?qa&&ga:ga}ga&&animFrame(u)}}var D=(new Date).getTime(),sa=0,ca=E-n;animFrame(u);return{}};COG.easing=function(n){return U[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(n,E){U[n.replace(/[\-\_\s\.]/g,"").toLowerCase()]=E}})();
(function(){var M=/^P(\d+Y)?(\d+M)?(\d+D)?$/,ja=/^(\d+H)?(\d+M)?(\d+S)?$/,y={8601:function(l){l=l.split("T");var j=null;j=null;var s=0,C=0;M.lastIndex=-1;j=M.exec(l[0]);s+=j[3]?parseInt(j[3].slice(0,-1),10):0;ja.lastIndex=-1;j=ja.exec(l[1]);C+=j[1]?parseInt(j[1].slice(0,-1),10)*3600:0;C+=j[2]?parseInt(j[2].slice(0,-1),10)*60:0;C+=j[3]?parseInt(j[3].slice(0,-1),10):0;return new B(s,C)}},B=COG.Duration=function(l,j){return{days:l?l:0,seconds:j?j:0}};COG.addDuration=function(){for(var l=new B,j=arguments.length;j--;){l.days+=
arguments[j].days;l.seconds+=arguments[j].seconds}if(l.seconds>=86400){l.days+=~~(l.seconds/86400);l.seconds%=86400}return l};COG.formatDuration=function(l){var j,s,C="";if(l.days)C=l.days+" days ";if(l.seconds){l=l.seconds;if(l>=3600){j=~~(l/3600);l-=j*3600}if(l>=60){s=Math.round(l/60);l-=s*60}if(j)C=C+j+(j>1?" hrs ":" hr ")+(s?(s>10?s:"0"+s)+" min ":"");else if(s)C=C+s+" min";else if(l>0)C=C+(l>10?l:"0"+l)+" sec"}return C};COG.parseDuration=function(l,j){var s=j?y[j]:null;if(s)return s(l);COG.Log.warn("Could not find duration parser for specified format: "+
j);return new B}})();COG.ObjectStore=function(){var M={},ja={},y="obj_"+(new Date).getTime(),B=0,l=Object.prototype.hasOwnProperty;return{add:function(j,s){var C;s=s?s:"default";if(j&&j.constructor)if(!l.call(j,"id"))j.id=y+ ++B;C=ja[s]?ja[s]:ja[s]=[];M[j.id]=C.length;C[j.length]=j}}};var CANI={};
(function(M){var ja=[],y=0,B=false,l=M.register=function(j,s){ja.push({section:j,run:s})};M.init=function(j){function s(){if(y<ja.length){var U=ja[y++];C[U.section]||(C[U.section]={});U.run(C[U.section],s)}else{for(U in C)M[U]=C[U];B=true;j&&j(M)}}var C={};if(B&&j)j(M);else{y=0;s()}};l("canvas",function(j,s){function C(){var x,I=U.getContext("2d");I.save();try{I.translate(50,50);I.beginPath();I.rect(0,0,20,20);x=I.isPointInPath(10,10)}finally{I.restore()}return x}var U=document.createElement("canvas"),
n=typeof FlashCanvas!="undefined",E=typeof G_vmlCanvasManager!="undefnined";U.width=200;U.height=200;j.pipTransformed=n||E?false:C();s()})})(CANI);
INTERACT=function(){function M(t){return function(u,D,sa){(sa?sa:t?document.body:document).addEventListener(u,D,false)}}function ja(t){return function(u,D,sa){(sa?sa:t?document.body:document).removeEventListener(u,D,false)}}function y(t,u,D){(D?D:document).attachEvent("on"+t,u)}function B(t,u,D){(D?D:document).detachEvent("on"+t,u)}function l(t,u){return{x:t?t:0,y:u?u:0,count:1}}function j(t,u){x.push(COG.extend({handler:null,checks:{},type:t},u))}function s(t){var u=0,D=0;if(t.offsetParent){do{u+=
t.offsetLeft;D+=t.offsetTop;t=t.offsetParent}while(t)}return{left:u,top:D}}function C(t,u){return{source:t,target:u.target?u.target:u.srcElement}}function U(t,u){for(var D=t.target?t.target:t.srcElement;D&&D!==u&&D.nodeName&&D.nodeName.toUpperCase()!="CANVAS";)D=D.parentNode;return D&&D===u}function n(t,u){return{x:t.x-(u?u.left:0),y:t.y-(u?u.top:0)}}function E(t){if(t.preventDefault){t.preventDefault();t.stopPropagation()}else t.cancelBubble&&t.cancelBubble()}var x=[],I=function(t,u,D){function sa(da,
wa,ka,V){var Z=0,za=0,F=0;COG.tweenValue(0,da,ka,V,function(W){F=Z;Z=W});COG.tweenValue(0,wa,ka,V,function(W){ca.trigger("pan",Z-F,W-za);za=W})}D=COG.extend({binder:null,unbinder:null,observable:null},D);for(var ca=D.observable,ga=null,qa=[],na=[],ta,ya,Aa={bind:function(){return ca.bind.apply(null,arguments)},pannable:function(da){ga=COG.extend({inertia:true},da);return Aa},unbind:function(){ca.unbind();for(var da=0;da<qa.length;da++)qa[da].unbind();return Aa}},Ma=0;Ma<u.length;Ma++)qa.push(u[Ma](t,
ca,D));ca.bind("pointerDown",function(){na=[];ya=ta=0});ca.bind("pointerMove",function(da,wa,ka,V){if(ga){na[na.length]={ticks:(new Date).getTime(),x:V.x,y:V.y};ca.trigger("pan",V.x,V.y)}ta+=V.x?V.x:0;ya+=V.y?V.y:0});ca.bind("pointerUp",function(da,wa,ka){if(Math.abs(ta)>20||Math.abs(ya)>20){if(ga){ka=na.length;var V,Z;wa=0;for(Z=na.length;--Z>1&&wa<50;)wa+=na[Z].ticks-na[Z-1].ticks;if(ka-Z>1){da=na[ka-1].x-na[Z].x;V=na[ka-1].y-na[Z].y;Z=Math.sqrt(da*da+V*V)|0;if(Z>15){da=na[ka-1].x-na[0].x;V=na[ka-
1].y-na[0].y;Z=Math.sqrt(da*da+V*V)|0;ka=Math.asin(V/Z);wa=Z*500/wa|0;wa=wa>300?300:wa;sa(Math.cos(da>0?ka:Math.PI-ka)*wa,Math.sin(ka)*wa,COG.easing("sine.out"),500)}}}}else ca.trigger("tap",wa,ka)});return Aa};j("pointer",{handler:function(t,u,D){function sa(F){if(F.pageX&&F.pageY)return l(F.pageX,F.pageY);else{var W=document.documentElement,xa=document.body;return l(F.clientX+(W&&W.scrollLeft||xa&&xa.scrollLeft||0)-(W&&W.clientLeft||xa&&xa.clientLeft||0),F.clientY+(W&&W.scrollTop||xa&&xa.scrollTop||
0)-(W&&W.clientTop||xa&&xa.clientTop||0))}}function ca(F){if(U(F,t))if(da=ta(F)){var W=sa(F);t.style.cursor="move";E(F);Z=W.x;za=W.y;wa=l(Z,za);u.triggerCustom("pointerDown",C("mouse",F),wa,n(wa,s(t)))}}function ga(F){var W=sa(F);ka=W.x;V=W.y;if(U(F,t))ya(F,da?"pointerMove":"pointerHover")}function qa(F){if(da&&ta(F)){da=false;if(U(F,t)){t.style.cursor="default";ya(F,"pointerUp")}}}function na(F){if(U(F,t)){var W;F=F||window.event;if(F.detail)W=F.axis===2?-F.detail*Aa:0;else{W=F.wheelDeltaY?F.wheelDeltaY:
F.wheelDelta;if(window.opera)W=-W}if(W!==0){var xa=l(ka,V);u.triggerCustom("zoom",C("mouse",F),xa,n(xa,s(t)),W/Ma,"wheel");E(F);F.returnValue=false}}}function ta(F){F=F||window.event;return(F.which||F.button)==1}function ya(F,W,xa,Oa,Ya){xa=typeof xa!="undefined"?xa:ka;Oa=typeof Oa!="undefined"?Oa:V;var L=xa-Z,oa=Oa-za,ea=l(xa,Oa);u.triggerCustom(W,C("mouse",F),ea,n(ea,s(t)),l(L,oa));if(typeof Ya=="undefined"||Ya){Z=xa;za=Oa}}D=COG.extend({},D);var Aa=120,Ma=Aa*8,da=false,wa,ka,V,Z,za;D.binder("mousedown",
ca,false);D.binder("mousemove",ga,false);D.binder("mouseup",qa,false);D.binder("dblclick",function(F){COG.info("captured double click");if(U(F,t)){var W=sa(F);u.triggerCustom("doubleTap",C("mouse",F),W,n(W,s(t)))}},false);D.binder("mousewheel",na,document);D.binder("DOMMouseScroll",na,document);return{unbind:function(){D.unbinder("mousedown",ca,false);D.unbinder("mousemove",ga,false);D.unbinder("mouseup",qa,false);D.unbinder("mousewheel",na,document);D.unbinder("DOMMouseScroll",na,document)}}},checks:{touch:false}});
j("pointer",{handler:function(t,u,D){function sa(L){if(L.count<2)return 0;var oa=L.x-L.next.x;L=L.y-L.next.y;return~~Math.sqrt(oa*oa+L*L)}function ca(L,oa,ea){oa=oa?oa:0;ea=ea?ea:0;for(var Ia={x:L.x-oa,y:L.y-ea,id:L.id,count:L.count},Y=Ia;L.next;){L=L.next;Y=Y.next={x:L.x-oa,y:L.y-ea,id:L.id}}return Ia}function ga(L,oa){var ea=L[oa?oa:"touches"],Ia,Y;if(ea.length===0)return null;Y=Ia={x:ea[0].pageX,y:ea[0].pageY,id:ea[0].identifier,count:ea.length};for(var Qa=1,Ka=ea.length;Qa<Ka;Qa++)Y=Y.next={x:ea[Qa].pageX,
y:ea[Qa].pageY,id:ea[Qa].identifier};return Ia}function qa(L){if(U(L,t)){V=s(t);var oa=ga(L,"changedTouches"),ea=ca(oa,V.left,V.top);if(!za){Z=da;u.triggerCustom("pointerDown",C("touch",L),oa,ea)}Oa&&u.triggerCustom("pointerDownMulti",C("touch",L),oa,ea);za=ga(L);if(za.count>1)W=sa(za);Ya=1;xa=ca(za)}}function na(L){if(U(L,t)){L.preventDefault();F=ga(L);if(Z==da)Z=Math.abs(za.x-F.x)>Aa||Math.abs(za.y-F.y)>Aa?Ma:da;if(Z!=da){Z=F.count>1?ka:wa;if(Z==ka)if(za.count===1){za=ca(F);W=sa(za)}else{var oa=
sa(F);if(Math.abs(W-oa)<ya)Z=wa;else{var ea;ea=F.x;var Ia=F.next.x,Y=F.y,Qa=F.next.y,Ka=Y<Qa?Y:Qa;ea={x:(ea<Ia?ea:Ia)+(Math.abs(ea-Ia)>>1),y:Ka+(Math.abs(Y-Qa)>>1)};oa=oa/W;Ia=oa-Ya;u.triggerCustom("zoom",C("touch",L),ea,n(ea,V),Ia,"pinch");Ya=oa}}Z==wa&&u.triggerCustom("pointerMove",C("touch",L),F,ca(F,V.left,V.top),l(F.x-xa.x,F.y-xa.y));Oa&&u.triggerCustom("pointerMoveMulti",C("touch",L),F,ca(F,V.left,V.top))}xa=ca(F)}}function ta(L){if(U(L,t)){var oa=ga(L,"changedTouches"),ea=ca(oa,V.left,V.top);
F=ga(L);if(!F){u.triggerCustom("pointerUp",C("touch",L),oa,ea);za=null}Oa&&u.triggerCustom("pointerUpMulti",C("touch",L),oa,ea)}}D=COG.extend({detailed:false,inertia:false},D);var ya=20,Aa=7,Ma=0,da=1,wa=2,ka=3,V,Z,za,F,W,xa,Oa=D.detailed,Ya=1;D.binder("touchstart",qa,false);D.binder("touchmove",na,false);D.binder("touchend",ta,false);COG.info("initialized touch handler");return{unbind:function(){D.unbinder("touchstart",qa,false);D.unbinder("touchmove",na,false);D.unbinder("touchend",ta,false)}}},
checks:{touch:true}});return{register:j,watch:function(t,u,D){u=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},u);capabilities=COG.extend({touch:"ontouchstart"in window},D);if(!u.observable){COG.info("creating observable");u.observable=COG.observable({});globalOpts=u}u.binder=u.isIE?y:M(u.bindToBody);u.unbinder=u.isIE?B:ja(u.bindToBody);D=u.types;for(var sa=capabilities,ca=[],ga=x.length;ga--;){var qa=x[ga],na=!D||D.indexOf(qa.type)>=0,ta=true;
for(var ya in qa.checks){var Aa=qa.checks[ya];COG.info("checking "+ya+" capability. require: "+Aa+", capability = "+sa[ya]);ta=ta&&Aa===sa[ya]}if(na&&ta)ca[ca.length]=qa.handler}return new I(t,ca,u)}}}();var T5={};
(function(M){function ja(){return(new Date).getTime()}function y(a,h){h=Oa.call(h);if(h=="finite")return!xa[W](+a);return h=="null"&&a===null||h==typeof a||h=="object"&&a===Object(a)||h=="array"&&Array.isArray&&Array.isArray(a)||Ya.call(a).slice(8,-1).toLowerCase()==h}function B(a){a=a||(new Date).getTime();for(var h=0;h<bb.length;){var e=bb[h],c=$a[e],f=$a[e].image&&(Ia||$a[e].image.complete&&$a[e].image.width>0),m=a-c.start;m=f||m>=xb;if(f){f=c.callbacks;lb[e]=c.image;for(var v=0;v<f.length;v++)f[v](c.image,
true)}if(m){bb.splice(h,1);delete $a[e]}else h++}bb.length>0&&animFrame(B)}function l(a){function h(m){var v=a[m];y(v,L)||c.push(function(G){G[m]=v})}function e(){c=[];for(var m in a)h(m)}a=COG.extend({lineWidth:undefined,lineCap:undefined,lineJoin:undefined,miterLimit:undefined,lineStyle:undefined,fillStyle:undefined,globalAlpha:undefined,globalCompositeOperation:undefined},a);var c=[],f={applyToContext:function(m){for(var v=c.length;v--;)c[v](m)},update:function(m,v){a[m]=v;e()}};e();return f}function j(){for(var a=
0,h=arguments.length;h--;){var e=yb[arguments[h].toUpperCase()];if(e)a|=e}return a}function s(a){a=a?a:(new Date).getTime();if(a-mb>zb){for(var h=eb.splice(0),e=h.length;e--;)h[e](a);mb=a}eb.length&&animFrame(s)}function C(a){var h=eb.length==0;eb[eb.length]=a;h&&animFrame(s)}function U(a,h,e,c,f){f=COG.extend({easing:"sine.out",duration:1E3,progress:null,complete:null,autoInvalidate:true},f);var m=(new Date).getTime(),v=a[h],G=h=="translate",A=f.autoInvalidate,p=e.length&&c.length&&e.length==c.length?
e.length:0,Q=Array(p),S=Array(p),$=COG.easing(f.easing),aa=f.duration,La=f.progress,Ta=function(Ga){var J=Ga-m;Ga=m+aa<=Ga;for(var R=a.layer?a.layer.view:null,ha,ba=p;ba--;){ha=$(J,e[ba],Q[ba],aa);S[ba]=G?ha|0:ha}v.apply(a,S);if(A&&R)R.redraw=true;if(La){J=[].concat(Ga?c:S);J.unshift(Ga);La.apply(a,J)}if(Ga){a.animations--;v.apply(a,c);f.complete&&f.complete.apply(a,c)}else C(Ta)};if(v&&v.apply&&p>0){aa=aa?aa:DEFAULT_DURATION;for(h=p;h--;)Q[h]=c[h]-e[h];a.animations++;C(Ta)}}function n(a,h){var e,
c;if(h&&h.width>0){if(!a.imageOffset)a.imageOffset=Y.init(-h.width>>1,-h.height>>1);if(!a.bounds){e=a.xy.x+a.imageOffset.x;c=a.xy.y+a.imageOffset.y;a.bounds=Ka.init(e,c,e+h.width,c+h.height)}}}function E(a){Pa.call(this,a)}function x(a,h){h=COG.extend({simplify:false,typeName:"Poly"},h);var e=h.simplify;Pa.call(this,h);COG.extend(this,{resync:function(c){var f,m,v,G,A,p;c.syncXY(a);p=this.points=Y.floor(e?Y.simplify(a):a);for(var Q=p.length;Q--;){c=p[Q].x;f=p[Q].y;G=y(G,L)||c<G?c:G;A=y(A,L)||f<A?
f:A;m=y(m,L)||c>m?c:m;v=y(v,L)||f>v?f:v}this.updateBounds(Ka.init(G,A,m,v),true)}});this.haveData=a&&a.length>=2}function I(a,h){h.fill=false;x.call(this,a,h)}function t(a){function h(A){(this.imageUrl=A)&&nb(this.imageUrl,function(p,Q){v=p;if(Q){var S=G.layer?G.layer.view:null;if(S)S.redraw=true}})}a=COG.extend({image:null,imageUrl:null,imageOffset:null,typeName:"Image"},a);var e=null,c=Pa.prototype.updateBounds,f=0,m=0,v=a.image;Pa.call(this,a);var G=COG.extend(this,{changeImage:h,drag:function(A,
p,Q,S){e||(e=Y.init(A.startX-this.xy.x,A.startY-this.xy.y));this.xy.x=p-e.x;this.xy.y=Q-e.y;if(S){e=null;if(this.layer)(A=this.layer.view)&&A.syncXY([this.xy],true);this.trigger("dragDrop")}return true},getProps:function(){this.bounds||n(this,v);return{image:v,x:this.xy.x+f,y:this.xy.y+m}},updateBounds:function(A,p){c.call(this,A,p);n(this,v)}});v||h(this.imageUrl);if(this.imageOffset){f=this.imageOffset.x;m=this.imageOffset.y}}function u(a){a=COG.extend({imageAnchor:null},a);if(a.imageAnchor)a.imageOffset=
Y.invert(a.imageAnchor);t.call(this,a)}function D(a){a=COG.extend({startAngle:0,endAngle:Math.PI*2,typeName:"Arc"},a);Pa.call(this,a)}function sa(a){a=COG.extend({id:COG.objId("layer"),zindex:0,animated:false,validStates:j("ACTIVE","ANIMATING","PAN","ZOOM"),style:null,minXY:null,maxXY:null},a);this.view=null;COG.observable(COG.extend(this,a))}window.animFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){setTimeout(function(){a((new Date).getTime())},1E3/60)}}();var ca=Math.PI*2,ga=Math.PI/2,qa=Math.abs,na=Math.ceil,ta=Math.min,ya=Math.max,Aa=Math.pow,Ma=Math.sqrt,da=Math.log,wa=Math.round,ka=Math.sin,V=Math.asin,Z=Math.cos,za=Math.atan,F=Math.atan2,W="hasOwnProperty",xa={NaN:1,Infinity:1,"-Infinity":1},Oa=String.prototype.toLowerCase,Ya=Object.prototype.toString,L="undefined",oa="number",ea=typeof G_vmlCanvasManager!=L,Ia=typeof FlashCanvas!=L,Y=function(){function a(c,
f){return e(c.x-f.x,c.y-f.y)}function h(c,f){f=f||c.length;if(f<=1)return null;for(var m=Array(f-1),v=Array(f-1),G=0,A,p=0;p<f-1;p++){A=a(c[p],c[p+1]);m[p]=Ma(A.x*A.x+A.y*A.y);v[p]=G+=m[p]}return{edges:m,accrued:v,tota:G}}function e(c,f){return{x:c||0,y:f||0}}return{VECTOR_SIMPLIFICATION:3,SIMPLIFICATION_MIN_VECTORS:25,add:function(){for(var c=0,f=0,m=arguments.length;m--;){c+=arguments[m].x;f+=arguments[m].y}return e(c,f)},absSize:function(c){return ya(qa(c.x),qa(c.y))},copy:function(c){return c?
e(c.x,c.y):null},diff:a,distance:function(c,f){return h(c,f).total},edges:h,equals:function(c,f){return c.x===f.x&&c.y===f.y},extendBy:function(c,f,m){var v=Z(f)*m|0;f=ka(f)*m|0;return e(c.x-v,c.y-f)},floor:function(c){for(var f=Array(c.length),m=c.length;m--;)f[m]=e(~~c[m].x,~~c[m].y);return f},getRect:function(c){for(var f,m,v,G,A=c.length;A--;){var p=c[A];f=y(f,L)||p.x<f?p.x:f;m=y(m,L)||p.y<m?p.y:m;v=y(v,L)||p.x>v?p.x:v;G=y(G,L)||p.y>G?p.y:G}return Ka.init(f,m,v,G)},init:e,invert:function(c){return e(-c.x,
-c.y)},min:function(c,f){return e(c.x<f.x?c.x:f.x,c.y<f.y?c.y:f.y)},max:function(c,f){return e(c.x>f.x?c.x:f.x,c.y>f.y?c.y:f.y)},offset:function(c,f,m){return e(c.x+f,c.y+(m||f))},scale:function(c,f){return e(c.x/f|0,c.y/f|0)},simplify:function(c,f){if(!c)return null;f=f?f:Y.VECTOR_SIMPLIFICATION;for(var m=[],v=null,G=c.length;G--;){var A=c[G];if(include=!v||G===0||qa(A.x-v.x)+qa(A.y-v.y)>f){m.unshift(A);v=A}}return m},theta:function(c,f,m){m=V((c.y-f.y)/m);return c.x>f.x?m:Math.PI-m},toString:function(c){return c?
c.x+", "+c.y:""}}}(),Qa=function(){return{dotProduct:function(a,h){return a.x*h.x+a.y*h.y}}}(),Ka=function(){function a(e){return h(e.x1,e.y1,e.x2,e.y2)}function h(e,c,f,m){e=e||0;c=c||0;f=f||e;m=m||c;return{x1:e,y1:c,x2:f,y2:m,width:f-e,height:m-c}}return{buffer:function(e,c,f){return Y.init(e.x1-c,e.y1-(f||c),e.x1+c,e.y1+(f||c))},center:function(e){return Y.init(e.x1+(e.width>>1),e.y1+(e.height>>1))},copy:a,diagonalSize:function(e){return Ma(e.width*e.width+e.height*e.height)},fromCenter:function(e,
c,f,m){f=f>>1;m=m>>1;return h(e-f,c-m,e+f,c+m)},init:h,intersect:function(e,c){var f=ya(e.x1,c.x1),m=ya(e.y1,c.y1),v=ta(e.x2,c.x2),G=ta(e.y2,c.y2);f=h(f,m,v,G);return f.width>0&&f.height>0?f:null},toString:function(e){return e?"["+e.x1+", "+e.y1+", "+e.x2+", "+e.y2+"]":""},union:function(e,c){if(e.width===0||e.height===0)return a(c);else if(c.width===0||c.height===0)return a(e);else{var f=ta(e.x1,c.x1),m=ta(e.y1,c.y1),v=ya(e.x2,c.x2),G=ya(e.y2,c.y2);f=h(f,m,v,G);return f.width>0&&f.height>0?f:null}}}}(),
Ab=function(){return{getAspectRatio:function(a){return a.height!==0?a.width/a.height:1},getCenter:function(a){return Y.init(a.width>>1,a.height>>1)},getSize:function(a){return Ma(Aa(a.width,2)+Aa(a.height,2))},init:function(a,h){a=a?a:0;return{width:a,height:h?h:a}}}}();Hits=function(){return{diffHits:function(a,h){var e=[],c={},f;for(f=h.length;f--;)c[h[f].target.id]=true;for(f=a.length;f--;)c[a[f].target.id]||(e[e.length]=a[f]);return e},init:function(a,h,e,c){return{type:a,x:c.x|0,y:c.y|0,elements:[],
absXY:h,relXY:e}},initHit:function(a,h,e){return{type:a,target:h,drag:e}},triggerEvent:function(a,h,e,c){h.triggerCustom(a.type+(e?e:"Hit"),{hitType:a.type},c?c:a.elements,a.absXY,a.relXY,Y.init(a.x,a.y))}}}();var xb=3E4,lb={},Bb=0;(new Date).getTime();var $a={},bb=[],nb=T5.getImage=function(a,h){var e=a&&h?lb[a]:null;if(e&&e&&(Ia||e.complete&&e.width>0))h(e);else{if(e=$a[a])e.callbacks.push(h);else{e=new Image;e.id="_ldimg"+ ++Bb;$a[a]={start:(new Date).getTime(),image:e,callbacks:[h]};e.src=a;bb[bb.length]=
a}animFrame(B)}},Cb=T5.newCanvas=function(a,h){var e=document.createElement("canvas");e.width=a?a:0;e.height=h?h:0;if(Ia){document.body.appendChild(e);FlashCanvas.initElement(e)}ea&&G_vmlCanvasManager.initElement(e);return e},ob=function(){var a={};return{init:function(h,e){var c=a[h];if(!c)throw Error("Unable to locate requested generator: "+h);return new c(e)},register:function(h,e){a[h]=e}}}(),Db=function(){return{applyStyle:function(){},applyTransform:function(a,h,e){return{restore:null,x:h,y:e}},
checkSize:function(){},getDimensions:function(){return{width:0,height:0}},getOffset:function(){return Y.init(0,0)},getViewport:function(){},hitTest:function(){return false},prepare:function(){},render:function(){},reset:function(){}}},pb={},qb=M.registerRenderer=function(a,h){pb[a]=h},rb=M.attachRenderer=function(a,h,e,c){a=a.split("/");for(var f=new Db(h,e,c),m=0;m<a.length;m++){var v=pb[a[m]];if(v)f=new v(h,e,c,f)}return f};qb("canvas",function(a,h,e,c){function f(J,R,ha){nb(J.url,function(ba,T){(a.redraw=
T)||p.drawImage(ba,R,ha)})}function m(J,R,ha){var ba=false;if(J)ba=p.isPointInPath(La?J.x-S:J.relXY.x,La?J.y-$:J.relXY.y);return{draw:ha||Ga,state:R,hit:ba,vpX:S,vpY:$,context:p}}e=COG.extend({},e);var v,G,A,p,Q,S=0,$=0,aa=null,La=CANI.canvas.pipTransformed,Ta={},Ga=function(){this.fill&&p.fill();this.stroke&&p.stroke()};(function(){if(h){var J=h.tagName=="CANVAS",R=J?h.parentNode:h;v=a.width=R.offsetWidth;G=a.height=R.offsetHeight;if(J){A=h;A.width=v;A.height=G;Ia&&FlashCanvas.initElement(A)}else{A=
Cb(v,G);A.style.cssText="position: absolute; z-index: 1;";h.appendChild(A)}p=null}})();return COG.extend(c,{interactTarget:A,applyStyle:function(J){var R=Eb(J),ha=R&&p&&p.canvas?Ta[p.canvas.id]:null;if(R){Ta[p.canvas.id]=J;R.applyToContext(p);return ha}},applyTransform:function(J){if(J.translateX||J.translateY||J.scaling!==1||J.rotatation){p.save();aa={undo:function(){p.restore();aa=null},x:J.xy.x,y:J.xy.y};p.translate(J.xy.x-S+J.translateX,J.xy.y-$+J.translateY);J.rotation!==0&&p.rotate(J.rotation);
J.scaling!==1&&p.scale(J.scaling,J.scaling)}return aa},drawTiles:function(J){for(var R,ha,ba=S-256,T=$-256,Ca=Q.x2,Ja=Q.y2,fa=J.length;fa--;){R=J[fa];(ha=R.x>=ba&&R.x<=Ca&&R.y>=T&&R.y<=Ja)&&f(R,R.x-S,R.y-$)}},hitTest:function(J,R,ha){return p.isPointInPath(R,ha)},prepare:function(J){var R,ha=false;R=a.getOffset();var ba=a.getScaleFactor(),T=R.x,Ca=R.y;if(p)p.restore();else p=A.getContext("2d");for(R=J.length;R--;)ha=ha||J[R].clip;Q=Ka.init(T,Ca,T+v,Ca+G);Q.scaleFactor=ba;if(ba!==1)Q=Ka.fromCenter(Q.x1+
(v>>1),Q.y1+(G>>1),v/ba|0,G/ba|0);S=Q.x1;$=Q.y1;if(p){ha||p.clearRect(0,0,v,G);p.save();p.scale(ba,ba)}p.globalCompositeOperation="source-over";return p},prepArc:function(J,R,ha){p.beginPath();p.arc(J.xy.x-(aa?aa.x:S),J.xy.y-(aa?aa.y:$),J.size>>1,J.startAngle,J.endAngle,false);return m(R,ha)},prepImage:function(J,R,ha,ba){var T=(ba.x||J.xy.x)-(aa?aa.x:S),Ca=(ba.y||J.xy.y)-(aa?aa.y:$),Ja=ba.image||J.image;if(Ja){p.beginPath();p.rect(T,Ca,ba.width||Ja.width,ba.height||Ja.height);return m(R,ha,function(){p.drawImage(Ja,
T,Ca,ba.width||Ja.width,ba.height||Ja.height)})}},prepPoly:function(J,R,ha,ba){var T=true;J=ba.points||J.points;ba=aa?aa.x:S;var Ca=aa?aa.y:$;p.beginPath();for(var Ja=J.length;Ja--;){var fa=J[Ja].x-ba,Da=J[Ja].y-Ca;if(T){p.moveTo(fa,Da);T=false}else p.lineTo(fa,Da)}return m(R,ha)},getContext:function(){return p},getDimensions:function(){return{width:v,height:G}},getOffset:function(){return Y.init(S,$)},getViewport:function(){return Q}})});qb("dom",function(a,h,e,c){var f=typeof h.style["-webkit-transform"]!=
"undefined",m=null;m=document.createElement("div");m.id=COG.objId("domImages");m.style.cssText=COG.formatStr("position: absolute; overflow: hidden; width: {0}px; height: {1}px;",h.offsetWidth,h.offsetHeight);h.insertBefore(m,c.interactTarget);var v=COG.extend(c,{drawTiles:function(G){var A,p;A=v.getOffset();v.getViewport();for(var Q=A.x,S=A.y,$,aa,La=G.length;La--;){A=G[La];p=A.image;$=A.x-Q;aa=A.y-S;if(!p){p=A.image=new Image;p.src=A.url;m.appendChild(p);p.style.cssText="-webkit-user-select: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; position: absolute;"}if(f)p.style["-webkit-transform"]=
"translate3d("+$+"px, "+aa+"px, 0px)";else{p.style.left=$+"px";p.style.top=aa+"px"}p.style.display="block"}},reset:function(){m.innerHTML=""}});return v});var sb={},Fb=M.defineStyle=function(a,h){sb[a]=l(h);return a},tb=M.defineStyles=function(a){for(var h in a)Fb(h,a[h])},Eb=M.getStyle=function(a){return sb[a]};M.loadStyles=function(a){COG.jsonp(a,function(h){tb(h)})};tb({basic:{lineWidth:1,strokeStyle:"#000",fillStyle:"#fff"},waypoints:{lineWidth:4,strokeStyle:"rgba(0, 51, 119, 0.9)",fillStyle:"#FFF"},
waypointsHover:{lineWidth:4,strokeStyle:"#f00",fillStyle:"#FFF"}});var yb={NONE:0,ACTIVE:1,ANIMATING:4,PAN:8,ZOOM:16,FREEZE:128},vb=function(a){function h(r,w,K){Na||Ca(Ea-w,Fa-K)}function e(r,w,K,ra){ha(ta(ya(la+Aa(2,ra)-1,0.5),2))}function c(){var r=da(la)/Math.LN2|0;if(r!==0){la=Aa(2,r);ba(Ba+r,ia,ua)}ma.redraw=true}function f(r,w){var K=ma.getViewport(),ra=1/la;return Y.init(K?K.x1+r*ra:r,K?K.y1+w*ra:w)}function m(r,w,K){T("doubleTap",w,K,f(K.x,K.y));a.scalable&&ha(2,f(K.x,K.y),a.zoomEasing,null,
a.zoomDuration)}function v(r,w,K){Na=null;Ga("down",w,K)}function G(r,w,K){Ga("hover",w,K)}function A(r,w,K){La(w,K,false)}function p(r,w,K){La(w,K,true)}function Q(){clearTimeout(pa);pa=setTimeout(function(){renderer.checkSize()},250)}function S(r,w,K){Ga("tap",w,K);T("tap",w,K,f(K.x,K.y,true))}function $(r,w){w.id=r;w.added=ja();w.view=ma;w.trigger("parentChange",ma,cb,hb);fa.push(w);fa.sort(function(K,ra){var va=ra.zindex-K.zindex;if(va===0)va=ra.added-K.added;return va});Da=fa.length;return w}
function aa(){O&&O.unbind();if(renderer){O=INTERACT.watch(renderer.interactTarget);a.pannable&&O.pannable().bind("pan",h);if(a.scalable){O.bind("zoom",e);O.bind("doubleTap",m)}O.bind("pointerDown",v);O.bind("pointerMove",A);O.bind("pointerUp",p);a.captureHover&&O.bind("pointerHover",G);O.bind("tap",S)}}function La(r,w,K){if(Na){r=f(w.x,w.y);if(Na.drag.call(Na.target,Na,r.x,r.y,K))ma.redraw=true;if(K)Na=null}}function Ta(r){var w;w=false;r=r?r:(new Date).getTime();if(w=r-Ha>P){ma.trigger("enterFrame",
r,ib++);r-H>ab&&R();Ha=r}if(w&&ma.redraw){w=Ea!==i||Fa!==k;Za=Wa|(la!==1?fb:0)|(w?Ra:0)|(N?ub:0);z=(w=(Za&(fb|Ra))!==0)&&(Za&ub)===0;if(renderer.prepare(fa,Za,r,g)){renderer.getViewport();for(ii=Da;ii--;){w=fa[ii];if((Za&w.validStates)!==0){var K=w.style?renderer.applyStyle(w.style):null;w.draw(renderer,Za,ma,r,g);K&&renderer.applyStyle(K)}}renderer.render()}if(g){r=g?g.elements:[];if(X&&X.type==="hover"){w=Hits.diffHits(X.elements,r);w.length>0&&Hits.triggerEvent(X,ma,"Out",w)}if(r.length>0){K=g.x;
var ra=g.y;for(w=r.length;w--;){var va=r[w],Ua=K,Xa=ra,Va=va&&va.drag&&(!va.canDrag||va.canDrag(va,Ua,Xa));if(Va){Na=va;Na.startX=Ua;Na.startY=Xa}if(Va)break}Hits.triggerEvent(g,ma)}X=r.length>0?COG.extend({},g):null;g=null}i=Ea;k=Fa;ma.redraw=false}animFrame(Ta)}function Ga(r,w,K){g=Hits.init(r,w,K,f(K.x,K.y,true));for(r=Da;r--;)db=db||(fa[r].hitGuess?fa[r].hitGuess(g.x,g.y,Za,ma):false);if(db)ma.redraw=true}function J(){ma.redraw=true}function R(){var r=renderer?renderer.getViewport():null;if(r){if(o||
q)if(r){var w=b?Ea+(r.width>>1):Ea,K=d?Fa+(r.height>>1):Fa,ra=r.width,va=r.height;if(o&&o>ra)if(w+ra>o)Ea=b?Ea:o-ra;else if(w<0)Ea=b?Ea:0;if(q&&q>va)if(K+va>q)Fa=d?Fa:q-va;else if(K<0)Fa=d?Fa:0}H=(new Date).getTime();T("refresh",ma,r);ma.redraw=true}}function ha(r,w,K,ra,va){if(K)COG.tweenValue(la,r,K,va,function(Ua,Xa){la=Ua;if(Xa){var Va=wa(da(la)/Math.LN2);la=Aa(2,Va);ra&&ra()}c()});else{la=r;c()}return ma}function ba(r,w,K){r=ya(a.minZoom,ta(a.maxZoom,r));if(r!==Ba){var ra=Aa(2,r-Ba),va=ma.width>>
1,Ua=ma.height>>1,Xa=va/ra|0,Va=Ua/ra|0;Ba=r;Ca(((w?w:Ea+va)-Xa)*ra,((K?K:Fa+Ua)-Va)*ra);i=Ea;k=Fa;T("zoomLevelChange",r);la=1;renderer.reset();R();ma.redraw=true}}function T(){for(var r=ma.trigger.apply(null,arguments).cancel,w=fa.length;w--;)r=fa[w].trigger.apply(null,arguments).cancel||r;return!r}function Ca(r,w,K,ra,va){function Ua(){Xa+=1;if(Xa>=2){N=false;va&&va()}}var Xa=0;if(K){if((Za&Ra)===0){COG.tweenValue(Ea,r,K,ra,function(Va,jb){Ea=Va|0;(jb?Ua:J)();return!z});COG.tweenValue(Fa,w,K,ra,
function(Va,jb){Fa=Va|0;(jb?Ua:J)();return!z});N=true}}else{Ea=r|0;Fa=w|0;ma.redraw=true;va&&va()}}a=COG.extend({id:COG.objId("view"),container:"",captureHover:true,captureDrag:false,inertia:true,minRefresh:1E3,pannable:false,clipping:true,scalable:false,panAnimationEasing:COG.easing("sine.out"),panAnimationDuration:750,pinchZoomAnimateTrigger:400,autoSize:true,tapExtent:10,guides:false,turbo:false,fps:25,minZoom:1,maxZoom:1,renderer:"canvas",zoomEasing:COG.easing("quad.out"),zoomDuration:300,zoomLevel:1},
a);var Ja={},fa=[],Da=0,cb=document.getElementById(a.container),Na=null,ib=0,hb=null,kb=y(window.attachEvent,"function"),db=false,ab=a.minRefresh,Ea=0,Fa=0,i=0,k=0,o=null,q=null,b=false,d=false,g=null,z=false,H=0,X=null,pa=0,la=1,Ha=0,O=null,N=false,P=1E3/a.fps|0,ia,ua,Ba=a.zoomLevel,Wa=j("ACTIVE"),Ra=j("PAN"),fb=j("ZOOM"),ub=j("ANIMATING"),Za=Wa,ma={id:a.id,detach:function(){O&&O.unbind()},eachLayer:function(r){for(var w=Da;w--;)r(fa[w])},getLayer:function(r){for(var w=0;w<Da;w++)if(fa[w].id===r)return fa[w];
return null},getZoomLevel:function(){return Ba},setLayer:function(r,w){for(var K=0;K<Da;K++)if(fa[K].id===r){fa.splice(K,1);break}w&&$(r,w);R();return w},invalidate:J,refresh:R,resetScale:function(){la=1},scale:ha,setZoomLevel:ba,syncXY:function(){},triggerAll:T,removeLayer:function(r){a:{for(var w=Da;w--;)if(fa[w].id===r){r=w;break a}r=-1}if(r>=0&&r<Da){ma.trigger("layerRemoved",fa[r]);fa.splice(r,1);ma.redraw=true}Da=fa.length},getOffset:function(){return Y.init(Ea,Fa)},getRenderer:function(){return renderer},
getScaleFactor:function(){return la},setMaxOffset:function(r,w,K,ra){o=r;q=w;b=K;d=ra},getViewport:function(){var r;if(renderer){r=renderer.getViewport();if(!r){r=renderer.getDimensions();r=Ka.init(Ea,Fa,Ea+r.width,Fa+r.height)}}return r},updateOffset:Ca,pan:function(r,w,K,ra,va){Ca(Ea+r,Fa+w,K,ra,va)}};COG.observable(ma);ma.bind("resync",function(){});COG.configurable(ma,["container","captureHover","captureDrag","scalable","pannable","inertia","minZoom","maxZoom","zoom"],COG.paramTweaker(a,null,
{container:function(r,w){cb=document.getElementById(w);renderer=rb(a.renderer,ma,cb);aa()},inertia:aa,captureHover:aa,scalable:aa,pannable:aa}),true);CANI.init(function(r){ma.markers=$("markers",new gb({zindex:20}));Ja=r;renderer=rb(a.renderer,ma,cb);aa();kb?window.attachEvent("onresize",Q):window.addEventListener("resize",Q,false)});animFrame(Ta);return ma},Pa=function(a){a=COG.extend({style:null,xy:null,size:null,fill:false,stroke:true,draggable:false,observable:true,properties:{},typeName:"Shape"},
a);COG.extend(this,a);this.id=COG.objId(this.typeName);this.view=this.bounds=null;this.rotation=this.animations=0;this.scaling=1;this.translateY=this.translateX=0;this.observable&&COG.observable(this)};Pa.prototype={constructor:Pa,animate:function(a,h,e,c){U(this,a,h,e,c)},drag:null,draw:null,getProps:null,resync:function(a){if(this.xy){a.syncXY([this.xy]);this.size&&this.updateBounds(Ka.fromCenter(this.xy.x,this.xy.y,this.size,this.size))}},rotate:function(a){this.rotation=a},scale:function(a){this.scaling=
a},translate:function(a,h){this.translateX=a;this.translateY=h},updateBounds:function(a,h){this.bounds=a;if(h)this.xy=Ka.center(this.bounds)}};var zb=1E3/60|0,eb=[],mb=0;E.prototype=COG.extend(Pa.prototype,{constructor:E,prep:function(a){return a.arc(this.xy.x,this.xy.y,this.size>>1,0,Math.PI*2)}});x.prototype=COG.extend({},Pa.prototype,{constructor:x});I.prototype=COG.extend({},x.prototype);t.prototype=COG.extend({},Pa.prototype,{constructor:t});u.prototype=COG.extend({},t.prototype,{constructor:u});
D.prototype=COG.extend(Pa.prototype,{constructor:D});sa.prototype={constructor:sa,clip:null,cycle:function(){},draw:function(){},hitGuess:null};var wb=function(a){a=COG.extend({zindex:10},a);var h=[],e=COG.extend(new sa(a),{draw:function(c,f,m,v,G){m={};for(v=h.length;v--;){var A=h[v],p=A.style||e.style,Q,S=c.applyTransform(A),$=A.getProps?A.getProps(c,f):m;if($=(Q=c["prep"+A.typeName])?Q.call(c,A,G,f,$):null){if($.hit){G.elements.push(Hits.initHit(A.type,A,A.draggable?A.drag:null));Q=G.type+"Style";
p=A[Q]||e[Q]||p}p=p?c.applyStyle(p):null;(Q=A.draw||$.draw)&&Q.call(A,$);p&&c.applyStyle(p)}S&&S.undo&&S.undo()}},getDrawables:function(){return[]},hitGuess:function(c,f){for(var m=false,v=h.length;!m&&v--;){var G=h[v];if(!(m=m))m=(G=G.bounds)&&c>=G.x1&&c<=G.x2&&f>=G.y1&&f<=G.y2;m=m}return m}});e.bind("refresh",function(c,f,m){h=e.getDrawables(f,m)});return e},gb=function(a){function h(m){for(var v=c.length;v--;)c[v].resync(m);c.sort(function(G,A){var p=A.xy.y-G.xy.y;return p!=0?p:A.xy.x-G.xy.y});
m.redraw=true}function e(m,v){h(v)}a=COG.extend({zindex:10},a);var c=[],f=COG.extend(new wb(a),{add:function(m,v){if(m){m.layer=f;var G=f.view;if(G){m.resync(G);G.redraw=true}if(v)c.unshift(m);else c[c.length]=m}},clear:function(){c=[]},find:function(){return[].concat(c)},getDrawables:function(){return c}});f.bind("parentChange",e);f.bind("resync",e);return f};COG.extend(M,{ex:COG.extend,is:y,ticks:ja,userMessage:function(a,h,e){M.trigger("userMessage",a,h,e)},XY:Y,XYRect:Ka,Dimensions:Ab,Vector:Qa,
Hits:Hits,Generator:ob,tweenValue:COG.tweenValue,easing:COG.easing,viewState:j,View:vb,ViewLayer:sa,ImageLayer:function(a,h){function e(p,Q){if(ya(qa(Q.x1-m),qa(Q.y1-v))>=128&&c&&!f){f=true;var S=(new Date).getTime();c(p,Q,function($){m=Q.x1;v=Q.y1;G=[].concat($);f=false;p.redraw=true;COG.info("GEN COMPLETED IN "+((new Date).getTime()-S)+" ms")})}}h=COG.extend({imageLoadArgs:{}},h);var c=a?ob.init(a,h).run:null,f=false,m=0,v=0,G=[],A=COG.extend(new sa(h),{draw:function(p){p.drawTiles(G)}});A.bind("refresh",
function(p,Q,S){e(Q,S)});return A},ImageGenerator:function(a){a=COG.extend({relative:false,padding:2},a);a={run:function(){COG.warn("running base generator - this should be overriden")}};COG.observable(a);return a},Drawable:Pa,Marker:E,Poly:x,Line:I,Arc:D,ImageDrawable:t,ImageMarker:u,DrawLayer:wb,ShapeLayer:gb});COG.observable(M);var Sa=M.Geo=function(){function a(i){for(var k=null,o=1;!k&&o<arguments.length;o++)k=m(i,arguments[o]);k=k?k:m(i);if(!k)throw Error("Unable to find GEO engine with "+i+
" capability");return k}function h(i){i=parseFloat(i)*S;i=ka(i);var k=Ga*i;return da((1+i)/(1-i)*Aa((1-k)/(1+k),Ga))/2}function e(i){return parseFloat(i)*S}function c(i){i=Aa(Math.E,-i);for(var k=ga-2*za(i),o=v(k,i),q=0;q<R&&qa(k-o)>J;){k=o;o=v(k,i);q++}return o*$}function f(i){return i%360*$}function m(i,k){var o=null;for(var q in Da)if(k){if(q==k&&Da[q][i]){o=Da[q];break}}else if(Da[q][i]){o=Da[q];break}return o}function v(i,k){var o=Ga*ka(i);return ga-2*za(k*Aa((1-o)/(1+o),Ga/2))}function G(i,
k,o,q){k=A(k);i.add(q(k,o));return k.length}function A(i){var k=i?i.length:0,o=Array(k);for(k=k;k--;)o[k]=Sa.Position.init(i[k][1],i[k][0]);return Sa.Position.vectorize(o,db)}function p(i,k,o){return new Fa(i,k,o)}var Q=[1.406245461070741,1.321415085624082,1.077179995861952,0.703119412486786,0.488332580888611],S=Math.PI/180,$=180/Math.PI,aa=ga,La=-aa,Ta=-ca,Ga=0.08181919084262157,J=1.0E-7,R=12,ha=null,ba={RD:"ROAD",ST:"STREET",CR:"CRESCENT",CRES:"CRESCENT",CT:"COURT",LN:"LANE",HWY:"HIGHWAY",MWY:"MOTORWAY"},
T=function(){function i(b){return b?o(b.lat,b.lon):null}function k(b){return!b||b.lat===0&&b.lon===0}function o(b,d){return{lat:parseFloat(b?b:0),lon:parseFloat(d?d:0)}}function q(b){if(b)if(y(b.lat,oa))return i(b);else{if(b.split)for(var d=[" ",","],g=0;g<d.length;g++){var z=b.split(d[g]);if(z.length===2)return o(z[0],z[1])}}else return o();return null}return{calcDistance:function(b,d){if(k(b)||k(d))return 0;var g=(d.lat-b.lat)*S>>1,z=(d.lon-b.lon)*S>>1;g=ka(g)*ka(g)+Z(b.lat*S)*Z(d.lat*S)*ka(z)*
ka(z);return 6371*2*F(Ma(g),Ma(1-g))},copy:i,empty:k,equal:function(b,d){return b&&d&&b.lat==d.lat&&b.lon==d.lon},fromMercatorPixels:function(b,d){return o(c(d),f(b))},generalize:function(b,d,g){var z=b.length,H=[],X=null;g||(g=250);g/=1E3;COG.info("generalizing positions, must include "+d.length+" positions");for(var pa=z;pa--;)if(pa===0)H.unshift(b[pa]);else{var la=!X||T.inArray(b[pa],d)?g:T.calcDistance(X,b[pa]);if(b[pa]&&la>=g){H.unshift(b[pa]);X=b[pa]}}COG.info("generalized "+z+" positions into "+
H.length+" positions");return H},inArray:function(b,d){for(var g=T.equal,z=d.length;z--;)if(g(b,d[z]))return true;return false},inBounds:function(b,d){var g=!(T.empty(b)||T.empty(d));return g=(g=g&&b.lat>=d.min.lat&&b.lat<=d.max.lat)&&b.lon>=d.min.lon&&b.lon<=d.max.lon},init:o,offset:function(b,d,g){var z=b.lat*S;b=b.lon*S;d=z+d/6371;g=V(ka(g/6371)/Z(z));g=b+g;d=(d+ga)%Math.PI-ga;g%=ca;return o(d*$,g*$)},parse:q,parseArray:function(b){var d=b.length,g=Array(d);for(d=d;d--;)g[d]=q(b[d]);return g},
toMercatorPixels:function(b){return T5.XY.init(e(b.lon),h(b.lat))},toString:function(b){return b?b.lat+" "+b.lon:""},vectorize:function(b,d){function g(){for(var pa=0,la=d.chunkSize,Ha=z;Ha--;){H[Ha]=T5.GeoXY.init(b[Ha]);pa+=1;if(pa>la)break}z=Ha;if(z<=0)d.callback&&d.callback(H);else animFrame(g)}var z=b.length,H=Array(z);d=COG.extend({chunkSize:500,async:true,callback:null},d);if(!d.async){for(var X=z;X--;)H[X]=T5.GeoXY.init(b[X]);return H}animFrame(g);return null}}}(),Ca=function(){function i(b,
d,g){var z=T5.XY.init(0,d.lat-b.lat);z.x=(g||y(g,L))&&b.lon>d.lon?360-b.lon+d.lon:d.lon-b.lon;return z}function k(b,d){return Ca.init(T.init(b.min.lat-d,b.min.lon-d%360),T.init(b.max.lat+d,b.max.lon+d%360))}function o(b){var d=i(b.min,b.max);return T.init(b.min.lat+(d.y>>1),b.min.lon+(d.x>>1))}function q(b,d){return{min:T.parse(b),max:T.parse(d)}}return{calcSize:i,createBoundsFromCenter:function(b,d){var g=d/6371,z=b.lat*S,H=b.lon*S,X=z-g,pa=z+g;if(X>La&&pa<aa){z=V(ka(g)/Z(z));g=(H-z)%ca;H=(H+z)%
ca}else{X=ya(X,La);pa=ta(pa,aa);g=Ta;H=ca}return Ca.init(T.init(X*$,g*$),T.init(pa*$,H*$))},expand:k,forPositions:function(b,d){var g=null,z=T5.ticks();d||(d="auto");for(var H=b.length;H--;)if(g){var X=i(g.min,b[H],false),pa=i(b[H],g.max,false);if(X.x<0)g.min.lon=b[H].lon;if(X.y<0)g.min.lat=b[H].lat;if(pa.x<0)g.max.lon=b[H].lon;if(pa.y<0)g.max.lat=b[H].lat}else g=q(b[H],b[H]);if(d){if(d=="auto"){H=i(g.min,g.max);d=ya(H.x,H.y)*0.3}g=k(g,d)}COG.trace("calculated bounds for "+b.length+" positions",z);
return g},getCenter:o,getGeoHash:function(b){var d=T5.Geo.GeoHash.encode(b.min.lat,b.min.lon);b=T5.Geo.GeoHash.encode(b.max.lat,b.max.lon);COG.info("min hash = "+d+", max hash = "+b)},getZoomLevel:function(b,d){var g=o(b);g=ta(wa(qa(g.lat)*0.05),Q.length);var z=Q[g],H=i(b.min,b.max);g=na(da(Q[3]*d.height/H.y)/da(2));z=na(da(z*d.width/H.x)/da(2));return ta(isNaN(g)?1E3:g,isNaN(z)?1E3:z)},init:q,isEmpty:function(b){return!b||T.empty(b.min)||T.empty(b.max)},toString:function(b){return"min: "+T.toString(b.min)+
", max: "+T.toString(b.max)}}}(),Ja=function(){var i=/^(\d+).*$/,k=/(\d+)\s?\-\s?(\d+)/;return{buildingMatch:function(o,q){i.lastIndex=-1;if(i.test(o))for(var b=o.replace(i,"$1"),d=q.split(","),g=0;g<d.length;g++){k.lastIndex=-1;if(k.test(d[g])){var z=k.exec(d[g]);if(b>=parseInt(z[1],10)&&b<=parseInt(z[2],10))return true}else if(b==d[g])return true}return false},normalize:function(o){if(!o)return"";o=o.toUpperCase();if(!ha){var q=[];for(var b in ba)q.push(b);ha=RegExp("(\\s)("+q.join("|")+")(\\s|$)",
"i")}ha.lastIndex=-1;if(q=ha.exec(o))o=o.replace(ha,"$1"+ba[q[2]]);return o},toString:function(o){return o.streetDetails+" "+o.location}}}(),fa=M.GeoXY=function(){function i(q,b){if(q.length){for(var d,g,z,H,X=q.length;X--;){i(q[X],b);d=y(d,L)||q.x<d?q.x:d;g=y(g,L)||q.y<g?q.y:g;z=y(z,L)||q.x>z?q.x:z;H=y(H,L)||q.y>H?q.y:H}return Ka.init(d,g,H,H)}else if(q.mercXY){d=q.mercXY;q.x=(d.x+Math.PI)/b|0;q.y=(Math.PI-d.y)/b|0;q.rpp=b}else COG.warn("Attempted to sync an XY composite, not a GeoXY");return q}
function k(q,b){if(q.length)for(var d=q.length;d--;)k(q[d],b);else{q.mercXY=Y.init(q.x*b-Math.PI,Math.PI-q.y*b);q.pos=T.fromMercatorPixels(q.mercXY.x,q.mercXY.y)}return q}function o(q,b,d){q.pos=b;q.mercXY=T.toMercatorPixels(b);(d=y(d,oa)?d:q.rpp)&&i(q,d)}return{init:function(q,b){var d=Y.init();o(d,q,b);return d},sync:i,syncPos:k,toPos:function(q,b){b=b?b:_self.rpp;return T.fromMercatorPixels(q.x*b-Math.PI,Math.PI-q.y*b)},updatePos:o}}(),Da={},cb=function(){return{bestResults:function(i,k){k||(k=
20);for(var o=i.length>0?i[0]:null,q=[],b=0;b<i.length;b++)if(o&&i[b]&&o.matchWeight-i[b].matchWeight<=k)q.push(i[b]);else break;return q}}}(),Na=function(i){i=COG.extend({id:null,caption:"",resultType:"",data:null,pos:null,matchWeight:0},i);return COG.extend(i,{toString:function(){return i.caption+(i.matchWeight?" ("+i.matchWeight+")":"")}})},ib=function(){function i(b,d){var g=new T5.ShapeLayer;d.geometry&&T.vectorize(d.geometry,{callback:function(z){g.add(new T5.Line(z,{style:"waypoints",simplify:true}));
b.setLayer("route",g)}})}function k(b){for(var d=o.Unknown,g=q,z=0;z<g.length;z++){g[z].regex.lastIndex=-1;var H=g[z].regex.exec(b);if(H){d=g[z].customCheck?g[z].customCheck(b,H):g[z].turnType;break}}return d}var o={Unknown:"turn-unknown",Start:"turn-none-start",Continue:"turn-none",Arrive:"turn-none-arrive",TurnLeft:"turn-left",TurnLeftSlight:"turn-left-slight",TurnLeftSharp:"turn-left-sharp",TurnRight:"turn-right",TurnRightSlight:"turn-right-slight",TurnRightSharp:"turn-right-sharp",Merge:"merge",
UTurnLeft:"uturn-left",UTurnRight:"uturn-right",EnterRoundabout:"roundabout-enter",Ramp:"ramp",RampExit:"ramp-exit"},q=function(){var b=[];b.push({regex:/continue/i,turnType:o.Continue});b.push({regex:/(take|bear|turn)(.*?)left/i,customCheck:function(d,g){return/bear/i.test(g[1])?o.TurnLeftSlight:o.TurnLeft}});b.push({regex:/(take|bear|turn)(.*?)right/i,customCheck:function(d,g){return/bear/i.test(g[1])?o.TurnRightSlight:o.TurnRight}});b.push({regex:/enter\s(roundabout|rotaty)/i,turnType:o.EnterRoundabout});
b.push({regex:/take.*?ramp/i,turnType:o.Ramp});b.push({regex:/take.*?exit/i,turnType:o.RampExit});b.push({regex:/make(.*?)u\-turn/i,customCheck:function(d,g){return/right/i.test(g[1])?o.UTurnRight:o.UTurnLeft}});b.push({regex:/proceed/i,turnType:o.Start});b.push({regex:/arrive/i,turnType:o.Arrive});b.push({regex:/fell\sthrough/i,turnType:o.Merge});return b}();return{calculate:function(b){b=COG.extend({engineId:"",waypoints:[],map:null,error:null,autoFit:true,success:null,generalize:false},b);var d=
a("route");d&&d.route(b,function(g){if(b.generalize)g.geometry=T.generalize(g.geometry,g.getInstructionPositions());if(b.map){i(b.map,g);b.autoFit&&b.map.gotoBounds(g.boundingBox)}b.success&&b.success(g)})},createMapOverlay:i,parseTurnType:k,TurnType:o,Instruction:function(b){var d=b=COG.extend({position:null,description:"",distance:0,distanceTotal:0,time:0,timeTotal:0,turnType:null},b),g=b.description;g=g.replace(/(\w)(\/)(\w)/g,"$1 $2 $3");d.description=g;if(!b.turnType)b.turnType=k(b.description);
return b},RouteData:function(b){b=COG.extend({geometry:[],instructions:[],boundingBox:null},b);if(!b.boundingBox)b.boundingBox=Ca.forPositions(b.geometry);return COG.extend({getInstructionPositions:function(){for(var d=[],g=0;g<b.instructions.length;g++)b.instructions[g].position&&d.push(b.instructions[g].position);return d}},b)}}}(),hb="featurecollection",kb="feature",db={async:false},ab={processor:null,group:"shapes",layerClass:gb},Ea={point:COG.extend({},ab,{processor:function(i,k,o,q){k=A([k.coordinates],
db);if(k.length>0)if(o=q.marker(k[0],o)){i.add(o);return k.length}},group:"markers",layerClass:gb}),linestring:COG.extend({},ab,{processor:function(i,k,o,q){k=A(k&&k.coordinates?k.coordinates:[]);return G(i,k,o,q.line)}}),multilinestring:COG.extend({},ab,{processor:function(i,k,o,q){k=k&&k.coordinates?k.coordinates:[];for(var b=0,d=k.length;d--;)b+=G(i,k[d],o,q.line);return b}}),polygon:COG.extend({},ab,{processor:function(i,k,o,q){k=k&&k.coordinates?k.coordinates:[];if(k.length>0)return G(i,k[0],
o,q.poly);return 0}}),multipolygon:COG.extend({},ab,{processor:function(i,k,o,q){k=k&&k.coordinates?k.coordinates:[];for(var b=0,d=0;d<k.length;d++)b+=G(i,k[d][0],o,q.poly);return b}})},Fa=function(i,k,o,q){function b(P,ia){var ua=P.processor,Ba=X+P.group,Wa=COG.extend({},P,o,{properties:ia.properties});if(ua){var Ra=N[Ba];if(!Ra){Ra=new P.layerClass({id:Ba});N[Ba]=Ra}globalLayers=N;return ua(Ra,ia.data,Wa,q)}return 0}function d(P,ia){var ua=P&&P.type?P.type.toLowerCase():null;return ua&&ua===kb?
d(P.geometry,P.properties):{type:ua,isCollection:ua?ua===hb:false,definition:Ea[ua],data:P,properties:ia?ia:P.properties}}function g(P){var ia=0,ua=COG.extend({},o),Ba=pa;P=P?P:(new Date).getTime();if(!Ha){for(;Ba<la;Ba++){P=d(H?H(i[Ba]):i[Ba]);var Wa=null;if(P.isCollection){ua.layerPrefix=X+O++ +"-";Ha=p(P.data.features,function(Ra){Ha=null;for(var fb in Ra)N[fb]=Ra[fb]},ua);Wa+=1}else if(P.definition)Wa=b(P.definition,P);ia+=Wa?Wa:1;if(ia>=z)break}pa=Ba+1;if(Ha||pa<la)animFrame(g);else k&&k(N)}}
o=COG.extend({vectorsPerCycle:Sa.VECTORIZE_PER_CYCLE,rowPreParse:null,simplify:false,layerPrefix:"geojson-"},o);q=COG.extend({marker:function(P){return new E({xy:P})},line:function(P,ia){return new x(P,COG.extend({},o,ia))},poly:function(P,ia){return new x(P,COG.extend({fill:true},o,ia))}},q);var z=o.vectorsPerCycle,H=o.rowPreParse,X=o.layerPrefix,pa=0,la=0,Ha=null,O=0,N={};if(i){y(i,"array")||(i=[i]);la=i.length;animFrame(g)}};M.GeoJSON={parse:p};M.Map=function(i){function k(N){try{var P=Sa.Position.init(N.coords.latitude,
N.coords.longitude),ia=N.coords.accuracy/1E3;O.trigger("locationUpdate",N,ia);if(pa){if(!H){H=new Sa.UI.LocationOverlay({pos:P,accuracy:ia});H.update(O.getTileLayer());O.setLayer("location",H)}var ua=Sa.BoundingBox.createBoundsFromCenter(P,Math.max(ia,1));O.gotoBounds(ua)}else{H.pos=P;H.accuracy=ia;H.update(O.getTileLayer());b(P,null,COG.easing("sine.out"))}pa=false}catch(Ba){COG.exception(Ba)}}function o(N){COG.info("caught location tracking error:",N)}function q(N,P,ia){O.setZoomLevel(P);b(N,ia)}
function b(N,P,ia,ua){N=fa.init(N,Sa.radsPerPixel(O.getZoomLevel()));O.updateOffset(N.x-(O.width>>1),N.y-(O.height>>1),ia,ua,function(){O.refresh();O.trigger("boundsChange",O.getBoundingBox());P&&P(O)})}i=COG.extend({tapExtent:10,crosshair:false,zoomLevel:0,boundsChangeThreshold:30,minZoom:1,maxZoom:18,pannable:true,scalable:true},i);var d={NONE:0,SINGLE:1,WATCH:2},g=Y.init(),z=d.NONE,H=null,X=0,pa=true,la=0,Ha=i.tapExtent;i.adjustScaleFactor=function(N){return Math.pow(2,(N<1?Math.floor:Math.ceil)(Math.log(N)))};
var O=COG.extend(new vb(i),{getBoundingBox:function(){var N=O.getViewport();return N?Sa.BoundingBox.init(fa.toPos(Y.init(N.x1,N.y2),la),fa.toPos(Y.init(N.x2,N.y1),la)):null},getCenterPosition:function(){var N=O.getViewport();if(N){N=Y.init(N.x1+(N.width>>1),N.y1+(N.height>>1));return fa.toPos(N,la)}return null},gotoBounds:function(N,P){var ia=Sa.BoundingBox.getZoomLevel(N,O.getViewport());q(Sa.BoundingBox.getCenter(N),ia,P)},gotoPosition:q,panToPosition:b,syncXY:function(N,P){return(P?fa.syncPos:
fa.sync)(N,la)},locate:function(){O.trackStart(d.SINGLE);setTimeout(O.trackCancel,1E4)},trackStart:function(N){if(navigator.geolocation&&!X){z=N?N:d.WATCH;pa=true;X=navigator.geolocation.watchPosition(k,o,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3})}},trackCancel:function(){X&&navigator.geolocation&&navigator.geolocation.clearWatch(X);O.removeLayer("location");H=null;z=d.NONE;X=0},animateRoute:function(N,P,ia,ua){var Ba=O.getLayer("route");if(Ba)(N=Ba.getAnimation(N,P,ia,ua))&&N.addToView(O)}});
O.bind("pan",function(){z===d.SINGLE&&O.trackCancel()});O.bind("tap",function(N,P,ia,ua){N=fa.toPos(ua,la);var Ba=fa.toPos(Y.offset(ua,-Ha,Ha),la);ua=fa.toPos(Y.offset(ua,Ha,-Ha),la);O.trigger("geotap",P,ia,N,Ca.init(Ba,ua))});O.bind("refresh",function(){if(Y.absSize(Y.diff(g,O.getOffset()))>i.boundsChangeThreshold){g=Y.copy(O.getOffset());O.trigger("boundsChange",O.getBoundingBox())}});O.bind("zoomLevelChange",function(N,P){var ia;la=Sa.radsPerPixel(P);ia=ca/la|0;O.setMaxOffset(ia,ia,true,false);
O.resetScale();O.triggerAll("resync",O);O.refresh()});return O};M.GeoShape=function(i,k){k=COG.extend({autoParse:true},k);for(var o=Array(i.length),q=k.autoParse,b=T5.Geo.Position.parse,d=i.length;d--;)o[d]=T5.GeoXY.init(q?b(i[d]):i[d]);return new T5.Poly(o,k)};M.LocationOverlay=function(i){i=COG.extend({pos:null,accuracy:null,zindex:90},i);var k=new Image,o=T5.XY.init(),q=T5.XY.init(),b=null;k.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACIQAAAiEBPhEQkwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVCiRlZHNahNRAIW/O7mTTJPahLZBA1YUyriINRAE3bQIKm40m8K8gLj0CRQkO32ELHUlKbgoIu4EqeJPgtCaoBuNtjXt5LeTMZk0mbmuWiuuPLsD3+HAOUIpxf9IHjWmaUbEyWv5ROrsVULhcHP761rUfnN3Y2Otc8CIg4YT85lzuVsPP+Qupw1vpPjRCvhS9ymvV0e77x7nNj+uvADQAIQQ+uLyvdfLV9JGZi7EdEwQlqBpEJ019f0z1mo2u5Q8DMydv25lshemmj1FueZTawbs7inarqLbV7Qjab1upB9YlhWSAHLavLHZCvg1VEhN0PMU9W7At4bPVidg7CtkLLXkut+lBPD6/Ub155jJiADAHSpaLmx3ApyBQoYEUd0PBoOBkAC6+3llvda/YxgGgYL+UNHf/zN3KiExGlsvTdP0NYDkhPdWrz35ZDsBzV5wCMuQwEyFmXFeeadjzfuFQmGkAZRKpdGC/n7x+M6jqvA9Zo6FWDhlcHE+wqT93J1tP7vpOE7rrx8ALMuasPf8S12St4WmJ6bYWTUC52k8Hm8Vi0X/nwBAPp/XKpWKdF1X2LYdlMvlsToC/QYTls7DLFr/PAAAAABJRU5ErkJggg%3D%3D";
k.onload=function(){o=T5.XY.init(k.width>>1,k.height>>1)};var d=COG.extend(new T5.ViewLayer(i),{pos:i.pos,accuracy:i.accuracy,drawAccuracyIndicator:false,draw:function(g,z){var H=q.x-z.x,X=q.y-z.y;if(b){g.fillStyle="rgba(30, 30, 30, 0.2)";g.beginPath();g.arc(H,X,b,0,Math.PI*2,false);g.fill()}k.complete&&k.width>0&&g.drawImage(k,H-o.x,X-o.y,k.width,k.height)},update:function(g){if(g){b=g.getPixelDistance(d.accuracy)>>1;q=g.getGridXYForPosition(d.pos)}}});d.bind("gridUpdate",function(g,z){d.update(z)});
return d};return{distanceToString:function(i){if(i>1E3)return~~(i/10)/100+" km";return i?i+" m":""},dist2rad:function(i){return i/6371},getEngine:a,lat2pix:h,lon2pix:e,pix2lat:c,pix2lon:f,radsPerPixel:function(i){return ca/(256<<i)},Position:T,BoundingBox:Ca,Radius:function(i,k){return{distance:parseInt(i,10),uom:k}},Address:function(i){return i=COG.extend({streetDetails:"",location:"",country:"",postalCode:"",pos:null,boundingBox:null},i)},A:Ja,GeocodeFieldWeights:{streetDetails:50,location:50},
AddressCompareFns:{},Engine:function(i){if(!i.id)throw Error("A GEO.Engine cannot be registered without providing an id.");var k=COG.extend({remove:function(){delete Da[k.id]}},i);return Da[k.id]=k},Search:cb,GeoSearchResult:Na,LocationSearch:function(i){function k(g,z){navigator.geolocation.clearWatch(q);q=0;if(b){clearTimeout(b);b=0}z&&z([g],i)}function o(g){COG.info("caught location tracking error:",g)}i=COG.extend({name:"Geolocation Search",requiredAccuracy:null,searchTimeout:5E3,watch:false},
i);var q=0,b=0,d=null;return new T5.Geo.GeoSearchAgent(COG.extend({execute:function(g,z){if(navigator.geolocation&&!q){q=navigator.geolocation.watchPosition(function(H){var X=T.init(H.coords.latitude,H.coords.longitude);H=new Na({id:1,caption:"Current Location",pos:X,accuracy:H.coords.accuracy/1E3,matchWeight:100});if(!d||H.accuracy<d.accuracy)d=H;if(!i.requiredAccuracy||d.accuracy<i.requiredAccuracy)k(d,z)},o,{enableHighAccuracy:true,timeout:1E4,maximumAge:5E3});if(i.searchTimeout)b=setTimeout(function(){d&&
k(d,z)},i.searchTimeout)}}},i))},Routing:ib}}()})(T5);
